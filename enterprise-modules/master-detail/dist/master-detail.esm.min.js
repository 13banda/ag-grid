/**
          * @ag-grid-enterprise/master-detail - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v27.3.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/master-detail - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v27.3.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
import{RowNode as e,Events as t,_ as r,Autowired as i,BeanStub as o,Grid as a,RefSelector as s,Component as n,ModuleNames as l}from"@ag-grid-community/core";import{EnterpriseCoreModule as d}from"@ag-grid-enterprise/core";var p,c=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=function(){return(h=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},f=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},u=function(o){function a(){var e=null!==o&&o.apply(this,arguments)||this;return e.loadRowDataVersion=0,e.needRefresh=!1,e}return c(a,o),a.prototype.init=function(r,i){var o=this;this.params=i,this.comp=r,null!=i.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(i.node.parent,e.EVENT_DATA_CHANGED,(function(){o.needRefresh=!0})),this.addManagedListener(this.eventService,t.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},a.prototype.onFullWidthRowFocused=function(e){var t=this.params,r={rowIndex:t.node.rowIndex,rowPinned:t.node.rowPinned},i={rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.rowPositionUtils.sameRow(r,i)&&this.focusService.focusInto(this.comp.getGui(),e.fromBelow)},a.prototype.setAutoHeightClasses=function(){var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),t=e?"ag-details-row-auto-height":"ag-details-row-fixed-height",r=e?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(t,!0),this.comp.addOrRemoveDetailGridCssClass(r,!0)},a.prototype.setupRefreshStrategy=function(){if(this.params.suppressRefresh)return console.warn("AG Grid: as of v23.2.0, cellRendererParams.suppressRefresh for Detail Cell Renderer is no longer used. Please set cellRendererParams.refreshStrategy = 'nothing' instead."),void(this.refreshStrategy="nothing");var e=this.params.refreshStrategy;"everything"==e||"nothing"==e||"rows"==e?this.refreshStrategy=e:(null!=e&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+e+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},a.prototype.addThemeToDetailGrid=function(){var e=this.environment.getTheme().theme;e&&this.comp.addOrRemoveDetailGridCssClass(e,!0)},a.prototype.createDetailGrid=function(){if(r.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var e=this.gridOptionsWrapper.isDetailRowAutoHeight(),t=h({},this.params.detailGridOptions);e&&(t.domLayout="autoHeight"),this.comp.setDetailGrid(t)}},a.prototype.registerDetailWithMaster=function(e,t){var r=this.params.node.id,i=this.params.api,o={id:r,api:e,columnApi:t},a=this.params.node;i.addDetailGridInfo(r,o),a.detailGridInfo=o,this.addDestroyFunc((function(){a.detailGridInfo===o&&(i.removeDetailGridInfo(r),a.detailGridInfo=null)}))},a.prototype.loadRowData=function(){var e=this;this.loadRowDataVersion++;var t=this.loadRowDataVersion,r=this.params.getDetailRowData;if(r){r({node:this.params.node,data:this.params.node.data,successCallback:function(r){e.loadRowDataVersion===t&&e.comp.setRowData(r)},context:this.gridOptionsWrapper.getContext()})}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},a.prototype.refresh=function(){return!this.needRefresh||"nothing"===this.refreshStrategy||(this.needRefresh=!1,"everything"!==this.refreshStrategy&&(this.loadRowData(),!0))},f([i("environment")],a.prototype,"environment",void 0),f([i("rowPositionUtils")],a.prototype,"rowPositionUtils",void 0),f([i("focusService")],a.prototype,"focusService",void 0),a}(o),m=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),g=function(e,t,r,i){var o,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(s=(a<3?o(s):a>3?o(t,r,s):o(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.init=function(e){var t=this;this.params=e,this.selectAndSetTemplate();var r={addOrRemoveCssClass:function(e,r){return t.addOrRemoveCssClass(e,r)},addOrRemoveDetailGridCssClass:function(e,r){return t.eDetailGrid.classList.toggle(e,r)},setDetailGrid:function(e){return t.setDetailGrid(e)},setRowData:function(e){return t.setRowData(e)},getGui:function(){return t.eDetailGrid}};this.ctrl=this.createManagedBean(new u),this.ctrl.init(r,e)},t.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.selectAndSetTemplate=function(){var e=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var i=function(){e.setTemplate(t.TEMPLATE)};if(r.missing(this.params.template))i();else if("string"==typeof this.params.template)this.setTemplate(this.params.template);else if("function"==typeof this.params.template){var o=(0,this.params.template)(this.params);this.setTemplate(o)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),i();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},t.prototype.setDetailGrid=function(e){if(this.eDetailGrid){var t=this.context.getBean("agGridReact"),i=t?r.cloneObject(t):void 0,o=this.context.getBean("frameworkComponentWrapper"),s=this.getFrameworkOverrides();new a(this.eDetailGrid,e,{frameworkOverrides:s,providedBeanInstances:{agGridReact:i,frameworkComponentWrapper:o}}),this.detailApi=e.api,this.ctrl.registerDetailWithMaster(e.api,e.columnApi),this.addDestroyFunc((function(){e.api&&e.api.destroy()}))}},t.prototype.setRowData=function(e){this.detailApi&&this.detailApi.setRowData(e)},t.TEMPLATE='<div class="ag-details-row">\n            <div ref="eDetailGrid" class="ag-details-grid"></div>\n        </div>',g([s("eDetailGrid")],t.prototype,"eDetailGrid",void 0),t}(n),v={moduleName:l.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:y}],controllers:[{controllerName:"detailCellRenderer",controllerClass:u}],dependantModules:[d]};export{v as MasterDetailModule};