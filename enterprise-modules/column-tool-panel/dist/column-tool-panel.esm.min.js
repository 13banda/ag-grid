/**
 * @ag-grid-enterprise/column-tool-panel - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components * @version v26.1.0
 * @link http://www.ag-grid.com/
' * @license Commercial
 */

/**
 * @ag-grid-enterprise/column-tool-panel - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components * @version v26.1.0
 * @link http://www.ag-grid.com/
' * @license Commercial
 */
import{KeyCode as e,Events as t,_ as o,Autowired as n,RefSelector as i,PostConstruct as s,Component as r,EventService as l,AgCheckbox as a,CssClassApplier as p,Column as c,DragSourceType as u,TouchListener as d,AutoScrollService as h,ProvidedColumnGroup as g,BeanStub as m,DragAndDropService as f,VirtualList as y,PreDestroy as C,PreConstruct as v,PositionableFeature as E,TabGuardComp as D,ModuleRegistry as A,ModuleNames as P,Bean as S}from"@ag-grid-community/core";import{EnterpriseCoreModule as b}from"@ag-grid-enterprise/core";import{RowGroupDropZonePanel as L,ValuesDropZonePanel as M,PivotDropZonePanel as T,RowGroupingModule as O}from"@ag-grid-enterprise/row-grouping";import{SideBarModule as _}from"@ag-grid-enterprise/side-bar";var G,N,x=(G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),I=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r};!function(e){e[e.EXPANDED=0]="EXPANDED",e[e.COLLAPSED=1]="COLLAPSED",e[e.INDETERMINATE=2]="INDETERMINATE"}(N||(N={}));var w=function(r){function l(){return r.call(this,l.TEMPLATE)||this}return x(l,r),l.prototype.postConstruct=function(){var o=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(t){t.keyCode===e.SPACE&&o.onExpandClicked()})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.eFilterTextField.onValueChange((function(){return o.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keypress",this.onMiniFilterKeyPress.bind(this)),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var n=this.gridOptionsWrapper.getLocaleTextFunc();this.eSelect.setInputAriaLabel(n("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(n("ariaFilterColumnsInput","Filter Columns Input"))},l.prototype.init=function(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()},l.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=o.createIconNoSpan("columnSelectOpen",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandUnchecked=o.createIconNoSpan("columnSelectClosed",this.gridOptionsWrapper)),this.eExpand.appendChild(this.eExpandIndeterminate=o.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsWrapper)),this.setExpandState(N.EXPANDED)},l.prototype.showOrHideOptions=function(){var e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,n=!this.params.suppressColumnExpandAll,i=this.columnModel.isPrimaryColumnGroupsPresent(),s=this.gridOptionsWrapper.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(s("searchOoo","Search...")),o.setDisplayed(this.eFilterTextField.getGui(),e),o.setDisplayed(this.eSelect.getGui(),t),o.setDisplayed(this.eExpand,n&&i)},l.prototype.onFilterTextChanged=function(){var e=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=o.debounce((function(){var t=e.eFilterTextField.getValue();e.dispatchEvent({type:"filterChanged",filterText:t})}),l.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},l.prototype.onMiniFilterKeyPress=function(t){var n=this;o.isKeyPressed(t,e.ENTER)&&setTimeout((function(){return n.onSelectClicked()}),l.DEBOUNCE_DELAY)},l.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},l.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===N.EXPANDED?"collapseAll":"expandAll"})},l.prototype.setExpandState=function(e){this.expandState=e,o.setDisplayed(this.eExpandChecked,this.expandState===N.EXPANDED),o.setDisplayed(this.eExpandUnchecked,this.expandState===N.COLLAPSED),o.setDisplayed(this.eExpandIndeterminate,this.expandState===N.INDETERMINATE)},l.prototype.setSelectionState=function(e){this.selectState=e,this.eSelect.setValue(this.selectState)},l.DEBOUNCE_DELAY=300,l.TEMPLATE='<div class="ag-column-select-header" role="presentation" tabindex="-1">\n            <div ref="eExpand" class="ag-column-select-header-icon" tabindex="0"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',I([n("columnModel")],l.prototype,"columnModel",void 0),I([i("eExpand")],l.prototype,"eExpand",void 0),I([i("eSelect")],l.prototype,"eSelect",void 0),I([i("eFilterTextField")],l.prototype,"eFilterTextField",void 0),I([s],l.prototype,"postConstruct",null),l}(r),V=function(){function e(e,t,o,n,i){void 0===n&&(n=!1),this.eventService=new l,this.displayName=e,this.dept=o,this.group=n,n?(this.columnGroup=t,this.expanded=i,this.children=[]):this.column=t}return e.prototype.isGroup=function(){return this.group},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.getColumnGroup=function(){return this.columnGroup},e.prototype.getColumn=function(){return this.column},e.prototype.getDept=function(){return this.dept},e.prototype.isExpanded=function(){return!!this.expanded},e.prototype.getChildren=function(){return this.children},e.prototype.isPassesFilter=function(){return this.passesFilter},e.prototype.setExpanded=function(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:e.EVENT_EXPANDED_CHANGED}))},e.prototype.setPassesFilter=function(e){this.passesFilter=e},e.prototype.addEventListener=function(e,t){this.eventService.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this.eventService.removeEventListener(e,t)},e.EVENT_EXPANDED_CHANGED="expandedChanged",e}(),F=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),R=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},H=function(r){function l(e,t,o,n){var i=r.call(this)||this;return i.modelItem=e,i.allowDragging=t,i.eventType=o,i.focusWrapper=n,i.processingColumnStateChange=!1,i.modelItem=e,i.columnGroup=e.getColumnGroup(),i.columnDept=e.getDept(),i.allowDragging=t,i}return F(l,r),l.prototype.init=function(){var e=this;this.setTemplate(l.TEMPLATE),this.eDragHandle=o.createIconNoSpan("columnDrag",this.gridOptionsWrapper),o.addCssClass(this.eDragHandle,"ag-drag-handle"),o.addCssClass(this.eDragHandle,"ag-column-select-column-group-drag-handle");var n=this.cbSelect.getGui(),i=this.cbSelect.getInputElement();n.insertAdjacentElement("afterend",this.eDragHandle),i.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForOriginalColumnGroup(null,this.columnGroup,this.eventType),o.missing(this.displayName)&&(this.displayName=">>"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,a.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,V.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),p.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsWrapper,null,this.columnGroup).forEach((function(t){return e.addOrRemoveCssClass(t,!0)}))},l.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},l.prototype.setupTooltip=function(){var e=this,o=this.columnGroup.getColGroupDef();if(o){var n=function(){var t=o.headerTooltip;e.setTooltip(t)};n(),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,n)}},l.prototype.getTooltipParams=function(){var e=r.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},l.prototype.handleKeyDown=function(t){switch(t.keyCode){case e.LEFT:t.preventDefault(),this.modelItem.setExpanded(!1);break;case e.RIGHT:t.preventDefault(),this.modelItem.setExpanded(!0);break;case e.SPACE:t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},l.prototype.addVisibilityListenersToAllChildren=function(){var e=this;this.columnGroup.getLeafColumns().forEach((function(t){e.addManagedListener(t,c.EVENT_VISIBLE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,c.EVENT_VALUE_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,c.EVENT_PIVOT_CHANGED,e.onColumnStateChanged.bind(e)),e.addManagedListener(t,c.EVENT_ROW_GROUP_CHANGED,e.onColumnStateChanged.bind(e))}))},l.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var n={type:u.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var o={type:t.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.columnGroup};e.eventService.dispatchEvent(o)},onDragStopped:function(){var o={type:t.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(o)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(n)}))}else o.setDisplayed(this.eDragHandle,!1)},l.prototype.createDragItem=function(){var e={};return this.columnGroup.getLeafColumns().forEach((function(t){e[t.getId()]=t.isVisible()})),{columns:this.columnGroup.getLeafColumns(),visibleState:e}},l.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(o.createIcon("columnSelectClosed",this.gridOptionsWrapper,null)),this.eGroupOpenedIcon.appendChild(o.createIcon("columnSelectOpen",this.gridOptionsWrapper,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var e=new d(this.eColumnGroupIcons,!0);this.addManagedListener(e,d.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))},l.prototype.onLabelClicked=function(){var e=!this.cbSelect.getValue();this.onChangeCommon(e)},l.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},l.prototype.getVisibleLeafColumns=function(){var e=[],t=function(o){o.forEach((function(o){o.isPassesFilter()&&(o.isGroup()?t(o.getChildren()):e.push(o.getColumn()))}))};return t(this.modelItem.getChildren()),e},l.prototype.onChangeCommon=function(e){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)},l.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=e("ariaColumnGroup","Column Group"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");o.setAriaLabel(this.focusWrapper,this.displayName+" "+t),this.cbSelect.setInputAriaLabel(i+" ("+n+")"),o.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},l.prototype.onColumnStateChanged=function(){var e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),o.addOrRemoveCssClass(this.getGui(),"ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1},l.prototype.workOutSelectedValue=function(){var e=this,t=this.columnModel.isPivotMode(),o=this.getVisibleLeafColumns(),n=0,i=0;if(o.forEach((function(o){!t&&o.getColDef().lockVisible||(e.isColumnChecked(o,t)?n++:i++)})),!(n>0&&i>0))return n>0},l.prototype.workOutReadOnlyValue=function(){var e=this.columnModel.isPivotMode(),t=0;return this.columnGroup.getLeafColumns().forEach((function(o){e?o.isAnyFunctionAllowed()&&t++:o.getColDef().lockVisible||t++})),0===t},l.prototype.isColumnChecked=function(e,t){if(t){var o=e.isPivotActive(),n=e.isRowGroupActive(),i=e.isValueActive();return o||n||i}return e.isVisible()},l.prototype.onExpandOrContractClicked=function(){var e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)},l.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},l.prototype.setOpenClosedIcons=function(){var e=this.modelItem.isExpanded();o.setDisplayed(this.eGroupClosedIcon,!e),o.setDisplayed(this.eGroupOpenedIcon,e)},l.prototype.refreshAriaExpanded=function(){o.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},l.prototype.getDisplayName=function(){return this.displayName},l.prototype.onSelectAllChanged=function(e){var t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()},l.prototype.isSelected=function(){return this.cbSelect.getValue()},l.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},l.prototype.setSelected=function(e){this.cbSelect.setValue(e,!0)},l.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',R([n("columnModel")],l.prototype,"columnModel",void 0),R([n("dragAndDropService")],l.prototype,"dragAndDropService",void 0),R([n("modelItemUtils")],l.prototype,"modelItemUtils",void 0),R([i("cbSelect")],l.prototype,"cbSelect",void 0),R([i("eLabel")],l.prototype,"eLabel",void 0),R([i("eGroupOpenedIcon")],l.prototype,"eGroupOpenedIcon",void 0),R([i("eGroupClosedIcon")],l.prototype,"eGroupClosedIcon",void 0),R([i("eColumnGroupIcons")],l.prototype,"eColumnGroupIcons",void 0),R([s],l.prototype,"init",null),l}(r),k=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),U=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},W="ag-column-list-item-hovered",j=function(e){function i(t,o){var n=e.call(this)||this;return n.comp=t,n.virtualList=o,n.currentDragColumn=null,n.lastHoveredColumnItem=null,n}return k(i,e),i.prototype.postConstruct=function(){this.addManagedListener(this.eventService,t.EVENT_COLUMN_PANEL_ITEM_DRAG_START,this.columnPanelItemDragStart.bind(this)),this.addManagedListener(this.eventService,t.EVENT_COLUMN_PANEL_ITEM_DRAG_END,this.columnPanelItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},i.prototype.columnPanelItemDragStart=function(e){var t=e.column;this.currentDragColumn=t;var n=this.getCurrentColumns();o.find(n,(function(e){var t=e.getColDef();return!!t.suppressMovable||!!t.lockPosition}))&&(this.moveBlocked=!0)},i.prototype.columnPanelItemDragEnd=function(){var e=this;window.setTimeout((function(){e.currentDragColumn=null,e.moveBlocked=!1}),10)},i.prototype.createDropTarget=function(){var e=this,t={isInterestedIn:function(e){return e===u.ToolPanel},getIconName:function(){return f[e.moveBlocked?"ICON_NOT_ALLOWED":"ICON_MOVE"]},getContainer:function(){return e.comp.getGui()},onDragging:function(t){return e.onDragging(t)},onDragStop:function(){return e.onDragStop()},onDragLeave:function(){return e.onDragLeave()}};this.dragAndDropService.addDropTarget(t)},i.prototype.createAutoScrollService=function(){var e=this.virtualList.getGui();this.autoScrollService=new h({scrollContainer:e,scrollAxis:"y",getVerticalPosition:function(){return e.scrollTop},setVerticalPosition:function(t){return e.scrollTop=t}})},i.prototype.onDragging=function(e){if(this.currentDragColumn&&!this.moveBlocked){var t=this.getDragColumnItem(e),n=this.virtualList.getComponentAt(t.rowIndex);if(n){var i=n.getGui().parentElement;this.lastHoveredColumnItem&&this.lastHoveredColumnItem.rowIndex===t.rowIndex&&this.lastHoveredColumnItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredColumnItem=t,o.radioCssClass(i,""+W),o.radioCssClass(i,"ag-item-highlight-"+t.position))}}},i.prototype.getDragColumnItem=function(e){var t=this.virtualList.getGui(),o=parseFloat(window.getComputedStyle(t).paddingTop),n=this.virtualList.getRowHeight(),i=this.virtualList.getScrollTop(),s=Math.max(0,(e.y-o+i)/n),r=this.comp.getDisplayedColsList().length-1,l=0|Math.min(r,s);return{rowIndex:l,position:Math.round(s)>s||s>r?"bottom":"top",component:this.virtualList.getComponentAt(l)}},i.prototype.onDragStop=function(){if(!this.moveBlocked){var e=this.getTargetIndex(),t=this.getCurrentColumns();null!=e&&this.columnModel.moveColumns(t,e),this.clearHoveredItems(),this.autoScrollService.ensureCleared()}},i.prototype.getMoveDiff=function(e){var t=this.columnModel.getAllGridColumns(),o=this.getCurrentColumns(),n=o[0],i=o.length;return t.indexOf(n)<e?i:0},i.prototype.getCurrentColumns=function(){return this.currentDragColumn instanceof g?this.currentDragColumn.getLeafColumns():[this.currentDragColumn]},i.prototype.getTargetIndex=function(){if(!this.lastHoveredColumnItem)return null;var e,t=this.lastHoveredColumnItem.component,o="top"===this.lastHoveredColumnItem.position;t instanceof H?(e=t.getColumns()[0],o=!0):e=t.getColumn();var n=this.columnModel.getAllGridColumns().indexOf(e),i=o?n:n+1;return i-this.getMoveDiff(i)},i.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},i.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll("."+W).forEach((function(e){[W,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((function(t){o.removeCssClass(e,t)}))})),this.lastHoveredColumnItem=null},U([n("columnModel")],i.prototype,"columnModel",void 0),U([n("dragAndDropService")],i.prototype,"dragAndDropService",void 0),U([s],i.prototype,"postConstruct",null),i}(m),B=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Z=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},X=function(r){function l(e,t,o,n,i){var s=r.call(this)||this;return s.column=e,s.columnDept=t,s.allowDragging=o,s.groupsExist=n,s.focusWrapper=i,s.processingColumnStateChange=!1,s}return B(l,r),l.prototype.init=function(){var e=this;this.setTemplate(l.TEMPLATE),this.eDragHandle=o.createIconNoSpan("columnDrag",this.gridOptionsWrapper),o.addCssClass(this.eDragHandle,"ag-drag-handle"),o.addCssClass(this.eDragHandle,"ag-column-select-column-drag-handle");var n=this.cbSelect.getGui(),i=this.cbSelect.getInputElement();n.insertAdjacentElement("afterend",this.eDragHandle),i.setAttribute("tabindex","-1"),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel");var s=o.escapeString(this.displayName);this.eLabel.innerHTML=s;var r=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-"+r),this.setupDragging(),this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,c.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.gridOptionsWrapper,"functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,a.EVENT_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),p.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsWrapper,this.column,null).forEach((function(t){return e.addOrRemoveCssClass(t,!0)}))},l.prototype.getColumn=function(){return this.column},l.prototype.setupTooltip=function(){var e=this,o=function(){var t=e.column.getColDef().headerTooltip;e.setTooltip(t)};o(),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,o)},l.prototype.getTooltipParams=function(){var e=r.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},l.prototype.handleKeyDown=function(t){t.keyCode===e.SPACE&&(t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},l.prototype.onLabelClicked=function(){if(!this.gridOptionsWrapper.isFunctionsReadOnly()){var e=!this.cbSelect.getValue();this.onChangeCommon(e)}},l.prototype.onCheckboxChanged=function(e){this.onChangeCommon(e.selected)},l.prototype.onChangeCommon=function(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))},l.prototype.refreshAriaLabel=function(){var e=this.gridOptionsWrapper.getLocaleTextFunc(),t=e("ariaColumn","Column"),n=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");o.setAriaLabel(this.focusWrapper,this.displayName+" "+t),this.cbSelect.setInputAriaLabel(i+" ("+n+")"),o.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},l.prototype.setupDragging=function(){var e=this;if(this.allowDragging){var n={type:u.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDragItem:function(){return e.createDragItem()},onDragStarted:function(){var o={type:t.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:e.column};e.eventService.dispatchEvent(o)},onDragStopped:function(){var o={type:t.EVENT_COLUMN_PANEL_ITEM_DRAG_END};e.eventService.dispatchEvent(o)}};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc((function(){return e.dragAndDropService.removeDragSource(n)}))}else o.setDisplayed(this.eDragHandle,!1)},l.prototype.createDragItem=function(){var e={};return e[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:e}},l.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var e,t=this.columnModel.isPivotMode();if(t){var n=this.column.isAnyFunctionActive();this.cbSelect.setValue(n)}else this.cbSelect.setValue(this.column.isVisible());if(t){var i=this.gridOptionsWrapper.isFunctionsReadOnly(),s=!this.column.isAnyFunctionAllowed();e=i||s}else e=!!this.column.getColDef().lockVisible;this.cbSelect.setReadOnly(e),o.addOrRemoveCssClass(this.getGui(),"ag-column-select-column-readonly",e);var r=t&&this.gridOptionsWrapper.isFunctionsPassive();this.cbSelect.setPassive(r),this.processingColumnStateChange=!1},l.prototype.getDisplayName=function(){return this.displayName},l.prototype.onSelectAllChanged=function(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},l.prototype.isSelected=function(){return this.cbSelect.getValue()},l.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},l.prototype.isExpandable=function(){return!1},l.prototype.setExpanded=function(e){console.warn("ag-grid: can not expand a column item that does not represent a column group header")},l.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',Z([n("columnModel")],l.prototype,"columnModel",void 0),Z([n("dragAndDropService")],l.prototype,"dragAndDropService",void 0),Z([n("modelItemUtils")],l.prototype,"modelItemUtils",void 0),Z([i("eLabel")],l.prototype,"eLabel",void 0),Z([i("cbSelect")],l.prototype,"cbSelect",void 0),Z([s],l.prototype,"init",null),l}(r),K=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),z=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},q=function(){function e(e){this.items=e}return e.prototype.getRowCount=function(){return this.items.length},e.prototype.getRow=function(e){return this.items[e]},e}(),Q=function(e){function i(){var t=e.call(this,i.TEMPLATE)||this;return t.destroyColumnItemFuncs=[],t}return K(i,e),i.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(e){return e()})),this.destroyColumnItemFuncs=[]},i.prototype.init=function(e,n,i){var s=this;this.params=e,this.allowDragging=n,this.eventType=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,t.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[t.EVENT_COLUMN_PIVOT_CHANGED,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,t.EVENT_COLUMN_ROW_GROUP_CHANGED,t.EVENT_COLUMN_VALUE_CHANGED,t.EVENT_COLUMN_VISIBLE,t.EVENT_NEW_COLUMNS_LOADED].forEach((function(e){s.addManagedListener(s.eventService,e,s.fireSelectionChangedEvent.bind(s))})),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new y("column-select","tree")),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((function(e,t){return o.setAriaLevel(t,e.getDept()+1),s.createComponentFromItem(e,t)})),this.columnModel.isReady()&&this.onColumnsChanged(),e.suppressColumnMove||this.gridOptionsWrapper.isSuppressMovableColumns()||this.createManagedBean(new j(this,this.virtualList))},i.prototype.createComponentFromItem=function(e,t){if(e.isGroup()){var o=new H(e,this.allowDragging,this.eventType,t);return this.getContext().createBean(o),o}var n=new X(e.getColumn(),e.getDept(),this.allowDragging,this.groupsExist,t);return this.getContext().createBean(n),n},i.prototype.onColumnsChanged=function(){var e=this.getExpandedStates(),t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel()},i.prototype.getDisplayedColsList=function(){return this.displayedColsList},i.prototype.getExpandedStates=function(){if(!this.allColsTree)return{};var e={};return this.forEachItem((function(t){if(t.isGroup()){var o=t.getColumnGroup();o&&(e[o.getId()]=t.isExpanded())}})),e},i.prototype.setExpandedStates=function(e){this.allColsTree&&this.forEachItem((function(t){if(t.isGroup()){var o=t.getColumnGroup();if(o){var n=e[o.getId()];null!=n&&t.setExpanded(n)}}}))},i.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},i.prototype.setColumnLayout=function(e){var t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some((function(e){return e&&void 0!==e.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},i.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},i.prototype.buildListModel=function(e){var t=this,o=this.onColumnExpanded.bind(this),n=function(e,t,o){e.forEach((function(e){e instanceof g?i(e,t,o):s(e,t,o)}))},i=function(e,i,s){var r=e.getColGroupDef();if(!(r&&r.suppressColumnsToolPanel))if(e.isPadding())n(e.getChildren(),i,s);else{var l=t.columnModel.getDisplayNameForOriginalColumnGroup(null,e,t.eventType),a=new V(l,e,i,!0,t.expandGroupsByDefault);s.push(a),function(e){e.addEventListener(V.EVENT_EXPANDED_CHANGED,o);var n=e.removeEventListener.bind(e,V.EVENT_EXPANDED_CHANGED,o);t.destroyColumnItemFuncs.push(n)}(a),n(e.getChildren(),i+1,a.getChildren())}},s=function(e,o,n){if(!(e.getColDef()&&e.getColDef().suppressColumnsToolPanel)){var i=t.columnModel.getDisplayNameForColumn(e,"columnToolPanel");n.push(new V(i,e,o))}};this.destroyColumnTree(),n(e,0,this.allColsTree)},i.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},i.prototype.flattenAndFilterModel=function(){var e=this;this.displayedColsList=[];var t=function(o){o.isPassesFilter()&&(e.displayedColsList.push(o),o.isGroup()&&o.isExpanded()&&o.getChildren().forEach(t))};this.allColsTree.forEach(t),this.virtualList.setModel(new q(this.displayedColsList));var o=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=o&&this.focusRowIfAlive(o),this.notifyListeners()},i.prototype.focusRowIfAlive=function(e){var t=this;window.setTimeout((function(){t.isAlive()&&t.virtualList.focusRow(e)}),0)},i.prototype.forEachItem=function(e){var t=function(o){o.forEach((function(o){e(o),o.isGroup()&&t(o.getChildren())}))};t(this.allColsTree)},i.prototype.doSetExpandedAll=function(e){this.forEachItem((function(t){t.isGroup()&&t.setExpanded(e)}))},i.prototype.setGroupsExpanded=function(e,t){if(t){var n=[];this.forEachItem((function(o){if(o.isGroup()){var i=o.getColumnGroup().getId();t.indexOf(i)>=0&&(o.setExpanded(e),n.push(i))}}));var i=t.filter((function(e){return!o.includes(n,e)}));i.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",i)}else this.doSetExpandedAll(e)},i.prototype.getExpandState=function(){var e=0,t=0;return this.forEachItem((function(o){o.isGroup()&&(o.isExpanded()?e++:t++)})),e>0&&t>0?N.INDETERMINATE:t>0?N.COLLAPSED:N.EXPANDED},i.prototype.doSetSelectedAll=function(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)},i.prototype.getSelectionState=function(){var e=0,t=0,o=this.columnModel.isPivotMode();if(this.forEachItem((function(n){if(!n.isGroup()&&n.isPassesFilter()){var i,s=n.getColumn(),r=s.getColDef();if(o){if(!s.isAllowPivot()&&!s.isAllowRowGroup()&&!s.isAllowValue())return;i=s.isValueActive()||s.isPivotActive()||s.isRowGroupActive()}else{if(r.lockVisible)return;i=s.isVisible()}i?e++:t++}})),!(e>0&&t>0))return!(0===e||t>0)},i.prototype.setFilterText=function(e){this.filterText=o.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},i.prototype.markFilteredColumns=function(){var e=this,t=function(t){if(!o.exists(e.filterText))return!0;var n=t.getDisplayName();return null==n||-1!==n.toLowerCase().indexOf(e.filterText)},n=function(e,o){var i=!1;if(e.isGroup()){var s=t(e);e.getChildren().forEach((function(e){var t=n(e,s||o);t&&(i=t)}))}var r=!(!o&&!i)||t(e);return e.setPassesFilter(r),r};this.allColsTree.forEach((function(e){return n(e,!1)}))},i.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},i.prototype.fireGroupExpandedEvent=function(){var e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})},i.prototype.fireSelectionChangedEvent=function(){var e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})},i.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',z([n("columnModel")],i.prototype,"columnModel",void 0),z([n("toolPanelColDefService")],i.prototype,"colDefService",void 0),z([n("modelItemUtils")],i.prototype,"modelItemUtils",void 0),z([C],i.prototype,"destroyColumnTree",null),i}(r),Y=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),J=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},$=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return Y(o,e),o.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},o.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var e=this.gridOptionsWrapper.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,a.EVENT_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,t.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},o.prototype.onBtPivotMode=function(){var e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(e,"toolPanelUi");var t=this.gridOptionsWrapper.getApi();t&&t.refreshHeader()}},o.prototype.onPivotModeChanged=function(){var e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)},J([n("columnModel")],o.prototype,"columnModel",void 0),J([i("cbPivotMode")],o.prototype,"cbPivotMode",void 0),J([v],o.prototype,"init",null),o}(r),ee=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),te=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},oe=function(e){function t(){return e.call(this,t.TEMPLATE)||this}return ee(t,e),t.prototype.postConstruct=function(){this.initialiseTabGuard({})},t.prototype.init=function(e,t,o){this.allowDragging=e,this.params=t,this.eventType=o,this.primaryColsHeaderPanel.init(this.params);var n=this.params.suppressColumnFilter,i=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&n&&i&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new E(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},t.prototype.toggleResizable=function(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})},t.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},t.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},t.prototype.expandGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)},t.prototype.collapseGroups=function(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)},t.prototype.setColumnLayout=function(e){this.primaryColsListPanel.setColumnLayout(e)},t.prototype.onFilterChanged=function(e){this.primaryColsListPanel.setFilterText(e.filterText)},t.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},t.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},t.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},t.prototype.onGroupExpanded=function(e){this.primaryColsHeaderPanel.setExpandState(e.state)},t.prototype.onSelectionChange=function(e){this.primaryColsHeaderPanel.setSelectionState(e.state)},t.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',te([i("primaryColsHeaderPanel")],t.prototype,"primaryColsHeaderPanel",void 0),te([i("primaryColsListPanel")],t.prototype,"primaryColsListPanel",void 0),te([s],t.prototype,"postConstruct",null),t}(D),ne=function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ie=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},se=function(e){function i(){var t=e.call(this,i.TEMPLATE)||this;return t.initialised=!1,t.childDestroyFuncs=[],t}return ne(i,e),i.prototype.setVisible=function(t){e.prototype.setDisplayed.call(this,t),t&&!this.initialised&&this.init(this.params)},i.prototype.init=function(e){var n=this,i={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(o.mergeDeep(i,e),this.params=i,this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new $),this.childDestroyFuncs.push((function(){return n.destroyBean(n.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new oe),this.childDestroyFuncs.push((function(){return n.destroyBean(n.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),o.addCssClass(this.primaryColsPanel.getGui(),"ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new L(!1)),this.childDestroyFuncs.push((function(){return n.destroyBean(n.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new M(!1)),this.childDestroyFuncs.push((function(){return n.destroyBean(n.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new T(!1)),this.childDestroyFuncs.push((function(){return n.destroyBean(n.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var s=this.addManagedListener(this.eventService,t.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){n.resetChildrenHeight(),n.setLastVisible()}));this.childDestroyFuncs.push((function(){return s()}))}this.initialised=!0},i.prototype.setPivotModeSectionVisible=function(e){var t=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new $),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return t.destroyBean(t.pivotModePanel)}))),this.setLastVisible())},i.prototype.setRowGroupsSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new L(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},i.prototype.setValuesSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new M(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},i.prototype.setPivotSectionVisible=function(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new T(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())},i.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(e){if(e){var t=e.getGui();e.toggleResizable(!o.containsClass(t,"ag-last-column-drop")&&!o.containsClass(t,"ag-hidden"))}}))},i.prototype.setLastVisible=function(){var e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach((function(e){return o.removeCssClass(e,"ag-last-column-drop")}));var t=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),n=o.last(t);n&&o.addCssClass(n,"ag-last-column-drop"),this.setResizers()},i.prototype.resetChildrenHeight=function(){for(var e=this.getGui().children,t=0;t<e.length;t++){var o=e[t];o.style.removeProperty("height"),o.style.removeProperty("flex")}},i.prototype.isRowGroupingModuleLoaded=function(){return A.assertRegistered(P.RowGroupingModule,"Row Grouping")},i.prototype.expandColumnGroups=function(e){this.primaryColsPanel.expandGroups(e)},i.prototype.collapseColumnGroups=function(e){this.primaryColsPanel.collapseGroups(e)},i.prototype.setColumnLayout=function(e){this.primaryColsPanel.setColumnLayout(e)},i.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},i.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(e){return e()})),this.childDestroyFuncs.length=0,o.clearElement(this.getGui())},i.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},i.prototype.destroy=function(){this.destroyChildren(),e.prototype.destroy.call(this)},i.TEMPLATE='<div class="ag-column-panel"></div>',ie([n("gridApi")],i.prototype,"gridApi",void 0),ie([n("columnApi")],i.prototype,"columnApi",void 0),i}(r),re=function(e,t,o,n){var i,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(r=(s<3?i(r):s>3?i(t,o,r):i(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},le=function(){function e(){}return e.prototype.selectAllChildren=function(e,t,o){var n=this.extractAllLeafColumns(e);this.setAllColumns(n,t,o)},e.prototype.setColumn=function(e,t,o){this.setAllColumns([e],t,o)},e.prototype.setAllColumns=function(e,t,o){this.columnModel.isPivotMode()?this.setAllPivot(e,t,o):this.setAllVisible(e,t,o)},e.prototype.extractAllLeafColumns=function(e){var t=[],o=function(e){e.forEach((function(e){e.isPassesFilter()&&(e.isGroup()?o(e.getChildren()):t.push(e.getColumn()))}))};return o(e),t},e.prototype.setAllVisible=function(e,t,o){var n=[];e.forEach((function(e){e.getColDef().lockVisible||e.isVisible()!=t&&n.push({colId:e.getId(),hide:!t})})),n.length>0&&this.columnModel.applyColumnState({state:n},o)},e.prototype.setAllPivot=function(e,t,o){this.gridOptionsWrapper.isFunctionsPassive()?this.setAllPivotPassive(e,t):this.setAllPivotActive(e,t,o)},e.prototype.setAllPivotPassive=function(e,n){var i=this.columnModel.getPivotColumns().slice(),s=this.columnModel.getValueColumns().slice(),r=this.columnModel.getRowGroupColumns().slice(),l=!1,a=!1,p=!1,c=n?function(e){e.isAnyFunctionActive()||(e.isAllowValue()?(s.push(e),a=!0):e.isAllowRowGroup()?(r.push(e),l=!0):e.isAllowPivot()&&(i.push(e),p=!0))}:function(e){e.isAnyFunctionActive()&&(i.indexOf(e)>=0&&(o.removeFromArray(i,e),l=!0),s.indexOf(e)>=0&&(o.removeFromArray(s,e),a=!0),r.indexOf(e)>=0&&(o.removeFromArray(r,e),p=!0))};if(e.forEach(c),l){var u={type:t.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:i,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(u)}if(p){var d={type:t.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:r,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(d)}if(a){var h={type:t.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:r,api:this.gridApi,columnApi:this.columnApi};this.eventService.dispatchEvent(h)}},e.prototype.setAllPivotActive=function(e,t,o){var n=this,i=[],s=t?function(e){if(!e.isAnyFunctionActive())if(e.isAllowValue()){var t="string"==typeof e.getAggFunc()?e.getAggFunc():n.aggFuncService.getDefaultAggFunc(e);i.push({colId:e.getId(),aggFunc:t})}else e.isAllowRowGroup()?i.push({colId:e.getId(),rowGroup:!0}):e.isAllowPivot()&&i.push({colId:e.getId(),pivot:!0})}:function(e){(e.isPivotActive()||e.isRowGroupActive()||e.isValueActive())&&i.push({colId:e.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};e.forEach(s),i.length>0&&this.columnModel.applyColumnState({state:i},o)},re([n("aggFuncService")],e.prototype,"aggFuncService",void 0),re([n("columnModel")],e.prototype,"columnModel",void 0),re([n("gridOptionsWrapper")],e.prototype,"gridOptionsWrapper",void 0),re([n("columnApi")],e.prototype,"columnApi",void 0),re([n("gridApi")],e.prototype,"gridApi",void 0),re([n("eventService")],e.prototype,"eventService",void 0),e=re([S("modelItemUtils")],e)}(),ae={moduleName:P.ColumnToolPanelModule,beans:[le],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:w},{componentName:"AgPrimaryColsList",componentClass:Q},{componentName:"AgPrimaryCols",componentClass:oe}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:se}],dependantModules:[b,O,_]};export{ae as ColumnsToolPanelModule,oe as PrimaryColsPanel};