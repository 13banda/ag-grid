{"version":3,"sources":["../../../src/ts/utils/keyboard.ts"],"names":[],"mappings":"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","file":"keyboard.js","sourcesContent":["import { GridOptionsWrapper } from '../gridOptionsWrapper';\nimport { RowNode } from '../entities/rowNode';\nimport { Column } from '../entities/column';\nimport { SuppressHeaderKeyboardEventParams, SuppressKeyboardEventParams } from '../entities/colDef';\nimport { isBrowserEdge } from './browser';\nimport { ColumnGroup } from '../entities/columnGroup';\nimport { exists } from './generic';\nimport { KeyCode } from '../constants/keyCode';\n\nconst NUMPAD_DEL_NUMLOCK_ON_KEY = 'Del';\n\n// Using legacy values to match AZERTY keyboards\nconst NUMPAD_DEL_NUMLOCK_ON_KEYCODE = 46;\nconst A_KEYCODE = 65;\nconst C_KEYCODE = 67;\nconst V_KEYCODE = 86;\nconst D_KEYCODE = 68;\nconst Z_KEYCODE = 90;\nconst Y_KEYCODE = 89;\n\nexport function isEventFromPrintableCharacter(event: KeyboardEvent): boolean {\n    // no allowed printable chars have alt or ctrl key combinations\n    if (event.altKey || event.ctrlKey || event.metaKey) { return false; }\n\n    // if key is length 1, eg if it is 'a' for the a key, or '2' for the '2' key.\n    // non-printable characters have names, eg 'Enter' or 'Backspace'.\n    const printableCharacter = event.key.length === 1;\n\n    // IE11 & Edge treat the numpad del key differently - with numlock on we get \"Del\" for key,\n    // so this addition checks if its IE11/Edge and handles that specific case the same was as all other browsers\n    const numpadDelWithNumlockOnForEdgeOrIe = isNumpadDelWithNumLockOnForEdge(event);\n\n    return printableCharacter || numpadDelWithNumlockOnForEdgeOrIe;\n}\n\n/**\n * Allows user to tell the grid to skip specific keyboard events\n * @param {GridOptionsWrapper} gridOptionsWrapper\n * @param {KeyboardEvent} keyboardEvent\n * @param {RowNode} rowNode\n * @param {Column} column\n * @param {boolean} editing\n * @returns {boolean}\n */\nexport function isUserSuppressingKeyboardEvent(\n    gridOptionsWrapper: GridOptionsWrapper,\n    keyboardEvent: KeyboardEvent,\n    rowNode: RowNode,\n    column: Column,\n    editing: boolean\n): boolean {\n    const gridOptionsFunc = gridOptionsWrapper.getSuppressKeyboardEventFunc();\n    const colDefFunc = column ? column.getColDef().suppressKeyboardEvent : undefined;\n\n    // if no callbacks provided by user, then do nothing\n    if (!gridOptionsFunc && !colDefFunc) { return false; }\n\n    const params: SuppressKeyboardEventParams = {\n        event: keyboardEvent,\n        editing,\n        column,\n        api: gridOptionsWrapper.getApi()!,\n        node: rowNode,\n        data: rowNode.data,\n        colDef: column.getColDef(),\n        context: gridOptionsWrapper.getContext(),\n        columnApi: gridOptionsWrapper.getColumnApi()!\n    };\n\n    // colDef get first preference on suppressing events\n    if (colDefFunc) {\n        const colDefFuncResult = colDefFunc(params);\n        // if colDef func suppressed, then return now, no need to call gridOption func\n        if (colDefFuncResult) { return true; }\n    }\n\n    if (gridOptionsFunc) {\n        // if gridOption func, return the result\n        return gridOptionsFunc(params);\n    }\n\n    // otherwise return false, don't suppress, as colDef didn't suppress and no func on gridOptions\n    return false;\n}\n\nexport function isUserSuppressingHeaderKeyboardEvent(\n    gridOptionsWrapper: GridOptionsWrapper,\n    keyboardEvent: KeyboardEvent,\n    headerRowIndex: number,\n    column: Column | ColumnGroup\n): boolean {\n    const colDef = column.getDefinition();\n    const colDefFunc = colDef && colDef.suppressHeaderKeyboardEvent;\n\n    if (!exists(colDefFunc)) { return false; }\n\n    const params: SuppressHeaderKeyboardEventParams = {\n        api: gridOptionsWrapper.getApi()!,\n        columnApi: gridOptionsWrapper.getColumnApi()!,\n        context: gridOptionsWrapper.getContext(),\n        colDef: colDef,\n        column,\n        headerRowIndex,\n        event: keyboardEvent\n    };\n\n    return !!colDefFunc(params);\n}\n\nfunction isNumpadDelWithNumLockOnForEdge(event: KeyboardEvent) {\n    return (isBrowserEdge()) &&\n        event.key === NUMPAD_DEL_NUMLOCK_ON_KEY &&\n        event.charCode === NUMPAD_DEL_NUMLOCK_ON_KEYCODE;\n}\n\nexport function normaliseQwertyAzerty(keyboardEvent: KeyboardEvent): string {\n    const { keyCode } = keyboardEvent;\n    let code: string;\n\n    switch (keyCode) {\n        case A_KEYCODE:\n            code = KeyCode.A;\n            break;\n        case C_KEYCODE:\n            code = KeyCode.C;\n            break;\n        case V_KEYCODE:\n            code = KeyCode.V;\n            break;\n        case D_KEYCODE:\n            code = KeyCode.D;\n            break;\n        case Z_KEYCODE:\n            code = KeyCode.Z;\n            break;\n        case Y_KEYCODE:\n            code = KeyCode.Y;\n            break;\n        default:\n            code = keyboardEvent.code;\n    }\n\n    return code;\n}"]}