import { Color } from './color';
import { addTransformToInstanceProperty, BREAK_TRANSFORM_CHAIN } from './decorator';
import { Logger } from './logger';
export function Validate(predicate) {
    return addTransformToInstanceProperty(function (target, prop, v) {
        var _a, _b, _c;
        if (predicate(v, { target: target })) {
            return v;
        }
        var cleanKey = prop.toString().replace(/^_*/, '');
        var targetClass = (_b = (_a = target.constructor) === null || _a === void 0 ? void 0 : _a.className) !== null && _b !== void 0 ? _b : (_c = target.constructor) === null || _c === void 0 ? void 0 : _c.name;
        if ((targetClass === null || targetClass === void 0 ? void 0 : targetClass.length) < 3) {
            targetClass = null;
        }
        var targetClassName = targetClass ? "of [" + targetClass + "] " : '';
        if (predicate.message) {
            Logger.warn("Property [" + cleanKey + "] " + targetClassName + "cannot be set to [" + JSON.stringify(v) + "]; " + predicate.message + ", ignoring.");
        }
        else {
            Logger.warn("Property [" + cleanKey + "] " + targetClassName + "cannot be set to [" + JSON.stringify(v) + "], ignoring.");
        }
        return BREAK_TRANSFORM_CHAIN;
    });
}
export function predicateWithMessage(predicate, message) {
    predicate.message = message;
    return predicate;
}
export var OPTIONAL = function (v, ctx, predicate) {
    return v === undefined || predicate(v, ctx);
};
export var ARRAY = function (length, predicate) {
    return predicateWithMessage(function (v, ctx) {
        return Array.isArray(v) &&
            (length ? v.length === length : true) &&
            (predicate ? v.every(function (e) { return predicate(e, ctx); }) : true);
    }, "expecting an Array");
};
export var OPT_ARRAY = function (length) {
    return predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, ARRAY(length)); }, 'expecting an optional Array');
};
export var AND = function () {
    var predicates = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        predicates[_i] = arguments[_i];
    }
    return predicateWithMessage(function (v, ctx) { return predicates.every(function (p) { return p(v, ctx); }); }, predicates
        .map(function (p) { return p.message; })
        .filter(function (m) { return m != null; })
        .join(' AND '));
};
export var OR = function () {
    var predicates = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        predicates[_i] = arguments[_i];
    }
    return predicateWithMessage(function (v, ctx) { return predicates.some(function (p) { return p(v, ctx); }); }, predicates
        .map(function (p) { return p.message; })
        .filter(function (m) { return m != null; })
        .join(' OR '));
};
var isComparable = function (v) {
    return v != null && !isNaN(v);
};
export var LESS_THAN = function (otherField) {
    return predicateWithMessage(function (v, ctx) {
        return !isComparable(v) || !isComparable(ctx.target[otherField]) || v < ctx.target[otherField];
    }, "expected to be less than " + otherField);
};
export var GREATER_THAN = function (otherField) {
    return predicateWithMessage(function (v, ctx) {
        return !isComparable(v) || !isComparable(ctx.target[otherField]) || v > ctx.target[otherField];
    }, "expected to be greater than " + otherField);
};
export var FUNCTION = predicateWithMessage(function (v) { return typeof v === 'function'; }, 'expecting a Function');
export var OPT_FUNCTION = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, FUNCTION); }, "expecting an optional Function");
export var BOOLEAN = predicateWithMessage(function (v) { return v === true || v === false; }, 'expecting a Boolean');
export var OPT_BOOLEAN = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, BOOLEAN); }, 'expecting an optional Boolean');
export var STRING = predicateWithMessage(function (v) { return typeof v === 'string'; }, 'expecting a String');
export var OPT_STRING = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, STRING); }, 'expecting an optional String');
export var DATE = predicateWithMessage(function (v) { return v instanceof Date && !isNaN(+v); }, 'expecting a Date object');
export var OPT_DATE = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, DATE); }, 'expecting an optional Date');
export var DATE_ARRAY = predicateWithMessage(ARRAY(undefined, DATE), 'expecting an Array of Date objects');
export var DATETIME_MS = NUMBER(0);
export var OPT_DATETIME_MS = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, DATETIME_MS); }, 'expecting an optional number');
export var OPT_DATE_OR_DATETIME_MS = OR(OPT_DATE, OPT_DATETIME_MS);
var colorMessage = "A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc";
export var COLOR_STRING = predicateWithMessage(function (v) {
    if (typeof v !== 'string') {
        return false;
    }
    return Color.validColorString(v);
}, "expecting a color String. " + colorMessage);
export var OPT_COLOR_STRING = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, COLOR_STRING); }, "expecting an optional color String. " + colorMessage);
export var COLOR_STRING_ARRAY = predicateWithMessage(ARRAY(undefined, COLOR_STRING), "expecting an Array of color strings. " + colorMessage);
export var OPT_COLOR_STRING_ARRAY = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, COLOR_STRING_ARRAY); }, "expecting an optional Array of color strings. " + colorMessage);
export function NUMBER(min, max) {
    var message = "expecting a finite Number" + ((min !== undefined ? ', more than or equal to ' + min : '') +
        (max !== undefined ? ', less than or equal to ' + max : ''));
    return predicateWithMessage(function (v) {
        return typeof v === 'number' &&
            Number.isFinite(v) &&
            (min !== undefined ? v >= min : true) &&
            (max !== undefined ? v <= max : true);
    }, message);
}
export function OPT_NUMBER(min, max) {
    var message = "expecting an optional finite Number" + ((min !== undefined ? ', more than or equal to ' + min : '') +
        (max !== undefined ? ', less than or equal to ' + max : ''));
    return predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, NUMBER(min, max)); }, message);
}
export function NUMBER_OR_NAN(min, max) {
    // Can be NaN or finite number
    var message = "expecting a finite Number" + ((min !== undefined ? ', more than or equal to ' + min : '') +
        (max !== undefined ? ', less than or equal to ' + max : ''));
    return predicateWithMessage(function (v) {
        return typeof v === 'number' &&
            (isNaN(v) ||
                (Number.isFinite(v) && (min !== undefined ? v >= min : true) && (max !== undefined ? v <= max : true)));
    }, message);
}
export var NUMBER_ARRAY = predicateWithMessage(ARRAY(undefined, NUMBER()), 'expecting an Array of numbers');
export var OPT_NUMBER_ARRAY = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, NUMBER_ARRAY); }, 'expecting an optional Array of numbers');
export var STRING_ARRAY = predicateWithMessage(ARRAY(undefined, STRING), 'expecting an Array of strings');
export var OPT_STRING_ARRAY = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, STRING_ARRAY); }, 'expecting an optional Array of strings');
export function STRING_UNION() {
    var values = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        values[_i] = arguments[_i];
    }
    var message = "expecting one of: " + values.join(', ');
    return predicateWithMessage(function (v) { return typeof v === 'string' && values.indexOf(v) >= 0; }, message);
}
export var BOOLEAN_ARRAY = predicateWithMessage(ARRAY(undefined, BOOLEAN), 'expecting an Array of boolean values');
export var OPT_BOOLEAN_ARRAY = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, BOOLEAN_ARRAY); }, 'expecting an optional Array of boolean values');
var FONT_WEIGHTS = [
    'normal',
    'bold',
    'bolder',
    'lighter',
    '100',
    '200',
    '300',
    '400',
    '500',
    '600',
    '700',
    '800',
    '900',
];
export var FONT_STYLE = predicateWithMessage(function (v) { return v === 'normal' || v === 'italic' || v === 'oblique'; }, "expecting a font style keyword such as 'normal', 'italic' or 'oblique'");
export var OPT_FONT_STYLE = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, FONT_STYLE); }, "expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'");
export var FONT_WEIGHT = predicateWithMessage(function (v) { return FONT_WEIGHTS.includes(v); }, "expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600");
export var OPT_FONT_WEIGHT = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, FONT_WEIGHT); }, "expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600");
export var LINE_DASH = predicateWithMessage(ARRAY(undefined, NUMBER(0)), 'expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels.');
export var OPT_LINE_DASH = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, LINE_DASH); }, 'expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels.');
var LINE_CAPS = ['butt', 'round', 'square'];
export var LINE_CAP = predicateWithMessage(function (v) { return LINE_CAPS.includes(v); }, "expecting a line cap keyword such as 'butt', 'round' or 'square'");
export var OPT_LINE_CAP = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, LINE_CAP); }, "expecting an optional line cap keyword such as 'butt', 'round' or 'square'");
var LINE_JOINS = ['round', 'bevel', 'miter'];
export var LINE_JOIN = predicateWithMessage(function (v) { return LINE_JOINS.includes(v); }, "expecting a line join keyword such as 'round', 'bevel' or 'miter'");
export var OPT_LINE_JOIN = predicateWithMessage(function (v, ctx) { return OPTIONAL(v, ctx, LINE_JOIN); }, "expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");
var POSITIONS = ['top', 'right', 'bottom', 'left'];
export var POSITION = predicateWithMessage(function (v) { return POSITIONS.includes(v); }, "expecting a position keyword such as 'top', 'right', 'bottom' or 'left");
var INTERACTION_RANGES = ['exact', 'nearest'];
export var INTERACTION_RANGE = predicateWithMessage(function (v) { return (typeof v === 'number' && Number.isFinite(v)) || INTERACTION_RANGES.includes(v); }, "expecting an interaction range of 'exact', 'nearest' or a number");
var TEXT_WRAPS = ['never', 'always', 'hyphenate', 'on-space'];
export var TEXT_WRAP = predicateWithMessage(function (v) { return TEXT_WRAPS.includes(v); }, "expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy91dGlsL3ZhbGlkYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUNoQyxPQUFPLEVBQUUsOEJBQThCLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDcEYsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFVBQVUsQ0FBQztBQVFsQyxNQUFNLFVBQVUsUUFBUSxDQUFDLFNBQTRCO0lBQ2pELE9BQU8sOEJBQThCLENBQUMsVUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLENBQU07O1FBQ3ZELElBQUksU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLE1BQU0sUUFBQSxFQUFFLENBQUMsRUFBRTtZQUMxQixPQUFPLENBQUMsQ0FBQztTQUNaO1FBRUQsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFcEQsSUFBSSxXQUFXLEdBQUcsTUFBQSxNQUFBLE1BQU0sQ0FBQyxXQUFXLDBDQUFFLFNBQVMsbUNBQUksTUFBQSxNQUFNLENBQUMsV0FBVywwQ0FBRSxJQUFJLENBQUM7UUFDNUUsSUFBSSxDQUFBLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxNQUFNLElBQUcsQ0FBQyxFQUFFO1lBQ3pCLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FDdEI7UUFFRCxJQUFNLGVBQWUsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLFNBQU8sV0FBVyxPQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNsRSxJQUFJLFNBQVMsQ0FBQyxPQUFPLEVBQUU7WUFDbkIsTUFBTSxDQUFDLElBQUksQ0FDUCxlQUFhLFFBQVEsVUFBSyxlQUFlLDBCQUFxQixJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMs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