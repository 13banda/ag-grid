/**
          * @ag-grid-enterprise/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
import{PreConstruct as e,Bean as t,BeanStub as i,Autowired as r,RefSelector as s,PostConstruct as n,Component as o,ModuleNames as a}from"@ag-grid-community/core";class c{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],r=e[1],s=e[2],n=e[3];i=this.ff(i,r,s,n,t[0],7,-680876936),n=this.ff(n,i,r,s,t[1],12,-389564586),s=this.ff(s,n,i,r,t[2],17,606105819),r=this.ff(r,s,n,i,t[3],22,-1044525330),i=this.ff(i,r,s,n,t[4],7,-176418897),n=this.ff(n,i,r,s,t[5],12,1200080426),s=this.ff(s,n,i,r,t[6],17,-1473231341),r=this.ff(r,s,n,i,t[7],22,-45705983),i=this.ff(i,r,s,n,t[8],7,1770035416),n=this.ff(n,i,r,s,t[9],12,-1958414417),s=this.ff(s,n,i,r,t[10],17,-42063),r=this.ff(r,s,n,i,t[11],22,-1990404162),i=this.ff(i,r,s,n,t[12],7,1804603682),n=this.ff(n,i,r,s,t[13],12,-40341101),s=this.ff(s,n,i,r,t[14],17,-1502002290),r=this.ff(r,s,n,i,t[15],22,1236535329),i=this.gg(i,r,s,n,t[1],5,-165796510),n=this.gg(n,i,r,s,t[6],9,-1069501632),s=this.gg(s,n,i,r,t[11],14,643717713),r=this.gg(r,s,n,i,t[0],20,-373897302),i=this.gg(i,r,s,n,t[5],5,-701558691),n=this.gg(n,i,r,s,t[10],9,38016083),s=this.gg(s,n,i,r,t[15],14,-660478335),r=this.gg(r,s,n,i,t[4],20,-405537848),i=this.gg(i,r,s,n,t[9],5,568446438),n=this.gg(n,i,r,s,t[14],9,-1019803690),s=this.gg(s,n,i,r,t[3],14,-187363961),r=this.gg(r,s,n,i,t[8],20,1163531501),i=this.gg(i,r,s,n,t[13],5,-1444681467),n=this.gg(n,i,r,s,t[2],9,-51403784),s=this.gg(s,n,i,r,t[7],14,1735328473),r=this.gg(r,s,n,i,t[12],20,-1926607734),i=this.hh(i,r,s,n,t[5],4,-378558),n=this.hh(n,i,r,s,t[8],11,-2022574463),s=this.hh(s,n,i,r,t[11],16,1839030562),r=this.hh(r,s,n,i,t[14],23,-35309556),i=this.hh(i,r,s,n,t[1],4,-1530992060),n=this.hh(n,i,r,s,t[4],11,1272893353),s=this.hh(s,n,i,r,t[7],16,-155497632),r=this.hh(r,s,n,i,t[10],23,-1094730640),i=this.hh(i,r,s,n,t[13],4,681279174),n=this.hh(n,i,r,s,t[0],11,-358537222),s=this.hh(s,n,i,r,t[3],16,-722521979),r=this.hh(r,s,n,i,t[6],23,76029189),i=this.hh(i,r,s,n,t[9],4,-640364487),n=this.hh(n,i,r,s,t[12],11,-421815835),s=this.hh(s,n,i,r,t[15],16,530742520),r=this.hh(r,s,n,i,t[2],23,-995338651),i=this.ii(i,r,s,n,t[0],6,-198630844),n=this.ii(n,i,r,s,t[7],10,1126891415),s=this.ii(s,n,i,r,t[14],15,-1416354905),r=this.ii(r,s,n,i,t[5],21,-57434055),i=this.ii(i,r,s,n,t[12],6,1700485571),n=this.ii(n,i,r,s,t[3],10,-1894986606),s=this.ii(s,n,i,r,t[10],15,-1051523),r=this.ii(r,s,n,i,t[1],21,-2054922799),i=this.ii(i,r,s,n,t[8],6,1873313359),n=this.ii(n,i,r,s,t[15],10,-30611744),s=this.ii(s,n,i,r,t[6],15,-1560198380),r=this.ii(r,s,n,i,t[13],21,1309151649),i=this.ii(i,r,s,n,t[4],6,-145523070),n=this.ii(n,i,r,s,t[11],10,-1120210379),s=this.ii(s,n,i,r,t[2],15,718787259),r=this.ii(r,s,n,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(r,e[1]),e[2]=this.add32(s,e[2]),e[3]=this.add32(n,e[3])}cmn(e,t,i,r,s,n){return t=this.add32(this.add32(t,e),this.add32(r,n)),this.add32(t<<s|t>>>32-s,i)}ff(e,t,i,r,s,n,o){return this.cmn(t&i|~t&r,e,t,s,n,o)}gg(e,t,i,r,s,n,o){return this.cmn(t&r|i&~r,e,t,s,n,o)}hh(e,t,i,r,s,n,o){return this.cmn(t^i^r,e,t,s,n,o)}ii(e,t,i,r,s,n,o){return this.cmn(i^(t|~r),e,t,s,n,o)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let r;for(r=64;r<=e.length;r+=64)this.md5cycle(i,this.md5blk(e.substring(r-64,r)));e=e.substring(r-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<e.length;r++)s[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(this.md5cycle(i,s),r=0;r<16;r++)s[r]=0;return s[14]=8*t,this.md5cycle(i,s),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",r=0;for(;r<4;r++)i+=t[e>>8*r+4&15]+t[e>>8*r&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}}function l(e){return null==e||0===e.length}class h{constructor(e){this.watermarkMessage=void 0,this.document=e,this.md5=new c,this.md5.init()}validateLicense(){if(l(h.licenseKey))this.isWebsiteUrl()||this.outputMissingLicenseKey();else if(h.licenseKey.length>32)if(-1!==h.licenseKey.indexOf("For_Trialing_ag-Grid_Only"))this.outputInvalidLicenseKey();else{const{md5:e,license:t,version:i,isTrial:r}=h.extractLicenseComponents(h.licenseKey);e===this.md5.md5(t)?function(e,t=!1){return null!=e&&(""!==e||t)}(i)&&i?this.validateLicenseKeyForVersion(i,!!r,t):this.validateLegacyKey(t):this.outputInvalidLicenseKey()}else this.outputInvalidLicenseKey()}static extractExpiry(e){const t=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(h.decode(t),10))}static extractLicenseComponents(e){let t=e.replace(/[\u200B-\u200D\uFEFF]/g,"");t=t.replace(/\r?\n|\r/g,"");const i=t.length-32,r=t.substring(i),s=t.substring(0,i),[n,o]=h.extractBracketedInformation(t);return{md5:r,license:s,version:n,isTrial:o}}getLicenseDetails(e){const{md5:t,license:i,version:r,isTrial:s}=h.extractLicenseComponents(e);let n=t===this.md5.md5(i)&&-1===e.indexOf("For_Trialing_ag-Grid_Only"),o=null,a=null;if(n&&(a=h.extractExpiry(i),n=!isNaN(a.getTime()),s)){o=a<new Date}return{licenseKey:e,valid:n,expiry:n?h.formatDate(a):null,version:r||"legacy",isTrial:s,trialExpired:o}}isDisplayWatermark(){return!this.isLocalhost()&&!this.isWebsiteUrl()&&!l(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const e=(this.document.defaultView||window).location,{hostname:t=""}=e;return t}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:\w+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),r=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+r}static getGridReleaseDate(){return new Date(parseInt(h.decode(h.RELEASE_INFORMATION),10))}static decode(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i,r,s,n,o,a,c,l="",d=0;const g=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;d<g.length;)n=t.indexOf(g.charAt(d++)),o=t.indexOf(g.charAt(d++)),a=t.indexOf(g.charAt(d++)),c=t.indexOf(g.charAt(d++)),i=n<<2|o>>4,r=(15&o)<<4|a>>2,s=(3&a)<<6|c,l+=String.fromCharCode(i),64!=a&&(l+=String.fromCharCode(r)),64!=c&&(l+=String.fromCharCode(s));return l=h.utf8_decode(l),l}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}static setLicenseKey(e){this.licenseKey=e}static extractBracketedInformation(e){const t=e.split("[").filter((function(e){return e.indexOf("]")>-1})).map((function(e){return e.split("]")[0]}));if(!t||0===t.length)return[null,null];const i=1===t.filter(e=>"TRIAL"===e).length;return[t.filter(e=>0===e.indexOf("v")).map(e=>e.replace(/^v/,""))[0],i]}validateLicenseKeyForVersion(e,t,i){"2"===e&&(t?this.validateForTrial(i):this.validateLegacyKey(i))}validateLegacyKey(e){const t=h.getGridReleaseDate(),i=h.extractExpiry(e);let r=!1,s=!1;if(isNaN(i.getTime())||(r=!0,s=t<i),r){if(!s){const e=h.formatDate(i),r=h.formatDate(t);this.outputIncompatibleVersion(e,r)}}else this.outputInvalidLicenseKey()}validateForTrial(e){const t=h.extractExpiry(e),i=new Date;let r=!1,s=!1;if(isNaN(t.getTime())||(r=!0,s=t>i),r){if(!s){const e=h.formatDate(t);this.outputExpiredTrialKey(e)}}else this.outputInvalidLicenseKey()}outputInvalidLicenseKey(){console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error(`* Your license for AG Grid Enterprise expired on ${e}.                                                *`),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"}outputIncompatibleVersion(e,t){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error(`* license end date. The license key that you have expires on ${e}, however the version of AG Grid you    *`),console.error(`* are trying to use was released on ${t}.                                                               *`),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"}}h.RELEASE_INFORMATION="MTY4NjA2MTA3MDMxNA==";var d=function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};let g=class extends i{validateLicense(){this.licenseManager=new h(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new h(null).getLicenseDetails(e)}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){h.setLicenseKey(e)}};d([e],g.prototype,"validateLicense",null),g=d([t("licenseManager")],g);var u=function(e,t,i,r){var s,n=arguments.length,o=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,i,o):s(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o};class f extends o{constructor(){super('<div class="ag-watermark">\n                    <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n               </div>')}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){const e=this.gridOptionsService.getWindow().location,{pathname:t}=e,i=this.licenseManager.isDisplayWatermark();return!!t&&-1!==t.indexOf("forceWatermark")||i}}u([r("licenseManager")],f.prototype,"licenseManager",void 0),u([s("eLicenseTextRef")],f.prototype,"eLicenseTextRef",void 0),u([n],f.prototype,"postConstruct",null);const m={version:"30.0.0",moduleName:a.EnterpriseCoreModule,beans:[g],agStackComponents:[{componentName:"AgWatermark",componentClass:f}]};export{m as EnterpriseCoreModule,g as LicenseManager};