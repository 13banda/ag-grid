/**
          * @ag-grid-enterprise/charts - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/charts - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
import{_ as t,Autowired as e,PostConstruct as i,BeanStub as s,Events as n,Component as r,AutoScrollService as o,AgAbstractField as a,AgGroupComponent as l,AgRadioButton as h,AgToggleButton as c,AgCheckbox as d,DragAndDropService as u,AgSelect as p,DragSourceType as g,RefSelector as f,AgAbstractLabel as m,AgSlider as y,DEFAULT_CHART_GROUPS as v,TabbedLayout as b,AgPromise as x,CHART_TOOLBAR_ALLOW_LIST as C,CHART_TOOL_PANEL_ALLOW_LIST as S,CHART_TOOL_PANEL_MENU_OPTIONS as k,AgPanel as O,Optional as w,ModuleRegistry as T,ModuleNames as D,Bean as M,CellRangeType as E,AgDialog as R,PreDestroy as P,AgPickerField as A}from"@ag-grid-community/core";import{EnterpriseCoreModule as L}from"@ag-grid-enterprise/core";import{RangeSelectionModule as I}from"@ag-grid-enterprise/range-selection";class N{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var s;const n=null===(s=this._rangeCallback)||void 0===s?void 0:s.call(this,t,e),r=this._encode(i?this.floor(t):this.ceil(t)),o=this._encode(i?this.ceil(e):this.floor(e));if(o<r)return[];const a=[];for(let t=r;t<=o;t++){const e=this._decode(t);a.push(e)}return null==n||n(),a}}class F extends N{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,s=0;const{snapTo:n="start"}=null!=e?e:{};if("string"==typeof n){const e=s;i=(i,r)=>{const o="start"===n?i:r;return s=this.getOffset(o,t),()=>s=e}}else"number"==typeof n?s=this.getOffset(new Date(n),t):n instanceof Date&&(s=this.getOffset(n,t));return new N(e=>{const i=this._encode(e);return Math.floor((i-s)/t)},e=>this._decode(e*t+s),i)}}const _=new F((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const B=6e4*(new Date).getTimezoneOffset();const G=new F((function(t){return Math.floor((t.getTime()-B)/1e3)}),(function(t){return new Date(B+1e3*t)})),j=6e4*(new Date).getTimezoneOffset();const z=new F((function(t){return Math.floor((t.getTime()-j)/6e4)}),(function(t){return new Date(j+6e4*t)})),W=6e4*(new Date).getTimezoneOffset();const V=new F((function(t){return Math.floor((t.getTime()-W)/36e5)}),(function(t){return new Date(W+36e5*t)}));const K=new F((function(t){const e=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor(e/864e5)}),(function(t){const e=new Date(0);return e.setDate(e.getDate()+t),e.setHours(0,0,0,0),e})),H=new Date(2023,0,1);function Y(t){const e=Date.UTC(H.getFullYear(),H.getMonth(),H.getDate())+864e5*t;return new F((function(t){const i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((i-e)/6048e5)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const U=Y(0),X=Y(1),$=Y(2),q=Y(3),Z=Y(4),J=Y(5),Q=Y(6);const tt=new F((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const et=new F((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));const it=new F((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)}));const st=new F((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)}));const nt=new F((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));const rt=new F((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));const ot=new F((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}));var at=Object.freeze({__proto__:null,millisecond:_,second:G,minute:z,hour:V,day:K,sunday:U,monday:X,tuesday:$,wednesday:q,thursday:Z,friday:J,saturday:Q,month:tt,year:et,utcMinute:it,utcHour:st,utcDay:nt,utcMonth:rt,utcYear:ot});const lt=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function ht(){const t=navigator.userAgent;return!lt.some(e=>e.test(t))}class ct{constructor({document:t=window.document,width:e=600,height:i=300,domLayer:s=!1,zIndex:n=0,name:r,overrideDevicePixelRatio:o}){this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=t,this.element=t.createElement("canvas"),this.element.width=e,this.element.height=i,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;const{style:a}=this.element;a.userSelect="none",a.display="block",s&&(a.position="absolute",a.zIndex=String(n),a.top="0",a.left="0",a.pointerEvents="none",a.opacity="1",r&&(this.element.id=r)),this.setPixelRatio(o),this.resize(e,i)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(null!=t?t:"").trim()||"image";const i=this.getDataURL(e),s=this.document,n=s.createElement("a");n.href=i,n.download=t,n.style.display="none",s.body.appendChild(n),n.click(),s.body.removeChild(n)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;ht()||(e=1),ct.overrideScale(this.context,e),this._pixelRatio=e}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:s,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),i.style.width=t+"px",i.style.height=e+"px",s.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,i=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,s){const n=this.textMeasuringContext;return n.font=e,n.textBaseline=i,n.textAlign=s,n.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const s=i.measureText(t);return{width:s.width,height:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,s=i[e];if(s){const e=s[t];if(e)return e}else i[e]={};const n=this.svgText;n.style.font=e,n.textContent=t;const r=n.getBBox(),o={width:r.width,height:r.height};return i[e][t]=o,o}static overrideScale(t,e){let i=0;const s={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,s,n,r,o){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,s*e,n*e,r*e,o*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t["$"+e]||(t["$"+e]=t[e]),t[e]=s[e])}}ct.textSizeCache={};class dt{constructor(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s}clone(){const{x:t,y:e,width:i,height:s}=this;return new dt(t,e,i,s)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;default:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,s=-1/0,n=-1/0;return t.forEach(t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>s&&(s=t.x+t.width),t.y+t.height>n&&(n=t.y+t.height)}),new dt(e,i,s-e,n-i)}}class ut{constructor(t=[1,0,0,1,0,0]){this.elements=t}get e(){return[...this.elements]}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const s=t[0]*e[0]+t[2]*e[1],n=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=s,i[1]=n,i[2]=r,i[3]=o,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new ut(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],s=t[2],n=t[3];const r=t[4],o=t[5],a=1/(e*n-i*s);return e*=a,i*=a,s*=a,n*=a,new ut([n,-i,-s,e,s*o-n*r,i*r-e*o])}inverseTo(t){const e=this.elements;let i=e[0],s=e[1],n=e[2],r=e[3];const o=e[4],a=e[5],l=1/(i*r-s*n);return i*=l,s*=l,n*=l,r*=l,t.setElements([r,-s,-n,i,n*a-r*o,s*o-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],s=t[2],n=t[3];const r=t[4],o=t[5],a=1/(e*n-i*s);return e*=a,i*=a,s*=a,n*=a,t[0]=n,t[1]=-i,t[2]=-s,t[3]=e,t[4]=s*o-n*r,t[5]=i*r-e*o,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,s=i[0],n=i[1],r=i[2],o=i[3],a=.5*t.width,l=.5*t.height,h=t.x+a,c=t.y+l,d=Math.abs(a*s)+Math.abs(l*r),u=Math.abs(a*n)+Math.abs(l*o);return e||(e=new dt(0,0,0,0)),e.x=h*s+c*r+i[4]-d,e.y=h*n+c*o+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return ut.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,s,n,r,o){const[a,l]=[0,0],h=e,c=i;let d,u;1===h&&1===c?(d=0,u=0):(d=null==(null==o?void 0:o.scalingCenterX)?a:null==o?void 0:o.scalingCenterX,u=null==(null==o?void 0:o.scalingCenterY)?l:null==o?void 0:o.scalingCenterY);const p=s,g=Math.cos(p),f=Math.sin(p);let m,y;0===p?(m=0,y=0):(m=null==(null==o?void 0:o.rotationCenterX)?a:null==o?void 0:o.rotationCenterX,y=null==(null==o?void 0:o.rotationCenterY)?l:null==o?void 0:o.rotationCenterY);const v=n,b=r,x=d*(1-h)-m,C=u*(1-c)-y;return t.setElements([g*h,f*h,-f*c,g*c,g*x-f*C+m+v,f*x+g*C+y+b]),t}static fromContext(t){const e=t.getTransform();return new ut([e.a,e.b,e.c,e.d,e.e,e.f])}}ut.instance=new ut;const pt={};function gt(t){var e;const i=t.constructor,s=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!s)throw new Error(`The ${i} is missing the 'className' property.`);const n=(null!==(e=pt[s])&&void 0!==e?e:0)+1;return pt[s]=n,s+"-"+n}var ft;!function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(ft||(ft={}));const mt=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function yt(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(s,n){const r="__"+n;s[n]||(mt&&null==e&&null==i?function(t,e,i,s){const{redraw:n=ft.TRIVIAL,type:r="normal",checkDirtyOnAssignment:o=!1}=null!=s?s:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===r?`this.markDirty(this, ${n});`:""}\n            ${"transform"===r?`this.markDirtyTransform(${n});`:""}\n            ${"path"===r?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===r?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${o?`if (value != null && value._dirty > ${ft.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(s,n,r,t):function(t,e,i,s){const{redraw:n=ft.TRIVIAL,type:r="normal",changeCb:o,convertor:a,checkDirtyOnAssignment:l=!1}=null!=s?s:{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===r&&this.markDirty(this,n),"transform"===r&&this.markDirtyTransform(n),"path"!==r||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,n)),"font"!==r||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,n)),o&&o(this)),l&&null!=t&&t._dirty>ft.NONE&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(s,n,r,t))}}class vt{constructor(){this._dirty=ft.MAJOR}markDirty(t,e=ft.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=ft.NONE}isDirty(){return this._dirty>ft.NONE}}var bt,xt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};!function(t){t[t.All=0]="All",t[t.None=1]="None"}(bt||(bt={}));const Ct=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class St extends vt{constructor(){super(...arguments),this.serialNumber=St._nextSerialNumber++,this.id=gt(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new ut,this.inverseMatrix=new ut,this._dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=bt.All}get datum(){var t;return void 0!==this._datum?this._datum:null===(t=this._parent)||void 0===t?void 0:t.datum}set datum(t){this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this.children)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){return this._children}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,ft.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){if(t.parent===this){const e=this.children.indexOf(t);if(e>=0)return this._children.splice(e,1),delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,ft.MAJOR),t}throw new Error("The node to be removed is not a child of this node.")}insertBefore(t,e){const i=t.parent;if(t.parent&&t.parent.removeChild(t),e&&e.parent===this){const s=this.children.indexOf(e);if(!(s>=0))throw new Error(`${e} has ${i} as the parent, but is not in its list of children.`);this._children.splice(s,0,t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager),this.dirtyZIndex=!0,this.markDirty(t,ft.MAJOR)}else this.append(t);return t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=ut.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this._dirtyTransform=!0,this.markDirty(this,ft.MAJOR)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===bt.None||!this.containsPoint(t,e))return;const s=this.children;if(s.length>1e3)for(let n=s.length-1;n>=0;n--){const r=s[n],o=(null===(i=r.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?r.pickNode(t,e):void 0;if(o)return o}else if(s.length)for(let i=s.length-1;i>=0;i--){const n=s[i].pickNode(t,e);if(n)return n}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const s=i.findNodes(t);s&&e.push(...s)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=ut.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this._dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:s,translationX:n,translationY:r,scalingCenterX:o,scalingCenterY:a,rotationCenterX:l,rotationCenterY:h}=this;ut.updateTransformMatrix(t,e,i,s,n,r,{scalingCenterX:o,scalingCenterY:a,rotationCenterX:l,rotationCenterY:h}),t.inverseTo(this.inverseMatrix),this._dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=ft.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:s,width:n,height:r}=e,o=this.transformPoint(i,s),a=this.transformPoint(i+n,s+r);t.clearRect(o.x,o.y,a.x-o.x,a.y-o.y)}markDirty(t,e=ft.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if((this._dirty!==ft.NONE||e)&&(this._dirty=ft.NONE,i))for(const t of this.children)t.markClean()}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=ft.NONE||this._dirtyTransform?1:0,i=this.visible?1:0;for(const s of this._children){const{count:n,visibleCount:r,dirtyCount:o}=s.nodeCount;t+=n,i+=r,e+=o}return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}function kt(t,e){let i=0;return"number"==typeof t&&"number"==typeof e?i=t-e:"string"==typeof t&&"string"==typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function Ot(t,e,i){const s=t=>"function"==typeof t?t():t;for(const n in t){const r=i(s(t[n]),s(e[n]));if(0!==r)return r}return 0}St._nextSerialNumber=0,xt([yt({type:"transform"})],St.prototype,"scalingX",void 0),xt([yt({type:"transform"})],St.prototype,"scalingY",void 0),xt([yt({type:"transform"})],St.prototype,"scalingCenterX",void 0),xt([yt({type:"transform"})],St.prototype,"scalingCenterY",void 0),xt([yt({type:"transform"})],St.prototype,"rotationCenterX",void 0),xt([yt({type:"transform"})],St.prototype,"rotationCenterY",void 0),xt([yt({type:"transform"})],St.prototype,"rotation",void 0),xt([yt({type:"transform"})],St.prototype,"translationX",void 0),xt([yt({type:"transform"})],St.prototype,"translationY",void 0),xt([yt({redraw:ft.MAJOR,changeCb:t=>t.visibilityChanged()})],St.prototype,"visible",void 0),xt([yt({redraw:ft.TRIVIAL,changeCb:Ct})],St.prototype,"zIndex",void 0),xt([yt({redraw:ft.TRIVIAL,changeCb:Ct})],St.prototype,"zIndexSubOrder",void 0);const wt={};function Tt(t,e){wt[e]||(t(),wt[e]=!0)}const Dt={debug(...t){console.log(...t)},warn(t,...e){console.warn("AG Charts - "+t,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error("AG Charts - "+t,...e)},warnOnce(t,...e){Tt(()=>Dt.warn(t,...e),"Logger.warn: "+t)},errorOnce(t,...e){Tt(()=>Dt.error(t,...e),"Logger.warn: "+t)}};var Mt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Et extends St{constructor(t){var e;super(),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:s}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==s&&(this.zIndexSubOrder=s),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:s,name:n}=null!==(i=this.opts)&&void 0!==i?i:{},r=()=>this.getComputedOpacity(),o=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:s,name:n,getComputedOpacity:r,getVisibility:o})}}getComputedOpacity(){let t=1,e=this;do{e instanceof Et&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=ft.TRIVIAL){const i=e<=ft.MINOR?ft.TRIVIAL:e;super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),Et.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:s}={}}=this,{_debug:{consoleLog:n=!1}={}}=this,{dirty:r,dirtyZIndex:o,layer:a,children:l,clipRect:h}=this;let{ctx:c,forceRender:d,clipBBox:u}=t;const{resized:p,stats:g}=t,f=c.getTransform(),m=r>=ft.MINOR||o||p,y=m||l.some(t=>t.dirty>=ft.TRIVIAL);if(s&&n&&Dt.debug({name:s,group:this,isDirty:m,isChildDirty:y,renderCtx:t,forceRender:d}),a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)?t.isInfinite()||(d=!1):(d=!0,this.lastBBox=t)}if(!m&&!y&&!d){if(s&&n&&g){const e=this.nodeCount;Dt.debug({name:s,result:"skipping",renderCtx:t,counts:e,group:this})}return a&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1})}const v=this.visible;if(a){if(c=a.context,c.save(),c.resetTransform(),d=!0,a.clear(),u){const{width:e,height:i,x:r,y:o}=u;n&&Dt.debug({name:s,clipBBox:u,ctxTransform:c.getTransform(),renderCtx:t,group:this}),this.clipCtx(c,r,o,e,i)}c.setTransform(f)}else c.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(c),h){const{x:e,y:i,width:r,height:o}=h;c.save(),n&&Dt.debug({name:s,clipRect:h,ctxTransform:c.getTransform(),renderCtx:t,group:this}),this.clipCtx(c,e,i,r,o),u=this.matrix.inverse().transformBBox(h)}o&&(this.sortChildren(),d=!0);const b=d!==t.forceRender||u!==t.clipBBox||c!==t.ctx?Object.assign(Object.assign({},t),{ctx:c,forceRender:d,clipBBox:u}):t;let x=0;for(const t of l)t.visible&&v?d||t.dirty!==ft.NONE?(c.save(),t.render(b),c.restore()):g&&(x+=t.nodeCount.count):(t.markClean(),g&&(x+=t.nodeCount.count));if(g&&(g.nodesSkipped+=x),super.render(t),h&&c.restore(),a&&(g&&g.layersRendered++,c.restore(),a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),s&&n&&g){const e=this.nodeCount;Dt.debug({name:s,result:"rendered",skipped:x,renderCtx:t,counts:e,group:this})}}sortChildren(){this.dirtyZIndex=!1,this.children.sort((t,e)=>{var i,s;return Ot([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(s=e.zIndexSubOrder)&&void 0!==s?s:[void 0,void 0],e.serialNumber],kt)})}clipCtx(t,e,i,s,n){t.beginPath(),t.moveTo(e,i),t.lineTo(e+s,i),t.lineTo(e+s,i+n),t.lineTo(e,i+n),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,s=1/0,n=-1/0;return t.forEach(t=>{if(!t.visible)return;const r=t.computeTransformedBBox();if(!r)return;const o=r.x,a=r.y;o<e&&(e=o),a<s&&(s=a),o+r.width>i&&(i=o+r.width),a+r.height>n&&(n=a+r.height)}),new dt(e,s,i-e,n-s)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}Et.className="Group",Mt([yt({convertor:t=>Math.min(1,Math.max(0,t))})],Et.prototype,"opacity",void 0);class Rt{constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(i),this.resize(t,e)}static isSupported(){return null!=window.OffscreenCanvas}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;ht()||(e=1),ct.overrideScale(this.context,e),this._pixelRatio=e}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:s,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),s.resetTransform(),this._width=t,this._height=e}}function Pt(t){const e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}var At=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class Lt{constructor(t){var e,i,s;this.id=gt(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,sceneNodeHighlight:[]};const{document:n=window.document,mode:r=(null!==(e=Pt("agChartsSceneRenderModel"))&&void 0!==e?e:"adv-composite"),width:o,height:a,overrideDevicePixelRatio:l}=t;this.overrideDevicePixelRatio=l,this.opts={document:n,mode:r},this.debug.consoleLog=!0===Pt("agChartsDebug"),this.debug.stats=null!==(i=Pt("agChartsSceneStats"))&&void 0!==i&&i,this.debug.dirtyTree=null!==(s=Pt("agChartsSceneDirtyTree"))&&void 0!==s&&s,this.debug.sceneNodeHighlight=function(){var t;let e=null!==(t=Pt("agChartsSceneDebug"))&&void 0!==t?t:[];"string"==typeof e&&(e=[e]);const i=[];return e.forEach(t=>{"layout"===t?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(t)}),i}(),this.canvas=new ct({document:n,width:o,height:a,overrideDevicePixelRatio:l})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,s=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||s||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite","dom-composite","adv-composite"].includes(i))return;const{zIndex:s=this._nextZIndex++,name:n,zIndexSubOrder:r,getComputedOpacity:o,getVisibility:a}=t,{width:l,height:h,overrideDevicePixelRatio:c}=this,d="dom-composite"===i,u="adv-composite"===i&&Rt.isSupported()?new Rt({width:l,height:h,overrideDevicePixelRatio:c}):new ct({document:this.opts.document,width:l,height:h,domLayer:d,zIndex:s,name:n,overrideDevicePixelRatio:c}),p={id:this._nextLayerId++,name:n,zIndex:s,zIndexSubOrder:r,canvas:u,getComputedOpacity:o,getVisibility:a};if(s>=this._nextZIndex&&(this._nextZIndex=s+1),this.layers.push(p),this.sortLayers(),d){const t=this.layers.map(t=>t.canvas).filter(t=>t instanceof ct),i=t.findIndex(t=>t===u);(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",u.element)}return this.debug.consoleLog&&Dt.debug({layers:this.layers}),p.canvas}removeLayer(t){const e=this.layers.findIndex(e=>e.canvas===t);e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&Dt.debug({layers:this.layers}))}moveLayer(t,e,i){const s=this.layers.find(e=>e.canvas===t);s&&(s.zIndex=e,s.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&Dt.debug({layers:this.layers}))}sortLayers(){this.layers.sort((t,e)=>{var i,s;return Ot([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(s=e.zIndexSubOrder)&&void 0!==s?s:[void 0,void 0],e.id],kt)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(null===t.parent&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager(this)),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e;return At(this,void 0,void 0,(function*(){const{debugSplitTimes:i=[performance.now()],extraDebugStats:s={}}=null!=t?t:{},{canvas:n,canvas:{context:r},root:o,layers:a,pendingSize:l,opts:{mode:h}}=this;if(l&&(this.canvas.resize(...l),this.layers.forEach(t=>t.canvas.resize(...l)),this.pendingSize=void 0),o&&!o.visible)return void(this._dirty=!1);if(o&&!this.dirty)return this.debug.consoleLog&&Dt.debug("no-op",{redrawType:ft[o.dirty],tree:this.buildTree(o)}),void this.debugStats(i,r,void 0,s);const c={ctx:r,forceRender:!0,resized:!!l,debugNodes:{}};"detailed"===this.debug.stats&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let d=!1;if((!o||o.dirty>=ft.TRIVIAL)&&(d=!0,n.clear()),o&&this.debug.dirtyTree){const{dirtyTree:t,paths:e}=this.buildDirtyTree(o);Dt.debug({dirtyTree:t,paths:e})}o&&d&&(this.debug.consoleLog&&Dt.debug("before",{redrawType:ft[o.dirty],canvasCleared:d,tree:this.buildTree(o)}),o.visible&&(r.save(),o.render(c),r.restore())),"dom-composite"!==h&&a.length>0&&d&&(this.sortLayers(),r.save(),r.setTransform(1/n.pixelRatio,0,0,1/n.pixelRatio,0,0),a.forEach(({canvas:{imageSource:t,enabled:e},getComputedOpacity:i,getVisibility:s})=>{e&&s()&&(r.globalAlpha=i(),r.drawImage(t,0,0))}),r.restore()),null===(e=r.verifyDepthZero)||void 0===e||e.call(r),this._dirty=!1,this.debugStats(i,r,c.stats,s),this.debugSceneNodeHighlight(r,this.debug.sceneNodeHighlight,c.debugNodes),o&&this.debug.consoleLog&&Dt.debug("after",{redrawType:ft[o.dirty],canvasCleared:d,tree:this.buildTree(o)})}))}debugStats(t,e,i,s={}){const n=performance.now();if(this.debug.stats){const r=t[0];t.push(n);const o=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e)=>Math.round(100*(e-t))/100+"ms",{layersRendered:l=0,layersSkipped:h=0,nodesRendered:c=0,nodesSkipped:d=0}=null!=i?i:{},u=t.map((e,i)=>i>0?a(t[i-1],e):null).filter(t=>null!=t).join(" + "),p=Object.entries(s).map(([t,e])=>`${t}: ${e}`).join(" ; "),g=[`${a(r,n)} (${u})`,""+p,"detailed"===this.debug.stats?"Layers: "+o(l,h):null,"detailed"===this.debug.stats?"Nodes: "+o(c,d):null].filter(t=>null!=t).map(t=>[t,ct.getTextSize(t,e.font)]),f=Math.max(...g.map(([,{width:t}])=>t)),m=g.reduce((t,[,{height:e}])=>t+e,0);e.save(),e.fillStyle="white",e.fillRect(0,0,f,m),e.fillStyle="black";let y=0;for(const[t,i]of g)y+=i.height,e.fillText(t,2,y);e.restore()}}debugSceneNodeHighlight(t,e,i){var s;const n=t=>e=>!!t.test(e.id)||e instanceof Et&&null!=e.name&&t.test(e.name),r=t=>e=>t===e.id||e instanceof Et&&null!=e.name&&t===e.name;for(const t of e){if("string"==typeof t&&null!=i[t])continue;const e="string"==typeof t?r(t):n(t),o=null===(s=this.root)||void 0===s?void 0:s.findNodes(e);if(o&&0!==o.length)for(const t of o)t instanceof Et&&t.name?i[t.name]=t:i[t.id]=t;else Dt.debug(`no debugging node with id [${t}] in scene graph.`)}t.save();for(const[e,s]of Object.entries(i)){const i=s.computeTransformedBBox();i?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(i.x,i.y,i.width,i.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(e,i.x,i.y,i.width),t.fillText(e,i.x,i.y,i.width)):Dt.debug(`no bbox for debugged node [${e}].`)}t.restore()}buildTree(t){var e;const i=null!==(e=t instanceof Et?t.name:null)&&void 0!==e?e:t.id;return Object.assign({name:i,node:t,dirty:ft[t.dirty]},t.children.map(t=>this.buildTree(t)).reduce((t,e)=>{let{name:i}=e;const{node:{visible:s,opacity:n,zIndex:r,zIndexSubOrder:o},node:a}=e;(!s||n<=0)&&(i=`(${i})`),a instanceof Et&&a.isLayer()&&(i=`*${i}*`);return t[[""+(null!=i?i:"<unknown>"),"z: "+r,o&&"zo: "+o.join(" / ")].filter(t=>!!t).join(" ")]=e,t},{}))}buildDirtyTree(t){var e;if(t.dirty===ft.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map(t=>this.buildDirtyTree(t)).filter(t=>t.paths.length>0),s=null!==(e=t instanceof Et?t.name:null)&&void 0!==e?e:t.id,n=0===i.length?[s]:i.map(t=>t.paths).reduce((t,e)=>t.concat(e),[]).map(t=>`${s}.${t}`);return{dirtyTree:Object.assign({name:s,node:t,dirty:ft[t.dirty]},i.map(t=>t.dirtyTree).filter(t=>void 0!==t.dirty).reduce((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t},{})),paths:n}}}Lt.className="Scene";const It=2*Math.PI;function Nt(t){return t%=It,t+=It,t%=It}function Ft(t){return t/180*Math.PI}class _t extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:s}=this,n=Nt(Ft(s+90)),r=Math.cos(n),o=Math.sin(n),a=e.width,l=e.height,h=e.x+.5*a,c=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,s=Math.atan2(l,a);let d;d=n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<3*Math.PI/2?n-Math.PI:2*Math.PI-n;const u=e*Math.abs(Math.cos(d-s)),p=t.createLinearGradient(h+r*u,c+o*u,h-r*u,c-o*u);return i.forEach(t=>{p.addColorStop(t.offset,t.color)}),p}return"black"}}var Bt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const Gt=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class jt extends St{constructor(){super(...arguments),this.lastInstanceId=0,this.fillOpacity=1,this.strokeOpacity=1,this.fill=jt.defaultStyles.fill,this.stroke=jt.defaultStyles.stroke,this.strokeWidth=jt.defaultStyles.strokeWidth,this.lineDash=jt.defaultStyles.lineDash,this.lineDashOffset=jt.defaultStyles.lineDashOffset,this.lineCap=jt.defaultStyles.lineCap,this.lineJoin=jt.defaultStyles.lineJoin,this.opacity=jt.defaultStyles.opacity,this.fillShadow=jt.defaultStyles.fillShadow}static createInstance(t){const e=Object.create(t);return e._setParent(void 0),e.id=t.id+"-Instance-"+String(++t.lastInstanceId),e}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,s=e.length;i<s;i++){const s=e[i];this[s]=t[s]}}restoreAllStyles(){const t=this.constructor.defaultStyles;for(const e in t)this[e]=t[e]}restoreOverriddenStyles(){const t=this.constructor.defaultStyles,e=Object.getPrototypeOf(t);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=t[i])}updateGradient(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=Gt.exec(t))){const t=parseFloat(e[1]),i=[],s=e[2],n=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=n.exec(s);)i.push(r[0]);this.gradient=new _t,this.gradient.angle=t,this.gradient.stops=i.map((t,e)=>({offset:e/(i.length-1),color:t}))}else this.gradient=void 0}align(t,e){var i,s,n;const r=null!==(n=null===(s=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===s?void 0:s.pixelRatio)&&void 0!==n?n:1,o=Math.round(t*r)/r;return null==e?o:0===e?0:e<1?Math.ceil(e*r)/r:Math.round((e+t)*r)/r-o}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const s=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,n=this.fillShadow;(null==n?void 0:n.enabled)&&(t.shadowColor=n.color,t.shadowOffsetX=n.xOffset*s,t.shadowOffsetY=n.yOffset*s,t.shadowBlur=n.blur*s)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}jt.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),Bt([yt({redraw:ft.MINOR})],jt.prototype,"fillOpacity",void 0),Bt([yt({redraw:ft.MINOR})],jt.prototype,"strokeOpacity",void 0),Bt([yt({redraw:ft.MINOR,changeCb:t=>t.updateGradient()})],jt.prototype,"fill",void 0),Bt([yt({redraw:ft.MINOR})],jt.prototype,"stroke",void 0),Bt([yt({redraw:ft.MINOR})],jt.prototype,"strokeWidth",void 0),Bt([yt({redraw:ft.MINOR})],jt.prototype,"lineDash",void 0),Bt([yt({redraw:ft.MINOR})],jt.prototype,"lineDashOffset",void 0),Bt([yt({redraw:ft.MINOR})],jt.prototype,"lineCap",void 0),Bt([yt({redraw:ft.MINOR})],jt.prototype,"lineJoin",void 0),Bt([yt({redraw:ft.MINOR,convertor:t=>Math.min(1,Math.max(0,t))})],jt.prototype,"opacity",void 0),Bt([yt({redraw:ft.MINOR,checkDirtyOnAssignment:!0})],jt.prototype,"fillShadow",void 0);var zt=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};function Wt(t){const{redraw:e=ft.MAJOR,changeCb:i}=null!=t?t:{};return yt({redraw:e,type:"font",changeCb:i})}class Vt extends jt{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=Vt.defaultStyles.textAlign,this.textBaseline=Vt.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=$t(this.text)}get font(){return this._dirtyFont&&(this._dirtyFont=!1,this._font=Kt(this)),this._font}computeBBox(){return ct.has.textMetrics?Yt(this.lines,this.x,this.y,this):Ut(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(ct.has.textMetrics){const s=ct.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=s.fontBoundingBoxAscent)&&void 0!==e?e:s.emHeightAscent)+(null!==(i=s.fontBoundingBoxDescent)&&void 0!==i?i:s.emHeightDescent)}return ct.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return!!s&&s.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(this.dirty===ft.NONE&&!i)return void(s&&(s.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(s&&(s.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:n,stroke:r,strokeWidth:o}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines((t,i,s)=>e.fillText(t,i,s))}if(r&&o){e.strokeStyle=r,e.lineWidth=o,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:s,lineJoin:n}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),s&&(e.lineCap=s),n&&(e.lineJoin=n),this.renderLines((t,i,s)=>e.strokeText(t,i,s))}super.render(t)}renderLines(t){const{lines:e,x:i,y:s}=this,n=this.lines.map(t=>this.getLineHeight(t));let r=-(n.reduce((t,e)=>t+e,0)-n[0])*Xt(this.textBaseline);for(let o=0;o<e.length;o++)t(e[o],i,s+r),r+=n[o]}static wrap(t,e,i,s,n){const r=function(t){const e=new Map,i=e=>ct.getTextSize(e,t);return{size:i,width:t=>{if(e.has(t))return e.get(t);const{width:s}=i(t);return e.set(t,s),s}}}(Kt(s)),o=t.split(/\r?\n/g);if(0===o.length)return"";if("never"===n)return Vt.truncateLine(o[0],e,r,!1);const a=[];let l=0;for(const t of o){const o=Vt.wrapLine(t,e,i,r,s,n,l);if(a.push(o.result),l=o.cumulativeHeight,o.truncated)break}return a.join("\n").trim()}static wrapLine(t,e,i,s,n,r,o){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:o};const a=s.size(t);if(a.width<=e)return{result:t,truncated:!1,cumulativeHeight:o+a.height};if(a.height>i||s.width("W")>e)return{result:"",truncated:!0,cumulativeHeight:o};const l=t.split(/\s+/g),h=Vt.wrapLineSequentially(l,e,i,s,n,r,o);o=h.cumulativeHeight;let{lines:c}=h;if(!h.wordsBrokenOrTruncated&&!h.linesTruncated){const t=h.lines.length,i=Vt.wrapLineBalanced(l,e,s,t);i.length===c.length&&(c=i)}return{result:c.map(t=>t.join(" ")).join("\n"),truncated:h.linesTruncated,cumulativeHeight:o}}static breakWord(t,e,i,s,n){const r=e=>Vt.punctuationMarks.includes(t[e]),o=s?n.width("-"):0,a=[];let l=0,h=0;for(let s=0;s<t.length;s++){const r=t[s],c=n.width(r);l+c+o>(0===h?e:i)&&(a.push(s),l=0,h++),l+=c}const c=[];let d=0;for(const e of a){let i=t.substring(d,e);s&&i.length>0&&!r(e-1)&&!r(e)&&(i+="-"),c.push(i),d=e}return c.push(t.substring(d)),c}static truncateLine(t,e,i,s){const n=i.width(t);if(n<e&&!s)return t;const r=i.width("\u2026");if(n+r<=e)return t+"\u2026";let o,a,l=Math.floor(t.length*e/n)+1;do{o=t.substring(0,l),a=i.width(o)}while(--l>=0&&a+r>e);return o+"\u2026"}static wrapLineSequentially(t,e,i,s,n,r,o){const{fontSize:a,lineHeight:l=a*Vt.defaultLineHeightRatio}=n,h="always"===r||"hyphenate"===r,c="hyphenate"===r,d=s.width(" ");let u=!1,p=!1;const g=[];let f=[],m=0;const y=()=>{const t=o+l;if(t>=i){const t=f.join(" "),i=Vt.truncateLine(t,e,s,!0);return f.splice(0,f.length,i),p=!0,!1}return f=[],m=0,o=t,g.push(f),!0};if(!y())return{lines:g,linesTruncated:!0,wordsBrokenOrTruncated:u,cumulativeHeight:o};for(let i=0;i<t.length;i++){const n=t[i],r=s.width(n),o=0===f.length?0:d,a=m+o+r;if(a<=e)f.push(n),m=a;else if(r<=e){if(!y())break;f.push(n),m=r}else{if(u=!0,!h){if(!y())break;const r=Vt.truncateLine(n,e,s,!0);f.push(r),i<t.length-1&&(p=!0);break}{const t=e-m-o,i=Vt.breakWord(n,t,e,c,s);let r=!1;for(let t=0;t<i.length;t++){const e=i[t];if(e&&f.push(e),t===i.length-1)m=s.width(e);else if(!y()){r=!0;break}}if(r)break}}}return{lines:g,linesTruncated:p,wordsBrokenOrTruncated:u,cumulativeHeight:o}}static wrapLineBalanced(t,e,i,s){const n=t.reduce((t,e)=>t+i.width(e),0),r=i.width(" "),o=(n+r*(t.length-s-2))/s,a=[];let l=[],h=i.width(t[0]),c=!0;for(const s of t){const t=i.width(s);if(c){l=[],l.push(s),h=t,c=!1,a.push(l);continue}const n=h+r+t;n<=o?(l.push(s),h=n):n<=e?(l.push(s),c=!0):(l=[s],h=t,a.push(l))}return a}}function Kt(t){const{fontFamily:e,fontSize:i,fontStyle:s,fontWeight:n}=t;return[null!=s?s:"",null!=n?n:"",i+"px",e].join(" ").trim()}function Ht(t,e,i,s){return ct.has.textMetrics?Yt(t,e,i,s):Ut(t,e,i,s)}function Yt(t,e,i,s){var n,r;let o=0,a=0,l=0,h=0,c=0;const d=Kt(s),{lineHeight:u,textBaseline:p=Vt.defaultStyles.textBaseline,textAlign:g=Vt.defaultStyles.textAlign}=s;for(let e=0;e<t.length;e++){const i=ct.measureText(t[e],d,p,g);o=Math.max(o,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==e?(a+=i.actualBoundingBoxAscent,h+=i.actualBoundingBoxAscent):c+=null!==(n=i.fontBoundingBoxAscent)&&void 0!==n?n:i.emHeightAscent,e==t.length-1?h+=i.actualBoundingBoxDescent:c+=null!==(r=i.fontBoundingBoxDescent)&&void 0!==r?r:i.emHeightDescent}return void 0!==u&&(c=(t.length-1)*u),h+=c,a+=c*Xt(p),new dt(e-o,i-a,l,h)}function Ut(t,e,i,s){let n=0,r=0,o=0;const a=Kt(s),{lineHeight:l,textBaseline:h=Vt.defaultStyles.textBaseline,textAlign:c=Vt.defaultStyles.textAlign}=s;if(t.length>0){const e=ct.getTextSize(t[0],a);n=e.width,r=e.height}for(let e=1;e<t.length;e++){const i=ct.getTextSize(t[e],a);n=Math.max(n,i.width),o+=null!=l?l:i.height}switch(c){case"end":case"right":e-=n;break;case"center":e-=n/2}switch(h){case"alphabetic":i-=.7*r+.5*o;break;case"middle":i-=.45*r+.5*o;break;case"ideographic":i-=r+o;break;case"hanging":i-=.2*r+.5*o;break;case"bottom":i-=r+o}return new dt(e,i,n,r+o)}function Xt(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function $t(t){return"string"==typeof t?t.split(/\r?\n/g):[]}Vt.className="Text",Vt.defaultLineHeightRatio=1.15,Vt.defaultStyles=Object.assign({},jt.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Vt.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],zt([yt({redraw:ft.MAJOR})],Vt.prototype,"x",void 0),zt([yt({redraw:ft.MAJOR})],Vt.prototype,"y",void 0),zt([yt({redraw:ft.MAJOR,changeCb:t=>t._setLines()})],Vt.prototype,"text",void 0),zt([Wt()],Vt.prototype,"fontStyle",void 0),zt([Wt()],Vt.prototype,"fontWeight",void 0),zt([Wt()],Vt.prototype,"fontSize",void 0),zt([Wt()],Vt.prototype,"fontFamily",void 0),zt([yt({redraw:ft.MAJOR})],Vt.prototype,"textAlign",void 0),zt([yt({redraw:ft.MAJOR})],Vt.prototype,"textBaseline",void 0),zt([yt({redraw:ft.MAJOR})],Vt.prototype,"lineHeight",void 0);class qt{constructor(){this.allEventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const{allEventListeners:i}=this;let s=i.get(t);s||(s=new Set,i.set(t,s)),s.has(e)||s.add(e)}removeEventListener(t,e){const{allEventListeners:i}=this,s=i.get(t);s&&(s.delete(e),0===s.size&&i.delete(t))}hasEventListener(t){return this.allEventListeners.has(t)}clearEventListeners(){this.allEventListeners.clear()}fireEvent(t){const e=this.allEventListeners.get(t.type);null==e||e.forEach(e=>e(t))}}const Zt=t=>"string"==typeof t;function Jt(t){return Zt(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"toString")&&Zt(e.toString());var e}function Qt(t){return ee(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&ee(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function te(t,e){return e&&Qt(t)?t:e?void 0:Jt(t)?t:String(t)}const ee=t=>"number"==typeof t&&Number.isFinite(t);class ie{constructor(t,e,i,s=1){this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,i||0)),this.a=Math.min(1,Math.max(0,s||0))}static validColorString(t){return t.indexOf("#")>=0?!!ie.parseHex(t):t.indexOf("rgb")>=0?!!ie.stringToRgba(t):!!ie.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return ie.fromHexString(t);const e=ie.nameToHex[t.toLowerCase()];if(e)return ie.fromHexString(e);if(t.indexOf("rgb")>=0)return ie.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return ie.fromString(t)}catch(e){return Dt.warnOnce(`invalid color string: '${t}'.`),ie.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if((null==e?void 0:e.length)>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=ie.parseHex(t);if(e){const[t,i,s,n]=e;return new ie(t/255,i/255,s/255,n/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let s=0;s<t.length;s++){const n=t[s];if(e||"("!==n){if(")"===n){i=s;break}}else e=s}const s=e&&i&&t.substring(e+1,i);if(!s)return;const n=s.split(","),r=[];for(let t=0;t<n.length;t++){const e=n[t];let i=parseFloat(e);if(isNaN(i))return;e.indexOf("%")>=0?(i=Math.max(0,Math.min(100,i)),i/=100):3===t?i=Math.max(0,Math.min(1,i)):(i=Math.max(0,Math.min(255,i)),i/=255),r.push(i)}return r}static fromRgbaString(t){const e=ie.stringToRgba(t);if(e){if(3===e.length)return new ie(e[0],e[1],e[2]);if(4===e.length)return new ie(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new ie(t[0],t[1],t[2],t[3]);if(3===t.length)return new ie(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,s=1){const n=ie.HSBtoRGB(t,e,i);return new ie(n[0],n[1],n[2],s)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+ie.padHex(Math.round(255*this.r).toString(16))+ie.padHex(Math.round(255*this.g).toString(16))+ie.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=ie.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return ie.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSB(t,e,i){const s=Math.min(t,e,i),n=Math.max(t,e,i);let r=NaN;if(s!==n){const o=n-s,a=(n-t)/o,l=(n-e)/o,h=(n-i)/o;r=t===n?h-l:e===n?2+a-h:4+l-a,r/=6,r<0&&(r+=1)}return[360*r,0!==n?(n-s)/n:0,n]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let s=0,n=0,r=0;if(0===e)s=n=r=i;else{const o=6*(t-Math.floor(t)),a=o-Math.floor(o),l=i*(1-e),h=i*(1-e*a),c=i*(1-e*(1-a));switch(o>>0){case 0:s=i,n=c,r=l;break;case 1:s=h,n=i,r=l;break;case 2:s=l,n=i,r=c;break;case 3:s=l,n=h,r=i;break;case 4:s=c,n=l,r=i;break;case 5:s=i,n=l,r=h}}return[s,n,r]}derive(t,e,i,s){const n=ie.RGBtoHSB(this.r,this.g,this.b);let r=n[2];0==r&&i>1&&(r=.05);const o=((n[0]+t)%360+360)%360,a=Math.max(Math.min(n[1]*e,1),0);r=Math.max(Math.min(r*i,1),0);const l=Math.max(Math.min(this.a*s,1),0),h=ie.HSBtoRGB(o,a,r);return h.push(l),ie.fromArray(h)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=ie.tryParseFromString(t),s=ie.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new ie(e(i.r,s.r),e(i.g,s.g),e(i.b,s.b),e(i.a,s.a)).toString()}}}ie.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const se=Symbol("BREAK");function ne(t,e){return(i,s)=>{const n=s.toString(),r="__"+n,{getters:o,setters:a}=function(t,e,i,s){null==Object.getOwnPropertyDescriptor(t,"__decorator_config")&&Object.defineProperty(t,"__decorator_config",{value:{}});const n=t.__decorator_config;if(null!=n[i])return n[i];n[i]={setters:[],getters:[]};const r=Object.getOwnPropertyDescriptor(t,e),o=null==r?void 0:r.set,a=null==r?void 0:r.get;return Object.defineProperty(t,e,{set:function(t){var r,l;const h=null!==(l=null===(r=n[i])||void 0===r?void 0:r.setters)&&void 0!==l?l:[];let c;h.some(t=>t.length>2)&&(c=a?a.call(this):this[s]);for(const i of h)if((t=i(this,e,t,c))===se)return;o?o.call(this,t):this[s]=t},get:function(){var t,r;let o=a?a.call(this):this[s];for(const s of null!==(r=null===(t=n[i])||void 0===t?void 0:t.getters)&&void 0!==r?r:[])if(o=s(this,e,o),o===se)return;return o},enumerable:!0,configurable:!1}),n[i]}(i,s,n,r);a.push(t),e&&o.splice(0,0,e)}}function re(t){return ne((e,i,s)=>{var n,r,o;if(t(s,{target:e}))return s;const a=i.toString().replace(/^_*/,"");let l=null!==(r=null===(n=e.constructor)||void 0===n?void 0:n.className)&&void 0!==r?r:null===(o=e.constructor)||void 0===o?void 0:o.name;(null==l?void 0:l.length)<3&&(l=null);const h=l?`of [${l}] `:"";return t.message?Dt.warn(`Property [${a}] ${h}cannot be set to [${JSON.stringify(s)}]; ${t.message}, ignoring.`):Dt.warn(`Property [${a}] ${h}cannot be set to [${JSON.stringify(s)}], ignoring.`),se})}function oe(t,e){return t.message=e,t}const ae=(t,e,i)=>void 0===t||i(t,e),le=(t,e)=>oe((i,s)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every(t=>e(t,s))),"expecting an Array"),he=t=>oe((e,i)=>ae(e,i,le(t)),"expecting an optional Array"),ce=(...t)=>oe((e,i)=>t.every(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" AND ")),de=t=>null!=t&&!isNaN(t),ue=t=>oe((e,i)=>!de(e)||!de(i.target[t])||e<i.target[t],"expected to be less than "+t),pe=t=>oe((e,i)=>!de(e)||!de(i.target[t])||e>i.target[t],"expected to be greater than "+t),ge=oe(t=>"function"==typeof t,"expecting a Function"),fe=oe((t,e)=>ae(t,e,ge),"expecting an optional Function"),me=oe(t=>!0===t||!1===t,"expecting a Boolean"),ye=oe((t,e)=>ae(t,e,me),"expecting an optional Boolean"),ve=oe(t=>"string"==typeof t,"expecting a String"),be=oe((t,e)=>ae(t,e,ve),"expecting an optional String"),xe=oe(t=>t instanceof Date&&!isNaN(+t),"expecting a Date object"),Ce=oe((t,e)=>ae(t,e,xe),"expecting an optional Date");oe(le(void 0,xe),"expecting an Array of Date objects");const Se=Ee(0),ke=((...t)=>oe((e,i)=>t.some(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(Ce,oe((t,e)=>ae(t,e,Se),"expecting an optional number")),Oe="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",we=oe(t=>"string"==typeof t&&ie.validColorString(t),"expecting a color String. "+Oe),Te=oe((t,e)=>ae(t,e,we),"expecting an optional color String. "+Oe),De=oe(le(void 0,we),"expecting an Array of color strings. "+Oe),Me=oe((t,e)=>ae(t,e,De),"expecting an optional Array of color strings. "+Oe);function Ee(t,e){return oe(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function Re(t,e){return oe((i,s)=>ae(i,s,Ee(t,e)),"expecting an optional finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function Pe(t,e){return oe(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}const Ae=oe(le(void 0,Ee()),"expecting an Array of numbers"),Le=oe((t,e)=>ae(t,e,Ae),"expecting an optional Array of numbers"),Ie=oe(le(void 0,ve),"expecting an Array of strings");function Ne(...t){return oe(e=>"string"==typeof e&&t.indexOf(e)>=0,"expecting one of: "+t.join(", "))}oe((t,e)=>ae(t,e,Ie),"expecting an optional Array of strings");const Fe=oe(le(void 0,me),"expecting an Array of boolean values");oe((t,e)=>ae(t,e,Fe),"expecting an optional Array of boolean values");const _e=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],Be=oe(t=>"normal"===t||"italic"===t||"oblique"===t,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Ge=oe((t,e)=>ae(t,e,Be),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),je=oe(t=>_e.includes(t),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),ze=oe((t,e)=>ae(t,e,je),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),We=oe(le(void 0,Ee(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Ve=oe((t,e)=>ae(t,e,We),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Ke=["butt","round","square"],He=oe(t=>Ke.includes(t),"expecting a line cap keyword such as 'butt', 'round' or 'square'");oe((t,e)=>ae(t,e,He),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const Ye=["round","bevel","miter"],Ue=oe(t=>Ye.includes(t),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");oe((t,e)=>ae(t,e,Ue),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const Xe=["top","right","bottom","left"],$e=oe(t=>Xe.includes(t),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),qe=["exact","nearest"],Ze=oe(t=>"number"==typeof t&&Number.isFinite(t)||qe.includes(t),"expecting an interaction range of 'exact', 'nearest' or a number"),Je=["never","always","hyphenate","on-space"],Qe=oe(t=>Je.includes(t),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");var ti,ei;function ii(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function si(t){return t.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-")}function ni(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),ee(e)&&ee(i)?[e,i]:[])}!function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(ti||(ti={})),function(t){t.X="x",t.Y="y"}(ei||(ei={}));const ri=Symbol("invalid");class oi{constructor(t){var e;const{props:i}=t;let s=!0;for(const t of i){if("key"===t.type&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&s&&(s=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=i.filter(t=>"key"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.values=i.filter(t=>"value"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.aggregates=i.filter(t=>"aggregate"===t.type),this.groupProcessors=i.filter(t=>"group-value-processor"===t.type),this.propertyProcessors=i.filter(t=>"property-value-processor"===t.type),this.reducers=i.filter(t=>"reducer"===t.type),this.processors=i.filter(t=>"processor"===t.type);for(const{properties:t}of null!==(e=this.aggregates)&&void 0!==e?e:[])if(0!==t.length)for(const e of t){if("string"==typeof e&&!this.values.some(t=>t.property===e))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`);if("string"!=typeof e&&!this.values.some(t=>t.id===e.id))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`)}}resolveProcessedDataIndexById(t){const{keys:e,values:i}=this,s=[...e,...i].find(({id:e})=>e===t);if(s)return"key"===(null==s?void 0:s.type)||"value"===(null==s?void 0:s.type)?{type:s.type,index:s.index}:void 0}resolveProcessedDataDefById(t){const{keys:e,values:i}=this,s=[...e,...i].find(({id:e})=>e===t);if(s)return s}getDomain(t,e){const i=this.resolveProcessedDataIndexById(t);return i?e.domain["key"===i.type?"keys":"values"][i.index]:[]}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:s,groupProcessors:n,reducers:r,processors:o,propertyProcessors:a}=this,l=performance.now();for(const t of[...this.keys,...this.values])t.missing=!1;if(e&&0===this.keys.length)return;let h=this.extractData(t);e?h=this.groupData(h):i&&(h=this.groupData(h,i(h))),n.length>0&&this.postProcessGroups(h),s.length>0&&this.aggregateData(h),a.length>0&&this.postProcessProperties(h),r.length>0&&this.reduceData(h),o.length>0&&this.postProcessData(h);for(const t of[...this.keys,...this.values])t.missing&&Dt.warnOnce(`the key '${t.property}' was not found in at least one data element.`);const c=performance.now();return h.time=c-l,oi.DEBUG()&&function(t){var e,i;const s=(t,e)=>{e.length>0&&(console.log(t),console.table(e))};if(console.log({processedData:t}),s("Key Domains",t.domain.keys),s("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),s("Value Domains",t.domain.values),s("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce((t,e)=>{var i,s;const n=null!==(i=e.keys)&&void 0!==i?i:[],r=null!==(s=e.aggValues)&&void 0!==s?s:[],o=e.keys.map(()=>{}),a=null==r?void 0:r.map(()=>{});return t.push(...e.values.map((t,e)=>[...0===e?n:o,...null!=t?t:[],...0==e?r:a])),t},[]);s("Values",e)}else{const e=t.data.reduce((t,e)=>{var i;const s=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...s]),t},[]);s("Values",e)}}(h),h}valueIdxLookup(t){let e;if(e="string"==typeof t?this.values.findIndex(e=>e.property===t):this.values.findIndex(e=>e.id===t.id),e>=0)return e;throw new Error("AG Charts - configuration error, unknown property: "+t)}extractData(t){const{keys:e,values:i,opts:{dataVisible:s}}=this,{dataDomain:n,processValue:r}=this.initDataDomainProcessor(),o=new Array(s?t.length:0);let a=0;for(const n of t){const t=s?new Array(e.length):void 0;let l,h=0;for(const i of e){if(l=r(i,n,l),l===ri)break;t&&(t[h++]=l)}if(l===ri)continue;const c=s&&i.length>0?new Array(i.length):void 0;let d,u=0;for(const t of i){if(d=r(t,n,d),d===ri)break;c&&(c[u++]=d)}d!==ri&&(s&&(o[a++]={datum:n,keys:t,values:c}))}o.length=a;const l=t=>{var e;const i=n.get(null!==(e=t.id)&&void 0!==e?e:t.property).domain;return Array.isArray(i)&&i[0]>i[1]?[]:[...i]};return{type:"ungrouped",data:o,domain:{keys:e.map(t=>l(t)),values:i.map(t=>l(t))},indices:{keys:e.reduce((t,{property:e,index:i})=>(t[e]=i,t),{}),values:i.reduce((t,{property:e,index:i})=>(t[e]=i,t),{})},defs:{keys:e,values:i},time:0}}groupData(t,e){const i=new Map;for(const s of t.data){const{keys:t,values:n,datum:r}=s,o=e?e(s):t,a=si(o);if(i.has(a)){const t=i.get(a);t.values.push(n),t.datum.push(r)}else i.set(a,{keys:o,values:[n],datum:[r]})}const s=new Array(i.size),n=new Array(i.size);let r=0;for(const[,{keys:t,values:e,datum:o}]of i.entries())n[r]=t,s[r++]={keys:t,values:e,datum:o};return Object.assign(Object.assign({},t),{type:"grouped",data:s,domain:Object.assign(Object.assign({},t.domain),{groups:n})})}aggregateData(t){var e,i,s,n,r,o,a;const{aggregates:l}=this;if(!l)return;const h=l.map(()=>[1/0,-1/0]),c=l.map(t=>t.properties.map(t=>this.valueIdxLookup(t))),d=l.map(t=>t.aggregateFunction),u=l.map(t=>t.groupAggregateFunction),p=l.map(t=>t.finalFunction);for(const l of t.data){let{values:g}=l;null!==(e=l.aggValues)&&void 0!==e||(l.aggValues=new Array(c.length)),"ungrouped"===t.type&&(g=[g]);let f=0;for(const t of c){let e=null!==(s=null===(i=u[f])||void 0===i?void 0:i.call(u))&&void 0!==s?s:ii([]);for(const i of g){const s=t.map(t=>i[t]),o=d[f](s,l.keys);o&&(e=null!==(r=null===(n=u[f])||void 0===n?void 0:n.call(u,o,e))&&void 0!==r?r:ii(o,e))}const c=(null!==(a=null===(o=p[f])||void 0===o?void 0:o.call(p,e))&&void 0!==a?a:e).map(t=>{return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e});ii(c,h[f]),l.aggValues[f++]=c}}t.domain.aggValues=h}postProcessGroups(t){const{groupProcessors:e}=this;if(e)for(const i of e){const e=i.properties.map(t=>this.valueIdxLookup(t)),s=i.adjust();if("grouped"===t.type)for(const i of t.data)for(const t of i.values)t&&s(t,e);else for(const i of t.data)i.values&&s(i.values,e)}}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:s}of e)i()(t,this.valueIdxLookup(s))}reduceData(t){var e;const{reducers:i}=this,s=i.map(t=>t.reducer()),n=i.map(t=>t.initialValue);for(const e of t.data){let t=0;for(const i of s)n[t]=i(n[t],e),t++}for(let s=0;s<n.length;s++)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[i[s].property]=n[s]}postProcessData(t){var e;const{processors:i}=this;for(const s of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[s.property]=s.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Map,s=new Map,n=(t,e,i)=>{"category"===e?i.set(t,{type:e,domain:new Set}):i.set(t,{type:e,domain:[1/0,-1/0]})},r=(s=i)=>(t.forEach(t=>{var e;return n(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,s)}),e.forEach(t=>{var e;return n(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,s)}),s);r();return{dataDomain:i,processValue:(t,e,n)=>{var o,a,l,h,c;const d=t.property in e,u="missingValue"in t;t.missing||d||u||(t.missing=!0),i.has(null!==(o=t.id)&&void 0!==o?o:t.property)||r(i);let p=d?e[t.property]:t.missingValue;if(d){if(!(null===(l=null===(a=t.validation)||void 0===a?void 0:a.call(t,p))||void 0===l||l)){if(!("invalidValue"in t))return ri;p=t.invalidValue}}t.processor&&(s.has(t)||s.set(t,t.processor()),p=null===(h=s.get(t))||void 0===h?void 0:h(p,n!==ri?n:void 0));const g=i.get(null!==(c=t.id)&&void 0!==c?c:t.property);return"category"===(null==g?void 0:g.type)?g.domain.add(p):"range"===(null==g?void 0:g.type)&&(g.domain[0]>p&&(g.domain[0]=p),g.domain[1]<p&&(g.domain[1]=p)),p},initDataDomain:r}}}function ai(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(t=>null!=t).join(" ");Dt.warnOnce(i)}}oi.DEBUG=()=>{var t;return null!==(t=[!0,"data-model"].includes(Pt("agChartsDebug")))&&void 0!==t&&t};var li=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};function hi(t,e){var i,s,n,r;if("string"==typeof t)return t;e=null!=e?e:{};const{content:o=(null!==(i=e.content)&&void 0!==i?i:""),title:a=(null!==(s=e.title)&&void 0!==s?s:void 0),color:l=(null!==(n=e.color)&&void 0!==n?n:"white"),backgroundColor:h=(null!==(r=e.backgroundColor)&&void 0!==r?r:"#888")}=t;return`${a?`<div class="ag-chart-tooltip-title"\n        style="color: ${l}; background-color: ${h}">${a}</div>`:""}<div class="ag-chart-tooltip-content">${o}</div>`}const ci=["pointer","node"],di=oe(t=>ci.includes(t),"expecting a position type keyword such as 'pointer' or 'node'");class ui{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}li([re(di)],ui.prototype,"type",void 0),li([re(Ee())],ui.prototype,"xOffset",void 0),li([re(Ee())],ui.prototype,"yOffset",void 0);class pi{constructor(t,e,i){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new ui,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=i;const s=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(s),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=t,window.IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}if(pi.tooltipDocuments.indexOf(e)<0){const t=e.createElement("style");t.innerHTML='\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow:empty::before,\n.ag-chart-tooltip-arrow:empty::after {\n    visibility: hidden;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n',e.head.insertBefore(t,e.head.querySelector("style")),pi.tooltipDocuments.push(e)}}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains("ag-chart-tooltip-hidden")}updateClass(t,e){const{element:i,class:s,lastClass:n,enableInteraction:r}=this,o=(t,e)=>{const s="ag-chart-tooltip-"+t;e?i.classList.add(s):i.classList.remove(s)};o("no-animation",!this.isVisible()&&!!t),o("no-interaction",!r),o("hidden",!t),o("arrow",!!e),s!==n&&(n&&i.classList.remove(n),s&&i.classList.add(s),this.lastClass=s)}show(t,e,i=!1){var s,n,r,o,a,l,h;const{element:c,canvasElement:d}=this;if(void 0!==e)c.innerHTML=e;else if(!c.innerHTML)return;const u=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(n=null===(s=t.position)||void 0===s?void 0:s.xOffset)&&void 0!==n?n:0,g=null!==(o=null===(r=t.position)||void 0===r?void 0:r.yOffset)&&void 0!==o?o:0,f=d.getBoundingClientRect(),m=f.left+t.offsetX-c.clientWidth/2+p,y=f.top+t.offsetY-c.clientHeight-8+g,v=this.getWindowBoundingBox(),b=v.x+v.width-c.clientWidth-1,x=v.y+v.height-c.clientHeight,C=u(v.x,m,b),S=u(v.y,y,x),k=!(C!==m||S!==y)&&!p&&!g,O=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:k;if(this.updateShowArrow(O),c.style.transform=`translate(${Math.round(C)}px, ${Math.round(S)}px)`,this.enableInteraction=null!==(h=t.enableInteraction)&&void 0!==h&&h,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new dt(0,0,window.innerWidth,window.innerHeight)}toggle(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,s=Boolean(["","-title","-content"].filter(t=>null==i?void 0:i.contains("ag-chart-tooltip"+t)));return void 0!==i&&s}updateShowArrow(t){this._showArrow=t}}function gi(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function fi(t){return{properties:t,type:"aggregate",aggregateFunction:t=>gi(t)}}function mi(t,e){const i={properties:t,type:"aggregate",aggregateFunction:(t,i=[])=>{const s=i[1]-i[0];return e.aggregateFunction(t).map(t=>t/s)}};return e.groupAggregateFunction&&(i.groupAggregateFunction=e.groupAggregateFunction),i}pi.tooltipDocuments=[],li([re(me)],pi.prototype,"enabled",void 0),li([re(ye)],pi.prototype,"showArrow",void 0),li([re(be)],pi.prototype,"class",void 0),li([re(Ee(0))],pi.prototype,"delay",void 0),li([function(t,e){const i=ai();return ne((s,n,r)=>(r!==s[t]&&(i(n.toString(),`Use [${t}] instead.`),s[t]=e?e(r):r),se),(e,s)=>(i(s.toString(),`Use [${t}] instead.`),e[t]))}("range",t=>t?"nearest":"exact")],pi.prototype,"tracking",void 0),li([re(Ze)],pi.prototype,"range",void 0);var yi,vi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},bi=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};function xi(t,e,i={}){return Object.assign({property:t,type:"key",valueType:e?"range":"category",validation:t=>null!=te(t,e)},i)}function Ci(t,e,i={}){return Object.assign({property:t,type:"value",valueType:e?"range":"category",validation:t=>null!=te(t,e)},i)}function Si(t,e,i={}){return Object.assign(Object.assign({},Ci(t,e,i)),{processor:()=>{let t=0;return e=>"number"!=typeof e||isNaN(e)?e:(t+=e,t)}})}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(yi||(yi={}));class ki{constructor(t,e,i){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=i.id}}class Oi extends ki{}class wi extends ki{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Ti{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}}vi([re(Te)],Ti.prototype,"fill",void 0),vi([re(Re(0,1))],Ti.prototype,"fillOpacity",void 0),vi([re(Te)],Ti.prototype,"stroke",void 0),vi([re(Re(0))],Ti.prototype,"strokeWidth",void 0);class Di{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}vi([re(Re(0))],Di.prototype,"strokeWidth",void 0),vi([re(Re(0,1))],Di.prototype,"dimOpacity",void 0),vi([re(ye)],Di.prototype,"enabled",void 0);class Mi{constructor(){this.color="black"}}vi([re(Te)],Mi.prototype,"color",void 0);class Ei{constructor(){this.item=new Ti,this.series=new Di,this.text=new Mi}}class Ri{constructor(){this.enabled=!0,this.showArrow=void 0,this.interaction=new Pi,this.position=new ui}}vi([re(me)],Ri.prototype,"enabled",void 0),vi([re(ye)],Ri.prototype,"showArrow",void 0);class Pi{constructor(){this.enabled=!1}}vi([re(me)],Pi.prototype,"enabled",void 0);class Ai extends qt{constructor(t){super(),this.id=gt(this),this.rootGroup=new Et({name:"seriesRoot"}),this.directions=[ei.X,ei.Y],this.nodeDataRefresh=!0,this._data=void 0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this._declarationOrder=-1,this.highlightStyle=new Ei,this.ctx=t.moduleCtx;const{useSeriesGroupLayer:e=!0,useLabelLayer:i=!1,pickModes:s=[yi.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:n={},directionNames:r={}}=t,{rootGroup:o}=this;this.directionKeys=n,this.directionNames=r,this.contentGroup=o.appendChild(new Et({name:this.id+"-content",layer:e,zIndex:ti.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,0]})),this.highlightGroup=o.appendChild(new Et({name:this.id+"-highlight",layer:!0,zIndex:ti.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,15e3]})),this.highlightNode=this.highlightGroup.appendChild(new Et({name:"highlightNode"})),this.highlightLabel=this.highlightGroup.appendChild(new Et({name:"highlightLabel"})),this.highlightNode.zIndex=0,this.highlightLabel.zIndex=10,this.pickModes=s,i&&(this.labelGroup=o.appendChild(new Et({name:this.id+"-series-labels",layer:!0,zIndex:ti.SERIES_LABEL_ZINDEX})))}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.nodeDataRefresh=!0}get data(){return this._data}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}getBandScalePadding(){return{inner:1,outer:0}}addChartEventListeners(){}destroy(){}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=null==e?void 0:e[i],n=[],r=(...t)=>{for(const e of t)o(e)},o=t=>{Array.isArray(t)?r(...t):"object"==typeof t?r(Object.values(t)):n.push(t)};return s?(s.forEach(t=>{const e=this[t];o(e)}),n):n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){}getOpacity(t){const{highlightStyle:{series:{dimOpacity:e=1,enabled:i=!0}}}=this;if(!1===i||1===e)return 1;switch(this.isItemIdHighlighted(t)){case"no-highlight":case"highlighted":return 1;case"peer-highlighted":case"other-highlighted":return e}}getStrokeWidth(t,e){const{highlightStyle:{series:{strokeWidth:i,enabled:s=!0}}}=this;if(!1===s||void 0===i)return t;switch(this.isItemIdHighlighted(e)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return t}}isItemIdHighlighted(t){var e;const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),{series:s,itemId:n}=null!=i?i:{};return null!=s?s!==this?"other-highlighted":void 0===n?"highlighted":t&&i!==t&&n!==t.itemId?"peer-highlighted":"highlighted":"no-highlight"}pickNode(t,e){const{pickModes:i,visible:s,rootGroup:n}=this;if(s&&n.visible)for(const s of i){if(e&&!e.includes(s))continue;let i=void 0;switch(s){case yi.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case yi.NEAREST_BY_MAIN_AXIS_FIRST:case yi.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,s===yi.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case yi.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:s,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){const i=this.getNodeClickEvent(t,e);this.fireEvent(i)}fireNodeDoubleClickEvent(t,e){const i=this.getNodeDoubleClickEvent(t,e);this.fireEvent(i)}getNodeClickEvent(t,e){return new Oi(t,e,this)}getNodeDoubleClickEvent(t,e){return new wi(t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0}isEnabled(){return this.visible}fixNumericExtent(t,e){var i;const s=ni(t);if(0===s.length)return s;let[n,r]=s;if(n===r){const t=null!==(i=null==e?void 0:e.calculatePadding(n,r))&&void 0!==i?i:1;n-=t,r+=t}return[n,r]}}Ai.highlightedZIndex=1e12,vi([re(ve)],Ai.prototype,"id",void 0),vi([re(me)],Ai.prototype,"_visible",void 0),vi([re(me)],Ai.prototype,"showInLegend",void 0),vi([re(ve)],Ai.prototype,"cursor",void 0),vi([re(Ze)],Ai.prototype,"nodeClickRange",void 0);var Li=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Ii{constructor(t=0,e=t,i=t,s=e){this.top=t,this.right=e,this.bottom=i,this.left=s}clear(){this.top=this.right=this.bottom=this.left=0}}Li([re(Ee(0))],Ii.prototype,"top",void 0),Li([re(Ee(0))],Ii.prototype,"right",void 0),Li([re(Ee(0))],Ii.prototype,"bottom",void 0),Li([re(Ee(0))],Ii.prototype,"left",void 0);class Ni{static init(){const t=window.ResizeObserver;if(t)this.resizeObserver=new t(t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}});else{const t=()=>{this.elements.forEach((t,e)=>{this.checkClientSize(e,t)})};window.setInterval(t,100)}this.ready=!0}static checkSize(t,e,i,s){t&&(t.size&&i===t.size.width&&s===t.size.height||(t.size={width:i,height:s},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(),this.unobserve(t),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})}static unobserve(t){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t)}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,s=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,s)}}function Fi(t,e,i,s,n){let r=t.x;t.x<e?r=e:t.x>e+s&&(r=e+s);let o=t.y;t.y<i?o=i:t.y>i+n&&(o=i+n);const a=t.x-r,l=t.y-o;return Math.sqrt(a*a+l*l)<=.5*t.size}function _i(t,e,i,s,n){const r=t.x+t.width>e&&t.x<e+s,o=t.y+t.height>i&&t.y<i+n;return r&&o}Ni.elements=new Map,Ni.ready=!1;var Bi,Gi=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};function ji(t,e){let i,s,n=0,r=!1;const o=()=>r,a=()=>{r=!1,null==s||s(),s=void 0,i=void 0,n>0&&t(l)},l=()=>{const t=n;n=0,r=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(){0!==n||o()||t(l),n++},await(){return Gi(this,void 0,void 0,(function*(){if(o())for(i||(i=new Promise(t=>{s=t}));o();)yield i}))}}}function zi(t,e,i,s){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const s=e*e-4*t*i,n=[];if(0===s){const i=-e/(2*t);i>=0&&i<=1&&n.push(i)}else if(s>0){const i=Math.sqrt(s),r=(-e-i)/(2*t),o=(-e+i)/(2*t);r>=0&&r<=1&&n.push(r),o>=0&&o<=1&&n.push(o)}return n}(e,i,s);const n=e/t,r=i/t,o=(3*r-n*n)/9,a=(9*n*r-27*(s/t)-2*n*n*n)/54,l=o*o*o+a*a,h=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),1/3),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),1/3),s=Math.abs(Math.sqrt(3)*(e-i)/2),r=-1/3*n+(e+i);if(r>=0&&r<=1&&h.push(r),0===s){const t=-1/3*n-(e+i)/2;t>=0&&t<=1&&h.push(t)}}else{const t=Math.acos(a/Math.sqrt(-o*o*o)),e=1/3*n,i=2*Math.sqrt(-o),s=i*Math.cos(1/3*t)-e,r=i*Math.cos(1/3*(t+2*Math.PI))-e,l=i*Math.cos(1/3*(t+4*Math.PI))-e;s>=0&&s<=1&&h.push(s),r>=0&&r<=1&&h.push(r),l>=0&&l<=1&&h.push(l)}return h}function Wi(t,e,i,s,n,r,o,a){const l=(i-t)*(a-r)-(s-e)*(o-n);if(0===l)return null;const h=((o-n)*(e-r)-(t-n)*(a-r))/l,c=((i-t)*(e-r)-(s-e)*(t-n))/l;return h>=0&&h<=1&&c>=0&&c<=1?{x:t+h*(i-t),y:e+h*(s-e)}:null}function Vi(t,e,i,s,n,r,o,a,l,h,c,d){const u=[],p=h-d,g=c-l,f=l*(d-h)-h*(c-l),m=Ki(t,i,n,o),y=Ki(e,s,r,a),v=zi(p*m[0]+g*y[0],p*m[1]+g*y[1],p*m[2]+g*y[2],p*m[3]+g*y[3]+f);for(const t of v){const e=t*t,i=t*e,s=m[0]*i+m[1]*e+m[2]*t+m[3],n=y[0]*i+y[1]*e+y[2]*t+y[3];let r;r=l!==c?(s-l)/(c-l):(n-h)/(d-h),r>=0&&r<=1&&u.push({x:s,y:n})}return u}function Ki(t,e,i,s){return[3*e-t-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function Hi(t,e,i,s,n,r,o,a,l,h){const c=(h-a)/(l-o),d=a-c*o,u=Math.pow(c,2)+1,p=2*(c*(d-e)-t),g=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),f=Math.pow(p,2)-4*u*g;if(f<0)return[];const m=(-p+Math.sqrt(f))/2/u,y=(-p-Math.sqrt(f))/2/u,v=[];return[m,y].forEach(t=>{if(!(t>=Math.min(o,l)&&t<=Math.max(o,l)))return;const e=c*t,i=Nt(r?n:s);let a=Nt(r?s:n),h=Nt(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),h<i&&(h+=2*Math.PI),h>=i&&h<=a&&v.push({x:t,y:e})}),v}!function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(Bi||(Bi={}));class Yi{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let s=0;t.beginPath();for(const n of e)switch(n){case Bi.Move:t.moveTo(i[s++],i[s++]);break;case Bi.Line:t.lineTo(i[s++],i[s++]);break;case Bi.Curve:t.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case Bi.Arc:t.arc(i[s++],i[s++],i[s++],i[s++],i[s++],1===i[s++]);break;case Bi.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(Bi.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(Bi.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}arc(t,e,i,s,n,r=!1){const o=t+i*Math.cos(n),a=e+i*Math.sin(n);this.xy?(this.xy[0]=o,this.xy[1]=a):this.xy=[o,a],this.commands.push(Bi.Arc),this.params.push(t,e,i,s,n,r?1:0)}cubicCurveTo(t,e,i,s,n,r){this.xy||this.moveTo(t,e),this.commands.push(Bi.Curve),this.params.push(t,e,i,s,n,r),this.xy[0]=n,this.xy[1]=r}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(Bi.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,s=this.params,n=i.length,r=-1e4,o=-1e4;let a=NaN,l=NaN,h=0,c=0,d=0;for(let u=0,p=0;u<n;u++)switch(i[u]){case Bi.Move:isNaN(a)||Wi(a,l,h,c,r,o,t,e)&&d++,h=s[p++],a=h,c=s[p++],l=c;break;case Bi.Line:Wi(h,c,s[p++],s[p++],r,o,t,e)&&d++,h=s[p-2],c=s[p-1];break;case Bi.Curve:d+=Vi(h,c,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],r,o,t,e).length,h=s[p-2],c=s[p-1];break;case Bi.Arc:d+=Hi(s[p++],s[p++],s[p++],s[p++],s[p++],Boolean(s[p++]),r,o,t,e).length,h=s[p-2],c=s[p-1];break;case Bi.ClosePath:isNaN(a)||Wi(a,l,h,c,r,o,t,e)&&d++}return d%2==1}}var Ui=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};function Xi(t){const{redraw:e=ft.MAJOR,changeCb:i,convertor:s}=null!=t?t:{};return yt({redraw:e,type:"path",convertor:s,changeCb:i})}class $i extends jt{constructor(){super(...arguments),this.path=new Yi,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,ft.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i;const{ctx:s,forceRender:n,stats:r}=t;if(this.dirty!==ft.NONE||n){if(this.computeTransformMatrix(),this.matrix.toContext(s),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(s.save(),"normal"===this.clipMode&&(this.clipPath.draw(s),s.clip()),this.path.draw(s),this.fillStroke(s),"punch-out"===this.clipMode){this.clipPath.draw(s),s.clip();const{x:t=-1e4,y:i=-1e4,width:n=2e4,height:r=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};s.clearRect(t,i,n,r)}s.restore()}else this.path.draw(s),this.fillStroke(s);null===(i=this.fillShadow)||void 0===i||i.markClean(),super.render(t)}else r&&(r.nodesSkipped+=this.nodeCount.count)}}$i.className="Path",Ui([Xi()],$i.prototype,"clipPath",void 0),Ui([Xi()],$i.prototype,"clipMode",void 0);var qi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Zi extends $i{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,s=i/2;return new dt(t-s,e-s,i,i)}applyPath(t,e){const{path:i}=this;let{x:s,y:n}=this;i.clear();for(const{x:r,y:o,t:a}of e)s+=r*t,n+=o*t,"move"===a?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}}qi([Xi()],Zi.prototype,"x",void 0),qi([Xi()],Zi.prototype,"y",void 0),qi([Xi({convertor:Math.abs})],Zi.prototype,"size",void 0);class Ji extends Zi{updatePath(){const{x:t,y:e,path:i,size:s}=this,n=s/2;i.clear(),i.arc(t,e,n,0,2*Math.PI),i.closePath()}}Ji.className="Circle";var Qi=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const ts=["circle","cross","diamond","heart","plus","square","triangle"],es=oe(t=>ts.includes(t)||Object.getPrototypeOf(t)===Zi,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class is extends vt{constructor(){super(...arguments),this.enabled=!0,this.shape=Ji,this.size=6,this.maxSize=30,this.domain=void 0,this.fill=void 0,this.stroke=void 0,this.strokeWidth=1,this.fillOpacity=void 0,this.strokeOpacity=void 0}}Qi([re(me),yt({redraw:ft.MAJOR})],is.prototype,"enabled",void 0),Qi([re(es),yt({redraw:ft.MAJOR})],is.prototype,"shape",void 0),Qi([re(Ee(0)),yt({redraw:ft.MAJOR})],is.prototype,"size",void 0),Qi([re(Ee(0)),yt({redraw:ft.MAJOR})],is.prototype,"maxSize",void 0),Qi([re(Le),yt({redraw:ft.MAJOR})],is.prototype,"domain",void 0),Qi([re(Te),yt({redraw:ft.MAJOR})],is.prototype,"fill",void 0),Qi([re(Te),yt({redraw:ft.MAJOR})],is.prototype,"stroke",void 0),Qi([re(Re(0)),yt({redraw:ft.MAJOR})],is.prototype,"strokeWidth",void 0),Qi([re(Re(0,1)),yt({redraw:ft.MAJOR})],is.prototype,"fillOpacity",void 0),Qi([re(Re(0,1)),yt({redraw:ft.MAJOR})],is.prototype,"strokeOpacity",void 0);class ss{constructor(t,e){this._nodes=[],this._data=[],this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(St,e)?()=>new e:e}static select(t,e){return new ss(t,e)}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}update(t,e){const i=this._data,s=this._parent,n=this._factory;t.length>i.length?t.slice(i.length).forEach(t=>{const i=n(t);i.datum=t,null==e||e(i),s.appendChild(i),this._nodes.push(i)}):t.length<i.length&&this._nodes.splice(t.length).forEach(t=>{s.removeChild(t)}),this._data=t.slice(0);for(let e=0;e<t.length;e++)this._nodes[e].datum=this._data[e];return this}clear(){return this.update([]),this}static selectAll(t,e){const i=[],s=t=>{e(t)&&i.push(t),t.children.forEach(s)};return s(t),i}static selectByClass(t,e){return ss.selectAll(t,t=>t instanceof e)}static selectByTag(t,e){return ss.selectAll(t,t=>t.tag===e)}select(t){return ss.selectAll(this._parent,t)}selectByClass(t){return this.select(e=>e instanceof t)}selectByTag(t){return this.select(e=>e.tag===t)}nodes(){return this._nodes}}function ns(t,e,i){return Math.max(e,Math.min(i,t))}class rs{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((t,i)=>i%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=ns(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=ns(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=ns(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,s=this._paddingOuter,[n,r]=this.range,o=r-n,a=o/Math.max(1,t+2*s-i),l=e?Math.floor(a):a,h=n+(o-l*(t-i))/2,c=e?Math.round(h):h,d=l*(1-i),u=e?Math.round(d):d,p=a*(1-i),g=[];for(let e=0;e<t;e++)g.push(c+l*e);this._bandwidth=u,this._rawBandwidth=p,this.ordinalRange=g}}var os=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class as extends jt{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}computeBBox(){return new dt(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:s,stats:n}=t;if(this.dirty===ft.NONE&&!s)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let r=this.x1,o=this.y1,a=this.x2,l=this.y2;if(r===a){const t=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=t,a=t}else if(o===l){const t=Math.round(o)+Math.floor(this.strokeWidth)%2/2;o=t,l=t}i.beginPath(),i.moveTo(r,o),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function ls(t,e,i=1e-10){return Math.abs(t-e)<i}function hs(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}as.className="Line",as.defaultStyles=Object.assign({},jt.defaultStyles,{fill:void 0,strokeWidth:1}),os([yt({redraw:ft.MAJOR})],as.prototype,"x1",void 0),os([yt({redraw:ft.MAJOR})],as.prototype,"y1",void 0),os([yt({redraw:ft.MAJOR})],as.prototype,"x2",void 0),os([yt({redraw:ft.MAJOR})],as.prototype,"y2",void 0);var cs,ds=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};!function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(cs||(cs={}));class us extends $i{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=cs.Open,this.restoreOwnStyles()}get fullPie(){return ls(Nt(this.startAngle),Nt(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===cs.Chord?t.closePath():this.type!==cs.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new dt(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return this.type!==cs.Open&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}function ps(t,e){return ne((i,s,n)=>(i[t][null!=e?e:s]=n,n))}function gs(t){const{newValue:e,oldValue:i,changeValue:s}=t;return ne((t,n,r,o)=>(r!==o&&(void 0!==o&&(null==i||i.call(t,o)),void 0!==r&&(null==e||e.call(t,r)),null==s||s.call(t,r,o)),r))}us.className="Arc",us.defaultStyles=Object.assign({},jt.defaultStyles,{lineWidth:1,fillStyle:null}),ds([Xi()],us.prototype,"centerX",void 0),ds([Xi()],us.prototype,"centerY",void 0),ds([Xi()],us.prototype,"radius",void 0),ds([Xi()],us.prototype,"startAngle",void 0),ds([Xi()],us.prototype,"endAngle",void 0),ds([Xi()],us.prototype,"counterClockwise",void 0),ds([Xi()],us.prototype,"type",void 0);var fs=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ms{constructor(){this.node=new Vt,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=ms.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=bt.None}computeTextWrap(t,e){var i,s;const{text:n,wrapping:r}=this,o=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(s=this.maxHeight)&&void 0!==s?s:e;if(!isFinite(o)&&!isFinite(a))return void(this.node.text=n);const l=Vt.wrap(null!=n?n:"",o,a,this,r);this.node.text=l}}function ys(t,e){return t.length===e.length&&t.every((t,i)=>{const s=e[i];return Array.isArray(t)&&Array.isArray(s)?ys(t,s):t===s})}function vs(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}ms.PADDING=10,fs([re(me)],ms.prototype,"enabled",void 0),fs([re(be),ps("node")],ms.prototype,"text",void 0),fs([re(Ge),ps("node")],ms.prototype,"fontStyle",void 0),fs([re(ze),ps("node")],ms.prototype,"fontWeight",void 0),fs([re(Ee(0)),ps("node")],ms.prototype,"fontSize",void 0),fs([re(ve),ps("node")],ms.prototype,"fontFamily",void 0),fs([re(Te),ps("node","fill")],ms.prototype,"color",void 0),fs([re(Re(0))],ms.prototype,"spacing",void 0),fs([re(Re(0))],ms.prototype,"lineHeight",void 0),fs([re(Re(0))],ms.prototype,"maxWidth",void 0),fs([re(Re(0))],ms.prototype,"maxHeight",void 0),fs([re(Qe)],ms.prototype,"wrapping",void 0);class bs{constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=bs.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}fromDomain(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain}convert(t,e){var i;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const s=null!==(i=null==e?void 0:e.strict)&&void 0!==i?i:this.strictClampByDefault,n=this.getDomain().map(t=>this.transform(t)),[r,o]=n,{range:a}=this,[l,h]=a;return(t=this.transform(t))<r?s?NaN:l:t>o?s?NaN:h:r===o?(l+h)/2:t===r?l:t===o?h:l+(this.fromDomain(t)-this.fromDomain(r))/(this.fromDomain(o)-this.fromDomain(r))*(h-l)}invert(t){this.refresh();const e=this.getDomain().map(t=>this.transform(t)),[i,s]=e,{range:n}=this,[r,o]=n,a=r>o;let l;return t<(a?o:r)?a?s:i:t>(a?r:o)?a?i:s:(l=r===o?this.toDomain((this.fromDomain(i)+this.fromDomain(s))/2):this.toDomain(this.fromDomain(i)+(t-r)/(o-r)*(this.fromDomain(s)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}isDenseInterval({start:t,stop:e,interval:i,count:s}){const{range:n}=this,r=e-t,o=Math.min(n[0],n[1]);return null!=s||(s=r/("number"==typeof i?i:1)),s>=Math.max(n[0],n[1])-o&&(Dt.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}function xs(t,e,i,s,n){if(i<2)return Os(t,e,e-t);const r=Ss(t,e,i,s,n);return isNaN(r)?new ks(0):Os(t=Math.ceil(t/r)*r,e=Math.floor(e/r)*r,r)}bs.defaultTickCount=5,bs.defaultMaxTickCount=6;const Cs=[1,2,5,10];function Ss(t,e,i,s=0,n=1/0){const r=(e-t)/i,o=Math.floor(Math.log10(r)),a=Math.pow(10,o),l=Cs.map(r=>{const o=r*a,l=Math.ceil((e-t)/o);return{multiplier:r,isWithinBounds:l>=s&&l<=n,diffCount:Math.abs(l-i)}}).sort((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class ks extends Array{constructor(t,e){if(super(),e)for(let t=0,i=e.length;t<i;t++)this[t]=e[t];this.fractionDigits=t}}function Os(t,e,i){const s=(t=>{var e,i;const s=t.split("e");return Math.max((null!==(i=null===(e=s[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(s[1]),0)})((i%1).toExponential()),n=Math.pow(10,s),r=Math.ceil((e-t)/i),o=new ks(s);for(let e=0;e<=r;e++){const s=t+i*e;o.push(Math.round(s*n)/n)}return o}const ws={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Ts(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+6e4*i;return Math.floor(s/864e5)}function Ds(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,s=new Date(t.getFullYear(),0,i+1);return s<=t?Math.floor(Ts(t,s)/7)+1:0}const Ms={a:t=>ws.shortDays[t.getDay()],A:t=>ws.days[t.getDay()],b:t=>ws.shortMonths[t.getMonth()],B:t=>ws.months[t.getMonth()],c:"%x, %X",d:(t,e)=>Rs(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>Rs(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>Rs(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":Rs(i,2,null!=e?e:"0")},j:(t,e)=>Rs(Ts(t)+1,3,null!=e?e:"0"),m:(t,e)=>Rs(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>Rs(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>Rs(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>Rs(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>Rs(Ds(t,0),2,null!=e?e:"0"),V:(t,e)=>Rs(function t(e,i=e.getFullYear()){const s=new Date(i,0,1).getDay(),n=new Date(i,0,(4-s+7)%7-3+1);return n<=e?Math.floor(Ts(e,n)/7)+1:t(e,i-1)}(t),2,null!=e?e:"0"),w:(t,e)=>Rs(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>Rs(Ds(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>Rs(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>Rs(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${Rs(Math.floor(i/60),2,"0")}${Rs(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},Es={_:" ",0:"0","-":""};function Rs(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function Ps(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const s=i>0?t.substring(0,i):t;e.push(s)}if(i<0)break;const s=t[i+1],n=Es[s];null!=n&&i++;const r=t[i+1],o=Ms[r];if("function"==typeof o)e.push([o,n]);else if("string"==typeof o){const t=Ps(o);e.push([t,n])}else e.push(`${null!=n?n:""}${r}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}var As;!function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(As||(As={}));const Ls={[As.MILLISECOND]:".%L",[As.SECOND]:":%S",[As.MINUTE]:"%I:%M",[As.HOUR]:"%I %p",[As.WEEK_DAY]:"%a",[As.SHORT_MONTH]:"%b %d",[As.MONTH]:"%B",[As.SHORT_YEAR]:"%y",[As.YEAR]:"%Y"};function Is(t){return t instanceof Date?t.getTime():t}class Ns extends bs{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=et,this.month=tt,this.week=U,this.day=K,this.hour=V,this.minute=z,this.second=G,this.millisecond=_,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=As.YEAR;const i=t=>{t<e&&(e=t)};for(const e of t){i(this.getLowestGranularityFormat(e))}const s=Is(t[0]),n=Is(t[t.length-1]),r=new Date(s).getFullYear(),o=new Date(n).getFullYear()-r>0;return this.buildFormatString(e,o)}buildFormatString(t,e){let i=[Ls[t]],s=0;const n=this.getDomain(),r=Math.min(...n.map(Is)),o=Math.max(...n.map(Is))-r;switch(t){case As.SECOND:o/6e4>1&&i.push(Ls[As.MINUTE]);case As.MINUTE:o/36e5>1&&i.push(Ls[As.HOUR]);case As.HOUR:s=i.length,o/864e5>1&&i.push(Ls[As.WEEK_DAY]);case As.WEEK_DAY:if(o/6048e5>1||e){const t=i.indexOf(Ls[As.WEEK_DAY]);t>-1&&i.splice(t,1,Ls[As.SHORT_MONTH])}case As.SHORT_MONTH:case As.MONTH:(o/31536e6>1||e)&&i.push(Ls[As.YEAR])}return s<i.length&&(i=[...i.slice(0,s),i.slice(s).join(" ")]),s>0&&(i=[...i.slice(0,s).reverse(),...i.slice(s)],s<i.length&&i.splice(s,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?As.MILLISECOND:this.minute.floor(t)<t?As.SECOND:this.hour.floor(t)<t?As.MINUTE:this.day.floor(t)<t?As.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?As.WEEK_DAY:As.SHORT_MONTH:this.year.floor(t)<t?As.MONTH:As.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>Ps(e)(t)}getTickInterval({start:t,stop:e,count:i,minCount:s,maxCount:n}){const{tickIntervals:r}=this;let o,a;const l=null!=i?i:bs.defaultTickCount,h=Math.abs(e-t)/Math.max(l,1);let c=0;for(;c<r.length&&h>r[c][2];)c++;if(0===c)a=Math.max(Ss(t,e,l,s,n),1),o=this.millisecond;else if(c===r.length){a=Ss(t/31536e6,e/31536e6,l,s,n),o=this.year}else{const t=h-r[c-1][2]<r[c][2]-h?c-1:c;[o,a]=r[t]}return o.every(a)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Is);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:s}=this;if(!i)return[];if(i instanceof N){const s=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:s.length})?this.getDefaultTicks({start:t,stop:e}):s}const n=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:n}))return this.getDefaultTicks({start:t,stop:e});const r=[...s];r.reverse();const o=r.find(t=>n%t[2]==0);if(o){return o[0].every(n/(o[2]/o[1])).range(new Date(t),new Date(e))}let a=new Date(t);const l=new Date(e),h=[];for(;a<=l;)h.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+n);return h}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):Ps(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,s]=this.niceDomain;if(Is(t)===Is(i)&&Is(e)===Is(s))break;t=i,e=s}}updateNiceDomainIteration(t,e){const i=Is(t),s=Is(e),{interval:n}=this;let r;if(n instanceof N)r=n;else{const t="number"==typeof n?(s-i)/Math.max(n,1):this.tickCount;r=this.getTickInterval({start:i,stop:s,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const i=r.range(t,e,!0),s=i[0],n=i[i.length-1];this.niceDomain=[s,n]}}}const Fs=t=>`(${t})`,_s=t=>Fs(t)+"?",Bs=t=>_s("?:"+t),Gs=new RegExp(["^",Bs(`${_s(".")}${Fs("[<>=^]")}`),_s("[+\\-( ]"),_s("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),_s("0"),_s("\\d+"),_s(","),Bs("\\."+Fs("\\d+")),_s("~"),_s("[%a-z]"),"$"].join(""),"i"),js=new RegExp(["^",Fs(".*?"),`#\\{${Fs(".+?")}\\}`,Fs(".*?"),"$"].join(""));function zs(t){let e,i;const s=js.exec(t);s&&([,e,t,i]=s);const n=Gs.exec(t);if(!n)throw new Error("The number formatter is invalid: "+t);const[,r,o,a,l,h,c,d,u,p,g]=n;return{fill:r,align:o,sign:a,symbol:l,zero:h,width:parseInt(c),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:e,suffix:i}}function Ws(t){const e="string"==typeof t?zs(t):t,{fill:i,align:s,sign:n="-",symbol:r,zero:o,width:a,comma:l,type:h,prefix:c="",suffix:d=""}=e;let u,{precision:p,trim:g}=e;if(h)if(h in Hs&&h in Ks)u=isNaN(p)?Ks[h]:Hs[h];else if(h in Hs)u=Hs[h];else{if(!(h in Ks))throw new Error("The number formatter type is invalid: "+h);u=Ks[h]}else u=Hs.g,g=!0;return isNaN(p)&&(p=h?6:12),t=>{let e=u(t,p);return g&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),n=t.substring(i);for(let t=s.length-3;t>0;t-=3)s.splice(t,0,e);return`${s.join("")}${n}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const s="+"===i?"+":"";return`${t>=0?s:"\u2212"}${e}`}(t,e,n),r&&"#"!==r&&(e=`${r}${e}`),"#"===r&&"x"===h&&(e="0x"+e),"s"===h&&(e=`${e}${function(t){return $s[Ys(t)]}(t)}`),"%"!==h&&"p"!==h||(e+="%"),isNaN(a)||(e=function(t,e,i=" ",s=">"){let n=t;if(">"!==s&&s){if("<"===s)n=n.padEnd(e,i);else if("^"===s){const t=Math.max(0,e-n.length),s=Math.ceil(t/2),r=Math.floor(t/2);n=n.padStart(s+n.length,i),n=n.padEnd(r+n.length,i)}}else n=n.padStart(e,i);return n}(e,a,null!=i?i:o,s)),e=`${c}${e}${d}`,e}}const Vs=t=>Math.floor(Math.abs(t)),Ks={b:t=>Vs(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>Vs(t).toString(8),x:t=>Vs(t).toString(16),X:t=>Ks.x(t).toUpperCase(),n:t=>Ks.d(t),"%":t=>""+Vs(100*t).toFixed(0)},Hs={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>Hs.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>Hs.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>Hs.g(t,e).toUpperCase(),n:(t,e)=>Hs.g(t,e),p:(t,e)=>Hs.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i))-(e-1);if(s<=0)return i.toFixed(-s);const n=Math.pow(10,s);return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=Ys(t);return Hs.r(t/Math.pow(10,i),e)},"%":(t,e)=>Hs.f(100*t,e)};function Ys(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(Us,Math.min(Xs,i))}const Us=-24,Xs=24,$s={[Us]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Xs]:"Y"};var qs=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const Zs=t=>t;class Js extends bs{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=Zs,this.basePow=Zs,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t)}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?Js.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),s=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,s]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[s,n]=this.getDomain();let r=this.log(s),o=this.log(n);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(o-r),i=Os(r,o,Math.min(e,t)).map(t=>this.pow(t)).filter(t=>t>=s&&t<=n);if(!this.isDenseInterval({start:s,stop:n,interval:t,count:i.length}))return i}if(!(i%1==0)||o-r>=e)return xs(r,o,Math.min(o-r,e)).map(t=>this.pow(t));const a=[],l=s>0;r=Math.floor(r)-1,o=Math.round(o)+1;const h=Math.min(...this.range),c=(Math.max(...this.range)-h)/e;let d=1/0;for(let t=r;t<=o;t++){const e=this.convert(this.pow(t+1));for(let r=1;r<i;r++){const o=l?r:i-r+1,h=this.pow(t)*o,u=this.convert(h),p=Math.abs(d-u),g=Math.abs(u-e),f=p>=c&&g>=c;h>=s&&h<=n&&(1===r||f)&&(a.push(h),d=u)}}return a}tickFormat({count:t,ticks:e,specifier:i}){const{base:s}=this;return null==i&&(i=10===s?".0e":","),"function"!=typeof i&&(i=Ws(i)),t===1/0?i:(null==e&&this.ticks(),t=>i(t))}}function Qs(t,e=[void 0]){return ne((i,s,n)=>e.includes(n)?t:n)}function tn(t){const{length:e}=t;if(0===e)return;let i=1/0,s=-1/0;for(let n=0;n<e;n++){let e=t[n];e instanceof Date&&(e=e.getTime()),"number"==typeof e&&(e<i&&(i=e),e>s&&(s=e))}const n=[i,s];return n.some(t=>!isFinite(t))?void 0:n}qs([re(Ee(0))],Js.prototype,"base",void 0);var en=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class sn{constructor(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}getFont(){return Kt(this)}}function nn(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,s=t.rotation?Nt(Ft(t.rotation)):0,n=!s&&e>=0&&e<=Math.PI?-1:1,r=!s&&i>=0&&i<=Math.PI?-1:1;let o=0;return t.parallel?o=n*Math.PI/2:-1===r&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:n,regularFlipFlag:r}}function rn(t,e,i,s,n){const r=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(s*(r||o?-1:1)==-1)return"end"}else if(s*n==-1)return"end";return"start"}function on(t,e,i,s,n){const{width:r,height:o}=e,a=new dt(i,s,0,0);n.transformBBox(a,e);const{x:l=0,y:h=0}=e;return e.width=r,e.height=o,{point:{x:l,y:h,size:0},label:{width:r,height:o,text:t}}}en([re(me)],sn.prototype,"enabled",void 0),en([re(Ee(0))],sn.prototype,"fontSize",void 0),en([re(ve)],sn.prototype,"fontFamily",void 0),en([re(Ge)],sn.prototype,"fontStyle",void 0),en([re(ze)],sn.prototype,"fontWeight",void 0),en([re(we)],sn.prototype,"color",void 0);var an=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ln=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};const hn=oe((t,e)=>Ee(0)(t,e)||t instanceof N,"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),cn=oe((t,e)=>ae(t,e,hn),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),dn=oe((t,e)=>ae(t,e,(t,e)=>0!==t&&Ee(0)(t,e)||t instanceof N),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),un=["stroke","lineDash"],pn=oe(le(void 0,t=>{for(const e in t)if(!un.includes(e))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");var gn,fn;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(gn||(gn={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(fn||(fn={}));class mn{constructor(){this.width=1,this.color="rgba(195, 195, 195, 1)"}}an([re(Ee(0))],mn.prototype,"width",void 0),an([re(Te)],mn.prototype,"color",void 0);class yn{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}an([re(me)],yn.prototype,"enabled",void 0),an([re(Ee(0))],yn.prototype,"width",void 0),an([re(Ee(0))],yn.prototype,"size",void 0),an([re(Te)],yn.prototype,"color",void 0),an([re(cn),function(t,e){const i=null==e?void 0:e.default,s=ai();return ne((e,n,r)=>(r!==i&&s(n.toString(),t),r))}("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],yn.prototype,"count",void 0),an([re(dn)],yn.prototype,"interval",void 0),an([re(he())],yn.prototype,"values",void 0),an([re(ce(Pe(1),ue("maxSpacing"))),Qs(NaN)],yn.prototype,"minSpacing",void 0);class vn{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Kt(this)}}an([re(me)],vn.prototype,"enabled",void 0),an([re(ye)],vn.prototype,"autoWrap",void 0),an([re(Re(0))],vn.prototype,"maxWidth",void 0),an([re(Re(0))],vn.prototype,"maxHeight",void 0),an([re(Ge)],vn.prototype,"fontStyle",void 0),an([re(ze)],vn.prototype,"fontWeight",void 0),an([re(Ee(1))],vn.prototype,"fontSize",void 0),an([re(ve)],vn.prototype,"fontFamily",void 0),an([re(Ee(0))],vn.prototype,"padding",void 0),an([re(Pe()),Qs(NaN)],vn.prototype,"minSpacing",void 0),an([re(Te)],vn.prototype,"color",void 0),an([re(Re(-360,360))],vn.prototype,"rotation",void 0),an([re(ye)],vn.prototype,"autoRotate",void 0),an([re(Ee(-360,360))],vn.prototype,"autoRotateAngle",void 0),an([re(me)],vn.prototype,"avoidCollisions",void 0),an([re(me)],vn.prototype,"mirrored",void 0),an([re(me)],vn.prototype,"parallel",void 0),an([re(be)],vn.prototype,"format",void 0);class bn{constructor(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}}an([re(me)],bn.prototype,"enabled",void 0),an([re(be)],bn.prototype,"text",void 0),an([re(Ge)],bn.prototype,"fontStyle",void 0),an([re(ze)],bn.prototype,"fontWeight",void 0),an([re(Ee(0))],bn.prototype,"fontSize",void 0),an([re(ve)],bn.prototype,"fontFamily",void 0),an([re(Te)],bn.prototype,"color",void 0),an([re(Qe)],bn.prototype,"wrapping",void 0),an([re(fe)],bn.prototype,"formatter",void 0);class xn{constructor(t,e){this.moduleCtx=t,this.id=gt(this),this.nice=!0,this.dataDomain=[],this.axisGroup=new Et({name:this.id+"-axis",zIndex:ti.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new as),this.tickLineGroup=this.axisGroup.appendChild(new Et({name:this.id+"-Axis-tick-lines",zIndex:ti.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new Et({name:this.id+"-Axis-tick-labels",zIndex:ti.AXIS_ZINDEX})),this.crossLineGroup=new Et({name:this.id+"-CrossLines"}),this.gridGroup=new Et({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new Et({name:this.id+"-gridLines",zIndex:ti.AXIS_GRID_ZINDEX})),this.gridArcGroup=this.gridGroup.appendChild(new Et({name:this.id+"-gridArcs",zIndex:ti.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=ss.select(this.tickLineGroup,as),this.tickLabelGroupSelection=ss.select(this.tickLabelGroup,Vt),this.gridLineGroupSelection=ss.select(this.gridLineGroup,as),this.gridArcGroupSelection=ss.select(this.gridArcGroup,us),this._crossLines=[],this.line=new mn,this.tick=this.createTick(),this.label=new vn,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new ms,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.thickness=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node)}get scale(){return this._scale}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(t=>this.detachCrossLine(t)),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(t=>{this.initCrossLine(t)})}updateRange(){var t;const{range:e,visibleRange:i,scale:s}=this,n=(e[1]-e[0])/(i[1]-i[0]),r=n*i[0],o=e[0]-r;s.range=[o,o+n],null===(t=this.crossLines)||void 0===t||t.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){t.insertBefore(this.gridGroup,e),t.insertBefore(this.axisGroup,e),t.insertBefore(this.crossLineGroup,e)}detachAxis(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){return 0===this.inRangeEx(t,e,i)}inRangeEx(t,e=0,i=0){const{range:s}=this,n=Math.min(s[0],s[1]),r=Math.max(s[0],s[1]);return t+e<n-i?-1:t>r+i?1:0}onLabelFormatChange(t,e){const{scale:i,fractionDigits:s}=this,n=!(i instanceof Js)&&s>0?t=>"number"==typeof t?t.toFixed(s):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=n,Dt.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=n}setDomain(){var t;const{scale:e,dataDomain:i,tick:{values:s}}=this;if(s&&e instanceof bs){const[n,r]=null!==(t=tn(s))&&void 0!==t?t:[1/0,-1/0],o=Math.min(e.fromDomain(i[0]),n),a=Math.max(e.fromDomain(i[1]),r);e.domain=[e.toDomain(o),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:s}=this;if(t&&s instanceof bs)return"number"==typeof t?(s.tickCount=t,s.minTickCount=null!=e?e:0,void(s.maxTickCount=null!=i?i:1/0)):void(s instanceof Ns&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear()),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(t=>{this.initCrossLine(t)})}get gridLength(){return this._gridLength}set radialGrid(t){this._radialGrid!==t&&(this._radialGrid=t,this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear())}get radialGrid(){return this._radialGrid}createTick(){return new yn}update(t){const{rotation:e,parallelFlipRotation:i,regularFlipRotation:s}=this.calculateRotations(),n=this.label.getSideFlag(),r=n*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:e,sideFlag:n}),this.updateLine();const o=this.generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:s,labelX:r,sideFlag:n}),{tickData:a,combinedRotation:l,textBaseline:h,textAlign:c}=o,d=ln(o,["tickData","combinedRotation","textBaseline","textAlign"]);return this.updateSelections(a.ticks),this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:l,textBaseline:h,textAlign:c,labelX:r}),this.updateVisibility(),this.updateGridLines(n),this.updateTickLines(n),this.updateTitle({anyTickVisible:a.ticks.length>0,sideFlag:n}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:s,sideFlag:n}),this.updateLayoutState(),t=d.primaryTickCount}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;t instanceof bs&&(this.setTickCount(this.tick.count),t.nice=e,t.update())}calculateRotations(){const t=Ft(this.rotation);return{rotation:t,parallelFlipRotation:Nt(t),regularFlipRotation:Nt(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:s,sideFlag:n}){var r;const{scale:o,tick:a,label:{parallel:l,rotation:h,fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p}}=this,g=void 0!==t,{defaultRotation:f,configuredRotation:m,parallelFlipFlag:y,regularFlipFlag:v}=nn({rotation:h,parallel:l,regularFlipRotation:i,parallelFlipRotation:e}),b=m+f,x=new ut,{maxTickCount:C}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(r=a.maxSpacing)&&void 0!==r?r:NaN}),S=o instanceof bs,k=a.count||!S||isNaN(C)?10:C;let O=rn(l,m,0,n,v);const w=function(t,e,i,s){return t&&!e?i*s==-1?"hanging":"bottom":"middle"}(l,m,n,y),T={fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p,textBaseline:w,textAlign:O};let D={rawTicks:[],ticks:[],labelCount:0},M=0,E=0,R=!0,P=!1;for(;R&&M<=k&&!P;){E=0,O=rn(l,m,0,n,v);const e=this.getTickStrategies({secondaryAxis:g,index:M});for(const i of e){({tickData:D,index:M,autoRotation:E,terminate:P}=i({index:M,tickData:D,textProps:T,labelOverlap:R,terminate:P,primaryTickCount:t}));const e=D.ticks;O=rn(l,m,E,n,v);const r=0!==m||0!==E,o=b+E;R=this.checkLabelOverlap(o,r,x,e,s,Object.assign(Object.assign({},T),{textAlign:O}))}}const A=f+m+E;return!g&&D.rawTicks.length>0&&(t=D.rawTicks.length),{tickData:D,primaryTickCount:t,combinedRotation:A,textBaseline:w,textAlign:O}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:s,tick:n}=this,r=i instanceof bs,o=s.enabled&&s.avoidCollisions,a=!(r&&void 0===this.tick.count)&&0!==t&&o,l=!0===s.autoRotate&&void 0===s.rotation,h=[];let c;c=this.tick.values?fn.VALUES:e?fn.CREATE_SECONDARY:a?fn.FILTER:fn.CREATE;if(h.push(({index:t,tickData:e,primaryTickCount:i,terminate:s})=>this.createTickData(c,t,e,s,i)),!r&&!isNaN(n.minSpacing)){const t=({index:t,tickData:e,primaryTickCount:i,terminate:s})=>this.createTickData(fn.FILTER,t,e,s,i);h.push(t)}if(!o)return h;if(s.autoWrap){const t=({index:t,tickData:e,textProps:i})=>this.wrapLabels(e,t,i);h.push(t)}else if(l){const t=({index:t,tickData:e,labelOverlap:i,terminate:s})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:s});h.push(t)}return h}createTickData(t,e,i,s,n){var r,o,a;const{scale:l,tick:h}=this,{maxTickCount:c,minTickCount:d,defaultTickCount:u}=this.estimateTickCount({minSpacing:h.minSpacing,maxSpacing:null!==(r=h.maxSpacing)&&void 0!==r?r:NaN}),p=l instanceof bs,g=h.count||!p||isNaN(c)?10:c;let f=null!==(o=h.count)&&void 0!==o?o:p?Math.max(u-e,d):c;const m=void 0===h.interval&&void 0===h.values&&void 0===h.count&&f>d&&(p||t===fn.FILTER);let y=!0;for(;y&&e<=g;){const s=i.rawTicks;f=null!==(a=h.count)&&void 0!==a?a:p?Math.max(u-e,d):c;const{rawTicks:r,ticks:o,labelCount:l}=this.getTicks({tickGenerationType:t,previousTicks:s,tickCount:f,minTickCount:d,maxTickCount:c,primaryTickCount:n});i.rawTicks=r,i.ticks=o,i.labelCount=l,y=!!m&&vs(r,s),e++}const v=void 0!==h.interval||void 0!==h.values;return s||(s=v),{tickData:i,index:e,autoRotation:0,terminate:s}}checkLabelOverlap(t,e,i,s,n,r){ut.updateTransformMatrix(i,1,1,t,0,0);return function(t,e){const i=[];for(let s=0;s<t.length;s++){const n=t[s],{point:{x:r,y:o},label:{text:a}}=n;let{label:{width:l,height:h}}=n;l+=null!=e?e:0,h+=null!=e?e:0;if(i.some(t=>_i(t,r,o,l,h)))return!0;i.push({index:s,text:a,x:r,y:o,width:l,height:h,datum:n})}return!1}(this.createLabelData(s,n,r,i),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))}createLabelData(t,e,i,s){const n=[];for(const r of t){const{tickLabel:t,translationY:o}=r;if(""===t||null==t)continue;const a=$t(t),{width:l,height:h}=Ht(a,e,o,i),c=on(t,new dt(e,o,l,h),e,o,s);n.push(c)}return n}getAutoRotation(t){return t?Nt(Ft(this.label.autoRotateAngle)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:s,maxTickCount:n,primaryTickCount:r}){var o;const{scale:a}=this;let l=[];switch(t){case fn.VALUES:l=this.tick.values;break;case fn.CREATE_SECONDARY:l=this.updateSecondaryAxisTicks(r);break;case fn.FILTER:l=this.filterTicks(e,i);break;default:l=this.createTicks(i,s,n)}this.onLabelFormatChange(l,this.label.format),this.fractionDigits=l.fractionDigits>=0?l.fractionDigits:0;const h=(null!==(o=this.scale.bandwidth)&&void 0!==o?o:0)/2,c=[];let d=0;for(let t=0;t<l.length;t++){const e=l[t],i=a.convert(e)+h,s=this.formatTick(e,t);c.push({tick:e,tickLabel:s,translationY:i}),""!==s&&null!=s&&d++}return{rawTicks:l,ticks:c,labelCount:d}}filterTicks(t,e){var i;const s=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter((t,e)=>e%s==0)}createTicks(t,e,i){return this.setTickCount(t,e,i),this.scale.ticks()}estimateTickCount({minSpacing:t,maxSpacing:e}){const i=this.calculateAvailableRange(),s=Math.max(xn.defaultTickMinSpacing,i/bs.defaultMaxTickCount);isNaN(t)&&isNaN(e)?(t=s)>(e=i)&&(e=t):isNaN(t)?(t=s)>e&&(t=e):isNaN(e)&&t>(e=i)&&(e=t);const n=Math.max(1,Math.floor(i/t)),r=Math.min(n,Math.ceil(i/e));let o=bs.defaultTickCount;return o>n?o=n:o<r&&(o=r),{minTickCount:r,maxTickCount:n,defaultTickCount:o}}updateVisibility(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),s=t=>{const s=Math.floor(e),n=Math.ceil(i);if(s===n)return void(t.visible=!1);t.translationY>=s-1&&t.translationY<s&&(t.translationY=s),t.translationY>n&&t.translationY<=n+1&&(t.translationY=n);const r=t.translationY>=s&&t.translationY<=n;t.visible=r},{gridLineGroupSelection:n,gridArcGroupSelection:r,tickLineGroupSelection:o,tickLabelGroupSelection:a}=this;n.each(s),r.each(s),o.each(s),a.each(s),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i,sideFlag:s}){var n;const r=this.isAnySeriesActive();null===(n=this.crossLines)||void 0===n||n.forEach(n=>{var o;n.sideFlag=-s,n.direction=t===-Math.PI/2?ei.X:ei.Y,n.label.parallel=null!==(o=n.label.parallel)&&void 0!==o?o:this.label.parallel,n.parallelFlipRotation=e,n.regularFlipRotation=i,n.update(r)})}updateTickLines(t){const{tick:e}=this;this.tickLineGroupSelection.each(i=>{i.strokeWidth=e.width,i.stroke=e.color,i.x1=t*e.size,i.x2=0,i.y1=0,i.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateDomain(){}updatePosition({rotation:t,sideFlag:e}){const{crossLineGroup:i,axisGroup:s,gridGroup:n,translation:r,gridLineGroupSelection:o,gridPadding:a,gridLength:l}=this,h=Math.floor(r.x),c=Math.floor(r.y);i.translationX=h,i.translationY=c,i.rotation=t,s.translationX=h,s.translationY=c,s.rotation=t,n.translationX=h,n.translationY=c,n.rotation=t,o.each(t=>{t.x1=a,t.x2=-e*l+a,t.y1=0,t.y2=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t){const e=this.gridLength?t:[],i=this.radialGrid?this.gridLineGroupSelection:this.gridLineGroupSelection.update(e,t=>{const e=new as;e.tag=gn.GridLine,t.append(e)}),s=this.radialGrid?this.gridArcGroupSelection.update(e,t=>{const e=new us;e.tag=gn.GridArc,t.append(e)}):this.gridArcGroupSelection,n=this.tickLineGroupSelection.update(t,t=>{const e=new as;e.tag=gn.TickLine,t.appendChild(e)}),r=this.tickLabelGroupSelection.update(t,t=>{const e=new Vt;e.tag=gn.TickLabel,t.appendChild(e)}),o=t=>t.translationY=Math.round(t.datum.translationY);i.each(o),s.each(o),n.each(o),r.each(o),this.tickLineGroupSelection=n,this.tickLabelGroupSelection=r,this.gridLineGroupSelection=i,this.gridArcGroupSelection=s}updateGridLines(t){var e;const{gridStyle:i,scale:s,tick:n,gridPadding:r,gridLength:o}=this;if(o&&i.length){const l=i.length;let h;if(this.radialGrid){const t=(a=Ft(o),a%=It,(a+=It)!==It&&(a%=It),a),i=(null!==(e=this.scale.bandwidth)&&void 0!==e?e:0)/2;h=this.gridArcGroupSelection.each((e,n)=>{const r=Math.round(s.convert(n)+i);e.centerX=0,e.centerY=s.range[0]-r,e.endAngle=t,e.radius=r})}else h=this.gridLineGroupSelection.each(e=>{e.x1=r,e.x2=-t*o+r,e.y1=0,e.y2=0});h.each((t,e,s)=>{const r=i[s%l];t.stroke=r.stroke,t.strokeWidth=n.width,t.lineDash=r.lineDash,t.fill=void 0})}var a}updateLabels({tickLabelGroupSelection:t,combinedRotation:e,textBaseline:i,textAlign:s,labelX:n}){const{label:r,label:{enabled:o}}=this;if(!o)return{labelData:[],rotated:!1};t.each((t,o)=>{const{tickLabel:a}=o;t.fontStyle=r.fontStyle,t.fontWeight=r.fontWeight,t.fontSize=r.fontSize,t.fontFamily=r.fontFamily,t.fill=r.color,t.text=a;""===t.text||null==t.text?t.visible=!1:(t.textBaseline=i,t.textAlign=s,t.x=n,t.rotationCenterX=n,t.rotation=e,t.visible=!0)})}wrapLabels(t,e,i){const{label:{parallel:s,maxWidth:n,maxHeight:r}}=this,o=s?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,a=null!=n?n:o,l=s?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),h=null!=r?r:l;return t.ticks.forEach(t=>{const{tickLabel:e}=t,s=Vt.wrap(e,a,h,i,"hyphenate");t.tickLabel=s}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateLine(){const{lineNode:t,range:e}=this;t.x1=0,t.x2=0,t.y1=e[0],t.y2=e[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=!0}updateTitle({anyTickVisible:t,sideFlag:e}){var i;const s=t=>t.defaultValue,{rotation:n,title:r,_titleCaption:o,lineNode:a,range:l,tickLineGroup:h,tickLabelGroup:c,moduleCtx:{callbackCache:d}}=this,{formatter:u=s}=null!==(i=this.title)&&void 0!==i?i:{};if(!r)return void(o.enabled=!1);o.enabled=r.enabled,o.fontFamily=r.fontFamily,o.fontSize=r.fontSize,o.fontStyle=r.fontStyle,o.fontWeight=r.fontWeight,o.color=r.color,o.wrapping=r.wrapping;let p=!1;const g=o.node;if(r.enabled&&a.visible){p=!0;const i=Nt(n),s=ms.PADDING,r=-1===e&&i>Math.PI&&i<2*Math.PI?-1:1;g.rotation=r*e*Math.PI/2,g.x=Math.floor(r*e*(l[0]+l[1])/2);let o=0;if(t){const t=Et.computeBBox([h,c]),e=0===n?t.width:t.height;Math.abs(e)<1/0&&(o+=e)}g.y=-1===e?Math.floor(r*(-s-o)):Math.floor(-s-o),g.textBaseline=1===r?"bottom":"top",g.text=d.call(u,this.getTitleFormatterParams())}g.visible=p}formatTick(t,e){var i,s;const{label:n,labelFormatter:r,fractionDigits:o,moduleCtx:{callbackCache:a}}=this;if(n.formatter){const s=o>0?t:String(t);return null!==(i=a.call(n.formatter,{value:s,index:e,fractionDigits:o,formatter:r}))&&void 0!==i?i:s}return r&&null!==(s=a.call(r,t))&&void 0!==s?s:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return!1}clipTickLines(t,e,i,s){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new dt(t,e,i,s))}clipGrid(t,e,i,s){this.gridGroup.setClipRectInGroupCoordinateSpace(new dt(t,e,i,s))}calculatePadding(t,e){return Math.abs(.01*t)}}xn.defaultTickMinSpacing=50,an([re(me)],xn.prototype,"nice",void 0),an([re(pn)],xn.prototype,"gridStyle",void 0),an([re(Ee(0))],xn.prototype,"thickness",void 0);class Cn extends bs{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:bs.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[i,s]=this.getDomain(),{interval:n}=this;if(n){const t=Math.abs(n);if(!this.isDenseInterval({start:i,stop:s,interval:t}))return Os(i,s,t)}return xs(i,s,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){var t,e;const i=null!==(t=this.tickCount)&&void 0!==t?t:bs.defaultTickCount;let[s,n]=this.domain;if(i<1)return void(this.niceDomain=[s,n]);if(1===i)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),s=Math.pow(10,i);return Cs.map(i=>{const n=i*s,r=Math.floor(t/n)*n,o=Math.ceil(e/n)*n;return{error:1-(e-t)/(o-r),domain:[r,o]}}).sort((t,e)=>t.error-e.error)[0].domain}(s,n));let r=s,o=n;for(let t=0;t<4;t++){const t=null!==(e=this.interval)&&void 0!==e?e:Ss(s,n,i,this.minTickCount,this.maxTickCount),[a,l]=this.domain;if(t>=1)s=Math.floor(a/t)*t,n=Math.ceil(l/t)*t;else{const e=1/t;s=Math.floor(a*e)/e,n=Math.ceil(l*e)/e}if(s===r&&n===o)break;r=s,o=n}this.niceDomain=[s,n]}tickFormat({ticks:t,specifier:e}){return function(t,e){const i=zs(null!=e?e:",f");isNaN(i.precision)&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map(t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),s=i.type?6:12,n=t.toExponential(s-1).replace(/\.?0+e/,"e"),r=n.indexOf(".");if(r<0)return e>=0?0:-e;const o=n.indexOf("e")-r;return Math.max(0,o-e-1)})):i.type&&!(i.type in Hs)||(i.precision=Math.max(...t.map(t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length}))));const s=Ws(i);return t=>s(Number(t))}(null!=t?t:this.ticks(),e)}}var Sn=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class kn extends xn{constructor(t,e){super(t,e),this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.modules={},this.position="left"}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}get direction(){return["top","bottom"].includes(this.position)?ei.X:ei.Y}useCalculatedTickCount(){return this.scale instanceof Cn}update(t){return this.updateDirection(),super.update(t)}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateDomain(){const{direction:t,boundSeries:e,includeInvisibleDomains:i}=this;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const s=[],n=e.filter(t=>i||t.isEnabled());for(const e of n)s.push(e.getDomain(t));const r=(new Array).concat(...s);this.dataDomain=this.normaliseDataDomain(r)}}normaliseDataDomain(t){return t}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(null==this.axisContext){const t=()=>this.boundSeries.map(t=>t.getKeys(this.direction)).reduce((t,e)=>(t.push(...e),t),[]);this.axisContext={axisId:this.id,position:this.position,direction:this.direction,continuous:this.scale instanceof bs,keys:t,scaleValueFormatter:t=>{var e,i,s;return null!==(s=null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t}))&&void 0!==s?s:void 0},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i,s;return null!==(s=null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t))&&void 0!==s?s:void 0}}}const e=new t.instanceConstructor(Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}destroy(){super.destroy();for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((t,e)=>{const i=e.getKeys(this.direction),s=e.getNames(this.direction);for(let e=0;e<i.length;e++)t.push({key:i[e],name:s[e]});return t},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}}Sn([re(Ie)],kn.prototype,"keys",void 0),Sn([re($e)],kn.prototype,"position",void 0);var On=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class wn extends kn{constructor(t){super(t,new rs),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=new Set(t);return new Array(...e.values())}calculateDomain(){if(!this._paddingOverrideEnabled){const{boundSeries:t}=this,e=t.map(t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)}).filter(t=>null!=t);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...e.map(t=>t.outer)))}return super.calculateDomain()}}function Tn(t,e){const i=Ln(t),s=Ln(e);if("array"===s){const s=e;return"array"!==i||t.length!==s.length||s.some((e,i)=>{var s;return null!=Tn(null===(s=t)||void 0===s?void 0:s[i],e)})?[...s]:null}if("primitive"===s)return"primitive"!==i?Object.assign({},e):t!==e?e:null;const n=t||{},r=e||{},o=new Set([...Object.keys(n),...Object.keys(r)]);let a=0;const l={};for(const t of o){if(n[t]===r[t])continue;const e=e=>{l[t]=e,a++},i=Ln(n[t]),s=Ln(r[t]);if(i!==s){e(r[t]);continue}if("primitive"===s||null===s){e(r[t]);continue}if("array"===s&&n[t].length!==r[t].length){e(r[t]);continue}if("class-instance"===s){e(r[t]);continue}if("function"===s&&n[t]!==r[t]){e(r[t]);continue}const o=Tn(n[t],r[t]);null!==o&&e(o)}return 0===a?null:l}wn.className="CategoryAxis",wn.type="category",On([re(Ee(0,1))],wn.prototype,"groupPaddingInner",void 0);const Dn=Symbol("<delete-property>"),Mn=Symbol("<unspecified-property>");function En(t,e){var i;const s=null!==(i=null==e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map(t=>Ln(t)).some(t=>"array"===t)){const i=t[t.length-1];return i instanceof Array?i.map(t=>{const i=Ln(t);return"array"===i?En([[],t],e):"object"===i?En([{},t],e):t}):i}const n={},r=new Set(t.map(t=>null!=t?Object.keys(t):[]).reduce((t,e)=>t.concat(e),[]));for(const i of r){const r=t.map(t=>null!=t&&i in t?t[i]:Mn).filter(t=>t!==Mn);if(0===r.length)continue;const o=r[r.length-1];if(o===Dn)continue;const a=r.map(t=>Ln(t)),l=a[0];a.some(t=>t!==l)?n[i]=o:"array"!==l&&"object"!==l||s.includes(i)?n[i]="array"===l?[...o]:o:n[i]=En(r,e)}return n}function Rn(t,e,i={}){var s,n;const{path:r,matcherPath:o=(r?r.replace(/(\[[0-9+]+\])/i,"[]"):void 0),skip:a=[],constructors:l={},allowedTypes:h={},idx:c}=i;if(null==t)throw new Error("AG Charts - target is uninitialised: "+(null!=r?r:"<root>"));if(null==e)return t;const d=t;null!=c&&"_declarationOrder"in d&&(d._declarationOrder=c);const u=Ln(t);for(const c in e){const p=`${o?o+".":""}${c}`;if(a.indexOf(p)>=0)continue;const g=e[c],f=`${r?r+".":""}${c}`,m=d.constructor,y=d[c];let v=null!==(s=l[p])&&void 0!==s?s:l[c];try{const e=Ln(y),s=Ln(g);if("class-instance"===u&&!(c in t)&&!Object.prototype.hasOwnProperty.call(d,c)){Dt.warn(`unable to set [${f}] in ${null==m?void 0:m.name} - property is unknown`);continue}const r=null!==(n=h[p])&&void 0!==n?n:[e];if("class-instance"===e&&"object"===s);else if(null!=e&&null!=s&&!r.includes(s)){Dt.warn(`unable to set [${f}] in ${null==m?void 0:m.name} - can't apply type of [${s}], allowed types are: [${r}]`);continue}if("array"===s)if(v=null!=v?v:l[p+"[]"],null!=v){const t=g;d[c]=t.map((t,e)=>Rn(new v,t,Object.assign(Object.assign({},i),{path:f,matcherPath:p+"[]",idx:e})))}else d[c]=g;else"class-instance"===s?d[c]=g:"object"===s?null!=y?Rn(y,g,Object.assign(Object.assign({},i),{path:f,matcherPath:p,idx:void 0})):d[c]=null!=v?Rn(new v,g,Object.assign(Object.assign({},i),{path:f,matcherPath:p,idx:void 0})):g:d[c]=g}catch(t){const e=t;Dt.warn(`unable to set [${f}] in [${null==m?void 0:m.name}]; nested error is: ${e.message}`);continue}}return t}function Pn(t,e,i,...s){var n;const r=Ln(t),o=null!==(n=i.skip)&&void 0!==n?n:[];if("array"!==r){if("object"===r){e(r,t,...s);for(const n in t){if(o.indexOf(n)>=0)continue;const r=t[n],a=null==s?void 0:s.map(t=>null==t?void 0:t[n]),l=Ln(r);"object"!==l&&"array"!==l||Pn(r,e,i,...a)}}}else t.forEach((t,n)=>{Pn(t,e,i,...(null!=s?s:[]).map(t=>null==t?void 0:t[n]))})}const An="undefined"!=typeof window;function Ln(t){return null==t?null:An&&t instanceof HTMLElement?"primitive":t instanceof Array?"array":t instanceof Date?"primitive":"object"==typeof t&&t.constructor===Object?"object":"function"==typeof t?"function":"object"==typeof t&&null!=t.constructor?"class-instance":"primitive"}class In extends Zi{updatePath(){const{path:t,x:e,y:i}=this,s=this.size/2;t.clear(),t.moveTo(this.align(e-s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i+s)),t.lineTo(this.align(e-s),this.align(i+s)),t.closePath()}}In.className="Square";class Nn extends Zi{updatePath(){const t=this.size/4.2;super.applyPath(t,Nn.moves)}}Nn.className="Cross",Nn.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class Fn extends Zi{updatePath(){const t=this.size/2;super.applyPath(t,Fn.moves)}}Fn.className="Diamond",Fn.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class _n extends Zi{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:s}=this,n=i/4,r=this.y+n/2;e.clear(),e.arc(t-n,r-n,n,s(130),s(330)),e.arc(t+n,r-n,n,s(220),s(50)),e.lineTo(t,r+n),e.closePath()}}_n.className="Heart";class Bn extends Zi{updatePath(){const t=this.size/3;super.applyPath(t,Bn.moves)}}Bn.className="Plus",Bn.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class Gn extends Zi{updatePath(){const t=1.1*this.size;super.applyPath(t,Gn.moves)}}function jn(t=In){if("string"==typeof t)switch(t){case"circle":return Ji;case"cross":return Nn;case"diamond":return Fn;case"heart":return _n;case"plus":return Bn;case"triangle":return Gn;default:return In}return"function"==typeof t?t:In}Gn.className="Triangle",Gn.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];class zn{constructor(t,e){this.debug=!1,this.state=t,this.states=e,this.debug&&Dt.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,s,n,r,o;const a=this.states[this.state],l=null===(i=null==a?void 0:a.on)||void 0===i?void 0:i[t];if(!l)return void(this.debug&&Dt.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey"));const h=l.target,c=this.states[h];return this.debug&&Dt.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${h}`,"color: green"),l.action(e),null===(n=null===(s=null==a?void 0:a.actions)||void 0===s?void 0:s.onExit)||void 0===n||n.call(s),null===(o=null===(r=null==c?void 0:c.actions)||void 0===r?void 0:r.onEnter)||void 0===o||o.call(r),this.state=h,this.state}}var Wn=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Vn=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};const Kn={[ei.X]:["xKey"],[ei.Y]:["yKey"]},Hn={[ei.X]:["xName"],[ei.Y]:["yName"]};class Yn extends ki{constructor(t,e,i,s,n){super(i,s,n),this.xKey=t,this.yKey=e}}class Un extends Yn{constructor(){super(...arguments),this.type="nodeClick"}}class Xn extends Yn{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class $n extends zn{}class qn extends Ai{constructor(t){var e,i;super(Object.assign(Object.assign({},t),{useSeriesGroupLayer:!0,directionKeys:null!==(e=t.directionKeys)&&void 0!==e?e:Kn,directionNames:null!==(i=t.directionNames)&&void 0!==i?i:Hn})),this._contextNodeData=[],this.nodeDataDependencies={},this.highlightSelection=ss.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=ss.select(this.highlightLabel,Vt),this.subGroups=[],this.subGroupId=0,this.seriesItemEnabled=new Map;const{pathsPerSeries:s=1,hasMarkers:n=!1,pathsZIndexSubOrderOffset:r=[]}=t;this.opts={pathsPerSeries:s,hasMarkers:n,pathsZIndexSubOrderOffset:r},this.animationState=new $n("empty",{empty:{on:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}}},ready:{on:{update:{target:"ready",action:t=>this.animateReadyUpdate(t)},highlight:{target:"ready",action:t=>this.animateReadyHighlight(t)},highlightMarkers:{target:"ready",action:t=>this.animateReadyHighlightMarkers(t)},resize:{target:"ready",action:t=>this.animateReadyResize(t)}}}})}get contextNodeData(){var t;return null===(t=this._contextNodeData)||void 0===t?void 0:t.slice()}addChartEventListeners(){var t,e;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t)),null===(e=this.chartEventManager)||void 0===e||e.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}checkDomainXY(t,e,i,s){return(i&&Qt(t)||!i&&Jt(t))&&(s&&Qt(e)||!s&&Jt(e))?[t,e]:void 0}checkRangeXY(t,e,i,s){return!isNaN(t)&&!isNaN(e)&&i.inRange(t)&&s.inRange(e)}update({seriesRect:t}){var e,i;return Vn(this,void 0,void 0,(function*(){const{seriesItemEnabled:s,visible:n}=this,{series:r}=null!==(i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},o=r?r===this:void 0,a=n&&0===s.size||[...s.values()].some(t=>!0===t),l={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height};null!=Tn(this.nodeDataDependencies,l)&&(this.nodeDataDependencies=l,this.markNodeDataDirty(),this.animationState.transition("resize",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t)})),yield this.updateSelections(o,a),yield this.updateNodes(o,a),this.animationState.transition("update",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),labelSelections:this.subGroups.map(({labelSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t),seriesRect:t})}))}updateSelections(t,e){return Vn(this,void 0,void 0,(function*(){yield this.updateHighlightSelection(t),e&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())&&(this.nodeDataRefresh&&(this.nodeDataRefresh=!1,this._contextNodeData=yield this.createNodeData(),yield this.updateSeriesGroups()),yield Promise.all(this.subGroups.map((t,e)=>this.updateSeriesGroupSelections(t,e))))}))}updateSeriesGroupSelections(t,e){return Vn(this,void 0,void 0,(function*(){const{datumSelection:i,labelSelection:s,markerSelection:n}=t,r=this._contextNodeData[e],{nodeData:o,labelData:a}=r;t.datumSelection=yield this.updateDatumSelection({nodeData:o,datumSelection:i,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:a,labelSelection:s,seriesIdx:e}),n&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:o,markerSelection:n,seriesIdx:e}))}))}nodeFactory(){return new Et}markerFactory(){return new(jn())}updateSeriesGroups(){var t;return Vn(this,void 0,void 0,(function*(){const{_contextNodeData:e,contentGroup:i,subGroups:s,opts:{pathsPerSeries:n,hasMarkers:r,pathsZIndexSubOrderOffset:o}}=this;if(e.length===s.length)return;e.length<s.length&&s.splice(e.length).forEach(({dataNodeGroup:t,markerGroup:e,labelGroup:s,paths:n})=>{i.removeChild(t),e&&i.removeChild(e),s&&i.removeChild(s);for(const t of n)i.removeChild(t)});const a=e.length;for(;a>s.length;){const e=!1,a=this.subGroupId++,l=a,h=new Et({name:`${this.id}-series-sub${a}-dataNodes`,layer:e,zIndex:ti.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,l]}),c=r?new Et({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:e,zIndex:ti.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,1e4+a]}):void 0,d=new Et({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:e,zIndex:ti.SERIES_LABEL_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,a]});i.appendChild(h),i.appendChild(d),c&&i.appendChild(c);const u=[];for(let e=0;e<n;e++)u[e]=new $i,u[e].zIndex=ti.SERIES_LAYER_ZINDEX,u[e].zIndexSubOrder=[()=>this._declarationOrder,(null!==(t=o[e])&&void 0!==t?t:0)+l],i.appendChild(u[e]);s.push({paths:u,dataNodeGroup:h,markerGroup:c,labelGroup:d,labelSelection:ss.select(d,Vt),datumSelection:ss.select(h,()=>this.nodeFactory()),markerSelection:c?ss.select(c,()=>this.markerFactory()):void 0})}}))}updateNodes(t,e){var i;return Vn(this,void 0,void 0,(function*(){const{highlightSelection:s,highlightLabelSelection:n,_contextNodeData:r,seriesItemEnabled:o,opts:{hasMarkers:a}}=this,l=this.visible&&(null===(i=this._contextNodeData)||void 0===i?void 0:i.length)>0&&e;this.rootGroup.visible=l,this.contentGroup.visible=l,this.highlightGroup.visible=l&&!!t;const h=this.getOpacity(),c=this.subGroups.map((t,e)=>{const{itemId:i}=r[e];return this.getOpacity({itemId:i})}),d=c.some(t=>t!==h);this.contentGroup.opacity=d?1:h,a?(yield this.updateMarkerNodes({markerSelection:s,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",s)):(yield this.updateDatumNodes({datumSelection:s,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",s)),yield this.updateLabelNodes({labelSelection:n,seriesIdx:-1}),yield Promise.all(this.subGroups.map((t,e)=>Vn(this,void 0,void 0,(function*(){var i;const{dataNodeGroup:s,markerGroup:n,datumSelection:h,labelSelection:u,markerSelection:p,paths:g,labelGroup:f}=t,{itemId:m}=r[e],y=l&&(null===(i=o.get(m))||void 0===i||i),v=d?c[e]:1;s.opacity=v,s.visible=y,f.visible=y,n&&(n.opacity=v,n.zIndex=s.zIndex>=ti.SERIES_LAYER_ZINDEX?s.zIndex:s.zIndex+1,n.visible=y),f&&(f.opacity=v);for(const t of g)t.opacity=v,t.visible=y;s.visible&&(yield this.updateDatumNodes({datumSelection:h,isHighlight:!1,seriesIdx:e}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:e}),a&&p&&(yield this.updateMarkerNodes({markerSelection:p,isHighlight:!1,seriesIdx:e})))}))))}))}updateHighlightSelection(t){var e;return Vn(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:n}=this,r=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),o=t&&(null==r?void 0:r.datum)?r:void 0;let a;if(this.highlightSelection=yield this.updateHighlightSelectionItem({item:o,highlightSelection:i}),this.isLabelEnabled()&&null!=o){const{itemId:t}=o;for(const{labelData:e}of n)if(a=e.find(e=>e.datum===o.datum&&e.itemId===t),null!=a)break}this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({item:a,highlightLabelSelection:s})}))}pickNodeExactShape(t){const e=super.pickNodeExactShape(t);if(e)return e;const{x:i,y:s}=t,{opts:{hasMarkers:n}}=this;for(const{dataNodeGroup:t,markerGroup:e}of this.subGroups){let r=t.pickNode(i,s);if(!r&&n&&(r=null==e?void 0:e.pickNode(i,s)),r)return{datum:r.datum,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:s,y:n}=t,{xAxis:r,yAxis:o,rootGroup:a,_contextNodeData:l}=this,h=a.transformPoint(s,n);let c,d=1/0;for(const t of l)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==r?void 0:r.inRange(t))&&(null==o?void 0:o.inRange(i))))continue;const s=Math.max(Math.pow(h.x-t,2)+Math.pow(h.y-i,2),0);s<d&&(d=s,c=e)}if(c){return{datum:c,distance:Math.max(Math.sqrt(d)-(null!==(i=null===(e=c.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,s;const{x:n,y:r}=t,{xAxis:o,yAxis:a,rootGroup:l,_contextNodeData:h}=this,c=[o,a].filter(t=>t instanceof wn).map(t=>t.direction);if(e&&0===c.length)return;const[d=ei.X]=c,u=l.transformPoint(n,r),p=d===ei.X?[u.x,u.y]:[u.y,u.x],g=[1/0,1/0];let f=void 0;for(const t of h)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==o?void 0:o.inRange(t))&&(null==a?void 0:a.inRange(i))))continue;const s=d===ei.X?[t,i]:[i,t];let n=!0;for(let t=0;t<s.length;t++){const e=Math.abs(s[t]-p[t]);if(e>g[t]){n=!1;break}e<g[t]&&(g[t]=e,g.fill(1/0,t+1,g.length))}n&&(f=e)}if(f){return{datum:f,distance:Math.max(Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))-(null!==(s=null===(i=f.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0),0)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,r=Object.values(n).reduce((t,e)=>t+e,0),o=s.id===this.id||e&&1===r;this.toggleSeriesItem(i,o)}toggleSeriesItem(t,e){this.seriesItemEnabled.size>0?(this.seriesItemEnabled.set(t,e),this.nodeDataRefresh=!0):super.toggleSeriesItem(t,e)}isEnabled(){if(this.seriesItemEnabled.size>0){for(const[,t]of this.seriesItemEnabled)if(t)return!0;return!1}return super.isEnabled()}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}isAnySeriesVisible(){for(const t of this.seriesItemEnabled.values())if(t)return!0;return!1}updateHighlightSelectionItem(t){return Vn(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{item:i,highlightSelection:s}=t,n=i?[i]:[];if(e){const t=s;return this.updateMarkerSelection({nodeData:n,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:n,datumSelection:s,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return Vn(this,void 0,void 0,(function*(){const{item:e,highlightLabelSelection:i}=t,s=e?[e]:[];return this.updateLabelSelection({labelData:s,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return Vn(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return Vn(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return Vn(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return Vn(this,void 0,void 0,(function*(){}))}animateEmptyUpdateReady(t){}animateReadyUpdate(t){}animateReadyHighlight(t){}animateReadyHighlightMarkers(t){}animateReadyResize(t){}}class Zn extends is{constructor(){super(...arguments),this.formatter=void 0}}function Jn(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}Wn([re(fe),yt({redraw:ft.MAJOR})],Zn.prototype,"formatter",void 0);var Qn=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class tr{constructor(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}show(t){var e,i;let s=this.element;if(this.element||(s=document.createElement("div"),s.className=this.className,this.element=s),s.style.position="absolute",s.style.left=t.x+"px",s.style.top=t.y+"px",s.style.width=t.width+"px",s.style.height=t.height+"px",this.renderer)this.element.innerHTML=this.renderer();else{const t=document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",s.append(t)}null===(i=this.parentElement)||void 0===i||i.append(s)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}Qn([re(fe)],tr.prototype,"renderer",void 0),Qn([re(be)],tr.prototype,"text",void 0);class er{constructor(t){this.noData=new tr("ag-chart-no-data-overlay",t)}}class ir{constructor(){this.registeredListeners={}}addListener(t,e){var i;const s=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(i=this.registeredListeners[t])||void 0===i||i.push({symbol:s,handler:e}),s}dispatch(t,...e){var i;const s=null!==(i=this.registeredListeners[t])&&void 0!==i?i:[],n=[];for(const t of s)try{n.push(t.handler(...e))}catch(t){Dt.errorOnce(t),n.push(void 0)}return n}cancellableDispatch(t,e,...i){var s;const n=null!==(s=this.registeredListeners[t])&&void 0!==s?s:[],r=[];for(const t of n){if(e())break;r.push(t.handler(...i))}return r}reduceDispatch(t,e,...i){var s;const n=null!==(s=this.registeredListeners[t])&&void 0!==s?s:[];let r=void 0;for(const t of n)r=t.handler(...i),i=e(r,...i);return r}removeListener(t){for(const e in this.registeredListeners){const i=this.registeredListeners[e],s=null==i?void 0:i.findIndex(e=>e.symbol===t);null!=s&&s>=0&&(null==i||i.splice(s,1)),null!=s&&0===(null==i?void 0:i.length)&&delete this.registeredListeners[e]}}}class sr{constructor(){this.listeners=new ir}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}}function nr(t,e){return t=+t,e=+e,i=>t*(1-i)+e*i}function rr(t,e){if("string"==typeof t)try{t=ie.fromString(t)}catch(e){t=ie.fromArray([0,0,0])}if("string"==typeof e)try{e=ie.fromString(e)}catch(t){e=ie.fromArray([0,0,0])}const i=nr(t.r,e.r),s=nr(t.g,e.g),n=nr(t.b,e.b),r=nr(t.a,e.a);return function(t){return ie.fromArray([i(t),s(t),n(t),r(t)]).toRgbaString()}}function or(t,e){const i=typeof e;let s;if("number"===i)return nr(t,e);if("string"===i)try{return s=ie.fromString(e),rr(t,e=s)}catch(t){}throw new Error("Unable to interpolate values")}function ar({from:t,to:e}){return or(t,e)}const lr=(hr=t=>Math.sin(t*Math.PI/2),({from:t,to:e})=>{const i=or(t,e);return t=>i(hr(t))});var hr,cr;function dr({driver:t,duration:e,from:i,to:s,autoplay:n=!0,delay:r=0,ease:o=ar,repeat:a=1/0,repeatType:l=cr.Loop,onComplete:h,onPlay:c,onRepeat:d,onStop:u,onUpdate:p}){let g,f=0,m=0,y=0,v=!0,b=!1;const x=o({from:i,to:s}),C={isPlaying:!1,play:k,pause:function(){return C.isPlaying=!1,C},stop:O,reset:function(){return b=!1,m=0,y=0,S.reset(),C}},S=t((function(t){v||(t=-t);if(!(f>=r))return void(f+=t);m+=t;b||(g=x(Math.min(1,Math.max(0,m/e))),b=v?m>=e:m<=0);null==p||p(g),b&&(y<a?function(){y++,l===cr.Reverse?(v=y%2==0,m=v?m%e:e-m%e):m%=e;b=!1,null==d||d()}():(O(),null==h||h()))}));function k(){return C.isPlaying=!0,S.start(),null==c||c(),C}function O(){return C.isPlaying=!1,S.stop(),null==u||u(),C}return n&&k(),C}!function(t){t.Loop="loop",t.Reverse="reverse"}(cr||(cr={}));class ur extends sr{constructor(t){super(),this.controllers={},this.debouncers={},this.updaters=[],this.isPlaying=!1,this.readyToPlay=!1,this.skipAnimations=!1,this.interactionManager=t,window.addEventListener("DOMContentLoaded",()=>{this.readyToPlay=!0}),setTimeout(()=>{this.readyToPlay=!0},10)}play(){if(!this.isPlaying){this.isPlaying=!0;for(const t in this.controllers)this.controllers[t].play();this.startAnimationCycle()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].pause()}}stop(){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].stop()}animate(t,e){var i,s;const n=dr(Object.assign(Object.assign({},e),{autoplay:!!this.isPlaying&&e.autoplay,driver:this.createDriver(t,e.disableInteractions)}));return this.controllers[t]&&(this.controllers[t].stop(),delete this.controllers[t]),this.controllers[t]=n,this.skipAnimations?(null===(i=e.onUpdate)||void 0===i||i.call(e,e.to),n.stop()):null===(s=e.onUpdate)||void 0===s||s.call(e,e.from),n}animateMany(t,e,i){const s=e.map(t=>t.from);let n=0,r=0;const o=t=>r=>{var o;s[t]=r,++n>=e.length&&(null===(o=i.onUpdate)||void 0===o||o.call(i,s),n=0)},a=()=>{var t;++r>=e.length&&(null===(t=i.onComplete)||void 0===t||t.call(i))},l=e.map((e,s)=>{const n=`${t}-${s}`;return this.animate(n,Object.assign(Object.assign(Object.assign({},i),e),{onUpdate:o(s),onComplete:a}))}),h={get isPlaying(){return l.some(t=>t.isPlaying)},play:()=>(l.forEach(t=>t.play()),h),pause:()=>(l.forEach(t=>t.pause()),h),stop:()=>(l.forEach(t=>t.stop()),h),reset:()=>(l.forEach(t=>t.reset()),h)};return h}debouncedAnimate(t,e){var i;return this.debouncers[t]&&Date.now()-this.debouncers[t]<(null!==(i=e.duration)&&void 0!==i?i:300)?this.controllers[t]:(this.debouncers[t]=Date.now(),this.animate(t,e))}tween(t){const e="tween-"+btoa(JSON.stringify(t));return function(t){let e;const i=dr(Object.assign(Object.assign({},t),{repeat:0,autoplay:!1,onUpdate:t=>{null==e||e(t)}})),s={start:t=>(i.stop(),i.reset(),i.play(),e=t,s),stop:()=>(i.stop(),s)};return s}(Object.assign(Object.assign({},t),{driver:this.createDriver(e)}))}createDriver(t,e){return i=>({start:()=>{this.updaters.push([t,i]),null==this.requestId&&this.startAnimationCycle(),e&&this.interactionManager.pause("animation_"+t)},stop:()=>{this.updaters=this.updaters.filter(([e])=>e!==t),this.updaters.length<=0&&this.cancelAnimationFrame(),e&&this.interactionManager.resume("animation_"+t)},reset:()=>{}})}startAnimationCycle(){const t=e=>{if(this.requestId=requestAnimationFrame(t),!this.readyToPlay)return;void 0===this.lastTime&&(this.lastTime=e);const i=e-this.lastTime;this.lastTime=e,this.updaters.forEach(([t,e])=>{e(i)}),this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})};this.requestId=requestAnimationFrame(t)}cancelAnimationFrame(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0)}}class pr{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}}class gr extends sr{legendItemClick(t,e,i){const s={type:"legend-item-click",series:t,itemId:e,enabled:i};this.listeners.dispatch("legend-item-click",s)}legendItemDoubleClick(t,e,i,s){const n={type:"legend-item-double-click",series:t,itemId:e,enabled:i,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",n)}}class fr extends sr{constructor(){super(),this.states={},this.activeHighlight=void 0}updateHighlight(t,e){delete this.states[t],null!=e&&(this.states[t]={highlightedDatum:e}),this.applyStates()}getActiveHighlight(){return this.activeHighlight}applyStates(){const t=this.activeHighlight;let e=void 0;Object.entries(this.states).reverse().slice(0,1).forEach(([t,{highlightedDatum:i}])=>e=i),this.activeHighlight=e;var i,s;if(i=t,s=this.activeHighlight,!(i===s||(null==i?void 0:i.series)===(null==s?void 0:s.series)&&(null==i?void 0:i.itemId)===(null==s?void 0:s.itemId)&&(null==i?void 0:i.datum)===(null==s?void 0:s.datum))){const e={type:"highlight-change",previousHighlight:t,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",e)}}}var mr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};const yr=["pagehide","mousemove","mouseup","wheel"],vr=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"];class br extends sr{constructor(t,e=document){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.enabled=!0,this.pausers=[],this.rootElement=e.body,this.element=t;for(const e of vr)e.startsWith("touch")?t.addEventListener(e,this.eventHandler,{passive:!0}):t.addEventListener(e,this.eventHandler);for(const t of yr)"wheel"===t?window.addEventListener(t,this.eventHandler,{passive:!1}):window.addEventListener(t,this.eventHandler);if(br.interactionDocuments.indexOf(e)<0){const t=document.createElement("style");t.innerHTML="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",document.head.insertBefore(t,document.head.querySelector("style")),br.interactionDocuments.push(e)}}destroy(){for(const t of yr)window.removeEventListener(t,this.eventHandler);for(const t of vr)this.element.removeEventListener(t,this.eventHandler)}resume(t){return this.pausers=this.pausers.filter(e=>e!==t),this.enabled=this.pausers.length<=0,this.enabled}pause(t){this.enabled=!1,this.pausers.push(t)}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.enabled&&this.dispatchEvent(t,e).catch(t=>Dt.errorOnce(t))}dispatchEvent(t,e){return mr(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null!=i)for(const s of e){const e=this.buildEvent(Object.assign(Object.assign({event:t},i),{type:s}));this.listeners.cancellableDispatch(s,()=>e.consumed,e)}}))}decideInteractionEventTypes(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:s,pageY:n,offsetX:r,offsetY:o}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:s,pageY:n,offsetX:r,offsetY:o})}if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:s,clientY:n,pageX:r,pageY:o}=i;return Object.assign(Object.assign({},br.NULL_COORDS),{clientX:s,clientY:n,pageX:r,pageY:o})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return br.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const s=i(this.dragStartElement),n=i(t.target);e.offsetX-=s.x-n.x,e.offsetY-=s.y-n.y}return e}buildEvent(t){const{type:e,event:i,clientX:s,clientY:n}=t;let{offsetX:r,offsetY:o,pageX:a,pageY:l}=t;if(!ee(r)||!ee(o)){const t=this.element.getBoundingClientRect();r=s-t.left,o=n-t.top}if(!ee(a)||!ee(l)){const t=this.rootElement.getBoundingClientRect();a=s-t.left,l=n-t.top}const h={type:e,offsetX:r,offsetY:o,pageX:a,pageY:l,sourceEvent:i,consumed:!1,consume:()=>h.consumed=!0};return h}}br.interactionDocuments=[],br.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class xr{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;const i=e.addListener("hover",t=>this.checkExclusiveRects(t));this.destroyFns.push(()=>e.removeListener(i))}updateTooltip(t,e,i){var s;null==i&&(i=null===(s=this.states[t])||void 0===s?void 0:s.content),i?this.states[t]={content:i,meta:e}:delete this.states[t],this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,s]of Object.entries(this.exclusiveAreas))if(s.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i=void 0,s=void 0;if(e.reverse(),e.slice(0,1).forEach(t=>{var e;const{content:n,meta:r}=null!==(e=this.states[t])&&void 0!==e?e:{};i=n,s=r}),void 0===s||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(s,void 0,t)}else this.tooltip.show(s,i);this.appliedState={content:i,meta:s}}}class Cr extends sr{constructor(){super(),this.states={},this.currentZoom=void 0}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e)),this.applyStates()}getZoom(){return this.currentZoom}applyStates(){const t=this.currentZoom,e={};for(const[t,{x:i,y:s}]of Object.entries(this.states))e.x=null!=i?i:e.x,e.y=null!=s?s:e.y;this.currentZoom=null!=e.x||null!=e.y?e:void 0;var i,s,n,r,o,a,l,h,c,d;if(!(i=t,s=this.currentZoom,!(i===s||(null===(n=null==i?void 0:i.x)||void 0===n?void 0:n.min)===(null===(r=null==s?void 0:s.x)||void 0===r?void 0:r.min)&&(null===(o=null==i?void 0:i.x)||void 0===o?void 0:o.max)===(null===(a=null==s?void 0:s.x)||void 0===a?void 0:a.max)&&(null===(l=null==i?void 0:i.y)||void 0===l?void 0:l.max)===(null===(h=null==s?void 0:s.y)||void 0===h?void 0:h.max)&&(null===(c=null==i?void 0:i.y)||void 0===c?void 0:c.min)===(null===(d=null==s?void 0:s.y)||void 0===d?void 0:d.min))))return;const u=Object.assign({type:"zoom-change"},null!=t?t:{});this.listeners.dispatch("zoom-change",u)}}class Sr{constructor(){this.layoutProcessors=new ir,this.listeners=new ir}addListener(t,e){if("layout-complete"!==t)return this.layoutProcessors.addListener(t,e);if(function(t){return"layout-complete"===t}(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}removeListener(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)}dispatchPerformLayout(t,e){const i=this.layoutProcessors.reduceDispatch(t,({shrinkRect:t},e)=>[Object.assign(Object.assign({},e),{shrinkRect:t})],e);return null!=i?i:e}dispatchLayoutComplete(t){this.listeners.dispatch("layout-complete",t)}}class kr{constructor(t){this.getSeries=t}}var Or;!function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(Or||(Or={}));class wr{constructor(t){this.updateCallback=t}update(t=Or.FULL,{forceNodeDataRefresh:e=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e})}}var Tr=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Dr{constructor(){this.range="tooltip"}}Tr([re(Ne("tooltip","node"))],Dr.prototype,"range",void 0);var Mr=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Er extends Et{constructor(){super({name:"markerLabelGroup"}),this.label=new Vt,this._marker=new In,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=ct.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}function Rr({orientation:t,bboxes:e,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:r=0,forceResult:o=!1}){const a="horizontal"===t,l={max:a?s:i,fn:a?t=>t.width:t=>t.height,padding:a?r:n},h={max:a?i:s,fn:a?t=>t.height:t=>t.width,padding:a?n:r};let c=0;const d=[];for(;c<e.length;){const t=Pr(e.slice(c),c,l,h,o);if(!t)return;c+=t.processedBBoxCount,d.push(t.pageIndices)}return function(t,e,i,s,n){let r=0,o=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,s)=>{e[s][i]=t})}),e}(t));let a=0;const l=t.map(t=>{const e=t.map(t=>(a=Math.max(t,a),i[t]));let r=0,o=0;return e.forEach(t=>{r+=t.height+s,o=Math.max(o,t.width+n)}),{indices:t,bboxes:e,columnHeight:r,columnWidth:o}});let h=0,c=0;return l.forEach(t=>{h+=t.columnWidth,c=Math.max(c,t.columnHeight)}),r=Math.max(h,r),o=Math.max(c,o),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:h,pageHeight:c}}),maxPageWidth:r,maxPageHeight:o}}(d,t,e,n,r)}function Pr(t,e,i,s,n){let r=function(t,e){const i=t.length;let s=0;for(let n=0;n<i;n++)if(s+=e.fn(t[n])+e.padding,s>e.max){return i/n<2?Math.ceil(i/2):n}return i}(t,i);if(r<1){if(!n)return;r=1}for(let o=r;o>=1;o--){const r=Ar(t,e,o,i,s,n);if(null==r&&o<=1)return;if(null==r)continue;if("number"==typeof r){if(r<=1)return;o=r<o&&r>1?r:o;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}function Ar(t,e,i,s,n,r){var o;const a=[];let l=0,h=0,c=[];const d=[];for(let u=0;u<t.length;u++){const p=(u+i)%i;0===p&&(l+=h,h=0,c.length>0&&a.push(c),c=[]);const g=s.fn(t[u])+s.padding;d[p]=Math.max(null!==(o=d[p])&&void 0!==o?o:0,g),h=Math.max(h,n.fn(t[u])+n.padding);const f=l+h,m=!r||a.length>0;if(f>n.max&&m){c=[];break}if(d.reduce((t,e)=>t+e,0)>s.max&&!r)return d.length<i?d.length:void 0;c.push(u+e)}return c.length>0&&a.push(c),a.length>0?a:void 0}Er.className="MarkerLabel",Mr([ps("label")],Er.prototype,"text",void 0),Mr([ps("label")],Er.prototype,"fontStyle",void 0),Mr([ps("label")],Er.prototype,"fontWeight",void 0),Mr([ps("label")],Er.prototype,"fontSize",void 0),Mr([ps("label")],Er.prototype,"fontFamily",void 0),Mr([ps("label","fill")],Er.prototype,"color",void 0),Mr([ps("marker","fill")],Er.prototype,"markerFill",void 0),Mr([ps("marker","stroke")],Er.prototype,"markerStroke",void 0),Mr([ps("marker","strokeWidth")],Er.prototype,"markerStrokeWidth",void 0),Mr([ps("marker","fillOpacity")],Er.prototype,"markerFillOpacity",void 0),Mr([ps("marker","strokeOpacity")],Er.prototype,"markerStrokeOpacity",void 0);var Lr=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Ir{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}Lr([re(we)],Ir.prototype,"color",void 0),Lr([re(Ge)],Ir.prototype,"fontStyle",void 0),Lr([re(ze)],Ir.prototype,"fontWeight",void 0),Lr([re(Ee(0))],Ir.prototype,"fontSize",void 0),Lr([re(ve)],Ir.prototype,"fontFamily",void 0);class Nr{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}Lr([re(Ee(0))],Nr.prototype,"size",void 0),Lr([re(Te)],Nr.prototype,"fill",void 0),Lr([re(Re(0,1))],Nr.prototype,"fillOpacity",void 0),Lr([re(Te)],Nr.prototype,"stroke",void 0),Lr([re(Ee(0))],Nr.prototype,"strokeWidth",void 0),Lr([re(Ee(0,1))],Nr.prototype,"strokeOpacity",void 0);class Fr{constructor(){this.size=15,this._shape=Gn,this.padding=8}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}Lr([re(Ee(0))],Fr.prototype,"size",void 0),Lr([re(Ee(0))],Fr.prototype,"padding",void 0);class _r{constructor(t,e,i,s){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=s,this.id=gt(this),this.group=new Et({name:"pagination"}),this.labelNode=new Vt,this.marker=new Fr,this.activeStyle=new Nr,this.inactiveStyle=new Nr,this.highlightStyle=new Nr,this.label=new Ir,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Gn,this._previousButton=new Gn;const{labelNode:n}=this;n.textBaseline="middle",n.fontSize=12,n.fontFamily="Verdana, sans-serif",n.fill="black",n.y=ct.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,n]),this.interactionManager.addListener("click",t=>this.onPaginationClick(t)),this.interactionManager.addListener("hover",t=>this.onPaginationMouseMove(t)),this.marker.parent=this,this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:n,fontWeight:r,fontSize:o,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=n,i.fontWeight=r,i.fontSize=o,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:r,highlightStyle:o,highlightActive:a}=this,l=(t,e)=>e?r:t===a?o:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){var i;const{size:s}=this.marker;t.size=s,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,s=t===e-1,n=0===t;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Or.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=jn(this.marker.shape||Gn);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Or.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}_r.className="Pagination";var Br=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const Gr=["horizontal","vertical"],jr=oe((t,e)=>ae(t,e,t=>Gr.includes(t)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class zr{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}Br([re(Re(0))],zr.prototype,"maxLength",void 0),Br([re(we)],zr.prototype,"color",void 0),Br([re(Ge)],zr.prototype,"fontStyle",void 0),Br([re(ze)],zr.prototype,"fontWeight",void 0),Br([re(Ee(0))],zr.prototype,"fontSize",void 0),Br([re(ve)],zr.prototype,"fontFamily",void 0),Br([re(fe)],zr.prototype,"formatter",void 0);class Wr{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}Br([re(Ee(0))],Wr.prototype,"size",void 0),Br([re(Ee(0))],Wr.prototype,"padding",void 0),Br([re(Ee(0))],Wr.prototype,"strokeWidth",void 0);class Vr{constructor(){this.marker=new Wr,this.label=new zr,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}Br([re(Re(0))],Vr.prototype,"maxWidth",void 0),Br([re(Ee(0))],Vr.prototype,"paddingX",void 0),Br([re(Ee(0))],Vr.prototype,"paddingY",void 0),Br([re(me)],Vr.prototype,"toggleSeriesVisible",void 0);class Kr{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}Br([re(fe)],Kr.prototype,"legendItemClick",void 0);class Hr{constructor(t){this.ctx=t,this.id=gt(this),this.group=new Et({name:"legend",layer:!0,zIndex:ti.LEGEND_ZINDEX}),this.itemSelection=ss.select(this.group,Er),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new Vr,this.listeners=new Kr,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new _r(e=>t.updateService.update(e),t=>this.updatePageNumber(t),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=[t.interactionManager.addListener("click",t=>this.checkLegendClick(t)),t.interactionManager.addListener("dblclick",t=>this.checkLegendDoubleClick(t)),t.interactionManager.addListener("hover",t=>this.handleLegendMouseMove(t))],i=[t.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect))];this.destroyFns.push(...e.map(e=>()=>t.interactionManager.removeListener(e)),...i.map(e=>()=>t.layoutService.removeListener(e)),()=>this.detachLegend())}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,ft.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":ct.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:s,label:n,maxWidth:r,marker:{size:o,padding:a,shape:l},label:{maxLength:h=1/0,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p}}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);const f=[],m=Kt(n),y=null!=r?r:.8*t,v=o+a+i;if(this.itemSelection.each((t,e)=>{var i;const s=jn(null!=l?l:e.marker.shape);t.marker&&t.marker instanceof s||(t.marker=new s),t.markerSize=o,t.spacing=a,t.fontStyle=c,t.fontWeight=d,t.fontSize=u,t.fontFamily=p;const n=null!==(i=e.itemId)&&void 0!==i?i:e.id,r=this.getItemLabel(e),g=(null!=r?r:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(g,h,y,v,m,n),f.push(t.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,x=this.oldSize;b[0]=t,b[1]=e,b[0]===x[0]&&b[1]===x[1]||(x[0]=b[0],x[1]=b[1]);const{pages:C,maxPageHeight:S,maxPageWidth:k}=this.updatePagination(f,t,e);this.pages=C,this.maxPageSize=[k-i,S-s];const O=this.pagination.currentPage,w=this.pages[O];this.pages.length<1||!w?this.visible=!1:(this.visible=!0,this.updatePositions(O),this.update())}truncate(t,e,i,s,n,r){const o=t.split("");let a=!1;t.length>e&&(t=""+t.substring(0,e),a=!0);if(Math.floor(s+ct.getTextSize(t,n).width)>i){let e="";const r=this.getCharacterWidths(n);let l=s+r["..."];for(const t of o){if(r[t]||(r[t]=ct.getTextSize(t,n).width),l+=r[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(r)):this.truncatedItems.delete(r),t}updatePagination(t,e,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:r,maxPageHeight:o,maxPageWidth:a,paginationBBox:l,paginationVertical:h}=this.calculatePagination(t,e,i),c=r.findIndex(t=>t.endIndex>=n);this.pagination.currentPage=Math.min(Math.max(c,0),r.length-1);const{paddingX:d,paddingY:u}=this.item,p=a-d,g=o-u;let f=0,m=-l.y-this.item.marker.size/2;return h?m+=g+8:(f+=-l.x+p+8,m+=(g-l.height)/2),this.pagination.translationX=f,this.pagination.translationY=m,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:o,maxPageWidth:a,pages:r}}calculatePagination(t,e,i){var s,n,r;const{paddingX:o,paddingY:a}=this.item,l=this.getOrientation(),h=["left","right"].includes(this.position);let c=this.pagination.computeBBox(),d=new dt(0,0,0,0),u=[],p=0,g=0,f=0;const m=t=>{const{width:e,height:i}=t;return e===c.width&&i===c.height},y=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(f++>10){Dt.warn("unable to find stable legend layout.");break}c=d;const m=e-(h?0:c.width),v=Rr({orientation:l,bboxes:t,maxHeight:i-(h?c.height:0),maxWidth:m,itemPaddingY:a,itemPaddingX:o,forceResult:y});u=null!==(s=null==v?void 0:v.pages)&&void 0!==s?s:[],p=null!==(n=null==v?void 0:v.maxPageWidth)&&void 0!==n?n:0,g=null!==(r=null==v?void 0:v.maxPageHeight)&&void 0!==r?r:0;const b=u.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!m(d));return{maxPageWidth:p,maxPageHeight:g,pages:u,paginationBBox:c,paginationVertical:h}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:n,startIndex:r,endIndex:o}=s[t];let a=0,l=0;const h=n.length,c=n[0].indices.length,d="horizontal"===this.getOrientation(),u=n[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{var s,g;if(i<r||i>o)return void(t.visible=!1);const f=i-r;let m=0,y=0;d?(m=f%h,y=Math.floor(f/h)):(m=Math.floor(f/c),y=f%c),t.visible=!0;const v=n[m];v&&(l=u*y,a=null!==(s=p[y])&&void 0!==s?s:0,p[y]=(null!==(g=p[y])&&void 0!==g?g:0)+v.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:s}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(Or.SCENE_RENDER)}update(){const{marker:{strokeWidth:t},label:{color:e}}=this.item;this.itemSelection.each((i,s)=>{const n=s.marker;i.markerFill=n.fill,i.markerStroke=n.stroke,i.markerStrokeWidth=t,i.markerFillOpacity=n.fillOpacity,i.markerStrokeOpacity=n.strokeOpacity,i.opacity=s.enabled?1:.5,i.color=e})}getDatumForPoint(t,e){const i=[],s={dist:1/0,datum:void 0};for(const n of this.group.children){if(!n.visible)continue;if(!(n instanceof Er))continue;const r=n.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(t,e))return n.datum;const o=t-r.x-this.item.paddingX/2,a=e-r.y-this.item.paddingY/2,l=Math.pow(o,2)+Math.pow(a,2);o>=0&&a>=0&&l<s.dist&&(s.dist=l,s.datum=n.datum),i.push(r)}if(dt.merge(i).containsPoint(t,e))return s.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:s},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:o}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,o),h=this.getDatumForPoint(r,o);if(!l||!h)return;const{id:c,itemId:d,enabled:u}=h,p=i.getSeries().find(t=>t.id===c);if(!p)return;t.consume();let g=u;n&&(g=!u,this.ctx.chartEventManager.legendItemClick(p,d,g)),g?s.updateHighlight(this.id,{series:p,itemId:d,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(Or.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:g,itemId:d,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:s},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:o}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,o),h=this.getDatumForPoint(r,o);if(!l||!h)return;const{id:c,itemId:d,seriesId:u}=h,p=s.getSeries(),g=p.find(t=>t.id===c);if(g){if(t.consume(),n){const t=p.reduce((t,e)=>[...t,...e.getLegendData().filter(t=>"category"===t.legendType)],[]),i={};t.forEach(t=>{var e,s;null!==(e=i[s=t.seriesId])&&void 0!==e||(i[s]=0),t.enabled&&i[t.seriesId]++});const s=t.find(t=>t.itemId===d&&t.seriesId===u);this.ctx.chartEventManager.legendItemDoubleClick(g,d,null!==(e=null==s?void 0:s.enabled)&&void 0!==e&&e,i)}this.ctx.updateService.update(Or.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:d,seriesId:g.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:s},listeners:n}=this;if(!i)return;const r=this.computeBBox(),{pageX:o,pageY:a,offsetX:l,offsetY:h}=t,c=this.group.visible&&r.containsPoint(l,h);if(!c)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const d=this.getDatumForPoint(l,h);if(!(c&&void 0!==d))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const u=d?this.ctx.dataService.getSeries().find(t=>t.id===(null==d?void 0:d.id)):void 0;if(d&&this.truncatedItems.has(null!==(e=d.itemId)&&void 0!==e?e:d.id)){const e=this.getItemLabel(d);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:o,pageY:a,offsetX:l,offsetY:h,event:t,showArrow:!1},hi({content:e}))}else this.ctx.tooltipManager.removeTooltip(this.id);(s||null!=n.legendItemClick||null!=n.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==d?void 0:d.enabled)&&u?this.ctx.highlightManager.updateHighlight(this.id,{series:u,itemId:null==d?void 0:d.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,s]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,s);const n=this.computePagedBBox(),r=()=>{switch(this.position){case"top":return 0;case"bottom":return t.height-n.height;case"left":return 0;case"right":default:return t.width-n.width}};if(this.visible){let i,s;switch(this.position){case"top":case"bottom":i=(t.width-n.width)/2,s=r(),e.shrink(n.height,this.position);break;case"left":case"right":default:i=r(),s=(t.height-n.height)/2,e.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+t.x+i),this.group.translationY=Math.floor(-n.y+t.y+s)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=n.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i;let n=0,r=0;switch(this.position){case"top":case"bottom":const t=s<1?Math.min(.5,1/s*.2):.2;n=this.maxWidth?Math.min(this.maxWidth,e):e,r=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;case"left":case"right":default:const o=s>1?Math.min(.5,.25*s):.25;n=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*o),r=this.maxHeight?Math.min(this.maxHeight,i):i}return[n,r]}}Hr.className="Legend",Br([re(me)],Hr.prototype,"_enabled",void 0),Br([re($e)],Hr.prototype,"position",void 0),Br([re(Re(0))],Hr.prototype,"maxWidth",void 0),Br([re(Re(0))],Hr.prototype,"maxHeight",void 0),Br([re(ye)],Hr.prototype,"reverseOrder",void 0),Br([re(jr)],Hr.prototype,"orientation",void 0),Br([re(Ee(0))],Hr.prototype,"spacing",void 0);const Yr={category:Hr};function Ur(t,e){if(Yr[t])throw new Error("AG Charts - already registered legend type: "+t);Yr[t]=e}class Xr{constructor(){this.cache=new Map}call(t,...e){let i,s=this.cache.get(t);const n=()=>{try{const n=t(...e);return s&&null!=i&&s.set(i,n),n}catch(t){return void Dt.warnOnce("User callback errored, ignoring",t)}};try{i=JSON.stringify(e)}catch(t){return n()}return null==s&&(s=new Map,this.cache.set(t,s)),s.has(i)?s.get(i):n()}invalidateCache(){this.cache=new Map}}var $r=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},qr=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class Zr extends qt{constructor(t=window.document,e,i){var s;super(),this.id=gt(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new Et({name:this.id+"-Series-root"}),this.extraDebugStats={},this._container=void 0,this.data=[],this.padding=new Ii(20),this.seriesAreaPadding=new Ii(0),this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this.modules={},this.legendModules={},this._pendingFactoryUpdates=[],this._performUpdateNoRenderCount=0,this._performUpdateType=Or.NONE,this.seriesToUpdate=new Set,this.performUpdateTrigger=ji(t=>setTimeout(t,0),({count:t})=>qr(this,void 0,void 0,(function*(){if(!this._destroyed)try{yield this.performUpdate(t)}catch(t){this._lastPerformUpdateError=t,Dt.error("update error",t)}}))),this._axes=[],this._series=[],this.applyLegendOptions=void 0,this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return ji(t=>requestAnimationFrame(t),t)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)};const n=null==i?void 0:i.scene,r=null!==(s=null==i?void 0:i.element)&&void 0!==s?s:t.createElement("div"),o=null==i?void 0:i.container,a=new Et({name:"root"});a.visible=!1,a.append(this.seriesRoot),this.axisGroup=new Et({name:"Axes",layer:!0,zIndex:ti.AXIS_ZINDEX}),a.appendChild(this.axisGroup),this.element=r,r.classList.add("ag-chart-wrapper"),r.style.position="relative",this.scene=null!=n?n:new Lt({document:t,overrideDevicePixelRatio:e}),this.debug=!1,this.scene.debug.consoleLog=!1,this.scene.root=a,this.scene.container=r,this.autoSize=!0,this.chartEventManager=new gr,this.cursorManager=new pr(r),this.highlightManager=new fr,this.interactionManager=new br(r),this.zoomManager=new Cr,this.dataService=new kr(()=>this.series),this.layoutService=new Sr,this.updateService=new wr((t=Or.FULL,{forceNodeDataRefresh:e})=>this.update(t,{forceNodeDataRefresh:e})),this.callbackCache=new Xr,this.animationManager=new ur(this.interactionManager),this.animationManager.skipAnimations=!0,this.animationManager.play(),this.tooltip=new pi(this.scene.canvas.element,t,t.body),this.tooltipManager=new xr(this.tooltip,this.interactionManager),this.overlays=new er(this.element),this.highlight=new Dr,this.container=o,Ni.observe(this.element,t=>{var e;const{width:i,height:s}=t;if(!this.autoSize)return;if(0===i&&0===s)return;const[n=0,r=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];n===i&&r===s||(this._lastAutoSize=[i,s],this.resize())}),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)),this.interactionManager.addListener("click",t=>this.onClick(t)),this.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t)),this.interactionManager.addListener("hover",t=>this.onMouseMove(t)),this.interactionManager.addListener("leave",t=>this.onLeave(t)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",t=>{this.update(Or.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),this.zoomManager.addListener("zoom-change",t=>this.update(Or.PROCESS_DATA,{forceNodeDataRefresh:!0})),this.attachLegend("category")}getOptions(){var t;const{queuedUserOptions:e}=this;return En([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}set container(t){if(this._container!==t){const{parentNode:e}=this.element;null!=e&&e.removeChild(this.element),t&&!this.destroyed&&t.appendChild(this.element),this._container=t}}get container(){return this._container}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize()}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:s,highlightManager:n,interactionManager:r,tooltipManager:o,zoomManager:a,dataService:l,layoutService:h,updateService:c,mode:d,callbackCache:u}=this;return{scene:t,animationManager:e,chartEventManager:i,cursorManager:s,highlightManager:n,interactionManager:r,tooltipManager:o,zoomManager:a,dataService:l,layoutService:h,updateService:c,mode:d,callbackCache:u}}destroy(t){var e;if(this._destroyed)return;const i=null==t?void 0:t.keepTransferableResources;let s=void 0;this._performUpdateType=Or.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(e=this.legend)||void 0===e||e.destroy(),this.overlays.noData.hide(),Ni.unobserve(this.element);for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t];return this.interactionManager.destroy(),i?(this.scene.strip(),s={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.series.forEach(t=>t.destroy()),this.series=[],this.axes.forEach(t=>t.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,s}log(t){this.debug&&Dt.debug(t)}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){const e=this._pendingFactoryUpdates,i=e.length;0===i?(e.push(t),this._processCallbacks().catch(t=>Dt.errorOnce(t))):e.splice(1,i-1,t)}_processCallbacks(){return qr(this,void 0,void 0,(function*(){const t=this._pendingFactoryUpdates;for(;t.length>0;)if(this.updatePending)yield Jn(1);else{try{yield t[0](),this.callbackCache.invalidateCache()}catch(t){Dt.error("update error",t)}t.shift()}}))}get performUpdateType(){return this._performUpdateType}get updatePending(){return this._performUpdateType!==Or.NONE||null!=this.lastInteractionEvent}get lastPerformUpdateError(){return this._lastPerformUpdateError}awaitUpdateCompletion(){return qr(this,void 0,void 0,(function*(){yield this.performUpdateTrigger.await()}))}update(t=Or.FULL,e){const{forceNodeDataRefresh:i=!1,seriesToUpdate:s=this.series}=null!=e?e:{};i&&this.series.forEach(t=>t.markNodeDataDirty());for(const t of s)this.seriesToUpdate.add(t);t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule())}performUpdate(t){var e;return qr(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:s}=this,n=[performance.now()];switch(i){case Or.FULL:case Or.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),n.push(performance.now());case Or.PERFORM_LAYOUT:if(this.autoSize&&!this._lastAutoSize){if(this._performUpdateNoRenderCount++<5){this._performUpdateType=Or.PERFORM_LAYOUT,this.performUpdateTrigger.schedule();break}}this._performUpdateNoRenderCount=0,yield this.performLayout(),this.handleOverlays(),n.push(performance.now());case Or.SERIES_UPDATE:const{seriesRect:t}=this,r=[...this.seriesToUpdate].map(e=>e.update({seriesRect:t}));this.seriesToUpdate.clear(),yield Promise.all(r),n.push(performance.now());case Or.TOOLTIP_RECALCULATION:const o=this.tooltipManager.getTooltipMeta(this.id);i<Or.SERIES_UPDATE&&"hover"===(null===(e=null==o?void 0:o.event)||void 0===e?void 0:e.type)&&this.handlePointer(o.event);case Or.SCENE_RENDER:yield this.scene.render({debugSplitTimes:n,extraDebugStats:s}),this.extraDebugStats={};case Or.NONE:this._performUpdateType=Or.NONE}const r=performance.now();this.log({chart:this,durationMs:Math.round(100*(r-n[0]))/100,count:t,performUpdateType:Or[i]})}))}set axes(t){const e=new Set;this._axes.forEach(t=>{t.detachAxis(this.axisGroup),e.add(t)}),this._axes=t.filter(t=>!t.linkedTo).concat(t.filter(t=>t.linkedTo)),this._axes.forEach(t=>{t.attachAxis(this.axisGroup),e.delete(t)}),e.forEach(t=>t.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),t.forEach(t=>this.addSeries(t))}get series(){return this._series}addSeries(t,e){const{series:i,seriesRoot:s}=this;if(i.indexOf(t)<0){const n=e?i.indexOf(e):-1;return n>=0?(i.splice(n,0,t),s.insertBefore(t.rootGroup,e.rootGroup)):(i.push(t),s.append(t.rootGroup)),this.initSeries(t),!0}return!1}initSeries(t){t.chart=this,t.highlightManager=this.highlightManager,t.animationManager=this.animationManager,t.data||(t.data=this.data),this.addSeriesListeners(t),t.chartEventManager=this.chartEventManager,t.addChartEventListeners()}freeSeries(t){t.chart=void 0,t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}removeAllSeries(){this.series.forEach(t=>{this.freeSeries(t),this.seriesRoot.removeChild(t.rootGroup)}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>(t.direction===ei.X?e.xAxis:e.yAxis)===t)})}assignAxesToSeries(t=!1){const e={};this.axes.forEach(t=>{var i;const s=t.direction;(null!==(i=e[s])&&void 0!==i?i:e[s]=[]).push(t)}),this.series.forEach(i=>{i.directions.forEach(s=>{if((s===ei.X?i.xAxis:i.yAxis)&&!t)return;const n=e[s];if(!n)return void Dt.warn(`no available axis for direction [${s}]; check series and axes configuration.`);const r=i.getKeys(s),o=this.findMatchingAxis(n,i.getKeys(s));o?s===ei.X?i.xAxis=o:i.yAxis=o:Dt.warn(`no matching axis for direction [${s}] and keys [${r}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const s of e)if(t.indexOf(s)>=0)return i}}resize(t,e){var i,s,n,r;null!=t||(t=null!==(i=this.width)&&void 0!==i?i:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[0]:this.scene.canvas.width),null!=e||(e=null!==(n=this.height)&&void 0!==n?n:this.autoSize?null===(r=this._lastAutoSize)||void 0===r?void 0:r[1]:this.scene.canvas.height),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)&&(this.disablePointer(),this.update(Or.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))}processData(){return qr(this,void 0,void 0,(function*(){(this.axes.length>0||this.series.some(t=>t instanceof qn))&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),yield Promise.all(this.series.map(t=>t.processData())),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const s of this.series){if(!s.visible)continue;const n=s.getLabelData();n&&(null!=(i=n[0])&&"object"==typeof i.point&&"object"==typeof i.label)&&(e.push(n),t.push(s))}var i;const{seriesRect:s}=this,n=s&&e.length>0?function(t,e,i=5){const s=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let l=0;l<t.length;l++){const h=s[l]=[],c=t[l];if((null==c?void 0:c.length)&&c[0].label)for(let l=0,d=c.length;l<d;l++){const d=c[l],u=d.label,p=.5*d.point.size,g=d.point.x-.5*u.width,f=d.point.y-p-u.height-i,{width:m,height:y}=u;if(!(!e||(o=f,a=y,(r=g)+m<(n=e).x+n.width&&r>n.x&&o>n.y&&o+a<n.y+n.height)))continue;if(t.some(t=>t.some(t=>Fi(t.point,g,f,m,y))))continue;s.some(t=>t.some(t=>_i(t,g,f,m,y)))||h.push({index:l,text:u.text,x:g,y:f,width:m,height:y,datum:d})}}var n,r,o,a;return s}(e,{x:0,y:0,width:s.width,height:s.height}):[];return new Map(n.map((e,i)=>[t[i],e]))}attachLegend(t){var e;if(this.legendType===t)return;null===(e=this.legend)||void 0===e||e.destroy(),this.legend=void 0;const i=this.getModuleContext();this.legend=function(t,e){if(Yr[t])return new Yr[t](e);throw new Error("AG Charts - unknown legend type: "+t)}(t,i),this.legend.attachLegend(this.scene.root),this.legendType=t}setLegendInit(t){this.applyLegendOptions=t}updateLegend(){var t;return qr(this,void 0,void 0,(function*(){const e=[];this.series.filter(t=>t.showInLegend).forEach(t=>{const i=t.getLegendData();e.push(...i)});const i=e.length>0?e[0].legendType:"category";this.attachLegend(i),null===(t=this.applyLegendOptions)||void 0===t||t.call(this,this.legend),"category"===i&&this.validateLegendData(e),this.legend.data=e}))}validateLegendData(t){const e={};t.forEach(t=>{var i,s,n,r,o;const a=null===(i=this.series.find(e=>e.id===t.seriesId))||void 0===i?void 0:i.type;if(!a)return;const l=t;null!==(s=e[a])&&void 0!==s||(e[a]={[l.label.text]:new Set}),null!==(n=(r=e[a])[o=l.label.text])&&void 0!==n||(r[o]=new Set),null!=l.marker.fill&&e[a][l.label.text].add(l.marker.fill)}),Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(i=>{e[t][i].size>1&&Dt.warnOnce(`legend item '${i}' has multiple fill colors, this may cause unexpected behaviour.`)})})}performLayout(){return qr(this,void 0,void 0,(function*(){this.scene.root.visible=!0;const{scene:{width:t,height:e}}=this;let i=new dt(0,0,t,e);return({shrinkRect:i}=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i})),({shrinkRect:i}=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i})),i}))}positionPadding(t){const{padding:e}=this;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e;const{title:i,subtitle:s,footnote:n}=this,r=t.clone(),o=e=>{var i;const s=t.height/10,n=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*Vt.defaultLineHeightRatio,r=t.width,o=Math.max(n,s);e.computeTextWrap(r,o)},a=t=>{var e;const i=r.y;t.node.x=r.x+r.width/2,t.node.y=i,t.node.textBaseline="top",o(t);const s=t.node.computeBBox(),n=Math.ceil(s.y-i+s.height+(null!==(e=t.spacing)&&void 0!==e?e:0));r.shrink(n,"top")};return i&&(i.node.visible=i.enabled,i.node.visible&&a(i)),s&&(s.node.visible=null!==(e=(null==i?void 0:i.enabled)&&s.enabled)&&void 0!==e&&e,s.node.visible&&a(s)),n&&(n.node.visible=n.enabled,n.node.visible&&(t=>{var e;const i=r.y+r.height;t.node.x=r.x+r.width/2,t.node.y=i,t.node.textBaseline="bottom",o(t);const s=t.node.computeBBox(),n=Math.ceil(i-s.y+(null!==(e=t.spacing)&&void 0!==e?e:0));r.shrink(n,"bottom")})(n)),{shrinkRect:r}}getSeriesRect(){return this.seriesRect}pickSeriesNode(t,e,i){var s,n;const r=performance.now(),o=e?[yi.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l=void 0;for(const e of a){if(!e.visible||!e.rootGroup.visible)continue;const{match:n,distance:r}=null!==(s=e.pickNode(t,o))&&void 0!==s?s:{};if(n&&null!=r&&((!l||l.distance>r)&&r<=(null!=i?i:1/0)&&(l={series:e,distance:r,datum:n}),0===r))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(n=this.extraDebugStats.pickSeriesNode)&&void 0!==n?n:0)+(performance.now()-r)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(Or.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:s,offsetY:n}=t,r=(t=!1)=>{e&&this.disablePointer(t)};(null==i?void 0:i.containsPoint(s,n))?(this.handlePointerTooltip(t,r),this.handlePointerNode(t)):r()}handlePointerTooltip(t,e){var i,s;const{lastPick:n,tooltip:r}=this,{range:o}=r,{pageX:a,pageY:l,offsetX:h,offsetY:c}=t;let d;"number"==typeof o&&Number.isFinite(o)&&(d=o);const u=this.pickSeriesNode({x:h,y:c},"exact"===o,d);if(!u)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const p="node"===this.highlight.range||!n||n.datum!==u.datum;let g;p?(g=u.series.getTooltipHtml(u.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,u.datum)):n&&(n.event=t.sourceEvent);const f=null!=d,m=this.tooltip.enabled&&u.series.tooltip.enabled,y="exact"===o&&0===u.distance,v=m&&("nearest"===o||f||y)&&(!p||void 0!==g),b={xOffset:u.datum.series.tooltip.position.xOffset,yOffset:u.datum.series.tooltip.position.yOffset},x=this.mergePointerDatum({pageX:a,pageY:l,offsetX:h,offsetY:c,event:t,showArrow:u.series.tooltip.showArrow,position:b},u.datum);x.enableInteraction=null!==(s=null===(i=u.series.tooltip.interaction)||void 0===i?void 0:i.enabled)&&void 0!==s&&s,v&&this.tooltipManager.updateTooltip(this.id,x,g)}handlePointerNode(t){this.checkSeriesNodeRange(t,(t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(Or.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(Or.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),s=null==i?void 0:i.datum,n=null==s?void 0:s.series.nodeClickRange;if(s&&"nearest"===n)return e(s.series,s),!0;let r;"number"==typeof n&&Number.isFinite(n)&&(r=n);const o=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},"exact"===n,r);if(!o)return!1;const a=null!=r,l="exact"===n&&0===o.distance;return!(!a&&!l)&&(e(o.series,o.datum),!0)}mergePointerDatum(t,e){const{type:i}=e.series.tooltip.position;if("node"===i&&e.nodeMidPoint){const{x:i,y:s}=e.nodeMidPoint,{canvas:n}=this.scene,r=e.series.rootGroup.inverseTransformPoint(i,s),o=n.element.getBoundingClientRect();return Object.assign(Object.assign({},t),{pageX:Math.round(o.left+window.scrollX+r.x),pageY:Math.round(o.top+window.scrollY+r.y),offsetX:Math.round(r.x),offsetY:Math.round(r.y)})}return t}changeHighlightDatum(t){var e,i;const s=new Set,{series:n,datum:r}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:o,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};o&&s.add(o),n&&s.add(n),(null==o?void 0:o.cursor)&&a&&this.cursorManager.updateCursor(o.id),(null==n?void 0:n.cursor)&&r&&this.cursorManager.updateCursor(n.id,n.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==n||null==o?this.update(Or.SERIES_UPDATE):this.update(Or.SERIES_UPDATE,{seriesToUpdate:s})}waitForUpdate(t=5e3){return qr(this,void 0,void 0,(function*(){const e=performance.now();for(;this._pendingFactoryUpdates.length>0||this.updatePending;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield Jn(5)}yield this.awaitUpdateCompletion()}))}handleOverlays(){this.handleNoDataOverlay()}handleNoDataOverlay(){const t=!this.series.some(t=>t.hasData()),e=this.getSeriesRect();t&&e?this.overlays.noData.show(e):this.overlays.noData.hide()}}$r([gs({newValue(t){this.scene.debug.consoleLog=t}})],Zr.prototype,"debug",void 0),$r([gs({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach(e=>e.data=t)}})],Zr.prototype,"data",void 0),$r([gs({newValue(t){this.resize(t)}})],Zr.prototype,"width",void 0),$r([gs({newValue(t){this.resize(void 0,t)}})],Zr.prototype,"height",void 0),$r([gs({changeValue(t){this.autoSizeChanged(t)}}),re(me)],Zr.prototype,"autoSize",void 0),$r([gs({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],Zr.prototype,"title",void 0),$r([gs({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],Zr.prototype,"subtitle",void 0),$r([gs({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],Zr.prototype,"footnote",void 0),$r([re(Ne("standalone","integrated"))],Zr.prototype,"mode",void 0);class Jr{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function Qr(t,e=!0){const i=new Jr;let s=0;return e&&t.forEach(t=>s=Math.max(s,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<s;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),s=i.length-1;i.forEach((e,i)=>{const n=t.children,r=n.find(t=>t.label===e),o=i!==s;if(r&&o)t=r;else{const i=new Jr(e,t);i.number=n.length,n.push(i),o&&(t=i)}})}(i,t)}),i}function to(t,e,i){const s=i/(e.number-t.number);e.change-=s,e.shift+=i,t.change+=s,e.prelim+=i,e.mod+=i}function eo(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function io(t,e){const i=t.children;if(i.length){let s=i[0];i.forEach(t=>{io(t,e),s=function(t,e,i){const s=t.getLeftSibling();if(s){let n=t,r=t,o=s,a=r.getLeftmostSibling(),l=r.mod,h=n.mod,c=o.mod,d=a.mod;for(;o.nextRight()&&r.nextLeft();){o=o.nextRight(),r=r.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=t;const s=o.prelim+c-(r.prelim+l)+i;s>0&&(to(eo(o,t,e),t,s),l+=s,h+=s),c+=o.mod,l+=r.mod,d+=a.mod,h+=n.mod}o.nextRight()&&!n.nextRight()?(n.thread=o.nextRight(),n.mod+=c-h):(r.nextLeft()&&!a.nextLeft()&&(a.thread=r.nextLeft(),a.mod+=l-d),e=t)}return e}(t,s,e)}),function(t){const e=t.children;if(e){let t=0,i=0;for(let s=e.length-1;s>=0;s--){const n=e[s];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}}(t);const n=(i[0].prelim+i[i.length-1].prelim)/2,r=t.getLeftSibling();r?(t.prelim=r.prelim+e,t.mod=t.prelim-n):t.prelim=n}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class so{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:s}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}}function no(t){const e=new ro;return io(t,1),function t(e,i,s){e.x=e.prelim+i,e.y=e.depth,s.update(e),e.children.forEach(n=>t(n,i+e.mod,s))}(t,-t.prelim,e),function t(e){const i=e.children;let s=0;i.forEach(e=>{t(e),e.children.length?s+=e.leafCount:s++}),e.leafCount=s,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}class ro{constructor(){this.dimensions=new so,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,s=0,n=!1){const r=this.leafCount-1,o=this.depth,a=this.dimensions;let l=1,h=1;if(t>0&&r){const e=(a.right-a.left)/r;l=t/r/e,n&&(l=-l)}if(e>0&&o){const t=(a.bottom-a.top)/o;h=e/o/t}const c=new so;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*h,c.update(t,t=>({x:t.screenX,y:t.screenY}))});const d=-c.left,u=-c.top;this.nodes.forEach(t=>{t.screenX+=d+i,t.screenY+=u+s})}}var oo=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ao extends vn{constructor(){super(...arguments),this.grid=!1}}oo([re(me)],ao.prototype,"grid",void 0);class lo extends kn{constructor(t){super(t,new rs),this.tickScale=new rs,this.translation={x:0,y:0},this.line=new mn,this.label=new ao,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:s,tickScale:n,scale:r}=this;r.paddingOuter=.1,r.paddingInner=2*r.paddingOuter,this.range=r.range.slice(),this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=ss.select(s,as),this.axisLineSelection=ss.select(e,as),this.separatorSelection=ss.select(e,as),this.labelSelection=ss.select(i,Vt)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,s=(t[1]-t[0])/(e[1]-e[0]),n=s*e[0],r=t[0]-n;this.tickScale.range=i.range=[r,r+s],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,s=this.tickTreeLayout,n=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*n,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-s.depth*n,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e,boundSeries:i}=this,s=[];let n=void 0;i.filter(t=>t.visible).forEach(t=>{if(e===ei.X)if(void 0===n){const i=t.getDomain(e);s.push(i),n="number"==typeof i[0]}else n&&s.push(t.getDomain(e));else s.push(t.getDomain(e))});const r=(new Array).concat(...s),o=null!==(t=tn(r))&&void 0!==t?t:r;this.dataDomain=this.normaliseDataDomain(o),this.scale.domain=this.dataDomain}normaliseDataDomain(t){const e=t.filter((t,e,i)=>i.indexOf(t)===e),i=Qr(e);this.tickTreeLayout=no(i);const s=e.slice();return s.push(""),this.tickScale.domain=s,this.resizeTickTree(),e}update(t){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:e,label:i,label:{parallel:s},moduleCtx:{callbackCache:n},tickScale:r,range:o,title:a,title:{formatter:l=(t=>t.defaultValue)}={},_titleCaption:h}=this,c=e.range[0],d=e.range[1],u=Math.abs(d-c)/e.domain.length||0,p=Ft(this.rotation),g=Math.abs(Math.cos(p))<1e-8,f=i.getSideFlag();this.updatePosition({rotation:p,sideFlag:f}),h.node.visible=!1;const m=this.lineHeight,y=this.tickTreeLayout,v=e.ticks(),b=y?y.nodes:[],x=!!y&&y.depth>1,C=r.ticks(),{defaultRotation:S,configuredRotation:k,parallelFlipFlag:O}=nn({rotation:i.rotation,parallel:s,regularFlipRotation:Nt(p-Math.PI/2),parallelFlipRotation:Nt(p)}),w=this.gridLineSelection.update(this.gridLength?C:[]),T=this.labelSelection.update(b),D=i.formatter,M=new Map;let E=0;T.each((t,e,s)=>{var r;t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.fill=i.color,t.textBaseline=-1===O?"bottom":"hanging",t.textAlign="center",t.translationX=e.screenY-.25*i.fontSize,t.translationY=e.screenX,0===s?(null==a?void 0:a.enabled)&&v.length>0?(t.visible=!0,t.text=n.call(l,this.getTitleFormatterParams()),t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.fontWeight=a.fontWeight,t.fontFamily=a.fontFamily,t.textBaseline="hanging"):t.visible=!1:D?(t.text=null!==(r=n.call(D,{value:String(e.label),index:s}))&&void 0!==r?r:String(e.label),t.visible=e.screenX>=o[0]&&e.screenX<=o[1]):(t.text=String(e.label),t.visible=e.screenX>=o[0]&&e.screenX<=o[1]);const h=t.computeBBox();M.set(t.id,h),h.width>E&&(E=h.width)});const R=f*i.padding,P=this.label.grid,A=[];T.each((t,e,i)=>{if(t.x=R,t.rotationCenterX=R,e.children.length){t.translationX-=E-m+this.label.padding;const i=e.leafCount*u,s=M.get(t.id);s&&s.width>i?t.visible=!1:t.rotation=g?S:-Math.PI/2}else{t.rotation=k,t.textAlign="end",t.textBaseline="middle";const e=M.get(t.id);e&&e.height>u&&(t.visible=!1)}if(e.parent&&x){const t=e.children.length?e.screenX-e.leafCount*u/2:e.screenX-u/2;if(e.children.length){const s=-E-2*this.label.padding+e.screenY;A.push({y:t,x1:s+m,x2:s,toString:()=>String(i)})}else(e.number!==e.children.length-1||P)&&A.push({y:t,x1:0,x2:-E-2*this.label.padding,toString:()=>String(i)})}});let L=0;A.forEach(t=>L=Math.min(L,t.x2)),A.push({y:Math.max(c,d),x1:0,x2:L,toString:()=>String(A.length)});const I=this.separatorSelection.update(A);I.each((t,e)=>{t.x1=e.x1,t.x2=e.x2,t.y1=e.y,t.y2=e.y,t.visible=e.y>=o[0]-1e-7&&e.y<=o[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}),this.gridLineSelection=w,this.labelSelection=T;const N=y?y.depth+1:1,F=[];for(let t=0;t<N;t++)F.push(t);if(this.axisLineSelection.update(F).each((t,e,i)=>{const s=i>0?-E-2*this.label.padding-(i-1)*m:0;t.x1=s,t.x2=s,t.y1=o[0],t.y2=o[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=v.length>0&&(0===i||P&&x)}),this.gridLength){const t=this.gridStyle,e=t.length;w.each((i,s,n)=>{const a=Math.round(r.convert(s));i.x1=0,i.x2=-f*this.gridLength,i.y1=a,i.y2=a,i.visible=a>=o[0]&&a<=o[1];const l=t[n%e];i.stroke=l.stroke,i.strokeWidth=this.tick.width,i.lineDash=l.lineDash,i.fill=void 0})}return t}}lo.className="GroupedCategoryAxis",lo.type="groupedCategory",oo([re(Te)],lo.prototype,"labelColor",void 0);var ho=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};const co=["top","right","bottom","left"];class uo extends Zr{constructor(t=window.document,e,i){super(t,e,i),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return ho(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesRect:i,visibility:s,clipSeries:n}=this.updateAxes(e);this.seriesRoot.visible=s.series,this.seriesRect=i,this.series.forEach(t=>{t.rootGroup.translationX=Math.floor(i.x),t.rootGroup.translationY=Math.floor(i.y)});const{seriesRoot:r,seriesAreaPadding:o}=this,a=i.clone().grow(o),l=a.clone().grow(20);return this.hoverRect=l,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:a,hoverRect:l,visible:s.series},axes:this.axes.map(t=>Object.assign({id:t.id},t.getLayoutState()))}),n?r.setClipRectInGroupCoordinateSpace(a):r.setClipRectInGroupCoordinateSpace(),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),s=Object.assign({},this._lastVisibility),n=new Set(this._axes.map(t=>t.position));for(const t of Object.keys(i))n.has(t)||delete i[t];const r=(t,e)=>!Object.keys(t).some(t=>null==i[t])&&(s.crossLines===e.crossLines&&s.series===e.series&&Object.entries(i).every(([e,i])=>{const s=t[e];return null==i&&null==s||i===s}));let o={},a={},l=!1,h=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),c=0;do{Object.assign(i,o),Object.assign(s,a);const e=this.updateAxesPass(i,t.clone(),h);if(d=e.axisWidths,o=Object.entries(d).reduce((t,[e,i])=>(i&&Math.abs(i)===1/0&&(i=0),t[e]=null!=i?Math.ceil(i):i,t),{}),a=e.visibility,l=e.clipSeries,h=e.seriesRect,c++>10){Dt.warn("unable to find stable axis layout.");break}}while(!r(o,a));var d;return this.axes.forEach(e=>{if(e.setCrossLinesVisible(s.crossLines),h)switch(e.clipGrid(h.x,h.y,h.width+5,h.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,h.y,t.width+5,h.height+5);break;case"top":case"bottom":e.clipTickLines(h.x,t.y,h.width+5,t.height+5)}}),this._lastAxisWidths=i,this._lastVisibility=s,{seriesRect:h,visibility:s,clipSeries:l}}updateAxesPass(t,e,i){const{axes:s}=this,n={},r={},o={series:!0,crossLines:!0};let a=!1;const l={},h=this.applySeriesPadding(e),c=i?this.buildCrossLinePadding(t):{},d=this.buildAxisBound(h,t,c,o),u=this.buildSeriesRect(d,t);return s.forEach(e=>{var i,s;const{position:o}=e,{clipSeries:c,axisThickness:p,axisOffset:g}=this.calculateAxisDimensions({axis:e,seriesRect:u,paddedBounds:h,axisWidths:t,newAxisWidths:r,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=n[o])&&void 0!==i?i:0)>0});n[o]=(null!==(s=n[o])&&void 0!==s?s:0)+1,a=a||c,this.positionAxis({axis:e,axisBound:d,axisOffset:g,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:u})}),{clipSeries:a,seriesRect:u,axisWidths:r,visibility:o}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach(t=>{t.crossLines&&t.crossLines.forEach(t=>{t.calculatePadding(i)})});for(const[s,n=0]of Object.entries(i))i[s]=Math.max(n-(null!==(e=t[s])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return co.forEach(t=>{const s=this.seriesAreaPadding[t],n=i.find(e=>e.position===t);n?n.seriesAreaPadding=s:e.shrink(s,t)}),e}buildAxisBound(t,e,i,s){var n,r,o,a;const l=t.clone(),{top:h=0,right:c=0,bottom:d=0,left:u=0}=i,p=u+c,g=h+d,f=(null!==(n=e.left)&&void 0!==n?n:0)+(null!==(r=e.right)&&void 0!==r?r:0)+p,m=(null!==(o=e.top)&&void 0!==o?o:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+g;return l.width<=f||l.height<=m?(s.crossLines=!1,s.series=!1,l):(l.x+=u,l.y+=h,l.width-=p,l.height-=g,l)}buildSeriesRect(t,e){const i=t.clone(),{top:s,bottom:n,left:r,right:o}=e;return i.x+=null!=r?r:0,i.y+=null!=s?s:0,i.width-=(null!=r?r:0)+(null!=o?o:0),i.height-=(null!=s?s:0)+(null!=n?n:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,s){const{x:n,y:r,width:o,height:a}=t,l=[n,r,n+o,r+a];return(1===s?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===s?0:2)])}calculateAxisDimensions(t){var e,i,s,n,r,o;const{axis:a,seriesRect:l,paddedBounds:h,axisWidths:c,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:p}=t;let{clipSeries:g}=t;const{position:f,direction:m}=a,y=null!==(e=d[f])&&void 0!==e?e:0;switch(f){case"top":case"bottom":a.range=[0,l.width],a.gridLength=l.height;break;case"right":case"left":a.range=(t=>t instanceof wn||t instanceof lo?[0,l.height]:[l.height,0])(a),a.gridLength=l.width}const v=null===(i=this.zoomManager.getZoom())||void 0===i?void 0:i[a.direction],{min:b=0,max:x=1}=null!=v?v:{};a.visibleRange=[b,x],!g&&(a.visibleRange[0]>0||a.visibleRange[1]<1)&&(g=!0);let C=a.nice?u[m]:void 0;a.thickness>0?a.maxThickness=a.thickness:m===ei.Y?a.maxThickness=.3*h.width:a.maxThickness=.3*h.height,C=a.update(C),u[m]=null!==(s=u[m])&&void 0!==s?s:C;let S=0;if(a.thickness)S=a.thickness;else{const t=a.computeBBox();S=m===ei.X?t.height:t.width}return p&&(S+=15),S=Math.ceil(S),d[f]=(null!==(n=d[f])&&void 0!==n?n:0)+S,a.gridPadding=(null!==(r=c[f])&&void 0!==r?r:0)-(null!==(o=d[f])&&void 0!==o?o:0),{clipSeries:g,axisThickness:S,axisOffset:y}}positionAxis(t){var e,i,s,n;const{axis:r,axisBound:o,axisWidths:a,seriesRect:l,axisOffset:h,axisThickness:c}=t,{position:d}=r;switch(d){case"top":r.translation.x=o.x+(null!==(e=a.left)&&void 0!==e?e:0),r.translation.y=this.clampToOutsideSeriesRect(l,o.y+1+h+c,"y",1);break;case"bottom":r.translation.x=o.x+(null!==(i=a.left)&&void 0!==i?i:0),r.translation.y=this.clampToOutsideSeriesRect(l,o.y+o.height+1-c-h,"y",-1);break;case"left":r.translation.y=o.y+(null!==(s=a.top)&&void 0!==s?s:0),r.translation.x=this.clampToOutsideSeriesRect(l,o.x+h+c,"x",1);break;case"right":r.translation.y=o.y+(null!==(n=a.top)&&void 0!==n?n:0),r.translation.x=this.clampToOutsideSeriesRect(l,o.x+o.width-c-h,"x",-1)}r.updatePosition({rotation:Ft(r.rotation),sideFlag:r.label.getSideFlag()})}}uo.className="CartesianChart",uo.type="cartesian";class po extends Ai{constructor({moduleCtx:t,useLabelLayer:e=!1,pickModes:i=[yi.EXACT_SHAPE_MATCH]}){super({moduleCtx:t,useLabelLayer:e,pickModes:i,directionKeys:{[ei.X]:["angleKey"],[ei.Y]:["radiusKey"]},directionNames:{[ei.X]:["angleName"],[ei.Y]:["radiusName"]}}),this.centerX=0,this.centerY=0,this.radius=0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}}function go(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:r}=i;if(s<Math.min(n,r)||s>Math.max(n,r))return!1;let o=Math.atan2(e,t);o<-Math.PI/2&&(o+=2*Math.PI);const{startAngle:a,endAngle:l}=i;return l===-Math.PI/2?o<a:a===3*Math.PI/2?o>l:o<=l&&o>=a}function fo(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:r}=e,o={x:r*Math.cos(i),y:r*Math.sin(i)},a={x:r*Math.cos(s),y:r*Math.sin(s)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},h=0===n?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return null!=Wi(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||null!=Wi(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,h.x,h.y)||Hi(0,0,r,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var mo=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class yo extends $i{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0}computeBBox(){const t=this.outerRadius;return new dt(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,e=this.angleOffset,i=Math.min(this.startAngle,this.endAngle)+e,s=Math.max(this.startAngle,this.endAngle)+e,n=Math.min(this.innerRadius,this.outerRadius),r=Math.max(this.innerRadius,this.outerRadius),o=ls(Nt(this.startAngle),Nt(this.endAngle)),a=this.centerX,l=this.centerY;t.clear(),o?(t.arc(a,l,r,i,s),n>0&&(t.moveTo(a+n*Math.cos(s),l+n*Math.sin(s)),t.arc(a,l,n,s,i,!0))):(t.moveTo(a+n*Math.cos(i),l+n*Math.sin(i)),t.arc(a,l,r,i,s),n>0?t.arc(a,l,n,s,i,!0):t.lineTo(a,l)),t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,s=this.startAngle+i,n=this.endAngle+i,r=Math.min(this.innerRadius,this.outerRadius),o=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return go(a.x,a.y,{startAngle:s,endAngle:n,innerRadius:r,outerRadius:o})}}yo.className="Sector",mo([Xi()],yo.prototype,"centerX",void 0),mo([Xi()],yo.prototype,"centerY",void 0),mo([Xi()],yo.prototype,"innerRadius",void 0),mo([Xi()],yo.prototype,"outerRadius",void 0),mo([Xi()],yo.prototype,"startAngle",void 0),mo([Xi()],yo.prototype,"endAngle",void 0),mo([Xi()],yo.prototype,"angleOffset",void 0);const vo={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e,i)=>{const s=i.keys[0],n=Math.abs(s-t);return t=s,!isNaN(n)&&n>0&&n<e?n:e}}},bo={type:"processor",property:"aggValuesExtent",calculate:t=>{var e,i,s,n;const r=[...null!==(i=null===(e=t.domain.aggValues)||void 0===e?void 0:e[0])&&void 0!==i?i:[0,0]];for(const[e,i]of null!==(n=null===(s=t.domain.aggValues)||void 0===s?void 0:s.slice(1))&&void 0!==n?n:[])e<r[0]&&(r[0]=e),i>r[1]&&(r[1]=i);return r}},xo={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>{if(null!=t)return[...t].sort((t,e)=>{for(let i=0;i<t.length;i++){const s=t[i]-e[i];if(0!==s)return s}return 0})}};function Co(t,e,i="sum"){const s=(t,i)=>{const s=t*e/i;return s>=0?Math.min(e,s):Math.max(-e,s)};return{type:"group-value-processor",properties:t,adjust:()=>(t,e)=>{const n=[0,0];for(const s of e){const e=t[s],r=e<0?0:1;"sum"===i?n[r]+=e:n[r]=0===r?Math.min(n[r],e):Math.max(n[r],e)}const r=Math.max(Math.abs(n[0]),n[1]);for(const i of e)t[i]=s(t[i],r)}}}function So(t,e,i,s){const n=e[1]-e[0],r=(t,i,s)=>{const r=e[0]+(t-i)/s*n;return 0===s||r>=e[1]?e[1]:r<e[0]?e[0]:r};return{type:"property-value-processor",property:t,adjust:()=>(t,n)=>{let[o,a]=t.domain.values[n];null!=i&&(o=i),null!=s&&(a=s);const l=a-o;t.domain.values[n]=[e[0],e[1]];for(const e of t.data){let i=e.values;"ungrouped"===t.type&&(i=[i]);for(const t of i)t[n]=r(t[n],o,l)}}}}var ko,Oo=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},wo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class To extends ki{constructor(t,e,i,s,n,r,o){super(n,r,o),this.angleKey=t,this.calloutLabelKey=e,this.sectorLabelKey=i,this.radiusKey=s}}class Do extends To{constructor(){super(...arguments),this.type="nodeClick"}}class Mo extends To{constructor(){super(...arguments),this.type="nodeDoubleClick"}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(ko||(ko={}));class Eo extends sn{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.formatter=void 0,this.minSpacing=4,this.maxCollisionOffset=50}}Oo([re(Ee(0))],Eo.prototype,"offset",void 0),Oo([re(Ee(0))],Eo.prototype,"minAngle",void 0),Oo([re(fe)],Eo.prototype,"formatter",void 0),Oo([re(Ee(0))],Eo.prototype,"minSpacing",void 0),Oo([re(Ee(0))],Eo.prototype,"maxCollisionOffset",void 0);class Ro extends sn{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5,this.formatter=void 0}}Oo([re(Ee())],Ro.prototype,"positionOffset",void 0),Oo([re(Ee(0,1))],Ro.prototype,"positionRatio",void 0),Oo([re(fe)],Ro.prototype,"formatter",void 0);class Po{constructor(){this.colors=void 0,this.length=10,this.strokeWidth=1}}Oo([re(Me)],Po.prototype,"colors",void 0),Oo([re(Ee(0))],Po.prototype,"length",void 0),Oo([re(Ee(0))],Po.prototype,"strokeWidth",void 0);class Ao extends Ri{constructor(){super(...arguments),this.renderer=void 0}}Oo([re(fe)],Ao.prototype,"renderer",void 0);class Lo extends ms{constructor(){super(...arguments),this.showInLegend=!1}}Oo([re(me)],Lo.prototype,"showInLegend",void 0);class Io extends sn{constructor(){super(...arguments),this.text="",this.margin=2}}Oo([re(ve)],Io.prototype,"text",void 0),Oo([re(Ee())],Io.prototype,"margin",void 0);class No{constructor(){this.fill="transparent",this.fillOpacity=1}}Oo([re(we)],No.prototype,"fill",void 0),Oo([re(Re(0,1))],No.prototype,"fillOpacity",void 0);class Fo extends zn{}class _o extends po{constructor(t){super({moduleCtx:t,useLabelLayer:!0}),this.radiusScale=new Cn,this.groupSelection=ss.select(this.contentGroup,Et),this.highlightSelection=ss.select(this.highlightGroup,Et),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new Eo,this.sectorLabel=new Ro,this.calloutLine=new Po,this.tooltip=new Ao,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new Ei,this.surroundingRadius=void 0,this.angleScale=new Cn,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.backgroundGroup=this.rootGroup.appendChild(new Et({name:this.id+"-background",layer:!0,zIndex:ti.SERIES_BACKGROUND_ZINDEX}));const e=new Et({name:"pieCalloutLabels"}),i=new Et({name:"pieSectorLabels"}),s=new Et({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=ss.select(e,Et),this.sectorLabelSelection=ss.select(i,Vt),this.innerLabelsSelection=ss.select(s,Vt),this.animationState=new Fo("empty",{empty:{on:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()}}},ready:{on:{update:{target:"ready",action:()=>this.animateReadyUpdateReady()}}}})}set data(t){this._data=t,this.processSeriesItemEnabled()}get data(){return this._data}addChartEventListeners(){var t;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null==e?void 0:e.map(()=>i))&&void 0!==t?t:[]}getDomain(t){return t===ei.X?this.angleScale.domain:this.radiusScale.domain}processData(){var t,e;return wo(this,void 0,void 0,(function*(){let{data:i=[]}=this;const{angleKey:s,radiusKey:n,seriesItemEnabled:r}=this;if(!s)return;const o=[];n&&(o.push(function(t,e={}){const{min:i=-1/0,max:s=1/0}=e,n=bi(e,["min","max"]);return Object.assign({type:"value",property:t,valueType:"range",validation:t=>null!=te(t,!0),processor:()=>t=>"number"!=typeof t||isNaN(t)?t:Math.min(Math.max(t,i),s)},n)}(n,{id:"radiusValue",min:null!==(t=this.radiusMin)&&void 0!==t?t:0,max:this.radiusMax}),Ci(n,!0,{id:"radiusRaw"}),So({id:"radiusValue"},[0,1],null!==(e=this.radiusMin)&&void 0!==e?e:0,this.radiusMax)),o.push()),i=i.map((t,e)=>r[e]?t:Object.assign(Object.assign({},t),{[s]:0})),this.dataModel=new oi({props:[Si(s,!0,{id:"angleValue"}),Ci(s,!0,{id:"angleRaw"}),So({id:"angleValue"},[0,1],0),...o]}),this.processedData=this.dataModel.processData(i)}))}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=this._createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){return wo(this,void 0,void 0,(function*(){return this._createNodeData()}))}_createNodeData(){var t,e,i,s;const{id:n,processedData:r,dataModel:o,rotation:a,angleScale:l}=this;if(!r||!o||"ungrouped"!==r.type)return[];const h=null!==(e=null===(t=o.resolveProcessedDataIndexById("angleValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,c=null!==(s=null===(i=o.resolveProcessedDataIndexById("radiusValue"))||void 0===i?void 0:i.index)&&void 0!==s?s:-1;if(h<0)return[];let d=0;const u=r.data.map((t,e)=>{var i;const{datum:s,values:n}=t,r=n[h],o=l.convert(d)+Ft(a);d=r;const u=l.convert(d)+Ft(a),p=Math.abs(u-o),g=o+p/2,f=n[h+1],m=c>=0&&null!==(i=n[c])&&void 0!==i?i:1,y=c>=0?n[c+1]:void 0,v=this.getLabels(s,g,p,!0),b=this.getSectorFormat(s,e,e,!1);return Object.assign({itemId:e,series:this,datum:s,index:e,angleValue:f,midAngle:g,midCos:Math.cos(g),midSin:Math.sin(g),startAngle:o,endAngle:u,sectorFormat:b,radius:m,radiusValue:y},v)});return[{itemId:n,nodeData:u,labelData:u}]}getLabels(t,e,i,s){const{calloutLabel:n,sectorLabel:r,legendItemKey:o,ctx:{callbackCache:a}}=this,l=!s||n.enabled?this.calloutLabelKey:void 0,h=!s||r.enabled?this.sectorLabelKey:void 0;if(!l&&!h&&!o)return{};const c=this.getLabelFormatterParams(t);let d,u,p;if(l){d=i>Ft(n.minAngle)?n.formatter?a.call(n.formatter,c):String(t[l]):void 0}return h&&(u=r.formatter?a.call(r.formatter,c):String(t[h])),o&&(p=String(t[o])),Object.assign(Object.assign(Object.assign({},null!=d?{calloutLabel:Object.assign(Object.assign({},this.getTextAlignment(e)),{text:d,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=u?{sectorLabel:{text:u}}:{}),null!=o&&null!=p?{legendItem:{key:o,text:p}}:{})}getLabelFormatterParams(t){const{id:e,radiusKey:i,radiusName:s,angleKey:n,angleName:r,calloutLabelKey:o,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:h}=this;return{datum:t,angleKey:n,angleValue:t[n],angleName:r,radiusKey:i,radiusValue:i?t[i]:void 0,radiusName:s,calloutLabelKey:o,calloutLabelValue:o?t[o]:void 0,calloutLabelName:a,sectorLabelKey:l,sectorLabelValue:l?t[l]:void 0,sectorLabelName:h,seriesId:e}}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}];var i;const s=(i=t,(i%=It)<-Math.PI?i+=It:i>=Math.PI&&(i-=It),i)- -3*Math.PI/4,n=Math.floor(s/(Math.PI/2));var r,o;return e[(o=e.length,(r=n)>=0?Math.floor(r%o):Math.floor(r%o+o))]}getSectorFormat(t,e,i,s){var n,r,o,a,l,h,c,d,u;const{angleKey:p,radiusKey:g,fills:f,strokes:m,fillOpacity:y,formatter:v,id:b,ctx:{callbackCache:x}}=this,C=null===(n=this.highlightManager)||void 0===n?void 0:n.getActiveHighlight(),S=s&&(null==C?void 0:C.series)===this&&e===C.itemId,k=S?this.highlightStyle.item:null,O=null!==(r=null==k?void 0:k.fill)&&void 0!==r?r:f[i%f.length],w=null!==(o=null==k?void 0:k.fillOpacity)&&void 0!==o?o:y,T=null!==(a=null==k?void 0:k.stroke)&&void 0!==a?a:m[i%m.length],D=null!==(l=null==k?void 0:k.strokeWidth)&&void 0!==l?l:this.getStrokeWidth(this.strokeWidth);let M;return v&&(M=x.call(v,{datum:t,angleKey:p,radiusKey:g,fill:O,stroke:T,strokeWidth:D,highlighted:S,seriesId:b})),{fill:null!==(h=null==M?void 0:M.fill)&&void 0!==h?h:O,fillOpacity:null!==(c=null==M?void 0:M.fillOpacity)&&void 0!==c?c:w,stroke:null!==(d=null==M?void 0:M.stroke)&&void 0!==d?d:T,strokeWidth:null!==(u=null==M?void 0:M.strokeWidth)&&void 0!==u?u:D}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,s=t*(null!=e?e:1)+(i||0);return s===t||s<0?0:s}getOuterRadius(){const{radius:t,outerRadiusRatio:e,outerRadiusOffset:i}=this,s=t*(null!=e?e:1)+(i||0);return s<0?0:s}updateRadiusScale(){const t=this.getInnerRadius(),e=this.getOuterRadius();this.radiusScale.range=[t,e]}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return wo(this,void 0,void 0,(function*(){const{title:e}=this;if(this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.rootGroup.translationX=this.centerX,this.rootGroup.translationY=this.centerY,e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:s}=this;s!==i&&(s&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(s.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateInnerCircleNodes(){var t;const{innerCircle:e,oldInnerCircle:i,innerCircleNode:s}=this;if(i!==e){let i;s&&this.backgroundGroup.removeChild(s),e&&(i=new Ji,i.fill=e.fill,i.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1,this.backgroundGroup.appendChild(i)),this.oldInnerCircle=e,this.innerCircleNode=i}}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=this.radiusScale.convert(t.radius);t.nodeMidPoint={x:t.midCos*Math.max(0,e/2),y:t.midSin*Math.max(0,e/2)}})}updateSelections(){return wo(this,void 0,void 0,(function*(){yield this.updateGroupSelection()}))}updateGroupSelection(){return wo(this,void 0,void 0,(function*(){const{groupSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,r=t=>t.update(this.nodeData,t=>{const e=new yo;e.tag=ko.Sector,t.appendChild(e)});this.groupSelection=r(t),this.highlightSelection=r(e),i.update(this.nodeData,t=>{const e=new as;e.tag=ko.Callout,e.pointerEvents=bt.None,t.appendChild(e);const i=new Vt;i.tag=ko.Label,i.pointerEvents=bt.None,t.appendChild(i)}),s.update(this.nodeData,t=>{t.pointerEvents=bt.None}),n.update(this.innerLabels,t=>{t.pointerEvents=bt.None})}))}updateNodes(t){var e;return wo(this,void 0,void 0,(function*(){const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=s,this.backgroundGroup.visible=s,this.contentGroup.visible=s,this.highlightGroup.visible=s&&(null==i?void 0:i.series)===this,this.labelGroup.visible=s,this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle();const{radiusScale:n}=this,r=n.convert(0),o=(t,e,i,s)=>{const o=n.convert(e.radius),a=t.parent,l=null==a?void 0:a.parent;s&&a&&l&&(l.removeChild(a),l.appendChild(a)),t.innerRadius=Math.max(0,r),t.outerRadius=Math.max(0,o),s&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle);const h=this.getSectorFormat(e.datum,e.itemId,i,s);t.fill=h.fill,t.stroke=h.stroke,t.strokeWidth=h.strokeWidth,t.fillOpacity=h.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round",t.visible=this.seriesItemEnabled[i]};this.groupSelection.selectByTag(ko.Sector).forEach((t,e)=>o(t,t.datum,e,!1)),this.highlightSelection.selectByTag(ko.Sector).forEach((t,e)=>{const s=(null==i?void 0:i.series)===this&&t.datum.itemId===i.itemId;t.visible=s,t.visible&&o(t,t.datum,e,s)}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes()}))}updateCalloutLineNodes(){var t;const{radiusScale:e,calloutLine:i}=this,s=i.length,n=i.strokeWidth,r=null!==(t=i.colors)&&void 0!==t?t:this.strokes,{offset:o}=this.calloutLabel;this.calloutLabelSelection.selectByTag(ko.Callout).forEach((t,i)=>{const a=t.datum,l=e.convert(a.radius),h=Math.max(0,l),c=a.calloutLabel;if((null==c?void 0:c.text)&&!c.hidden&&0!==h){t.visible=!0,t.strokeWidth=n,t.stroke=r[i%r.length],t.fill=void 0;const e=a.midCos*h,l=a.midSin*h;let d=a.midCos*(h+s),u=a.midSin*(h+s);if(c.collisionTextAlign||0!==c.collisionOffsetY){const t=c.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const s=e-d,n=i-u,r=Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),a=r-o;a>0&&(d+=s*a/r,u+=n*a/r)}t.x1=e,t.y1=l,t.x2=d,t.y2=u}else t.visible=!1})}getLabelOverflow(t,e,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,r=i.y-this.centerY,o=i.y+i.height-this.centerY;let a=1;e.x+1<s?a=(e.x+e.width-s)/e.width:e.x+e.width-1>n&&(a=(n-e.x)/e.width);const l=e.y+1<r||e.y+e.height-1>o;return{visibleTextPart:a,textLength:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:s}=this;if(null==s)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],r=Math.pow(s,2);return n.some(t=>Math.pow(t.x,2)+Math.pow(t.y,2)>r)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:s,minSpacing:n}=e,r=t.convert(0),o=this.nodeData,a=this.nodeData.filter(e=>!(e=>{const i=e.calloutLabel,s=t.convert(e.radius),n=Math.max(0,s);return!i||0===n})(e));if(a.forEach(t=>{const e=t.calloutLabel;e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0}),a.length<=1)return;const l=a.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),h=a.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),c=a.filter(t=>t.midSin<0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),d=a.filter(t=>t.midSin>=0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),u=new Vt,p=e=>{const n=e.calloutLabel,r=t.convert(e.radius),o=Math.max(0,r)+i.length+s,a=e.midCos*o,l=e.midSin*o+n.collisionOffsetY;return this.setTextDimensionalProps(u,a,l,this.calloutLabel,n),u.computeBBox()},g=(t,e,i)=>{const s=p(t).grow(n/2),r=p(e).grow(n/2);if(s.x<r.x+r.width&&s.x+s.width>r.x&&("to-top"===i?s.y<r.y+r.height:s.y+s.height>r.y)){const t="to-top"===i?s.y-r.y-r.height:s.y+s.height-r.y;e.calloutLabel.collisionOffsetY=t}},f=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],s=t[e];g(i,s,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],s=t[e];g(i,s,"to-bottom")}},m=e=>{const i=a.some(t=>0!==t.calloutLabel.collisionOffsetY),s=e.map(t=>p(t)),l=s.map(t=>t.clone().grow(n/2));let h=!1;for(let t=0;t<l.length&&!h;t++){const i=l[t];for(let s=t+1;s<e.length;s++){const t=l[s];if(i.collidesBBox(t)){h=!0;break}}}const c=o.map(e=>{const{startAngle:i,endAngle:s}=e,n=t.convert(e.radius),o=Math.max(0,n);return{startAngle:i,endAngle:s,innerRadius:r,outerRadius:o}}),d=s.some(t=>c.some(e=>function(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},r={x:t.x+t.width,y:t.y+t.height};return fo({start:i,end:s},e)||fo({start:n,end:r},e)}(t,e)));(h||i||d)&&e.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};f(l),f(h),m(c),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:s}=this,n=s.length,{offset:r,color:o}=i,a=new Vt;this.calloutLabelSelection.selectByTag(ko.Label).forEach(i=>{const{datum:s}=i,l=s.calloutLabel,h=e.convert(s.radius),c=Math.max(0,h);if(!(null==l?void 0:l.text)||0===c||l.hidden)return void(i.visible=!1);const d=c+n+r,u=s.midCos*d,p=s.midSin*d+l.collisionOffsetY;this.setTextDimensionalProps(a,u,p,this.calloutLabel,l);const g=a.computeBBox(),{visibleTextPart:f,textLength:m,hasVerticalOverflow:y}=this.getLabelOverflow(l.text,g,t),v=1===f?l.text:l.text.substring(0,m)+"\u2026";this.setTextDimensionalProps(i,u,p,this.calloutLabel,Object.assign(Object.assign({},l),{text:v})),i.fill=o,i.visible=!y})}computeLabelsBBox(t,e){var i;const{radiusScale:s,calloutLabel:n,calloutLine:r}=this,o=r.length,{offset:a,maxCollisionOffset:l,minSpacing:h}=n;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();const c=[],d=new Vt;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(this.setTextDimensionalProps(d,0,t,this.title,{text:this.title.text,textBaseline:"bottom",textAlign:"center",hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0}),u=d.computeBBox(),c.push(u))}return this.nodeData.forEach(i=>{const n=i.calloutLabel,r=s.convert(i.radius),p=Math.max(0,r);if(!n||0===p)return null;const g=p+o+a,f=i.midCos*g,m=i.midSin*g+n.collisionOffsetY;this.setTextDimensionalProps(d,f,m,this.calloutLabel,n);const y=d.computeBBox();if(n.box=y,Math.abs(n.collisionOffsetY)>l)n.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new dt(u.x-h,t,u.width+2*h,u.y+u.height+h-t);if(y.collidesBBox(i))return void(n.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:s}=this.getLabelOverflow(n.text,y,e),r=n.text.length>2&&t<2;if(i||r||s)return void(n.hidden=!0)}n.hidden=!1,c.push(y)}}),0===c.length?null:dt.merge(c)}setTextDimensionalProps(t,e,i,s,n){var r,o;const{fontStyle:a,fontWeight:l,fontSize:h,fontFamily:c}=s;t.fontStyle=a,t.fontWeight=l,t.fontSize=h,t.fontFamily=c,t.text=n.text,t.x=e,t.y=i,t.textAlign=null!==(o=null!==(r=null==n?void 0:n.collisionTextAlign)&&void 0!==r?r:null==n?void 0:n.textAlign)&&void 0!==o?o:"center",t.textBaseline=n.textBaseline}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:r,positionOffset:o,positionRatio:a,color:l}=this.sectorLabel,h=e>0,c=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((d,u)=>{const p=u.sectorLabel,g=t.convert(u.radius),f=Math.max(0,g);let m=!1;if(p&&0!==f){const t=e*(1-a)+g*a+o;d.fill=l,d.fontStyle=s,d.fontWeight=n,d.fontSize=i,d.fontFamily=r,d.text=p.text;!h&&c?(d.x=0,d.y=0):(d.x=u.midCos*t,d.y=u.midSin*t),d.textAlign="center",d.textBaseline="middle";const y=d.computeBBox(),v=[[y.x,y.y],[y.x+y.width,y.y],[y.x+y.width,y.y+y.height],[y.x,y.y+y.height]],{startAngle:b,endAngle:x}=u,C={startAngle:b,endAngle:x,innerRadius:e,outerRadius:f};v.every(([t,e])=>go(t,e,C))&&(m=!0)}d.visible=m})}updateInnerCircle(){const t=this.innerCircleNode;if(!t)return;const e=this.getInnerRadius();if(0===e)t.size=0;else{const i=Math.min(e,this.getOuterRadius()),s=1;t.size=Math.ceil(2*i+s)}}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,s)=>{const{fontStyle:n,fontWeight:r,fontSize:o,fontFamily:a,color:l}=s;i.fontStyle=n,i.fontWeight=r,i.fontSize=o,i.fontFamily=a,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(s.margin)});const i=t=>0===t?0:e[t],s=t=>t===e.length-1?0:e[t],n=t.reduce((t,e,n)=>t+e.height+i(n)+s(n),0),r=Math.max(...t.map(t=>t.width)),o=this.getInnerRadius(),a=Math.sqrt(Math.pow(r/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),l=[];for(let e=0,r=-n/2;e<t.length;e++){const n=t[e].height+r+i(e);l.push(n),r=n+s(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=a})}getNodeClickEvent(t,e){return new Do(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new Mo(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getTooltipHtml(t){var e;const{angleKey:i}=this;if(!i)return"";const{tooltip:s,angleName:n,radiusKey:r,radiusName:o,calloutLabelKey:a,sectorLabelKey:l,calloutLabelName:h,sectorLabelName:c,id:d}=this,{renderer:u}=s,{datum:p,angleValue:g,radiusValue:f,sectorFormat:{fill:m},calloutLabel:{text:y=""}={}}=t,v="number"==typeof g?hs(g):String(g),b=null===(e=this.title)||void 0===e?void 0:e.text,x={title:b,backgroundColor:m,content:`${y?y+": ":""}${v}`};return u?hi(u({datum:p,angleKey:i,angleValue:g,angleName:n,radiusKey:r,radiusValue:f,radiusName:o,calloutLabelKey:a,calloutLabelName:h,sectorLabelKey:l,sectorLabelName:c,title:b,color:m,seriesId:d}),x):hi(x)}getLegendData(){var t,e,i;const{calloutLabelKey:s,legendItemKey:n,id:r,data:o}=this;if(!o||0===o.length)return[];if(!n&&!s)return[];const a=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,l=[];for(let t=0;t<o.length;t++){const h=o[t],c=[];a&&c.push(a);const d=this.getLabels(h,2*Math.PI,2*Math.PI,!1);if(n&&void 0!==d.legendItem?c.push(d.legendItem.text):s&&void 0!==(null===(e=d.calloutLabel)||void 0===e?void 0:e.text)&&c.push(null===(i=d.calloutLabel)||void 0===i?void 0:i.text),0===c.length)continue;const u=this.getSectorFormat(h,t,t,!1);l.push({legendType:"category",id:r,itemId:t,seriesId:r,enabled:this.seriesItemEnabled[t],label:{text:c.join(" - ")},marker:{fill:u.fill,stroke:u.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}return l}onLegendItemClick(t){const{enabled:e,itemId:i,series:s}=t;s.id===this.id?this.toggleSeriesItem(i,e):"pie"===s.type&&this.toggleOtherSeriesItems(s,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var s,n;const{legendItemKey:r}=this;if(!r)return;const o=t.legendItemKey&&(null===(s=t.data)||void 0===s?void 0:s.find((t,i)=>i===e)[t.legendItemKey]);o&&(null===(n=this.data)||void 0===n||n.forEach((t,e)=>{t[r]===o&&this.toggleSeriesItem(e,i)}))}animateEmptyUpdateReady(){const t=Math.PI/-2+Ft(this.rotation);this.groupSelection.selectByTag(ko.Sector).forEach(e=>{var i;const s=e.datum;null===(i=this.animationManager)||void 0===i||i.animateMany(`${this.id}_empty-update-ready_${e.id}`,[{from:t,to:s.startAngle},{from:t,to:s.endAngle}],{disableInteractions:!0,duration:1e3,ease:lr,repeat:0,onUpdate([t,i]){e.startAngle=t,e.endAngle=i}})});const e={from:0,to:1,delay:1e3,duration:200,ease:ar,repeat:0};this.calloutLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.sectorLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.innerLabelsSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))})}animateReadyUpdateReady(){this.groupSelection.selectByTag(ko.Sector).forEach(t=>{const{datum:e}=t;t.startAngle=e.startAngle,t.endAngle=e.endAngle})}}_o.className="PieSeries",_o.type="pie",Oo([re(ve)],_o.prototype,"angleKey",void 0),Oo([re(ve)],_o.prototype,"angleName",void 0),Oo([re(be)],_o.prototype,"radiusKey",void 0),Oo([re(be)],_o.prototype,"radiusName",void 0),Oo([re(Re(0))],_o.prototype,"radiusMin",void 0),Oo([re(Re(0))],_o.prototype,"radiusMax",void 0),Oo([re(be)],_o.prototype,"calloutLabelKey",void 0),Oo([re(be)],_o.prototype,"calloutLabelName",void 0),Oo([re(be)],_o.prototype,"sectorLabelKey",void 0),Oo([re(be)],_o.prototype,"sectorLabelName",void 0),Oo([re(be)],_o.prototype,"legendItemKey",void 0),Oo([re(De)],_o.prototype,"fills",void 0),Oo([re(De)],_o.prototype,"strokes",void 0),Oo([re(Ee(0,1))],_o.prototype,"fillOpacity",void 0),Oo([re(Ee(0,1))],_o.prototype,"strokeOpacity",void 0),Oo([re(Ve)],_o.prototype,"lineDash",void 0),Oo([re(Ee(0))],_o.prototype,"lineDashOffset",void 0),Oo([re(fe)],_o.prototype,"formatter",void 0),Oo([re(Ee(-360,360))],_o.prototype,"rotation",void 0),Oo([re(Ee())],_o.prototype,"outerRadiusOffset",void 0),Oo([re(Ee(0))],_o.prototype,"outerRadiusRatio",void 0),Oo([re(Ee())],_o.prototype,"innerRadiusOffset",void 0),Oo([re(Ee(0))],_o.prototype,"innerRadiusRatio",void 0),Oo([re(Ee(0))],_o.prototype,"strokeWidth",void 0);var Bo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class Go extends Zr{constructor(t=window.document,e,i){super(t,e,i),this.padding=new Ii(40)}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return Bo(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();this.computeSeriesRect(e),this.computeCircle();const s=e.clone().grow(20);return this.hoverRect=s,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:e,hoverRect:s,visible:!0},axes:[]}),e}))}computeSeriesRect(t){const{seriesAreaPadding:e}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t}computeCircle(){const t=this.seriesRect,e=this.series.filter(t=>t instanceof po),i=(t,i,s)=>{e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=s});const n=e.filter(t=>t instanceof _o);if(n.length>1){const t=n.map(t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},s=t.x+t.width/2,n=t.y+t.height/2,r=Math.max(0,Math.min(t.width,t.height)/2);let o=r;i(s,n,o);const a=({hideWhenNecessary:a=!1}={})=>{const l=[];for(const i of e){const e=i.computeLabelsBBox({hideWhenNecessary:a},t);null!=e&&l.push(e)}if(0===l.length)return void i(s,n,r);const h=dt.merge(l),c=this.refineCircle(h,o);i(c.centerX,c.centerY,c.radius),c.radius!==o&&(o=c.radius)};a(),a(),a(),a({hideWhenNecessary:!0}),a({hideWhenNecessary:!0})}refineCircle(t,e){const i=this.seriesRect,s=-e,n=-e,r=e,o=e;let a=Math.max(0,s-t.x),l=Math.max(0,n-t.y),h=Math.max(0,t.x+t.width-r),c=Math.max(0,t.y+t.height-o);const d=i.width-a-h,u=i.height-l-c;let p=Math.min(d,u)/2;const g=.5*i.width/2,f=.5*i.height/2,m=Math.min(g,f);if(p<m){p=m;const t=a+h;if(2*p+(l+c)>i.height){const t=i.height-2*p;2*Math.min(l,c)>t?(l=t/2,c=t/2):l>c?l=t-c:c=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,h)>t?(a=t/2,h=t/2):a>h?a=t-h:h=t-a}}const y=a+2*p+h,v=l+2*p+c;return{centerX:i.x+(i.width-y)/2+a+p,centerY:i.y+(i.height-v)/2+l+p,radius:p}}}Go.className="PolarChart",Go.type="polar";var jo=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class zo extends Zr{constructor(t=window.document,e,i){super(t,e,i),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return jo(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesAreaPadding:i}=this,s=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e;const n=e.clone().grow(20);this.hoverRect=n,yield Promise.all(this.series.map(t=>jo(this,void 0,void 0,(function*(){t.rootGroup.translationX=Math.floor(e.x),t.rootGroup.translationY=Math.floor(e.y),yield t.update({seriesRect:e})}))));const{seriesRoot:r}=this;return r.setClipRectInGroupCoordinateSpace(new dt(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:s,paddedRect:e,hoverRect:n,visible:!0},axes:[]}),e}))}}zo.className="HierarchyChart",zo.type="hierarchy";const Wo=/(#\{(.*?)\})/g;function Vo(t,e,i){return t.replace(Wo,(function(...t){const s=t[2],[n,r]=s.split(":"),o=e[n];if("number"==typeof o){const t=r&&i&&i[r];if(t){const{locales:e,options:i}=t;return o.toLocaleString(e,i)}return String(o)}if(o instanceof Date){const t=r&&i&&i[r];if("string"==typeof t){return Ps(t)(o)}return o.toDateString()}return"string"==typeof o||(null==o?void 0:o.toString)?String(o):""}))}let Ko=null;function Ho(t){return Ko=null!=Ko?Ko:document.createElement("div"),t?(Ko.textContent=t,Ko.innerHTML):""}function Yo(t,e){let i=Math.floor(t[0]),s=t[1];i=function(t,e,i){const s=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(s)),r=Math.pow(10,n);return Math.floor(t/r)*r}(i,s,e);const n=function(t,e,i){return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i*10;if(s>0&&s<=1)return i/10;if(s>1&&s<=2)return 2*i/10;if(s>1&&s<=5)return 5*i/10;if(s>5&&s<=10)return 10*i/10;if(s>10&&s<=20)return 20*i/10;if(s>20&&s<=40)return 40*i/10;if(s>40&&s<=50)return 50*i/10;if(s>50&&s<=100)return 100*i/10;return s}((e-t)/(i-1))}(i,s,e);s=i+(e-1)*n;return[[i,s],function(t,e,i){const s=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(s):0,r=Math.pow(10,n),o=new ks(n);for(let s=0;s<i;s++){const i=t+e*s;o[s]=Math.round(i*r)/r}return o}(i,n,e)]}var Uo=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Xo extends yn{constructor(){super(...arguments),this.maxSpacing=NaN}}Uo([re(ce(Pe(1),pe("minSpacing"))),Qs(NaN)],Xo.prototype,"maxSpacing",void 0);class $o extends kn{constructor(t,e=new Cn){super(t,e),this.min=NaN,this.max=NaN,e.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:s}=this;return t.length>2&&(t=null!==(e=tn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(s)||(t=[t[0],s]),t[0]>t[1]&&(t=[]),t}formatDatum(t){return"number"==typeof t?t.toFixed(2):(Dt.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new Xo}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");const[e,i]=Yo(this.dataDomain,null!=t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}$o.className="NumberAxis",$o.type="number",Uo([re(ce(Pe(),ue("max"))),Qs(NaN)],$o.prototype,"min",void 0),Uo([re(ce(Pe(),pe("min"))),Qs(NaN)],$o.prototype,"max",void 0);var qo=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};function Zo(){return oe(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}class Jo extends $o{constructor(t){super(t,new Js),this.min=NaN,this.max=NaN,this.scale.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:s}=this;t.length>2&&(t=null!==(e=tn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(s)||(t=[t[0],s]);const n=t[0]>t[1],r=t[0]<0&&t[1]>0,o=0===t[0]&&0===t[1];return(n||r||o)&&(t=[],r?Dt.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):o&&Dt.warn("the data domain has 0 extent, no data is rendered.")),0===t[0]&&(t[0]=1),0===t[1]&&(t[1]=-1),t}set base(t){this.scale.base=t}get base(){return this.scale.base}}Jo.className="LogAxis",Jo.type="log",qo([re(ce(Pe(),ue("max"),Zo())),Qs(NaN)],Jo.prototype,"min",void 0),qo([re(ce(Pe(),pe("min"),Zo())),Qs(NaN)],Jo.prototype,"max",void 0);var Qo=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ta extends yn{constructor(){super(...arguments),this.maxSpacing=NaN}}Qo([re(ce(Pe(1),pe("minSpacing"))),Qs(NaN)],ta.prototype,"maxSpacing",void 0);class ea extends kn{constructor(t){super(t,new Ns),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;e.strictClampByDefault=!0,this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:s}=this;return"number"==typeof i&&(i=new Date(i)),"number"==typeof s&&(s=new Date(s)),t.length>2&&(t=(null!==(e=tn(t))&&void 0!==e?e:[0,1e3]).map(t=>new Date(t))),i instanceof Date&&(t=[i,t[1]]),s instanceof Date&&(t=[t[0],s]),t[0]>t[1]&&(t=[]),t}createTick(){return new ta}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return 1}}ea.className="TimeAxis",ea.type="time",Qo([re(ce(ke,ue("max")))],ea.prototype,"min",void 0),Qo([re(ce(ke,pe("min")))],ea.prototype,"max",void 0);var ia,sa=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},na=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class ra extends sn{constructor(){super(...arguments),this.formatter=void 0}}sa([re(fe)],ra.prototype,"formatter",void 0);class oa extends Ri{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}sa([re(fe)],oa.prototype,"renderer",void 0),sa([re(be)],oa.prototype,"format",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(ia||(ia={}));class aa extends qn{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,directionKeys:{[ei.X]:["xKey"],[ei.Y]:["yKeys"]},directionNames:{[ei.X]:["xName"],[ei.Y]:["yNames"]}}),this.tooltip=new oa,this.marker=new Zn,this.label=new ra,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this._yKeys=[],this._visibles=[],this.yNames=[],this.strokeWidth=2,this.shadow=void 0;const{marker:e,label:i}=this;e.enabled=!1,i.enabled=!1}set yKeys(t){ys(this._yKeys,t)||(this._yKeys=t,this.processedData=void 0,this.processSeriesItemEnabled())}get yKeys(){return this._yKeys}set visibles(t){this._visibles=t,this.processSeriesItemEnabled()}get visibles(){return this._visibles}processSeriesItemEnabled(){const{seriesItemEnabled:t,_visibles:e=[]}=this;t.clear(),this._yKeys.forEach((i,s)=>{var n;return t.set(i,null===(n=e[s])||void 0===n||n)})}set normalizedTo(t){const e=t?Math.abs(t):void 0;this._normalizedTo!==e&&(this._normalizedTo=e)}get normalizedTo(){return this._normalizedTo}processData(){return na(this,void 0,void 0,(function*(){const{xKey:t,yKeys:e,seriesItemEnabled:i,xAxis:s,yAxis:n,normalizedTo:r}=this,o=t&&e.length&&this.data?this.data:[],a=(null==s?void 0:s.scale)instanceof bs,l=(null==n?void 0:n.scale)instanceof bs,h=[...i.entries()].filter(([,t])=>t).map(([t])=>t),c=r&&isFinite(r)?r:void 0,d=[];c&&d.push(Co(h,c,"sum")),this.dataModel=new oi({props:[xi(t,a,{id:"xValue"}),...h.map(t=>Ci(t,l,{id:"yValue-"+t,missingValue:NaN,invalidValue:void 0})),fi(h),...d],groupByKeys:!0,dataVisible:this.visible&&h.length>0}),this.processedData=this.dataModel.processData(o)}))}getDomain(t){const{processedData:e,xAxis:i,yAxis:s}=this;if(!e)return[];const{defs:{keys:[n]},domain:{keys:[r],values:[o],aggValues:[a]=[]}}=e;return t===ei.X?"category"===n.valueType?r:this.fixNumericExtent(tn(r),i):s instanceof Jo||s instanceof ea?this.fixNumericExtent(o,s):this.fixNumericExtent(a,s)}createNodeData(){var t;return na(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,data:s,processedData:{data:n}={},ctx:{callbackCache:r}}=this;if(!e||!i||!s)return[];const o=[],{yKeys:a,xKey:l="",marker:h,label:c,fills:d,strokes:u,id:p}=this,{scale:g}=e,{scale:f}=i,m=f instanceof bs,y=(null!==(t=g.bandwidth)&&void 0!==t?t:0)/2,v=s.length,b=new Array(v).fill(null).map(()=>({left:0,right:0})),x=new Array(v).fill(0),C=(t,e,i,s)=>{const n=g.convert(t)+y,r=b[i][s],o=b[i][s]+e,a=f.convert(r,{strict:!1}),l=f.convert(o,{strict:!1});return b[i][s]=o,[{x:n,y:l,size:h.size},{x:n,y:a,size:h.size}]},S=(t,e,i,s)=>{let n;const r=this.normalizedTo&&isFinite(this.normalizedTo),o=r&&m&&Qt(s);(!r&&!isNaN(s)||o)&&(n=x[i]+=e);return{x:g.convert(t)+y,y:f.convert(n,{strict:!1}),size:h.size}};return a.forEach((t,e)=>{var i;const s=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("yValue-"+t),a=[],g=[],f={itemId:t,points:[],yValues:[]},m={itemId:t,points:[]};if(o[e]={itemId:t,fillSelectionData:m,labelData:a,nodeData:g,strokeSelectionData:f},!s)return;const y=m.points,v=[],b=f.points,k=f.yValues;let O=-1;null==n||n.forEach((i,o)=>{const{keys:[f],datum:m,values:w}=i;w.forEach((T,D)=>{var M;O++;const E=m[D],R=T[s.index],P=isNaN(R)?void 0:R,A=D<w.length-1,L=A?i:n[o+1],I=null==L?void 0:L.keys[0],N=A?D+1:0,F=null==L?void 0:L.values[N][s.index],_=isNaN(F)?void 0:F,B=S(f,+P,O,E[t]);let G;h&&g.push({index:O,series:this,itemId:t,datum:E,nodeMidPoint:{x:B.x,y:B.y},cumulativeValue:x[O],yValue:P,yKey:t,xKey:l,point:B,fill:d[e%d.length],stroke:u[e%u.length]}),G=c.formatter?null!==(M=r.call(c.formatter,{value:P,seriesId:p}))&&void 0!==M?M:"":ee(P)?Number(P).toFixed(2):String(P),c&&a.push({index:O,itemId:t,point:B,label:G?{text:G,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0});const j=[f,I],z=[P,_];if(j.some(t=>null==t))return;z.some(t=>null==t)&&(z[0]=0,z[1]=0);const W=C(j[0],+z[0],O,"right");y.push(W[0]),v.push(W[1]);const V=C(j[1],+z[1],O,"left");y.push(V[0]),v.push(V[1]),b.push({x:NaN,y:NaN}),k.push(void 0),b.push(W[0]),k.push(P),void 0!==_&&(b.push(V[0]),k.push(P))})});for(let t=v.length-1;t>=0;t--)y.push(v[t])}),o}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(jn(t))}updateMarkerSelection(t){return na(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:s}}=this,n=s&&e?e:[];return this.marker.isDirty()&&i.clear(),i.update(n,t=>{t.tag=ia.Marker})}))}updateMarkerNodes(t){var e;return na(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:s}=t,{id:n,xKey:r="",marker:o,seriesItemEnabled:a,yKeys:l,fills:h,strokes:c,fillOpacity:d,marker:{fillOpacity:u=d},strokeOpacity:p,highlightStyle:{item:{fill:g,fillOpacity:f=u,stroke:m,strokeWidth:y}},ctx:{callbackCache:v}}=this,{size:b,formatter:x}=o,C=null!==(e=o.strokeWidth)&&void 0!==e?e:this.strokeWidth,S="function"==typeof o.shape;i.each((t,e)=>{var i,d,k,O,w,T,D,M;const E=l.indexOf(e.yKey),R=s&&void 0!==g?g:null!==(i=o.fill)&&void 0!==i?i:h[E%h.length],P=s?f:u,A=s&&void 0!==m?m:null!==(d=o.stroke)&&void 0!==d?d:c[E%h.length],L=s&&void 0!==y?y:C;let I=void 0;x&&(I=v.call(x,{datum:e.datum,xKey:r,yKey:e.yKey,fill:R,stroke:A,strokeWidth:L,size:b,highlighted:s,seriesId:n})),t.fill=null!==(k=null==I?void 0:I.fill)&&void 0!==k?k:R,t.stroke=null!==(O=null==I?void 0:I.stroke)&&void 0!==O?O:A,t.strokeWidth=null!==(w=null==I?void 0:I.strokeWidth)&&void 0!==w?w:L,t.fillOpacity=null!=P?P:1,t.strokeOpacity=null!==(D=null!==(T=o.strokeOpacity)&&void 0!==T?T:p)&&void 0!==D?D:1,t.size=null!==(M=null==I?void 0:I.size)&&void 0!==M?M:b,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!!a.get(e.yKey)&&!isNaN(e.point.x)&&!isNaN(e.point.y),S&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),s||this.marker.markClean()}))}updateLabelSelection(t){return na(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=ia.Label})}))}updateLabelNodes(t){return na(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:n,fontSize:r,fontFamily:o,color:a}=this.label;e.each((t,e)=>{const{point:l,label:h}=e;h&&i?(t.fontStyle=s,t.fontWeight=n,t.fontSize=r,t.fontFamily=o,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i;return new Un(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new Xn(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getTooltipHtml(t){var e,i,s,n;const{xKey:r,id:o}=this,{yKey:a}=t,l=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue-"+a);if(!r||!a||!l)return"";const h=t.datum,c=h[r],d=h[a],{xAxis:u,yAxis:p,yKeys:g}=this;if(!(u&&p&&ee(d)&&l))return"";const{xName:f,yNames:m,fills:y,strokes:v,tooltip:b,marker:x}=this,{size:C,formatter:S,strokeWidth:k,fill:O,stroke:w}=x,T=u.formatDatum(c),D=p.formatDatum(d),M=g.indexOf(a),E=null===(s=null===(i=this.processedData)||void 0===i?void 0:i.data[t.index])||void 0===s?void 0:s.values[0][null==l?void 0:l.index],R=m[M],P=Ho(R),A=Ho(T+": "+D),L=null!=k?k:this.strokeWidth,I=null!=O?O:y[M%y.length],N=null!=w?w:v[M%y.length];let F=void 0;S&&(F=S({datum:h,xKey:r,yKey:a,fill:I,stroke:N,strokeWidth:L,size:C,highlighted:!1,seriesId:o}));const _=null!==(n=null==F?void 0:F.fill)&&void 0!==n?n:I,B={title:P,backgroundColor:_,content:A},{renderer:G,format:j}=b;if(j||G){const t={datum:h,xKey:r,xName:f,xValue:c,yKey:a,yValue:d,processedYValue:E,yName:R,color:_,title:P,seriesId:o};if(j)return hi({content:Vo(j,t)},B);if(G)return hi(G(t),B)}return hi(B)}getLegendData(){var t,e,i,s,n;const{data:r,id:o,xKey:a,yKeys:l,yNames:h,seriesItemEnabled:c,marker:d,fills:u,strokes:p,fillOpacity:g,strokeOpacity:f}=this;if(!(null==r?void 0:r.length)||!a||!l.length)return[];const m=[];for(let r=l.length-1;r>=0;r--){const a=l[r];m.push({legendType:"category",id:o,itemId:a,seriesId:o,enabled:null!==(t=c.get(a))&&void 0!==t&&t,label:{text:h[r]||l[r]},marker:{shape:d.shape,fill:null!==(e=d.fill)&&void 0!==e?e:u[r%u.length],stroke:null!==(i=d.stroke)&&void 0!==i?i:p[r%p.length],fillOpacity:null!==(s=d.fillOpacity)&&void 0!==s?s:g,strokeOpacity:null!==(n=d.strokeOpacity)&&void 0!==n?n:f}})}return m}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,r={},o=1===Object.values(n).reduce((t,e)=>t+e,0)&&e;if(s.id===this.id){const t=Object.values(n).filter(t=>1===t).length===Object.keys(n).length;this.yKeys.forEach(s=>{var n;const a=s===i||o||t&&e;r[s]=null!==(n=r[s])&&void 0!==n?n:a})}else this.yKeys.forEach(t=>{r[t]=o});Object.keys(r).forEach(t=>{super.toggleSeriesItem(t,r[t])})}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:s,seriesRect:n}){const{strokes:r,fills:o,fillOpacity:a,lineDash:l,lineDashOffset:h,strokeOpacity:c,strokeWidth:d,shadow:u}=this;i.forEach(({fillSelectionData:i,strokeSelectionData:p,itemId:g},f)=>{var m,y,v;const[b,x]=s[f],C={from:0,to:null!==(m=null==n?void 0:n.width)&&void 0!==m?m:0,disableInteractions:!0,duration:1e3,ease:ar,repeat:0};{const{points:t,yValues:e}=p;x.tag=ia.Stroke,x.fill=void 0,x.lineJoin=x.lineCap="round",x.pointerEvents=bt.None,x.stroke=r[f%r.length],x.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:g}),x.strokeOpacity=c,x.lineDash=l,x.lineDashOffset=h,null===(y=this.animationManager)||void 0===y||y.animate(`${this.id}_empty-update-ready_stroke_${f}`,Object.assign(Object.assign({},C),{onUpdate(i){x.path.clear({trackChanges:!0});let s=!0;t.forEach((n,r)=>{if(void 0===e[r]||isNaN(n.x)||isNaN(n.y))s=!0;else if(n.x<=i)s?(x.path.moveTo(n.x,n.y),s=!1):x.path.lineTo(n.x,n.y);else if(r>0&&void 0!==e[r]&&void 0!==e[r-1]&&t[r-1].x<=i){const e=t[r-1],s=n,o=i,a=e.y+(o-e.x)*(s.y-e.y)/(s.x-e.x);x.path.lineTo(o,a)}}),x.checkPathDirty()}}))}{const{points:t}=i,e=t.slice(0,t.length/2),s=t.slice(t.length/2);b.tag=ia.Fill,b.stroke=void 0,b.lineJoin="round",b.pointerEvents=bt.None,b.fill=o[f%o.length],b.fillOpacity=a,b.strokeOpacity=c,b.strokeWidth=d,b.lineDash=l,b.lineDashOffset=h,b.fillShadow=u,null===(v=this.animationManager)||void 0===v||v.animate(`${this.id}_empty-update-ready_fill_${f}`,Object.assign(Object.assign({},C),{onUpdate(t){b.path.clear({trackChanges:!0});let i=0,n=0;e.forEach((s,r)=>{if(s.x<=t)i=s.x,n=s.y,b.path.lineTo(s.x,s.y);else if(r>0&&e[r-1].x<t){const o=e[r-1],a=s;i=t,n=o.y+(i-o.x)*(a.y-o.y)/(a.x-o.x),b.path.lineTo(i,n)}}),s.forEach((n,r)=>{const o=s.length-r-1;if(n.x<=t)b.path.lineTo(n.x,n.y);else if(o>0&&e[o-1].x<t){const t=n,e=s[r+1],o=t.y+(i-t.x)*(e.y-t.y)/(e.x-t.x);b.path.lineTo(i,o)}}),s.length>0&&b.path.lineTo(s[s.length-1].x,s[s.length-1].y),b.path.closePath(),b.checkPathDirty()}}))}t[f].each((t,e)=>{var i,s,r,o;const a=(null==n?void 0:n.width)?e.point.x/n.width*1e3:0,l=this.animateFormatter(e),h=null!==(s=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0;null===(r=this.animationManager)||void 0===r||r.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},C),{to:null!==(o=null==l?void 0:l.size)&&void 0!==o?o:h,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[f].each((t,e)=>{var i;const s=(null==n?void 0:n.width)?e.point.x/n.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:s,duration:200,ease:ar,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({contextData:t,paths:e}){const{strokes:i,fills:s,fillOpacity:n,lineDash:r,lineDashOffset:o,strokeOpacity:a,strokeWidth:l,shadow:h}=this;t.forEach(({strokeSelectionData:t,fillSelectionData:c,itemId:d},u)=>{const[p,g]=e[u];g.stroke=i[u%i.length],g.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:d}),g.strokeOpacity=a,g.lineDash=r,g.lineDashOffset=o,g.path.clear({trackChanges:!0});let f=!0;t.points.forEach((e,i)=>{void 0===t.yValues[i]||isNaN(e.x)||isNaN(e.y)?f=!0:f?(g.path.moveTo(e.x,e.y),f=!1):g.path.lineTo(e.x,e.y)}),g.checkPathDirty(),p.fill=s[u%s.length],p.fillOpacity=n,p.strokeOpacity=a,p.strokeWidth=l,p.lineDash=r,p.lineDashOffset=o,p.fillShadow=h,p.path.clear({trackChanges:!0}),c.points.forEach(t=>{p.path.lineTo(t.x,t.y)}),p.path.closePath(),p.checkPathDirty()})}animateFormatter(t){var e,i,s;const{marker:n,fills:r,strokes:o,xKey:a="",yKeys:l,id:h,ctx:{callbackCache:c}}=this,{size:d,formatter:u}=n,p=l.indexOf(t.yKey),g=null!==(e=n.fill)&&void 0!==e?e:r[p%r.length],f=null!==(i=n.stroke)&&void 0!==i?i:o[p%r.length],m=null!==(s=n.strokeWidth)&&void 0!==s?s:this.strokeWidth;let y=void 0;return u&&(y=c.call(u,{datum:t.datum,xKey:a,yKey:t.yKey,fill:g,stroke:f,strokeWidth:m,size:d,highlighted:!1,seriesId:h})),y}isLabelEnabled(){return this.label.enabled}}aa.className="AreaSeries",aa.type="area",sa([re(De)],aa.prototype,"fills",void 0),sa([re(De)],aa.prototype,"strokes",void 0),sa([re(Ee(0,1))],aa.prototype,"fillOpacity",void 0),sa([re(Ee(0,1))],aa.prototype,"strokeOpacity",void 0),sa([re(Ve)],aa.prototype,"lineDash",void 0),sa([re(Ee(0))],aa.prototype,"lineDashOffset",void 0),sa([re(be)],aa.prototype,"xKey",void 0),sa([re(be)],aa.prototype,"xName",void 0),sa([re(Ie)],aa.prototype,"_yKeys",void 0),sa([re(Fe)],aa.prototype,"_visibles",void 0),sa([re(Ie)],aa.prototype,"yNames",void 0),sa([re(Re())],aa.prototype,"_normalizedTo",void 0),sa([re(Ee(0))],aa.prototype,"strokeWidth",void 0);var la=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ha extends $i{constructor(){super(...arguments),this.borderPath=new Yi,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=jt.defaultStyles.strokeWidth,this.effectiveStrokeWidth=jt.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:s,borderPath:n,crisp:r}=this;let{x:o,y:a,width:l,height:h,strokeWidth:c}=this;const d=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let u=1;if(s.clear({trackChanges:!0}),n.clear({trackChanges:!0}),r&&(l<=d&&(u*=l/d),h<=d&&(u*=h/d),l=this.align(o,l),h=this.align(a,h),o=this.align(o),a=this.align(a)),c)if(l<d){const t=o+d/2;n.moveTo(t,a),n.lineTo(t,a+h),c=d,this.borderClipPath=void 0}else if(h<d){const t=a+d/2;n.moveTo(o,t),n.lineTo(o+l,t),c=d,this.borderClipPath=void 0}else if(c<l&&c<h){const t=c/2;o+=t,a+=t,l-=c,h-=c,this.borderClipPath=void 0,s.rect(o,a,l,h),n.rect(o,a,l,h)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new Yi,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(o,a,l,h),n.rect(o,a,l,h);else this.borderClipPath=void 0,s.rect(o,a,l,h);this.effectiveStrokeWidth=c,this.lastUpdatePathStrokeWidth=c,this.microPixelEffectOpacity=u}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new dt(t,e,i,s)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:s}=this,{globalAlpha:n}=t;t.globalAlpha=n*s*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:s,borderClipPath:n,opacity:r,microPixelEffectOpacity:o}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:h,lineCap:c,lineJoin:d}=this;n&&(n.draw(t),t.clip()),s.draw(t);const{globalAlpha:u}=t;t.strokeStyle=e,t.globalAlpha=u*r*a*o,t.lineWidth=i,l&&t.setLineDash(l),h&&(t.lineDashOffset=h),c&&(t.lineCap=c),d&&(t.lineJoin=d),t.stroke(),t.globalAlpha=u}}}ha.className="Rect",la([Xi()],ha.prototype,"x",void 0),la([Xi()],ha.prototype,"y",void 0),la([Xi()],ha.prototype,"width",void 0),la([Xi()],ha.prototype,"height",void 0),la([Xi()],ha.prototype,"radius",void 0),la([Xi()],ha.prototype,"crisp",void 0);var ca=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};function da({value:t,rect:e,placement:i,seriesId:s,padding:n=0,formatter:r,barAlongX:o,ctx:{callbackCache:a}}){let l;r&&(l=a.call(r,{value:ee(t)?t:void 0,seriesId:s})),void 0===l&&(l=ee(t)?t.toFixed(2):"");let h=e.x+e.width/2,c=e.y+e.height/2,d="center",u="middle";const p=t>=0;switch(i){case"start":o?(h=p?e.x-n:e.x+e.width+n,d=p?"start":"end"):(c=p?e.y+e.height+n:e.y-n,u=p?"top":"bottom");break;case"outside":case"end":o?(h=p?e.x+e.width+n:e.x-n,d=p?"start":"end"):(c=p?e.y-n:e.y+e.height+n,u=p?"bottom":"top");break;case"inside":default:u="middle"}return{text:l,textAlign:d,textBaseline:u,x:h,y:c}}var ua=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},pa=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};const ga=["inside","outside"];var fa;!function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(fa||(fa={}));class ma extends sn{constructor(){super(...arguments),this.formatter=void 0,this.placement="inside"}}ua([re(fe)],ma.prototype,"formatter",void 0),ua([re((t,e)=>ae(t,e,t=>ga.includes(t)))],ma.prototype,"placement",void 0);class ya extends Ri{constructor(){super(...arguments),this.renderer=void 0}}ua([re(fe)],ya.prototype,"renderer",void 0);class va extends qn{constructor(t){super({moduleCtx:t,pickModes:[yi.EXACT_SHAPE_MATCH],pathsPerSeries:0,directionKeys:{[ei.X]:["xKey"],[ei.Y]:["yKeys"]},directionNames:{[ei.X]:["xName"],[ei.Y]:["yNames"]}}),this.label=new ma,this.tooltip=new ya,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.groupScale=new rs,this.xKey=void 0,this.xName=void 0,this.cumYKeyCount=[],this.flatYKeys=void 0,this.hideInLegend=[],this.yKeys=[],this.yKeysCache=[],this.visibles=[],this.grouped=!1,this.stackGroups={},this.yNames={},this.legendItemNames={},this.strokeWidth=1,this.shadow=void 0,this.smallestDataInterval=void 0,this.label.enabled=!1}resolveKeyDirection(t){return this.getBarDirection()===ei.X?t===ei.X?ei.Y:ei.X:t}processYKeys(){let{yKeys:t}=this,e=void 0;var i;(i=t).length>0&&Array.isArray(i[0])||(e=t,t=this.grouped?e.map(t=>[t]):[e]);const s=Object.values(this.stackGroups);if(s.length>0){const e=t=>t.reduce((t,e)=>t.concat(e),[]),i=e(t),n=new Set(e(s)),r=i.filter(t=>!n.has(t));t=s.map(t=>t),r.length>0&&t.push(r);const o=(t=>t.reduce((t,e,i)=>t.set(e,i),new Map))(e(t)),a=t=>{const e=Array.from({length:t.length});return t.forEach((t,s)=>{const n=i[s],r=o.get(n);e[r]=t}),e};this.fills=a(this.fills),this.strokes=a(this.strokes),this.visibles=a(this.visibles)}if(!ys(this.yKeysCache,t)){this.flatYKeys=e||void 0,this.yKeys=t;let i=0;this.cumYKeyCount=[];const s=[];t.forEach((t,e)=>{t.length>0&&s.push(String(e)),this.cumYKeyCount.push(i),i+=t.length}),this.processSeriesItemEnabled();const{groupScale:n}=this;n.domain=s}this.yKeysCache=t}processSeriesItemEnabled(){const{seriesItemEnabled:t}=this,e=this.visibles.reduce((t,e)=>t.concat(...Array.isArray(e)?e:[e]),[]);t.clear();let i=0;this.yKeys.forEach(s=>{s.forEach(s=>{var n;return t.set(s,null===(n=e[i++])||void 0===n||n)})})}getStackGroup(t){var e;const{stackGroups:i}=this;return null===(e=Object.entries(i).find(([e,i])=>i.includes(t)))||void 0===e?void 0:e[0]}processYNames(){const t=this.yNames;if(Array.isArray(t)&&this.flatYKeys){const e={};this.flatYKeys.forEach((i,s)=>{e[i]=t[s]}),this.yNames=e}}processData(){var t,e,i,s,n;return pa(this,void 0,void 0,(function*(){this.processYKeys(),this.processYNames();const{xKey:r,seriesItemEnabled:o,normalizedTo:a,data:l=[]}=this,h=Math.abs(null!=a?a:NaN),c=(null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale)instanceof bs,d=(null===(e=this.getValueAxis())||void 0===e?void 0:e.scale)instanceof bs,u=[...o.entries()].filter(([,t])=>t).map(([t])=>t),p=this.yKeys.map(t=>t.filter(t=>o.get(t))).filter(t=>t.length>0),g=h&&isFinite(h)?h:void 0,f=[];g&&f.push(Co(u,g,"sum")),this.dataModel=new oi({props:[xi(r,c),...u.map(t=>Ci(t,d,{invalidValue:null})),...p.map(t=>fi(t)),...c?[vo]:[],bo,...f],groupByKeys:!0,dataVisible:this.visible&&u.length>0}),this.processedData=this.dataModel.processData(l),this.smallestDataInterval={x:null!==(n=null===(s=null===(i=this.processedData)||void 0===i?void 0:i.reduced)||void 0===s?void 0:s[vo.property])&&void 0!==n?n:1/0,y:1/0}}))}getDomain(t){var e;const{processedData:i}=this;if(!i)return[];const{defs:{keys:[s]},domain:{keys:[n],values:[r]},reduced:{[vo.property]:o,[bo.property]:a}={}}=i;if(t===this.getCategoryDirection()){if("category"===s.valueType)return n;const i=null!==(e=tn(n))&&void 0!==e?e:[NaN,NaN];return t===ei.Y?[i[0]+-o,i[1]]:[i[0],i[1]+o]}return this.getValueAxis()instanceof Jo?this.fixNumericExtent(r):this.fixNumericExtent(a)}getNodeClickEvent(t,e){var i;return new Un(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new Xn(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getCategoryAxis(){return this.getCategoryDirection()===ei.Y?this.yAxis:this.xAxis}getValueAxis(){return this.getBarDirection()===ei.Y?this.yAxis:this.xAxis}calculateStep(t){var e;const{smallestDataInterval:i}=this,s=this.getCategoryAxis();if(!s)return;const n=(s.dataDomain[1]-s.dataDomain[0])/(null!==(e=null==i?void 0:i.x)&&void 0!==e?e:1)+1,r=Math.floor(t),o=Math.min(n,r);return t/Math.max(1,o)}createNodeData(){return pa(this,void 0,void 0,(function*(){const{data:t,visible:e}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(t&&e&&i&&s))return[];const n=i.scale,r=s.scale,{groupScale:o,yKeys:a,xKey:l="",cumYKeyCount:h,fills:c,strokes:d,strokeWidth:u,seriesItemEnabled:p,label:g,id:f,processedData:m,ctx:y}=this;let v=n.bandwidth;if(n instanceof bs){const t=Math.max(i.range[0],i.range[1]);v=this.calculateStep(t)}o.range=[0,v],o.padding=i instanceof wn?i.groupPaddingInner:i instanceof lo?.1:0,0===o.padding?o.round=!1:o.round=!0;const b=o.bandwidth>=1?o.bandwidth:o.rawBandwidth,x=[];return null==m||m.data.forEach(({keys:t,datum:e,values:s},v)=>{var C,S,k,O,w,T;const D=n.convert(t[0]);for(let t=0;t<(null!==(C=null==a?void 0:a.length)&&void 0!==C?C:0);t++){const n=null!==(S=null==a?void 0:a[t])&&void 0!==S?S:[];null!==(k=x[t])&&void 0!==k||(x[t]=[]);let C=0,M=0;for(let a=0;a<n.length;a++){const S=n[a],k=null!==(O=null==m?void 0:m.indices.values[S])&&void 0!==O?O:-1;if(null!==(w=(T=x[t])[a])&&void 0!==w||(T[a]={itemId:S,nodeData:[],labelData:[]}),void 0===k)continue;const E=s[0][k],R=+E,P=D+o.convert(String(t));if(!i.inRange(P,b))continue;if(isNaN(R))continue;const A=R<0?C:M,L=r.convert(A+R,{strict:!1}),I=r.convert(A,{strict:!1}),N=this.getBarDirection()===ei.X,F={x:N?Math.min(L,I):P,y:N?P:Math.min(L,I),width:N?Math.abs(I-L):b,height:N?b:Math.abs(I-L)},_={x:F.x+F.width/2,y:F.y+F.height/2},{fontStyle:B,fontWeight:G,fontSize:j,fontFamily:z,color:W,formatter:V,placement:K}=g,{text:H,textAlign:Y,textBaseline:U,x:X,y:$}=da({value:E,rect:F,formatter:V,placement:K,seriesId:f,barAlongX:N,ctx:y}),q=h[t]+a,Z={index:v,series:this,itemId:S,datum:e[0],cumulativeValue:A+R,yValue:E,yKey:S,xKey:l,x:F.x,y:F.y,width:F.width,height:F.height,nodeMidPoint:_,colorIndex:q,fill:c[q%c.length],stroke:d[q%d.length],strokeWidth:u,label:p.get(S)&&H?{text:H,fontStyle:B,fontWeight:G,fontSize:j,fontFamily:z,textAlign:Y,textBaseline:U,fill:W,x:X,y:$}:void 0};x[t][a].nodeData.push(Z),x[t][a].labelData.push(Z),R<0?C+=R:M+=R}}}),x.reduce((t,e)=>t.concat(...e),[])}))}nodeFactory(){return new ha}updateDatumSelection(t){return pa(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>t.tag=fa.Bar)}))}updateDatumNodes(t){var e;return pa(this,void 0,void 0,(function*(){const{datumSelection:i,isHighlight:s}=t,{fills:n,strokes:r,fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:h,shadow:c,formatter:d,id:u,highlightStyle:{item:p},ctx:g}=this,f=function(t=[]){const[e,i]=t;return!(0!==e||1!==i)}(null===(e=this.xAxis)||void 0===e?void 0:e.visibleRange),m=this.getCategoryDirection()===ei.X;i.each((t,e)=>{const{colorIndex:i}=e,y={fill:n[i%n.length],stroke:r[i%n.length],fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:h,fillShadow:c,strokeWidth:this.getStrokeWidth(this.strokeWidth,e)},v=m?e.width>0:e.height>0,b=function(t){var e,i,s,n,r,o,a,{datum:l,isHighlighted:h,style:c,highlightStyle:d,formatter:u,seriesId:p,stackGroup:g,ctx:{callbackCache:f}}=t,m=ca(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]);const y=h&&null!==(e=d.fill)&&void 0!==e?e:c.fill,v=h&&null!==(i=d.stroke)&&void 0!==i?i:c.stroke,b=h&&null!==(s=d.strokeWidth)&&void 0!==s?s:c.strokeWidth,x=h&&null!==(n=d.fillOpacity)&&void 0!==n?n:c.fillOpacity,{strokeOpacity:C,fillShadow:S,lineDash:k,lineDashOffset:O}=c;let w=void 0;return u&&(w=f.call(u,Object.assign({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:y,stroke:v,strokeWidth:b,highlighted:h,seriesId:p,stackGroup:g},m))),{fill:null!==(r=null==w?void 0:w.fill)&&void 0!==r?r:y,stroke:null!==(o=null==w?void 0:w.stroke)&&void 0!==o?o:v,strokeWidth:null!==(a=null==w?void 0:w.strokeWidth)&&void 0!==a?a:b,fillOpacity:x,strokeOpacity:C,lineDash:k,lineDashOffset:O,fillShadow:S}}({datum:e,isHighlighted:s,style:y,highlightStyle:p,formatter:d,seriesId:u,stackGroup:this.getStackGroup(e.yKey),ctx:g});b.crisp=f,b.visible=v,function({rect:t,config:e}){const{crisp:i=!0,fill:s,stroke:n,strokeWidth:r,fillOpacity:o,strokeOpacity:a,lineDash:l,lineDashOffset:h,fillShadow:c,visible:d=!0}=e;t.crisp=i,t.fill=s,t.stroke=n,t.strokeWidth=r,t.fillOpacity=o,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=h,t.fillShadow=c,t.visible=d}({rect:t,config:b})})}))}updateLabelSelection(t){return pa(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t,{enabled:s}=this.label,n=s?e:[];return i.update(n,t=>{t.tag=fa.Label,t.pointerEvents=bt.None})}))}updateLabelNodes(t){return pa(this,void 0,void 0,(function*(){const{labelSelection:e}=t;e.each((t,e)=>{!function({labelNode:t,labelDatum:e,config:i,visible:s}){if(e&&i&&i.enabled){const{x:n,y:r,text:o,textAlign:a,textBaseline:l}=e,{fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,color:p}=i;t.fontStyle=h,t.fontWeight=c,t.fontSize=d,t.fontFamily=u,t.textAlign=a,t.textBaseline=l,t.text=o,t.x=n,t.y=r,t.fill=p,t.visible=s}else t.visible=!1}({labelNode:t,labelDatum:e.label,config:this.label,visible:!0})})}))}getTooltipHtml(t){var e;const{xKey:i,yKeys:s,processedData:n,ctx:{callbackCache:r}}=this,o=this.getCategoryAxis(),a=this.getValueAxis(),{yKey:l}=t;if(!(n&&i&&l&&o&&a))return"";let h=0,c=0,d=0;for(;d<s.length;d++){const t=s[d];if(c=t.indexOf(l),c>=0){h+=c;break}h+=t.length}const{xName:u,yNames:p,fills:g,strokes:f,tooltip:m,formatter:y,id:v}=this,{renderer:b}=m,x=t.datum,C=p[l],S=this.getStackGroup(l),k=g[h%g.length],O=f[h%g.length],w=this.getStrokeWidth(this.strokeWidth),T=x[i],D=x[l],M=Ho(o.formatDatum(T)),E=Ho(a.formatDatum(D)),R=Ho(C),P=M+": "+E;let A=void 0;y&&(A=r.call(y,{datum:x,fill:k,stroke:O,strokeWidth:w,highlighted:!1,xKey:i,yKey:l,seriesId:v,stackGroup:S}));const L=null!==(e=null==A?void 0:A.fill)&&void 0!==e?e:k,I={title:R,backgroundColor:L,content:P};return b?hi(b({datum:x,xKey:i,xValue:T,xName:u,yKey:l,yValue:D,yName:C,color:L,title:R,seriesId:v,stackGroup:S}),I):hi(I)}getLegendData(){const{id:t,data:e,xKey:i,yKeys:s,yNames:n,legendItemNames:r,cumYKeyCount:o,seriesItemEnabled:a,hideInLegend:l,fills:h,strokes:c,fillOpacity:d,strokeOpacity:u}=this;if(!(null==e?void 0:e.length)||!i||!s.length)return[];const p=[];return this.validateLegendData(),this.yKeys.forEach((e,i)=>{var s,g,f;for(let m=0;m<e.length;m++){const y=e[m];if(l.indexOf(y)>=0)return;const v=o[i]+m;p.push({legendType:"category",id:t,itemId:y,seriesId:t,enabled:null!==(s=a.get(y))&&void 0!==s&&s,label:{text:null!==(f=null!==(g=r[y])&&void 0!==g?g:n[y])&&void 0!==f?f:y},marker:{fill:h[v%h.length],stroke:c[v%c.length],fillOpacity:d,strokeOpacity:u}})}}),p}validateLegendData(){const{hideInLegend:t,legendItemNames:e}=this;let i=!1;this.yKeys.forEach(s=>{s.forEach(s=>{if(t.indexOf(s)>=0)return;const n=void 0!==e[s];i&&!n&&Dt.warnOnce("a series is missing the legendItemName property, unexpected behaviour may occur."),i=n})})}onLegendItemClick(t){const{itemId:e,enabled:i,series:s}=t;s.id===this.id&&(super.toggleSeriesItem(e,i),Object.keys(this.legendItemNames).filter(t=>void 0!==this.legendItemNames[t]&&this.legendItemNames[t]===this.legendItemNames[e]).forEach(t=>{t!==e&&super.toggleSeriesItem(t,i)}),this.calculateVisibleDomain())}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,numVisibleItems:s}=t,n=Object.values(s).reduce((t,e)=>t+e,0),r=Object.values(s).filter(t=>1===t).length===Object.keys(s).length,o={};this.yKeys.forEach(t=>{t.forEach(t=>{var s;const a=t===i||1===n&&e||r&&e;o[t]=null!==(s=o[t])&&void 0!==s?s:a,Object.keys(this.legendItemNames).filter(e=>void 0!==this.legendItemNames[e]&&this.legendItemNames[e]===this.legendItemNames[t]).forEach(t=>{var e;o[t]=null!==(e=o[t])&&void 0!==e?e:a})})}),Object.keys(o).forEach(t=>{super.toggleSeriesItem(t,o[t])}),this.calculateVisibleDomain()}calculateVisibleDomain(){const t=this.yKeys.map(t=>t.slice());this.seriesItemEnabled.forEach((e,i)=>{e||t.forEach(t=>{const e=t.indexOf(i);e>=0&&t.splice(e,1)})});const e=[];t.forEach((t,i)=>{t.length>0&&e.push(String(i))}),this.groupScale.domain=e,this.nodeDataRefresh=!0}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=1/0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.min(i,e.x))})),t.forEach(t=>{t.each((t,e)=>{var s;null===(s=this.animationManager)||void 0===s||s.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.x},{from:0,to:e.width}],{disableInteractions:!0,duration:1e3,ease:lr,repeat:0,onUpdate([i,s]){t.x=i,t.width=s,t.y=e.y,t.height=e.height}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:ar,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:.2,outer:.3}}getBarDirection(){return ei.X}getCategoryDirection(){return ei.Y}}va.className="BarSeries",va.type="bar",ua([re(De)],va.prototype,"fills",void 0),ua([re(De)],va.prototype,"strokes",void 0),ua([re(Ee(0,1))],va.prototype,"fillOpacity",void 0),ua([re(Ee(0,1))],va.prototype,"strokeOpacity",void 0),ua([re(Ve)],va.prototype,"lineDash",void 0),ua([re(Ee(0))],va.prototype,"lineDashOffset",void 0),ua([re(fe)],va.prototype,"formatter",void 0),ua([re(be)],va.prototype,"xKey",void 0),ua([re(be)],va.prototype,"xName",void 0),ua([re(Ie)],va.prototype,"hideInLegend",void 0),ua([re(Fe)],va.prototype,"visibles",void 0),ua([re(me)],va.prototype,"grouped",void 0),ua([re(Re())],va.prototype,"normalizedTo",void 0),ua([re(Ee(0))],va.prototype,"strokeWidth",void 0);class ba extends va{getBarDirection(){return ei.Y}getCategoryDirection(){return ei.X}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.max(i,e.height+e.y))})),t.forEach(t=>{t.each((t,e)=>{var s;null===(s=this.animationManager)||void 0===s||s.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:lr,repeat:0,onUpdate([i,s]){t.y=i,t.height=s,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:ar,repeat:0,onUpdate:e=>{t.opacity=e}})})})}}ba.type="column",ba.className="ColumnSeries";var xa=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ca=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};const Sa=["count","sum","mean"],ka=oe(t=>Sa.includes(t),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var Oa;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(Oa||(Oa={}));class wa extends sn{constructor(){super(...arguments),this.formatter=void 0}}xa([re(fe)],wa.prototype,"formatter",void 0);class Ta extends Ri{constructor(){super(...arguments),this.renderer=void 0}}xa([re(fe)],Ta.prototype,"renderer",void 0);class Da extends qn{constructor(t){super({moduleCtx:t,pickModes:[yi.EXACT_SHAPE_MATCH]}),this.label=new wa,this.tooltip=new Ta,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.bins=void 0,this.aggregation="count",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[],this.label.enabled=!1}deriveBins(t){if(void 0===this.binCount){const e=xs(t[0],t[1],10),i=Ss(t[0],t[1],10),s=e[0],n=t=>[t,t+i];return[[s-i,s],...e.map(n)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],n=e||1,{start:r,binSize:o}=this.calculateNiceStart(i,s,n);return this.getBins(r,s,o,n)}getBins(t,e,i,s){const n=[];for(let r=0;r<s;r++){const o=Math.round(10*(t+r*i))/10;let a=Math.round(10*(t+(r+1)*i))/10;r===s-1&&(a=Math.max(a,e)),n[r]=[o,a]}return n}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,n=Math.floor(Math.log10(s)),r=Math.pow(10,n);return{start:Math.floor(t/r)*r,binSize:s}}processData(){return Ca(this,void 0,void 0,(function*(){const{xKey:t,yKey:e,data:i,areaPlot:s,aggregation:n}=this,r=[xi(t,!0),xo];if(e){let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,s;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(s=null==t?void 0:t[1])&&void 0!==s?s:0,e}};"count"===n||("sum"===n?t=function(t){return{type:"aggregate",properties:t,aggregateFunction:t=>gi(t),groupAggregateFunction:(t,e=[0,0])=>{var i,s;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(s=null==t?void 0:t[1])&&void 0!==s?s:0,e}}}([e]):"mean"===n&&(t=function(t){return{properties:t,type:"aggregate",aggregateFunction:t=>gi(t),groupAggregateFunction:(t,e=[0,0,-1])=>{var i,s;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(s=null==t?void 0:t[1])&&void 0!==s?s:0,e[2]++,e},finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}([e]))),s&&(t=mi([e],t)),r.push(Ci(e,!0,{invalidValue:void 0}),t)}else{let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,s;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(s=null==t?void 0:t[1])&&void 0!==s?s:0,e}};s&&(t=mi([],t)),r.push(t)}this.dataModel=new oi({props:r,dataVisible:this.visible,groupByFn:t=>{var e;const i=ni(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const s=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),n=s.length;return this.calculatedBins=[...s],t=>{const e=t.keys[0];for(let t=0;t<n;t++){const i=s[t];if(e>=i[0]&&e<i[1])return i;if(t===n-1&&e<=i[1])return i}return[]}}}),this.processedData=this.dataModel.processData(null!=i?i:[])}))}getDomain(t){var e,i,s,n;const{processedData:r}=this;if(!r)return[];const{domain:{aggValues:[o]=[]}}=r,a=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],l=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(n=null===(s=this.calculatedBins)||void 0===s?void 0:s.length)&&void 0!==n?n:0)-1][1];return t===ei.X?ni([a,l]):ni(o)}getNodeClickEvent(t,e){var i,s;return new Un(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(s=this.yKey)&&void 0!==s?s:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,s;return new Xn(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(s=this.yKey)&&void 0!==s?s:"",t,e,this)}createNodeData(){var t;return Ca(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,processedData:s,ctx:{callbackCache:n}}=this;if(!(this.seriesItemEnabled&&e&&i&&s&&"grouped"===s.type))return[];const{scale:r}=e,{scale:o}=i,{fill:a,stroke:l,strokeWidth:h,id:c,yKey:d="",xKey:u=""}=this,p=[],g=t=>String(t.value),{label:{formatter:f=g,fontStyle:m,fontWeight:y,fontSize:v,fontFamily:b,color:x}}=this;return s.data.forEach(t=>{var e;const{aggValues:[[i,s]]=[[0,0]],datum:g,datum:{length:C},keys:S,keys:[k,O]}=t,w=r.convert(k),T=r.convert(O),D=i+s,M=o.convert(0),E=o.convert(D),R=T-w,P=Math.abs(E-M),A=0!==D?{text:null!==(e=n.call(f,{value:D,seriesId:c}))&&void 0!==e?e:String(D),fontStyle:m,fontWeight:y,fontSize:v,fontFamily:b,fill:x,x:w+R/2,y:E+P/2}:void 0,L={x:w+R/2,y:E+P/2};p.push({series:this,datum:g,aggregatedValue:D,frequency:C,domain:S,yKey:d,xKey:u,x:w,y:E,width:R,height:P,nodeMidPoint:L,fill:a,stroke:l,strokeWidth:h,label:A})}),[{itemId:null!==(t=this.yKey)&&void 0!==t?t:this.id,nodeData:p,labelData:p}]}))}nodeFactory(){return new ha}updateDatumSelection(t){return Ca(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.tag=Oa.Bin,t.crisp=!0})}))}updateDatumNodes(t){return Ca(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:s,strokeOpacity:n,shadow:r,highlightStyle:{item:{fill:o,fillOpacity:a=s,stroke:l,strokeWidth:h}}}=this;e.each((t,e,c)=>{var d,u;const p=i&&void 0!==h?h:e.strokeWidth,g=i?a:s;t.x=e.x,t.width=e.width,t.fill=null!==(d=i?o:void 0)&&void 0!==d?d:e.fill,t.stroke=null!==(u=i?l:void 0)&&void 0!==u?u:e.stroke,t.fillOpacity=g,t.strokeOpacity=n,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=r,t.zIndex=i?Ai.highlightedZIndex:c,t.visible=e.height>0})}))}updateLabelSelection(t){return Ca(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=Oa.Label,t.pointerEvents=bt.None,t.textAlign="center",t.textBaseline="middle"})}))}updateLabelNodes(t){return Ca(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((t,e)=>{const s=e.label;s&&i?(t.text=s.text,t.x=s.x,t.y=s.y,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.fontSize=s.fontSize,t.fontFamily=s.fontFamily,t.fill=s.fill,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,yKey:i="",xAxis:s,yAxis:n}=this;if(!e||!s||!n)return"";const{xName:r,yName:o,fill:a,tooltip:l,aggregation:h,id:c}=this,{renderer:d}=l,{aggregatedValue:u,frequency:p,domain:g,domain:[f,m]}=t,y=`${Ho(null!=r?r:e)}: ${s.formatDatum(f)} - ${s.formatDatum(m)}`;let v=i?`<b>${Ho(null!=o?o:i)} (${h})</b>: ${n.formatDatum(u)}<br>`:"";v+="<b>Frequency</b>: "+p;const b={title:y,backgroundColor:a,content:v};return d?hi(d({datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xValue:g,xName:r,yKey:i,yValue:u,yName:o,color:a,title:y,seriesId:c}),b):hi(b)}getLegendData(){var t;const{id:e,data:i,xKey:s,yName:n,visible:r,fill:o,stroke:a,fillOpacity:l,strokeOpacity:h}=this;if(!i||0===i.length)return[];return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:r,label:{text:null!==(t=null!=n?n:s)&&void 0!==t?t:"Frequency"},marker:{fill:null!=o?o:"rgba(0, 0, 0, 0)",stroke:null!=a?a:"rgba(0, 0, 0, 0)",fillOpacity:l,strokeOpacity:h}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{i=Math.max(i,e.height+e.y)})),t.forEach(t=>{t.each((t,e)=>{var s;null===(s=this.animationManager)||void 0===s||s.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:lr,repeat:0,onUpdate([i,s]){t.y=i,t.height=s,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:ar,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}}Da.className="HistogramSeries",Da.type="histogram",xa([re(Te)],Da.prototype,"fill",void 0),xa([re(Te)],Da.prototype,"stroke",void 0),xa([re(Ee(0,1))],Da.prototype,"fillOpacity",void 0),xa([re(Ee(0,1))],Da.prototype,"strokeOpacity",void 0),xa([re(Ve)],Da.prototype,"lineDash",void 0),xa([re(Ee(0))],Da.prototype,"lineDashOffset",void 0),xa([re(be)],Da.prototype,"xKey",void 0),xa([re(me)],Da.prototype,"areaPlot",void 0),xa([re(he())],Da.prototype,"bins",void 0),xa([re(ka)],Da.prototype,"aggregation",void 0),xa([re(Re(0))],Da.prototype,"binCount",void 0),xa([re(be)],Da.prototype,"xName",void 0),xa([re(be)],Da.prototype,"yKey",void 0),xa([re(be)],Da.prototype,"yName",void 0),xa([re(Ee(0))],Da.prototype,"strokeWidth",void 0);var Ma=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ea=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class Ra extends sn{constructor(){super(...arguments),this.formatter=void 0}}Ma([re(fe)],Ra.prototype,"formatter",void 0);class Pa extends Ri{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}Ma([re(fe)],Pa.prototype,"renderer",void 0),Ma([re(be)],Pa.prototype,"format",void 0);class Aa extends qn{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[yi.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,yi.NEAREST_NODE,yi.EXACT_SHAPE_MATCH]}),this.marker=new Zn,this.label=new Ra,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.tooltip=new Pa,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0;const{marker:e,label:i}=this;e.fill="#c16068",e.stroke="#874349",i.enabled=!1}processData(){return Ea(this,void 0,void 0,(function*(){const{xAxis:t,yAxis:e,xKey:i="",yKey:s=""}=this,n=i&&s&&this.data?this.data:[],r=(null==t?void 0:t.scale)instanceof bs,o=(null==e?void 0:e.scale)instanceof bs;this.dataModel=new oi({props:[Ci(i,r,{id:"xValue"}),Ci(s,o,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=n?n:[])}))}getDomain(t){const{xAxis:e,yAxis:i,dataModel:s,processedData:n}=this;if(!n||!s)return[];const r=s.resolveProcessedDataDefById("xValue");if(t===ei.X){const t=s.getDomain("xValue",n);return"category"===(null==r?void 0:r.valueType)?t:this.fixNumericExtent(tn(t),e)}{const t=s.getDomain("yValue",n);return this.fixNumericExtent(t,i)}}createNodeData(){var t,e,i,s,n,r,o,a,l,h,c;return Ea(this,void 0,void 0,(function*(){const{processedData:d,dataModel:u,xAxis:p,yAxis:g,marker:{enabled:f,size:m,strokeWidth:y},ctx:{callbackCache:v}}=this;if(!(d&&u&&p&&g))return[];const{label:b,yKey:x="",xKey:C="",id:S}=this,k=p.scale,O=g.scale,w=(null!==(t=k.bandwidth)&&void 0!==t?t:0)/2,T=(null!==(e=O.bandwidth)&&void 0!==e?e:0)/2,D=new Array(d.data.length),M=f?m:0,E=null!==(n=null===(s=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("xValue"))||void 0===s?void 0:s.index)&&void 0!==n?n:-1,R=null!==(a=null===(o=null===(r=this.dataModel)||void 0===r?void 0:r.resolveProcessedDataIndexById("yValue"))||void 0===o?void 0:o.index)&&void 0!==a?a:-1;let P=!0,A=void 0,L=void 0,I=0;for(let t=0;t<d.data.length;t++){const{datum:e,values:i}=null!=L?L:d.data[t],s=i[E],n=i[R];if(void 0===n)A=void 0,P=!0;else{const i=k.convert(s)+w;if(isNaN(i)){A=void 0,P=!0;continue}const r=(null!==(l=k.bandwidth)&&void 0!==l?l:.5*m+(null!=y?y:0))+1;L=void 0===(null===(h=d.data[t+1])||void 0===h?void 0:h.values[R])?void 0:d.data[t+1];const o=null===(c=d.data[t+1])||void 0===c?void 0:c.values[E],a=p.inRangeEx(i,0,r),u=L&&p.inRangeEx(k.convert(o)+w,0,r);if(-1===a&&-1===u){P=!0;continue}if(1===a&&1===A){P=!0;continue}A=a;const g=O.convert(n)+T;let f;b.formatter&&(f=v.call(b.formatter,{value:n,seriesId:S})),void 0!==f||("number"==typeof n&&isFinite(n)?f=n.toFixed(2):n&&(f=String(n))),D[I++]={series:this,datum:e,yKey:x,xKey:C,point:{x:i,y:g,moveTo:P,size:M},nodeMidPoint:{x:i,y:g},label:f?{text:f,fontStyle:b.fontStyle,fontWeight:b.fontWeight,fontSize:b.fontSize,fontFamily:b.fontFamily,textAlign:"center",textBaseline:"bottom",fill:b.color}:void 0},P=!1}}return D.length=I,[{itemId:x,nodeData:D,labelData:D}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(jn(t))}updateMarkerSelection(t){return Ea(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:s,enabled:n}=this.marker;return e=s&&n?e:[],this.marker.isDirty()&&i.clear(),i.update(e)}))}updateMarkerNodes(t){var e;return Ea(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:s}=t,{marker:n,marker:{fillOpacity:r},xKey:o="",yKey:a="",stroke:l,strokeOpacity:h,highlightStyle:{item:{fill:c,fillOpacity:d=r,stroke:u,strokeWidth:p}},id:g,ctx:{callbackCache:f}}=this,{size:m,formatter:y}=n,v=null!==(e=n.strokeWidth)&&void 0!==e?e:this.strokeWidth,b="function"==typeof n.shape;i.each((t,e)=>{var i,x,C,S,k,O,w;const T=s&&void 0!==c?c:n.fill,D=s?d:r,M=s&&void 0!==u?u:null!==(i=n.stroke)&&void 0!==i?i:l,E=s&&void 0!==p?p:v;let R=void 0;y&&(R=f.call(y,{datum:e.datum,xKey:o,yKey:a,fill:T,stroke:M,strokeWidth:E,size:m,highlighted:s,seriesId:g})),t.fill=null!==(x=null==R?void 0:R.fill)&&void 0!==x?x:T,t.stroke=null!==(C=null==R?void 0:R.stroke)&&void 0!==C?C:M,t.strokeWidth=null!==(S=null==R?void 0:R.strokeWidth)&&void 0!==S?S:E,t.fillOpacity=null!=D?D:1,t.strokeOpacity=null!==(O=null!==(k=n.strokeOpacity)&&void 0!==k?k:h)&&void 0!==O?O:1,t.size=null!==(w=null==R?void 0:R.size)&&void 0!==w?w:m,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!isNaN(e.point.x)&&!isNaN(e.point.y),b&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),s||this.marker.markClean()}))}updateLabelSelection(t){return Ea(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:s,enabled:n}=this.marker;return e=s&&n?e:[],i.update(e)}))}updateLabelNodes(t){return Ea(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:n,fontSize:r,fontFamily:o,color:a}=this.label;e.each((t,e)=>{const{point:l,label:h}=e;e&&h&&i?(t.fontStyle=s,t.fontWeight=n,t.fontSize=r,t.fontFamily=o,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i,s;return new Un(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(s=this.yKey)&&void 0!==s?s:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,s;return new Xn(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(s=this.yKey)&&void 0!==s?s:"",t,e,this)}getTooltipHtml(t){var e,i;const{xKey:s,yKey:n,xAxis:r,yAxis:o}=this;if(!(s&&n&&r&&o))return"";const{xName:a,yName:l,tooltip:h,marker:c,id:d}=this,{renderer:u,format:p}=h,g=t.datum,f=g[s],m=g[n],y=r.formatDatum(f),v=o.formatDatum(m),b=Ho(null!==(e=this.title)&&void 0!==e?e:l),x=Ho(y+": "+v),{formatter:C,fill:S,stroke:k,strokeWidth:O,size:w}=c,T=null!=O?O:this.strokeWidth;let D=void 0;C&&(D=C({datum:g,xKey:s,yKey:n,fill:S,stroke:k,strokeWidth:T,size:w,highlighted:!1,seriesId:d}));const M=null!==(i=null==D?void 0:D.fill)&&void 0!==i?i:S,E={title:b,backgroundColor:M,content:x};if(p||u){const t={datum:g,xKey:s,xValue:f,xName:a,yKey:n,yValue:m,yName:l,title:b,color:M,seriesId:d};if(p)return hi({content:Vo(p,t)},E);if(u)return hi(u(t),E)}return hi(E)}getLegendData(){var t,e,i,s,n,r,o;const{id:a,data:l,xKey:h,yKey:c,yName:d,visible:u,title:p,marker:g,stroke:f,strokeOpacity:m}=this;if(!((null==l?void 0:l.length)&&h&&c))return[];return[{legendType:"category",id:a,itemId:c,seriesId:a,enabled:u,label:{text:null!==(t=null!=p?p:d)&&void 0!==t?t:c},marker:{shape:g.shape,fill:null!==(e=g.fill)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(s=null!==(i=g.stroke)&&void 0!==i?i:f)&&void 0!==s?s:"rgba(0, 0, 0, 0)",fillOpacity:null!==(n=g.fillOpacity)&&void 0!==n?n:1,strokeOpacity:null!==(o=null!==(r=g.strokeOpacity)&&void 0!==r?r:m)&&void 0!==o?o:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:s,seriesRect:n}){i.forEach(({nodeData:i},r)=>{var o,a;const[l]=s[r],{path:h}=l;l.fill=void 0,l.lineJoin="round",l.pointerEvents=bt.None,l.stroke=this.stroke,l.strokeWidth=this.getStrokeWidth(this.strokeWidth),l.strokeOpacity=this.strokeOpacity,l.lineDash=this.lineDash,l.lineDashOffset=this.lineDashOffset;const c={from:0,to:null!==(o=null==n?void 0:n.width)&&void 0!==o?o:0,disableInteractions:!0,ease:ar,repeat:0};null===(a=this.animationManager)||void 0===a||a.animate(this.id+"_empty-update-ready",Object.assign(Object.assign({},c),{duration:1e3,onUpdate(t){h.clear({trackChanges:!0}),i.forEach((e,s)=>{if(e.point.x<=t)e.point.moveTo?h.moveTo(e.point.x,e.point.y):h.lineTo(e.point.x,e.point.y);else if(s>0&&i[s-1].point.x<t){const n=i[s-1].point,r=e.point,o=t,a=n.y+(o-n.x)*(r.y-n.y)/(r.x-n.x);e.point.moveTo?h.moveTo(o,a):h.lineTo(o,a)}}),l.checkPathDirty()}})),t[r].each((t,e)=>{var i,s,r,o;const a=(null==n?void 0:n.width)?e.point.x/n.width*1e3:0,l=this.animateFormatter(e),h=null!==(s=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0;null===(r=this.animationManager)||void 0===r||r.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},c),{to:null!==(o=null==l?void 0:l.size)&&void 0!==o?o:h,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[r].each((t,e)=>{var i;const s=(null==n?void 0:n.width)?e.point.x/n.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:s,duration:200,ease:ar,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate(t){this.resetMarkersAndPaths(t)}animateReadyResize(t){var e;null===(e=this.animationManager)||void 0===e||e.stop(),this.resetMarkersAndPaths(t)}resetMarkersAndPaths({markerSelections:t,contextData:e,paths:i}){e.forEach(({nodeData:e},s)=>{const[n]=i[s],{path:r}=n;n.stroke=this.stroke,n.strokeWidth=this.getStrokeWidth(this.strokeWidth),n.strokeOpacity=this.strokeOpacity,n.lineDash=this.lineDash,n.lineDashOffset=this.lineDashOffset,r.clear({trackChanges:!0}),e.forEach(t=>{t.point.moveTo?r.moveTo(t.point.x,t.point.y):r.lineTo(t.point.x,t.point.y)}),n.checkPathDirty(),t[s].each((t,e)=>{var i,s,n;const r=this.animateFormatter(e),o=null!==(s=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0;t.size=null!==(n=null==r?void 0:r.size)&&void 0!==n?n:o})})}animateFormatter(t){var e,i;const{marker:s,xKey:n="",yKey:r="",stroke:o,id:a,ctx:{callbackCache:l}}=this,{size:h,formatter:c}=s,d=s.fill,u=null!==(e=s.stroke)&&void 0!==e?e:o,p=null!==(i=s.strokeWidth)&&void 0!==i?i:this.strokeWidth;let g=void 0;return c&&(g=l.call(c,{datum:t.datum,xKey:n,yKey:r,fill:d,stroke:u,strokeWidth:p,size:h,highlighted:!1,seriesId:a})),g}isLabelEnabled(){return this.label.enabled}}Aa.className="LineSeries",Aa.type="line",Ma([re(be)],Aa.prototype,"title",void 0),Ma([re(Te)],Aa.prototype,"stroke",void 0),Ma([re(Ve)],Aa.prototype,"lineDash",void 0),Ma([re(Ee(0))],Aa.prototype,"lineDashOffset",void 0),Ma([re(Ee(0))],Aa.prototype,"strokeWidth",void 0),Ma([re(Ee(0,1))],Aa.prototype,"strokeOpacity",void 0),Ma([re(be)],Aa.prototype,"xKey",void 0),Ma([re(be)],Aa.prototype,"xName",void 0),Ma([re(be)],Aa.prototype,"yKey",void 0),Ma([re(be)],Aa.prototype,"yName",void 0);class La{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(t=>ie.fromString(t))}update(){const{domain:t,range:e}=this;t.length<2&&(Dt.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++){if(t[e-1]>=t[e]){Dt.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}}const i=e.length<t.length;if(i||t.length>2&&e.length>t.length)if(Dt.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),i)for(let i=e.length;i<t.length;i++)e.push("black");else e.splice(t.length);this.parsedRange=this.range.map(t=>ie.fromString(t))}convert(t){const{domain:e,range:i,parsedRange:s}=this,n=e[0],r=e[e.length-1],o=i[0],a=i[i.length-1];if(t<=n)return o;if(t>=r)return a;let l,h;if(2===e.length){const e=(t-n)/(r-n),s=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),h=(e-l*s)/s}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];h=(t-i)/(e[l+1]-i)}return rr(s[l],s[l+1])(h)}}var Ia=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Na=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class Fa extends sn{constructor(){super(...arguments),this.formatter=void 0}}Ia([re(fe)],Fa.prototype,"formatter",void 0);class _a extends Yn{constructor(t,e,i,s,n,r){super(e,i,s,n,r),this.sizeKey=t}}class Ba extends _a{constructor(){super(...arguments),this.type="nodeClick"}}class Ga extends _a{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class ja extends Ri{constructor(){super(...arguments),this.renderer=void 0}}Ia([re(fe)],ja.prototype,"renderer",void 0);class za extends qn{constructor(t){super({moduleCtx:t,pickModes:[yi.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,yi.NEAREST_NODE,yi.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0}),this.sizeScale=new Cn,this.marker=new Zn,this.label=new Fa,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorDomain=void 0,this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new La,this.tooltip=new ja;const{label:e}=this;e.enabled=!1}processData(){var t,e,i,s,n,r;return Na(this,void 0,void 0,(function*(){const{xKey:o="",yKey:a="",sizeKey:l,xAxis:h,yAxis:c,marker:d,data:u}=this,p=(null==h?void 0:h.scale)instanceof bs,g=(null==c?void 0:c.scale)instanceof bs,{colorScale:f,colorDomain:m,colorRange:y,colorKey:v}=this;if(this.dataModel=new oi({props:[Ci(o,p,{id:"xValue"}),Ci(a,g,{id:"yValue"}),...l?[Ci(l,!0,{id:"sizeValue"})]:[],...v?[Ci(v,!0,{id:"colorValue"})]:[]],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=u?u:[]),l){const n=null!==(e=null===(t=this.dataModel.resolveProcessedDataIndexById("sizeValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,r=null!==(s=null===(i=this.processedData)||void 0===i?void 0:i.domain.values[n])&&void 0!==s?s:[];this.sizeScale.domain=d.domain?d.domain:r}if(v){const t=null!==(r=null===(n=this.dataModel.resolveProcessedDataIndexById("colorValue"))||void 0===n?void 0:n.index)&&void 0!==r?r:-1;f.domain=null!=m?m:this.processedData.domain.values[t],f.range=y,f.update()}}))}getDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s=t===ei.X?"xValue":"yValue",n=e.resolveProcessedDataDefById(s),r=e.getDomain(s,i);if("category"===(null==n?void 0:n.valueType))return r;const o=t===ei.X?this.xAxis:this.yAxis;return this.fixNumericExtent(tn(r),o)}getNodeClickEvent(t,e){var i,s;return new Ba(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(s=this.yKey)&&void 0!==s?s:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,s;return new Ga(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(s=this.yKey)&&void 0!==s?s:"",t,e,this)}createNodeData(){var t,e,i,s,n,r,o,a,l;return Na(this,void 0,void 0,(function*(){const{visible:h,xAxis:c,yAxis:d,yKey:u="",xKey:p="",label:g,labelKey:f,ctx:{callbackCache:m}}=this,y=null===(t=this.dataModel)||void 0===t?void 0:t.resolveProcessedDataIndexById("xValue"),v=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue");if(!(y&&v&&h&&c&&d))return[];const{colorScale:b,sizeKey:x,colorKey:C,id:S}=this,k=c.scale,O=d.scale,w=(null!==(i=k.bandwidth)&&void 0!==i?i:0)/2,T=(null!==(s=O.bandwidth)&&void 0!==s?s:0)/2,{sizeScale:D,marker:M}=this,E=new Array(null!==(r=null===(n=this.processedData)||void 0===n?void 0:n.data.length)&&void 0!==r?r:0);D.range=[M.size,M.maxSize];const R=g.getFont();let P=0;for(const{values:t,datum:e}of null!==(a=null===(o=this.processedData)||void 0===o?void 0:o.data)&&void 0!==a?a:[]){const i=t[y.index],s=t[v.index],n=k.convert(i)+w,r=O.convert(s)+T;if(!this.checkRangeXY(n,r,c,d))continue;let o;g.formatter&&(o=m.call(g.formatter,{value:s,seriesId:S,datum:e})),void 0===o&&(o=f?String(e[f]):"");const a=ct.getTextSize(o,R),l=x?D.convert(t[2]):M.size,h=x?3:2,A=C?b.convert(t[h]):void 0;E[P++]={series:this,itemId:u,yKey:u,xKey:p,datum:e,point:{x:n,y:r,size:l},nodeMidPoint:{x:n,y:r},fill:A,label:Object.assign({text:o},a)}}return E.length=P,[{itemId:null!==(l=this.yKey)&&void 0!==l?l:this.id,nodeData:E,labelData:E}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(jn(t))}updateMarkerSelection(t){return Na(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:s}}=this;this.marker.isDirty()&&i.clear();const n=s?e:[];return i.update(n)}))}updateMarkerNodes(t){return Na(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{marker:s,xKey:n="",yKey:r="",sizeScale:o,marker:{fillOpacity:a,strokeOpacity:l,strokeWidth:h},highlightStyle:{item:{fill:c,fillOpacity:d=a,stroke:u,strokeWidth:p}},id:g,ctx:{callbackCache:f}}=this,{formatter:m}=s;o.range=[s.size,s.maxSize];const y="function"==typeof s.shape;e.each((t,e)=>{var o,v,b,x,C,S,k,O,w,T;const D=i&&void 0!==c?c:null!==(o=e.fill)&&void 0!==o?o:s.fill,M=i?d:a,E=i&&void 0!==u?u:s.stroke,R=l,P=i&&void 0!==p?p:null!=h?h:1,A=null!==(b=null===(v=e.point)||void 0===v?void 0:v.size)&&void 0!==b?b:0;let L=void 0;m&&(L=f.call(m,{datum:e.datum,xKey:n,yKey:r,fill:D,stroke:E,strokeWidth:P,size:A,highlighted:i,seriesId:g})),t.fill=null!==(x=null==L?void 0:L.fill)&&void 0!==x?x:D,t.stroke=null!==(C=null==L?void 0:L.stroke)&&void 0!==C?C:E,t.strokeWidth=null!==(S=null==L?void 0:L.strokeWidth)&&void 0!==S?S:P,t.fillOpacity=null!=M?M:1,t.strokeOpacity=null!=R?R:1,t.translationX=null!==(O=null===(k=e.point)||void 0===k?void 0:k.x)&&void 0!==O?O:0,t.translationY=null!==(T=null===(w=e.point)||void 0===w?void 0:w.y)&&void 0!==T?T:0,t.visible=t.size>0,y&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return Na(this,void 0,void 0,(function*(){const{labelSelection:s}=t,{label:{enabled:n}}=this,r=(n&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return s.update(r)}))}updateLabelNodes(t){return Na(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var s,n,r,o;t.text=e.label.text,t.fill=i.color,t.x=null!==(n=null===(s=e.point)||void 0===s?void 0:s.x)&&void 0!==n?n:0,t.y=null!==(o=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==o?o:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){var e,i,s,n,r,o,a;const{xKey:l,yKey:h,xAxis:c,yAxis:d}=this;if(!(l&&h&&c&&d))return"";const{marker:u,tooltip:p,xName:g,yName:f,sizeKey:m,sizeName:y,labelKey:v,labelName:b,id:x,ctx:{callbackCache:C}}=this,{stroke:S}=u,k=null!==(e=t.fill)&&void 0!==e?e:u.fill,O=this.getStrokeWidth(null!==(i=u.strokeWidth)&&void 0!==i?i:1),{formatter:w}=this.marker;let T=void 0;w&&(T=C.call(w,{datum:t,xKey:l,yKey:h,fill:k,stroke:S,strokeWidth:O,size:null!==(n=null===(s=t.point)||void 0===s?void 0:s.size)&&void 0!==n?n:0,highlighted:!1,seriesId:x}));const D=null!==(o=null!==(r=null==T?void 0:T.fill)&&void 0!==r?r:k)&&void 0!==o?o:"gray",M=null!==(a=this.title)&&void 0!==a?a:f,E=t.datum,R=E[l],P=E[h],A=Ho(c.formatDatum(R)),L=Ho(d.formatDatum(P));let I=`<b>${Ho(null!=g?g:l)}</b>: ${A}<br><b>${Ho(null!=f?f:h)}</b>: ${L}`;m&&(I+=`<br><b>${Ho(null!=y?y:m)}</b>: ${Ho(E[m])}`),v&&(I=`<b>${Ho(null!=b?b:v)}</b>: ${Ho(E[v])}<br>`+I);const N={title:M,backgroundColor:D,content:I},{renderer:F}=p;return F?hi(F({datum:E,xKey:l,xValue:R,xName:g,yKey:h,yValue:P,yName:f,sizeKey:m,sizeName:y,labelKey:v,labelName:b,title:M,color:D,seriesId:x}),N):hi(N)}getLegendData(){var t,e,i,s,n;const{id:r,data:o,xKey:a,yKey:l,yName:h,title:c,visible:d,marker:u}=this,{fill:p,stroke:g,fillOpacity:f,strokeOpacity:m}=u;if(!((null==o?void 0:o.length)&&a&&l))return[];return[{legendType:"category",id:r,itemId:l,seriesId:r,enabled:d,label:{text:null!==(t=null!=c?c:h)&&void 0!==t?t:l},marker:{shape:u.shape,fill:null!==(i=null!==(e=u.fill)&&void 0!==e?e:p)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(s=u.stroke)&&void 0!==s?s:g)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!=f?f:1,strokeOpacity:null!=m?m:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){t.forEach(t=>{t.each((t,e)=>{var i,s,n,r;const o=this.animateFormatter(t,e),a=null!==(s=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0,l=null!==(n=null==o?void 0:o.size)&&void 0!==n?n:a;null===(r=this.animationManager)||void 0===r||r.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:l,disableInteractions:!0,duration:1e3,ease:ar,repeat:0,onUpdate(e){t.size=e}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:ar,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({markerSelections:t}){t.forEach(t=>{this.resetMarkers(t)})}animateReadyHighlightMarkers(t){this.resetMarkers(t)}resetMarkers(t){t.each((t,e)=>{var i,s,n;const r=this.animateFormatter(t,e),o=null!==(s=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==s?s:0;t.size=null!==(n=null==r?void 0:r.size)&&void 0!==n?n:o})}animateFormatter(t,e){var i,s,n;const{xKey:r="",yKey:o="",marker:{strokeWidth:a},id:l,ctx:{callbackCache:h}}=this,{formatter:c}=this.marker,d=null!==(i=e.fill)&&void 0!==i?i:t.fill,u=t.stroke,p=null!=a?a:1,g=null!==(n=null===(s=e.point)||void 0===s?void 0:s.size)&&void 0!==n?n:0;let f=void 0;return c&&(f=h.call(c,{datum:e.datum,xKey:r,yKey:o,fill:d,stroke:u,strokeWidth:p,size:g,highlighted:!1,seriesId:l})),f}isLabelEnabled(){return this.label.enabled}}za.className="ScatterSeries",za.type="scatter",Ia([re(be)],za.prototype,"title",void 0),Ia([re(be)],za.prototype,"labelKey",void 0),Ia([re(be)],za.prototype,"xName",void 0),Ia([re(be)],za.prototype,"yName",void 0),Ia([re(be)],za.prototype,"sizeName",void 0),Ia([re(be)],za.prototype,"labelName",void 0),Ia([re(be)],za.prototype,"xKey",void 0),Ia([re(be)],za.prototype,"yKey",void 0),Ia([re(be)],za.prototype,"sizeKey",void 0),Ia([re(be)],za.prototype,"colorKey",void 0),Ia([re(be)],za.prototype,"colorName",void 0),Ia([re(Le)],za.prototype,"colorDomain",void 0),Ia([re(De)],za.prototype,"colorRange",void 0);class Wa extends Ai{constructor(t){super({moduleCtx:t,pickModes:[yi.EXACT_SHAPE_MATCH]})}getLabelData(){return[]}}var Va=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Ka extends vt{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}Va([re(me),yt({redraw:ft.MAJOR})],Ka.prototype,"enabled",void 0),Va([re(we),yt({redraw:ft.MAJOR})],Ka.prototype,"color",void 0),Va([re(Ee()),yt({redraw:ft.MAJOR})],Ka.prototype,"xOffset",void 0),Va([re(Ee()),yt({redraw:ft.MAJOR})],Ka.prototype,"yOffset",void 0),Va([re(Ee(0)),yt({redraw:ft.MAJOR})],Ka.prototype,"blur",void 0);var Ha,Ya=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ua=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};class Xa extends Ri{constructor(){super(...arguments),this.renderer=void 0}}Ya([re(fe)],Xa.prototype,"renderer",void 0);class $a extends ki{constructor(t,e,i,s,n,r){super(s,n,r),this.labelKey=t,this.sizeKey=e,this.colorKey=i}}class qa extends $a{constructor(){super(...arguments),this.type="nodeClick"}}class Za extends $a{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Ja extends sn{constructor(){super(...arguments),this.padding=10}}Ya([re(Ee(0))],Ja.prototype,"padding",void 0);class Qa extends sn{constructor(){super(...arguments),this.wrapping="on-space"}}Ya([re(Qe)],Qa.prototype,"wrapping",void 0);class tl{constructor(){this.style=(()=>{const t=new sn;return t.color="white",t})()}}Ya([re(be)],tl.prototype,"key",void 0),Ya([re(be)],tl.prototype,"name",void 0),Ya([re(fe)],tl.prototype,"formatter",void 0),function(t){t[t.Name=0]="Name",t[t.Value=1]="Value"}(Ha||(Ha={}));const el=new Vt;function il(t,e){const{fontStyle:i,fontWeight:s,fontSize:n,fontFamily:r}=e;el.fontStyle=i,el.fontWeight=s,el.fontSize=n,el.fontFamily=r,el.text=t,el.x=0,el.y=0,el.textAlign="left",el.textBaseline="top";const{width:o,height:a}=el.computeBBox();return{width:o,height:a}}function sl(t){if("string"==typeof t&&!ie.validColorString(t)){const e="black";return Dt.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),"black"}return t}class nl{constructor(){this.color="black"}}Ya([re(Te)],nl.prototype,"color",void 0);class rl extends Ei{constructor(){super(...arguments),this.text=new nl}}class ol extends Wa{constructor(){super(...arguments),this.groupSelection=ss.select(this.contentGroup,Et),this.highlightSelection=ss.select(this.highlightGroup,Et),this.title=(()=>{const t=new Ja;return t.color="white",t.fontWeight="bold",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.padding=15,t})(),this.subtitle=(()=>{const t=new Ja;return t.color="white",t.fontSize=9,t.fontFamily="Verdana, sans-serif",t.padding=13,t})(),this.labels={large:(()=>{const t=new Qa;return t.color="white",t.fontWeight="bold",t.fontSize=18,t})(),medium:(()=>{const t=new Qa;return t.color="white",t.fontWeight="bold",t.fontSize=14,t})(),small:(()=>{const t=new Qa;return t.color="white",t.fontWeight="bold",t.fontSize=10,t})(),formatter:void 0,value:new tl},this.nodePadding=2,this.nodeGap=0,this.labelKey="label",this.sizeKey="size",this.colorKey="color",this.colorDomain=[-5,5],this.colorRange=["#cb4b3f","#6acb64"],this.groupFill="#272931",this.groupStroke="black",this.groupStrokeWidth=1,this.tileStroke="black",this.tileStrokeWidth=1,this.gradient=!0,this.formatter=void 0,this.colorName="Change",this.rootName="Root",this.highlightGroups=!0,this.tileShadow=new Ka,this.labelShadow=new Ka,this.tooltip=new Xa,this.highlightStyle=new rl}getNodePaddingTop(t,e){var i;const{title:s,subtitle:n,nodePadding:r}=this,o=t.label;if(t.isLeaf||!o||0===t.depth)return r;const a=t.depth>1?n:s,l=il(o,a);return a.fontSize>e.width/3||a.fontSize>e.height/3||l.height>=e.height?r:l.height+r+(null!==(i=a.padding)&&void 0!==i?i:0)}getNodePadding(t,e){const{nodePadding:i}=this;return{top:this.getNodePaddingTop(t,e),right:i,bottom:i,left:i}}squarify(t,e,i=new Map){if(e.width<=0||e.height<=0)return i;i.set(t,e);const s=this.getNodePadding(t,e),n=e.width-s.left-s.right,r=e.height-s.top-s.bottom;if(n<=0||r<=0||t.value<=0)return i;let o=0,a=0,l=1/0,h=t.value;const c=t.children,d=new dt(e.x+s.left,e.y+s.top,n,r),u=d.clone();for(let t=0;t<c.length;t++){const e=c[t].value,s=c[a].value,n=u.width<u.height;o+=e;const r=n?u.height:u.width,p=n?u.width:u.height,g=p*s/o;let f=r*o/h;const m=Math.max(g,f)/Math.min(g,f),y=Math.abs(1-m);if(y<l){l=y;continue}o-=e,f=r*o/h;let v=n?u.x:u.y;for(let e=a;e<t;e++){const t=c[e],s=n?v:u.x,r=n?u.y:v,a=p*t.value/o,l=new dt(s,r,n?a:f,n?f:a);this.applyGap(d,l),this.squarify(t,l,i),h-=t.value,v+=a}n?(u.y+=f,u.height-=f):(u.x+=f,u.width-=f),a=t,o=0,l=1/0,t--}const p=u.width<u.height;let g=p?u.x:u.y;for(let t=a;t<c.length;t++){const e=p?g:u.x,s=p?u.y:g,n=c[t].value/h,r=u.width*(p?n:1),o=u.height*(p?1:n),a=new dt(e,s,r,o);this.applyGap(d,a),this.squarify(c[t],a,i),g+=p?r:o}return i}applyGap(t,e){const i=this.nodeGap/2,s=t=>({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}),n=s(t),r=s(e);Object.keys(n).forEach(t=>{ls(n[t],r[t])||e.shrink(i,t)})}processData(){return Ua(this,void 0,void 0,(function*(){if(!this.data)return;const{data:t,sizeKey:e,labelKey:i,colorKey:s,colorDomain:n,colorRange:r,groupFill:o}=this,a=this.labels.formatter,l=new La;l.domain=n,l.range=r,l.update();const h=(t,n=0,r)=>{var c,d,u;let p;a&&(p=this.ctx.callbackCache.call(a,{datum:t})),void 0!==p||(p=i&&null!==(c=t[i])&&void 0!==c?c:"");let g=s&&null!==(d=t[s])&&void 0!==d?d:n;g=sl(g);const f=!t.children;let m=o;"string"==typeof g?m=g:!f&&o||(m=l.convert(g));const y={datum:t,depth:n,parent:r,value:0,label:p,fill:m,series:this,isLeaf:f,children:[]};return f?y.value=e&&null!==(u=t[e])&&void 0!==u?u:1:(t.children.forEach(t=>{const e=h(t,n+1,y),i=e.value;!isNaN(i)&&isFinite(i)&&0!==i&&(y.value+=i,y.children.push(e))}),y.children.sort((t,e)=>e.value-t.value)),y};this.dataRoot=h(t)}))}createNodeData(){return Ua(this,void 0,void 0,(function*(){return[]}))}update(){return Ua(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes()}))}updateSelections(){return Ua(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t,dataRoot:e}=this;if(!t||!e)return;if(!t.getSeriesRect())return;const i=[],s=t=>{var e;i.push(t),null===(e=t.children)||void 0===e||e.forEach(s)};s(this.dataRoot);const{groupSelection:n,highlightSelection:r}=this,o=t=>t.update(i,t=>{const e=new ha,i=new Vt;i.tag=Ha.Name;const s=new Vt;s.tag=Ha.Value,t.append([e,i,s])});this.groupSelection=o(n),this.highlightSelection=o(r)}))}isDatumHighlighted(t){var e;return t===(null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&(t.isLeaf||this.highlightGroups)}getTileFormat(t,e){var i;const{formatter:s,ctx:{callbackCache:n}}=this;if(!s)return{};const{gradient:r,colorKey:o,labelKey:a,sizeKey:l,tileStroke:h,tileStrokeWidth:c,groupStroke:d,groupStrokeWidth:u}=this,p=t.isLeaf?h:d,g=t.isLeaf?c:u,f=n.call(s,{seriesId:this.id,datum:t.datum,depth:t.depth,parent:null===(i=t.parent)||void 0===i?void 0:i.datum,colorKey:o,sizeKey:l,labelKey:a,fill:t.fill,stroke:p,strokeWidth:g,gradient:r,highlighted:e});return null!=f?f:{}}updateNodes(){return Ua(this,void 0,void 0,(function*(){if(!this.chart)return;const{gradient:t,highlightStyle:{item:{fill:e,fillOpacity:i,stroke:s,strokeWidth:n},text:{color:r}},tileStroke:o,tileStrokeWidth:a,groupStroke:l,groupStrokeWidth:h,tileShadow:c,labelShadow:d}=this,u=this.chart.getSeriesRect(),p=this.squarify(this.dataRoot,new dt(0,0,u.width,u.height)),g=this.buildLabelMeta(p),f=this.getHighlightedSubtree();this.updateNodeMidPoint(p);const m=(r,d,u)=>{var g,f,m,y,v,b;const x=p.get(d);if(!x)return void(r.visible=!1);const C=u&&void 0!==e?e:d.fill,S=null!==(g=u?i:1)&&void 0!==g?g:1;let k=l;u&&void 0!==s?k=s:d.isLeaf&&(k=o);let O=h;u&&void 0!==n?O=n:d.isLeaf&&(O=a);const w=this.getTileFormat(d,u),T=sl(null!==(f=null==w?void 0:w.fill)&&void 0!==f?f:C);if(null!==(m=null==w?void 0:w.gradient)&&void 0!==m?m:t){const t=ie.tryParseFromString(C).brighter().toString(),e=ie.tryParseFromString(C).darker().toString();r.fill=`linear-gradient(180deg, ${t}, ${e})`}else r.fill=T;r.fillOpacity=null!==(y=null==w?void 0:w.fillOpacity)&&void 0!==y?y:S,r.stroke=sl(null!==(v=null==w?void 0:w.stroke)&&void 0!==v?v:k),r.strokeWidth=null!==(b=null==w?void 0:w.strokeWidth)&&void 0!==b?b:O,r.fillShadow=c,r.crisp=!0,r.x=x.x,r.y=x.y,r.width=x.width,r.height=x.height,r.visible=!0};this.groupSelection.selectByClass(ha).forEach(t=>m(t,t.datum,!1)),this.highlightSelection.selectByClass(ha).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&m(t,t.datum,e)});const y=(t,e,i,s)=>{const n=g.get(e),o=null==n?void 0:n[s];o?(t.text=o.text,t.fontFamily=o.style.fontFamily,t.fontSize=o.style.fontSize,t.fontWeight=o.style.fontWeight,t.fill=i&&null!=r?r:o.style.color,t.fillShadow=i?void 0:d,t.textAlign=o.hAlign,t.textBaseline=o.vAlign,t.x=o.x,t.y=o.y,t.visible=!0):t.visible=!1};this.groupSelection.selectByTag(Ha.Name).forEach(t=>y(t,t.datum,!1,"label")),this.highlightSelection.selectByTag(Ha.Name).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&y(t,t.datum,e,"label")}),this.groupSelection.selectByTag(Ha.Value).forEach(t=>y(t,t.datum,!1,"value")),this.highlightSelection.selectByTag(Ha.Value).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&y(t,t.datum,e,"value")})}))}updateNodeMidPoint(t){t.forEach((t,e)=>{e.nodeMidPoint={x:t.x+t.width/2,y:t.y}})}getHighlightedSubtree(){const t=new Set,e=i=>{var s;(this.isDatumHighlighted(i)||i.parent&&t.has(i.parent))&&t.add(i),null===(s=i.children)||void 0===s||s.forEach(e)};return e(this.dataRoot),t}buildLabelMeta(t){const{labels:e,title:i,subtitle:s,nodePadding:n,labelKey:r,ctx:{callbackCache:o}}=this,a=/-$/m,l=new Map;return t.forEach((t,h)=>{var c,d,u;if(!r||0===h.depth)return;const p=t.width-2*n,g=t.height-2*n,f=e=>e.fontSize>t.width/3||e.fontSize>t.height/3;let m=h.isLeaf?h.label:h.label.toUpperCase(),y="";const v=e.value,b=v.style,x=Math.ceil(2*b.fontSize*(Vt.defaultLineHeightRatio-1));h.isLeaf&&(v.formatter?y=null!==(c=o.call(v.formatter,{datum:h.datum}))&&void 0!==c?c:"":v.key&&(y=h.datum[v.key]));let C,S=il(y,b);y&&S.width>p&&(y="");let k="";if(h.isLeaf){C=e.small;const t=()=>{const t=g-(y?b.fontSize+x:0),i=[e.large,e.medium,e.small];for(const s of i){const{width:i,height:n}=il(m,s);if(n>t||f(s))continue;if(i<=p)return{style:s,wrappedText:void 0};const r=Vt.wrap(m,p,t,s,s.wrapping);if(r&&"\u2026"!==r&&(s===e.small||!a.exec(r)&&!r.endsWith("\u2026")))return{style:s,wrappedText:r}}return il(m,e.small).height<=t&&!f(e.small)?{style:e.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}};let i=t();!i.style&&y&&(y="",i=t()),C=null!==(d=i.style)&&void 0!==d?d:e.small,k=null!==(u=i.wrappedText)&&void 0!==u?u:""}else C=1===h.depth?i:s;const O=il(k||m,C);if(f(C))return;if(O.width>p){const t=Math.floor(m.length*p/O.width)-1;m=m.substring(0,t).trim()+"\u2026"}S=il(y,b);const w=y&&S.width<p&&S.height+O.height+x<g;l.set(h,{label:Object.assign({text:k||m,style:C},h.isLeaf?{hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2-(w?S.height/2+x/2:0)}:{hAlign:"left",vAlign:"top",x:t.x+n,y:t.y+n}),value:w?{text:y,style:b,hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2+O.height/2+x/2}:void 0})}),l}getDomain(t){return[0,1]}getNodeClickEvent(t,e){return new qa(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new Za(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getTooltipHtml(t){var e,i,s,n;if(!this.highlightGroups&&!t.isLeaf)return"";const{tooltip:r,sizeKey:o,labelKey:a,colorKey:l,rootName:h,id:c,labels:d,ctx:{callbackCache:u}}=this,{datum:p}=t,{renderer:g}=r,f=t.depth?p[a]:null!==(e=p[a])&&void 0!==e?e:h;let m="";const y=this.getTileFormat(t,!1),v=null!==(s=null!==(i=null==y?void 0:y.fill)&&void 0!==i?i:t.fill)&&void 0!==s?s:"gray",b=d.value.key,x=d.value.formatter;if(b||x){let t="";if(x)t=u.call(x,{datum:p});else{const e=p[b];"number"==typeof e&&isFinite(e)&&(t=hs(e))}t&&(d.value.name&&(m+=`<b>${d.value.name}:</b> `),m+=t)}const C={title:f,backgroundColor:v,content:m};return g?hi(g({datum:t.datum,parent:null===(n=t.parent)||void 0===n?void 0:n.datum,depth:t.depth,sizeKey:o,labelKey:a,colorKey:l,title:f,color:v,seriesId:c}),C):f||m?hi(C):""}getLegendData(){return[]}}ol.className="TreemapSeries",ol.type="treemap",Ya([re(Ee(0))],ol.prototype,"nodePadding",void 0),Ya([re(Ee(0))],ol.prototype,"nodeGap",void 0),Ya([re(ve)],ol.prototype,"labelKey",void 0),Ya([re(be)],ol.prototype,"sizeKey",void 0),Ya([re(be)],ol.prototype,"colorKey",void 0),Ya([re(Ae)],ol.prototype,"colorDomain",void 0),Ya([re(De)],ol.prototype,"colorRange",void 0),Ya([re(be)],ol.prototype,"groupFill",void 0),Ya([re(Te)],ol.prototype,"groupStroke",void 0),Ya([re(Re(0))],ol.prototype,"groupStrokeWidth",void 0),Ya([re(Te)],ol.prototype,"tileStroke",void 0),Ya([re(Re(0))],ol.prototype,"tileStrokeWidth",void 0),Ya([re(me)],ol.prototype,"gradient",void 0),Ya([re(fe)],ol.prototype,"formatter",void 0),Ya([re(ve)],ol.prototype,"colorName",void 0),Ya([re(ve)],ol.prototype,"rootName",void 0),Ya([re(ye)],ol.prototype,"highlightGroups",void 0);const al={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},ll={},hl={has:t=>Object.prototype.hasOwnProperty.call(al,t),isCartesian:t=>"cartesian"===al[t],isPolar:t=>"polar"===al[t],isHierarchy:t=>"hierarchy"===al[t],get seriesTypes(){return Object.keys(al)},get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))},get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))},get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}};function cl(t,e){var i;ll[t]=En([null!==(i=ll[t])&&void 0!==i?i:{},e])}function dl(t){var e;return null!==(e=ll[t])&&void 0!==e?e:{}}const ul={area:aa,bar:va,column:ba,histogram:Da,line:Aa,pie:_o,scatter:za,treemap:ol},pl={},gl={},fl={};function ml(t,e,i,s,n){pl[t]=i,gl[t]=s,fl[t]=n,function(t,e){al[t]=e}(t,e)}function yl(t,e){var i;const s=null!==(i=pl[t])&&void 0!==i?i:ul[t];if(s)return new s(e);throw new Error("AG Charts - unknown series type: "+t)}function vl(t){return gl[t]}function bl(t){return fl[t]}const xl={axes:[{type:$o.type,position:"left"},{type:wn.type,position:"bottom"}]},Cl={axes:[{type:"number",position:"bottom"},{type:"category",position:"left"}]},Sl={axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]};function kl(t,e){const i={};for(const s in t){const n=e[s]||(t=>t);i[s]=n(t[s],t)}return i}function Ol(t){return null!=t&&t instanceof Array&&t[0]instanceof Array}function wl(t,e){if(null==t)return{};if(!(t instanceof Array))return t;const i=e.yKeys;if(null==i||Ol(i))throw new Error("AG Charts - yNames and yKeys mismatching configuration.");const s={};return i.forEach((e,i)=>{s[e]=t[i]}),s}function Tl(t,e){return null==t?[[]]:Ol(t)?t:e.grouped?t.map(t=>[t]):[t]}function Dl(t,e){if(null==t)return{};if(!(t instanceof Array))return t;const i=e.yKeys;if(null==i||Ol(i))throw new Error("AG Charts - legendItemNames and yKeys mismatching configuration.");const s={};return i.forEach((e,i)=>{s[e]=t[i]}),s}function Ml(t){return t}const El={area:Ml,bar:function(t){const e=Object.assign({},t);return delete e.yKey,delete e.yName,kl(e,{yNames:wl,yKeys:Tl,legendItemNames:Dl})},column:function(t){const e=Object.assign({},t);return delete e.yKey,delete e.yName,kl(e,{yNames:wl,yKeys:Tl,legendItemNames:Dl})},histogram:Ml,line:Ml,pie:Ml,scatter:Ml,treemap:Ml};function Rl(t,e){if(Al(t)&&Al(e)){const i={};return Object.keys(t).forEach(s=>{i[s]=s in e?Rl(t[s],e[s]):t[s]}),Object.keys(e).forEach(s=>{s in t||(i[s]=e[s])}),i}return Array.isArray(t)&&!Array.isArray(e)||Pl(t)&&!Pl(e)?t:e}function Pl(t){return t&&"object"==typeof t}function Al(t){return Pl(t)&&t.constructor===Object}const Ll={number:"number",time:"time",log:"log",category:"category",groupedCategory:"groupedCategory"},Il={},Nl={has:t=>Object.prototype.hasOwnProperty.call(Ll,t),get axesTypes(){return Object.keys(Ll)}};function Fl(t,e){Il[t]=e}const _l={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},Bl=Symbol("extends-series-defaults"),Gl=Symbol("override-series-label-defaults"),jl=Symbol("default-font");class zl{constructor(t){t=Rl({},null!=t?t:{});const{overrides:e=null,palette:i=null}=t,s=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t,cartesian:i,polar:n,hierarchy:r}=e,o=(t,e,i)=>{i&&(s[t]=Rl(s[t],i),e.forEach(t=>{const e=t;s[e]=Rl(s[e],i)}))};o("common",Object.keys(s),t),o("cartesian",hl.cartesianTypes,i),o("polar",hl.polarTypes,n),o("hierarchy",hl.hierarchyTypes,r),hl.seriesTypes.forEach(t=>{const i=t,n=e[i];n&&(n.series&&(n.series={[i]:n.series}),s[i]=Rl(s[i],n))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(s)}getPalette(){return _l}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getBarSeriesDefaults(){return Object.assign(Object.assign({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}static getLineSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{format:void 0,position:{type:"node"}})})}static getAreaSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{nodeClickRange:"nearest",tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getScatterSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:zl.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:zl.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:zl.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}createChartConfigPerChartType(t){const e={cartesian:hl.cartesianTypes,polar:hl.polarTypes,hierarchy:hl.hierarchyTypes,groupedCategory:[]};return Object.entries(e).forEach(([e,i])=>{const s=e,n=this.templateTheme(dl(s));i.forEach(e=>{const i=e;t[i]||(t[i]=Rl({},t[s]),Rl(t[i],n))})}),t}getDefaults(){const t=Rl({},zl.defaults),e=(t,e)=>{const i=this.templateTheme(dl(t));return i.series=e.reduce((t,e)=>{const i=bl(e);return i&&(t[e]=this.templateTheme(i)),t},{}),"cartesian"===t&&(i.axes=Nl.axesTypes.reduce((t,e)=>{const i=function(t){var e;return null!==(e=Il[t])&&void 0!==e?e:{}}(e);return i&&(t[e]=this.templateTheme(i)),t},{})),i};return Rl(t,{cartesian:e("cartesian",hl.cartesianTypes),groupedCategory:e("cartesian",hl.cartesianTypes),polar:e("polar",hl.polarTypes),hierarchy:e("hierarchy",hl.hierarchyTypes)})}templateTheme(t){const e=En([t]),{extensions:i,properties:s}=this.getTemplateParameters();return Pn(e,(t,e)=>{if(e.__extends__){const t=e.__extends__,s=i.get(t);if(null==s)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,s,e),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,s=i.get(t);if(null==s)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,s),delete e.__overrides__}for(const[t,i]of Object.entries(e))s.has(i)&&(e[t]=s.get(i))},{}),e}getTemplateParameters(){const t=new Map;t.set(Bl,zl.getSeriesDefaults()),t.set(Gl,{});const e=new Map;return e.set(jl,zl.fontFamily),{extensions:t,properties:e}}mergeWithParentDefaults(t,e){return Rl(t,e)}}zl.fontFamily="Verdana, sans-serif",zl.cartesianDefaults=Object.assign(Object.assign({},zl.getChartDefaults()),{axes:{number:Object.assign({},zl.getAxisDefaults()),log:Object.assign(Object.assign({},zl.getAxisDefaults()),{base:10}),category:Object.assign(Object.assign({},zl.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},zl.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:Object.assign({},zl.getAxisDefaults()),time:Object.assign({},zl.getAxisDefaults())},series:{column:Object.assign({},zl.getBarSeriesDefaults()),bar:Object.assign({},zl.getBarSeriesDefaults()),line:Object.assign(Object.assign({},zl.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:Object.assign(Object.assign({},zl.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:Object.assign(Object.assign({},zl.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:Object.assign({},zl.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)"}}),area:Object.assign(Object.assign({},zl.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:Object.assign(Object.assign({},zl.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:Object.assign(Object.assign({},zl.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),zl.polarDefaults=Object.assign(Object.assign({},zl.getChartDefaults()),{series:{pie:Object.assign(Object.assign({},zl.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:zl.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),zl.hierarchyDefaults=Object.assign(Object.assign({},zl.getChartDefaults()),{series:{treemap:Object.assign(Object.assign({},zl.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),zl.defaults={cartesian:zl.cartesianDefaults,groupedCategory:zl.cartesianDefaults,polar:zl.polarDefaults,hierarchy:zl.hierarchyDefaults};class Wl extends zl{constructor(t){super(t)}getDefaults(){const t=Wl.fontColor,e=Wl.mutedFontColor,i={title:{color:t},label:{color:t},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},s={label:{color:t}},n={axes:{number:Object.assign({},i),category:Object.assign({},i),time:Object.assign({},i)}},r={background:{fill:"rgb(34, 38, 41)"},title:{color:t},subtitle:{color:e},legend:{item:{label:{color:t}},pagination:{activeStyle:{fill:t},inactiveStyle:{fill:e},highlightStyle:{fill:t},label:{color:t}}}},o=t=>t.reduce((t,e)=>{const i=bl(e);return i&&(t[e]=this.templateTheme(i)),t},{});return this.mergeWithParentDefaults(super.getDefaults(),{cartesian:Object.assign(Object.assign(Object.assign({},r),n),{series:Object.assign({line:Object.assign({},s),bar:Object.assign({},s),column:Object.assign({},s),histogram:Object.assign({},s)},o(hl.cartesianTypes))}),groupedCategory:Object.assign(Object.assign(Object.assign({},r),n),{series:Object.assign({bar:Object.assign({},s),column:Object.assign({},s),histogram:Object.assign({},s)},o(hl.cartesianTypes))}),polar:Object.assign(Object.assign({},r),{series:Object.assign({pie:{calloutLabel:{color:t},sectorLabel:{color:t},title:{color:t},innerLabels:{color:t}}},o(hl.polarTypes))}),hierarchy:Object.assign(Object.assign({},r),{series:Object.assign({treemap:{tileStroke:"white",groupStroke:"white",title:{color:t},subtitle:{color:e},labels:{large:{color:t},medium:{color:t},small:{color:t},value:{style:{color:t}}}}},o(hl.hierarchyTypes))})})}getTemplateParameters(){const t=super.getTemplateParameters();return t.extensions.set(Gl,Wl.seriesLabelDefaults.label),t}}Wl.fontColor="rgb(200, 200, 200)",Wl.mutedFontColor="rgb(150, 150, 150)",Wl.seriesLabelDefaults={label:{color:Wl.fontColor}};const Vl={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class Kl extends zl{getPalette(){return Vl}}const Hl={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class Yl extends Wl{getPalette(){return Hl}}const Ul={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class Xl extends zl{getPalette(){return Ul}}const $l={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class ql extends Wl{getPalette(){return $l}}const Zl={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class Jl extends zl{getPalette(){return Zl}}const Ql={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class th extends Wl{getPalette(){return Ql}}const eh={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class ih extends zl{getPalette(){return eh}}const sh={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class nh extends Wl{getPalette(){return sh}}const rh=()=>new zl,oh=()=>new Wl,ah={undefined:rh,null:rh,"ag-default":rh,"ag-material":()=>new Kl,"ag-pastel":()=>new Xl,"ag-solar":()=>new Jl,"ag-vivid":()=>new ih},lh={undefined:oh,null:oh,"ag-default-dark":oh,"ag-material-dark":()=>new Yl,"ag-pastel-dark":()=>new ql,"ag-solar-dark":()=>new th,"ag-vivid-dark":()=>new nh},hh=Object.assign(Object.assign({},lh),ah);function ch(t){var e;if(t instanceof zl)return t;const i=hh[t];if(i)return i();t=t;const s=[];let n;for(;"object"==typeof t;)s.push(null!==(e=t.overrides)&&void 0!==e?e:{}),t.palette&&null==n&&(n=t.palette),t=t.baseTheme;s.reverse();const r=Object.assign({baseTheme:t,overrides:En(s)},n?{palette:n}:{});if(r.baseTheme||r.overrides){return new(ch(r.baseTheme).constructor)(r)}return rh()}const dh=Symbol(),uh=Symbol(),ph=t=>(e,i)=>{var s;return e.concat(...null!==(s=i[t])&&void 0!==s?s:[])},gh=(t,e)=>(i,s,n,r)=>{var o;const a=e===uh||e===dh,l=null!==(o=s[t])&&void 0!==o?o:e;if(l===dh)throw new Error(`AG Charts - missing value for property [${t}] on series config.`);if(l===uh)return i;if(0===i.length&&!a)for(;i.length<r;)i=i.concat(e);return a?i.concat(l):(i[n]=l,i)},fh={hideInChart:{outputProp:"hideInChart",reducer:ph("hideInChart"),start:[]},hideInLegend:{outputProp:"hideInLegend",reducer:ph("hideInLegend"),start:[]},yKey:{outputProp:"yKeys",reducer:gh("yKey",uh),start:[]},fill:{outputProp:"fills",reducer:gh("fill",uh),start:[]},stroke:{outputProp:"strokes",reducer:gh("stroke",uh),start:[]},yName:{outputProp:"yNames",reducer:gh("yName",uh),start:[]},visible:{outputProp:"visibles",reducer:gh("visible",!0),start:[]},legendItemName:{outputProp:"legendItemNames",reducer:gh("legendItemName",uh),start:[]},grouped:{outputProp:"grouped",reducer:(mh="grouped",(t,e)=>"boolean"==typeof e[mh]?null!=t&&t||e[mh]:null!=t?t:yh),seriesType:["bar","column"],start:void 0},showInLegend:{outputProp:"hideInLegend",reducer:((t,e)=>(i,s)=>s[t]===e?i.concat(...s.yKey?[s.yKey]:s.yKeys):i)("showInLegend",!1),seriesType:["bar","column"],start:[]},stackGroup:{outputProp:"stackGroups",reducer:(t,e)=>Object.assign(Object.assign({},t),{[e.stackGroup]:[...t[e.stackGroup]||[],e.yKey]}),seriesType:["bar","column"],start:{}}};var mh,yh;function vh(t){const e={};return t.forEach((i,s)=>{Object.keys(i).forEach(n=>{var r;const o=fh[n],a=()=>{var t,s;e[n]=null!==(s=null!==(t=i[n])&&void 0!==t?t:e[n])&&void 0!==s?s:void 0};if(!o)return void a();const{outputProp:l,reducer:h,start:c,seriesType:d=[i.type]}=o;if(!d.includes(i.type))return void a();const u=h(null!==(r=e[l])&&void 0!==r?r:c,i,s,t.length);void 0!==u&&(e[l]=u)})}),e}function bh(t){var e,i,s,n;return null!==(n=null!==(e=t.type)&&void 0!==e?e:null===(s=null===(i=t.series)||void 0===i?void 0:i[0])||void 0===s?void 0:s.type)&&void 0!==n?n:"line"}function xh(t){const e=bh(t);return null==e||("cartesian"===e?(Dt.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):hl.isCartesian(e))}function Ch(t){const e=bh(t);return null!=e&&("hierarchy"===e?(Dt.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):hl.isHierarchy(e))}function Sh(t){const e=bh(t);return null!=e&&("polar"===e?(Dt.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):hl.isPolar(e))}function kh(t){return null!=t&&hl.has(t)}function Oh(t,e,i){const s=[];for(let n=0;n<i;n++)s.push(e[(n+t.colourIndex)%e.length]);return s}const wh={avoidDeepClone:["data"]};function Th(t,e){var i,s,n,r,o,a;let l=En([e,t],wh);!function(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([e,i])=>{var s;(null===(s=t.series)||void 0===s?void 0:s.some(t=>null!=t[e]))&&Dt.warnOnce(`property [series.${e}] is deprecated, please use [series.${i}] and multiple series instead.`)})}(l);const h=l.type,c=bh(l),d=null!==(s=null===(i=l.tooltip)||void 0===i?void 0:i.position)&&void 0!==s?s:{},u=t=>{if(null!=t&&!kh(t)&&!vl(t))throw new Error(`AG Charts - unknown series type: ${t}; expected one of: ${hl.seriesTypes}`)};u(c);for(const{type:t}of null!==(n=l.series)&&void 0!==n?n:[])null!=t&&u(t);l=Object.assign(Object.assign({},l),{type:c});let p="line";xh(l)?p="line":Ch(l)?p="treemap":Sh(l)&&(p="pie");let g={};const f=vl(c);f?g=f:"bar"===c?g=Cl:"scatter"===c||"histogram"===c?g=Sl:xh(l)&&(g=xl),function(t){Pn(t,(t,e)=>{"enabled"in e&&!1===e.enabled&&Object.entries(e).forEach(([t])=>{"enabled"!==t&&delete e[t]})},{skip:["data","theme"]})}(l);const{context:m,mergedOptions:y,axesThemes:v,seriesThemes:b}=function(t,e){const{theme:i,cleanedTheme:s,axesThemes:n,seriesThemes:r}=function(t){var e,i;const s=ch(t.theme),n=s.config[null!==(e=bh(t))&&void 0!==e?e:"cartesian"],r=Object.entries(s.config).reduce((t,[e,{series:i}])=>(t[e]=null==i?void 0:i[e],t),{});return{theme:s,axesThemes:null!==(i=n.axes)&&void 0!==i?i:{},seriesThemes:r,cleanedTheme:En([n,{axes:Dn,series:Dn}])}}(e),o={colourIndex:0,palette:i.palette},a=En([t,s,e],wh);return{context:o,mergedOptions:a,axesThemes:n,seriesThemes:r}}(g,l);y.series=function(t){const e=[],i=t.map(t=>{var e;return"bar"!==t.type&&"column"!==t.type||null==t.yKey||t.stacked?t:Object.assign(Object.assign({},t),{grouped:null===(e=t.grouped)||void 0===e||e})});for(const t of function(t){var e;const i={},s=[];for(const n of t){if("column"!==n.type&&"bar"!==n.type&&("area"!==n.type||!0!==n.stacked)){s.push([n]);continue}const t=null!==(e=n.type)&&void 0!==e?e:"line",r=n.stacked?"stacked":"grouped",o=`${t}-${n.xKey}-${r}`;null==i[o]&&(i[o]=[],s.push(i[o])),i[o].push(n)}return s}(i))switch(t[0].type){case"column":case"bar":case"area":e.push(vh(t));break;case"line":default:t.length>1&&Dt.warn("unexpected grouping of series type: "+t[0].type),e.push(t[0])}return e}((null!==(r=y.series)&&void 0!==r?r:[]).map(t=>{let e=p;t.type?e=t.type:kh(h)&&(e=h);const i=function(t,e,i,s){var n,r;const o=En([Object.assign({},s),null===(n=t.tooltip)||void 0===n?void 0:n.position],wh);return En([null!==(r=i[e])&&void 0!==r?r:{},Object.assign(Object.assign({},t),{type:e,tooltip:Object.assign(Object.assign({},t.tooltip),{position:o})})],wh)}(t,e,b,d);return"pie"===e&&function(t,e,i){Array.isArray(e.innerLabels)?i.innerLabels=e.innerLabels.map(e=>En([t.innerLabels,e])):i.innerLabels=Dn}(b.pie,t,i),i})).map(t=>function(t,e,...i){const s=function(t,e){var i;const s={},{palette:{fills:n,strokes:r}}=t;let o=function t(e){let i=0;for(const s of e)s instanceof Array&&(i+=t(s)),null!=s&&i++;return i}(null!==(i=e.yKeys)&&void 0!==i?i:[])||1;switch(e.type){case"pie":o=Math.max(n.length,r.length);case"area":case"bar":case"column":s.fills=Oh(t,n,o),s.strokes=Oh(t,r,o);break;case"histogram":s.fill=Oh(t,n,1)[0],s.stroke=Oh(t,r,1)[0];break;case"scatter":s.marker={stroke:Oh(t,r,1)[0],fill:Oh(t,n,1)[0]};break;case"line":s.stroke=Oh(t,n,1)[0],s.marker={stroke:Oh(t,r,1)[0],fill:Oh(t,n,1)[0]}}return t.colourIndex+=o,s}(t,e);return function(t){var e;const i=null!==(e=t.type)&&void 0!==e?e:"line",s=El[i];return(null!=s?s:Ml)(t)}(En([...i,s,e,{stacked:Dn}],wh))}(m,t));const x=t=>{const e=null!=(i=t)&&Nl.has(i);var i;return e||Dt.warnOnce(`AG Charts - unknown axis type: ${t}; expected one of: ${Nl.axesTypes}, ignoring.`),e};if(xh(y)){let t=!0;for(const{type:e}of null!==(o=y.axes)&&void 0!==o?o:[])x(e)||(t=!1);y.axes=t?null===(a=y.axes)||void 0===a?void 0:a.map(t=>{var e,i;const s=t.type;return function(t,e){const i={top:Dn,bottom:Dn,left:Dn,right:Dn};if(t.crossLines){Array.isArray(t.crossLines)||(Dt.warn("axis[].crossLines should be an array."),t.crossLines=[]);const{crossLines:i}=e;t.crossLines=t.crossLines.map(t=>En([i,t]))}return En([e,{crossLines:Dn},t,i],wh)}(t,En([v[s],null!==(i=v[s][null!==(e=t.position)&&void 0!==e?e:"unknown"])&&void 0!==i?i:{}]))}):g.axes,function(t,e){var i,s,n,r;if(void 0!==(null===(i=t.legend)||void 0===i?void 0:i.enabled)||void 0!==(null===(s=e.legend)||void 0===s?void 0:s.enabled))return;if(null!==(n=e.legend)&&void 0!==n||(e.legend={}),(null!==(r=t.series)&&void 0!==r?r:[]).length>1)return void(e.legend.enabled=!0);e.legend.enabled=!1}(l,y)}return function(t,e){Pn(t,(t,e,i)=>{if(!i)return;const{_enabledFromTheme:s}=i;null!=s&&delete i._enabledFromTheme,"enabled"in i&&(s||null==e.enabled&&(i.enabled=!0))},{skip:["data","theme"]},e),Pn(e,(t,e)=>{null!=e._enabledFromTheme&&delete e._enabledFromTheme},{skip:["data","theme"]})}(l,y),y}const Dh={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},Mh={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};const Eh=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e/2,y:i}:{x:e,y:isNaN(s)?i:(i+s)/2},Rh=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:e,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},Ph=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:(i+s)/2}:{x:e/2,y:isNaN(s)?i:s},Ah=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:i/2,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:(s+n)/2},Lh=({yDirection:t,xStart:e,xEnd:i,yStart:s})=>t?{x:e/2,y:s}:{x:i,y:s},Ih=({yDirection:t,xStart:e,yStart:i,yEnd:s})=>t?{x:e,y:isNaN(s)?i:s}:{x:e,y:i},Nh=({yDirection:t,xEnd:e,yStart:i,yEnd:s})=>t?{x:e,y:i}:{x:e,y:isNaN(s)?i:s},Fh=({yDirection:t,xStart:e,xEnd:i,yStart:s,yEnd:n})=>t?{x:i,y:isNaN(n)?s:n}:{x:e,y:isNaN(n)?s:n},_h={top:{c:Eh},bottom:{c:Ah},left:{c:Rh},right:{c:Ph},topLeft:{c:Lh},topRight:{c:Nh},bottomLeft:{c:Ih},bottomRight:{c:Fh},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:Rh},insideRight:{c:Ph},insideTop:{c:Eh},insideBottom:{c:Ah},insideTopLeft:{c:Lh},insideBottomLeft:{c:Ih},insideTopRight:{c:Nh},insideBottomRight:{c:Fh}};var Bh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Gh extends jt{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new dt(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:s,stats:n}=t;if(this.dirty===ft.NONE&&!s)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:o,x2:a,y2:l}=this;r=this.align(r),o=this.align(o),a=this.align(a),l=this.align(l);const{fill:h,opacity:c,isRange:d}=this;if(!(!d||!h)){const{fillOpacity:t}=this;i.fillStyle=h,i.globalAlpha=c*t,i.beginPath(),i.moveTo(r,o),i.lineTo(a,o),i.lineTo(a,l),i.lineTo(r,l),i.closePath(),i.fill()}const{stroke:u,strokeWidth:p,startLine:g,endLine:f}=this;if(!(!g&&!f||!u||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:s,lineCap:n,lineJoin:h}=this;i.strokeStyle=u,i.globalAlpha=c*t,i.lineWidth=p,e&&i.setLineDash(e),s&&(i.lineDashOffset=s),n&&(i.lineCap=n),h&&(i.lineJoin=h),i.beginPath(),g&&(i.moveTo(r,o),i.lineTo(a,o)),f&&(i.moveTo(a,l),i.lineTo(r,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}Gh.className="Range",Gh.defaultStyles=Object.assign(Object.assign({},jt.defaultStyles),{strokeWidth:1}),Bh([yt({redraw:ft.MINOR})],Gh.prototype,"x1",void 0),Bh([yt({redraw:ft.MINOR})],Gh.prototype,"y1",void 0),Bh([yt({redraw:ft.MINOR})],Gh.prototype,"x2",void 0),Bh([yt({redraw:ft.MINOR})],Gh.prototype,"y2",void 0),Bh([yt({redraw:ft.MINOR})],Gh.prototype,"startLine",void 0),Bh([yt({redraw:ft.MINOR})],Gh.prototype,"endLine",void 0),Bh([yt({redraw:ft.MINOR})],Gh.prototype,"isRange",void 0);var jh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const zh=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],Wh=oe((t,e)=>ae(t,e,t=>zh.includes(t)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),Vh=oe((t,e)=>ae(t,e,t=>"range"===t||"line"===t),"expecting a crossLine type keyword such as 'range' or 'line'");class Kh{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}jh([re(ye)],Kh.prototype,"enabled",void 0),jh([re(be)],Kh.prototype,"text",void 0),jh([re(Ge)],Kh.prototype,"fontStyle",void 0),jh([re(ze)],Kh.prototype,"fontWeight",void 0),jh([re(Ee(0))],Kh.prototype,"fontSize",void 0),jh([re(ve)],Kh.prototype,"fontFamily",void 0),jh([re(Ee(0))],Kh.prototype,"padding",void 0),jh([re(Te)],Kh.prototype,"color",void 0),jh([re(Wh)],Kh.prototype,"position",void 0),jh([re(Re(-360,360))],Kh.prototype,"rotation",void 0),jh([re(ye)],Kh.prototype,"parallel",void 0);class Hh{constructor(){this.id=gt(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Kh,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=ei.X,this.group=new Et({name:""+this.id,layer:!0,zIndex:Hh.LINE_LAYER_ZINDEX}),this.crossLineRange=new Gh,this.crossLineLabel=new Vt,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=bt.None}update(t){if(!this.enabled)return;if(this.group.visible=t,!t)return;this.createNodeData()?(this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)):this.group.visible=!1}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:s,sideFlag:n,direction:r,label:{position:o="top"},clippedRange:a,strokeWidth:l=0}=this;if(!i)return!1;const h=null!==(t=i.bandwidth)&&void 0!==t?t:0,c=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[d,u]=[0,n*s];let[p,g]=this.getRange(),[f,m]=[Number(i.convert(p,{strict:!1})),i.convert(g,{strict:!1})+h];f=c(f),m=c(m),[p,g]=[Number(i.convert(p)),i.convert(g)+h];const y=!isNaN(f)&&!isNaN(m)&&(p===f||g===m||f!==m)&&Math.abs(m-f)>0;if(y){f!==Math.min(f,m)&&([f,m]=[Math.min(f,m),Math.max(f,m)],[p,g]=[g,p])}if(this.isRange=y,this.startLine=!isNaN(p)&&l>0&&p===f,this.endLine=!isNaN(g)&&l>0&&g===m,!y&&!this.startLine&&!this.endLine)return!1;if(this.data=[f,m],this.label.enabled){const t=r===ei.Y,{c:i=Eh}=null!==(e=_h[o])&&void 0!==e?e:{},{x:s,y:n}=i({yDirection:t,xStart:d,xEnd:u,yStart:f,yEnd:m});this.labelPoint={x:s,y:n}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:s,data:n,startLine:r,endLine:o,isRange:a,fill:l,fillOpacity:h,stroke:c,strokeWidth:d,lineDash:u}=this;e.x1=0,e.x2=i*s,e.y1=n[0],e.y2=n[1],e.startLine=r,e.endLine=o,e.isRange=a,e.fill=l,e.fillOpacity=null!=h?h:1,e.stroke=c,e.strokeWidth=null!=d?d:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:s,rotation:n,position:r="top",padding:o=0},direction:a,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===e||void 0===i)return;const{defaultRotation:c,configuredRotation:d}=nn({rotation:n,parallel:s,regularFlipRotation:h,parallelFlipRotation:l});t.rotation=c+d,t.textBaseline="middle",t.textAlign="center";const u=this.computeLabelBBox();if(!u)return;const p=a===ei.Y,{xTranslation:g,yTranslation:f}=function({yDirection:t,padding:e=0,position:i="top",bbox:s}){const n=t?Dh:Mh,{xTranslationDirection:r,yTranslationDirection:o}=n[i];return{xTranslation:r*(e+(t?s.width:s.height)/2),yTranslation:o*(e+(t?s.height:s.width)/2)}}({yDirection:p,padding:o,position:r,bbox:u});t.translationX=e+g,t.translationY=i+f}getZIndex(t=!1){return t?Hh.RANGE_LAYER_ZINDEX:Hh.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,s=i instanceof bs;let[n,r]=null!=e?e:[t,void 0];return s||void 0!==r||(r=n),n=null!=te(n,s)?n:void 0,r=null!=te(r,s)?r:void 0,s&&n===r&&(r=void 0),void 0===n&&void 0!==r&&(n=r,r=void 0),[n,r]}computeLabelBBox(){return this.crossLineLabel.computeTransformedBBox()}calculatePadding(t){var e,i,s,n,r,o,a,l;const{isRange:h,startLine:c,endLine:d,direction:u,label:{padding:p=0,position:g="top"}}=this;if(!h&&!c&&!d)return;const f=this.computeLabelBBox(),m=null==f?void 0:f.x,y=null==f?void 0:f.y;if(!f||null==m||null==y)return;const v=function({yDirection:t,bbox:e,padding:i=0,position:s="top"}){const n={};return s.startsWith("inside")||("top"!==s||t?"bottom"!==s||t?"left"===s&&t?n.left=i+e.width:"right"===s&&t&&(n.right=i+e.width):n.bottom=i+e.height:n.top=i+e.height),n}({yDirection:u===ei.Y,padding:p,position:g,bbox:f});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=v.left)&&void 0!==i?i:0),t.right=Math.max(null!==(s=t.right)&&void 0!==s?s:0,null!==(n=v.right)&&void 0!==n?n:0),t.top=Math.max(null!==(r=t.top)&&void 0!==r?r:0,null!==(o=v.top)&&void 0!==o?o:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=v.bottom)&&void 0!==l?l:0)}}Hh.LINE_LAYER_ZINDEX=ti.SERIES_CROSSLINE_LINE_ZINDEX,Hh.RANGE_LAYER_ZINDEX=ti.SERIES_CROSSLINE_RANGE_ZINDEX,Hh.className="CrossLine",jh([re(ye)],Hh.prototype,"enabled",void 0),jh([re(Vh)],Hh.prototype,"type",void 0),jh([re(he(2))],Hh.prototype,"range",void 0),jh([re(Te)],Hh.prototype,"fill",void 0),jh([re(Re(0,1))],Hh.prototype,"fillOpacity",void 0),jh([re(Te)],Hh.prototype,"stroke",void 0),jh([re(Re())],Hh.prototype,"strokeWidth",void 0),jh([re(Re(0,1))],Hh.prototype,"strokeOpacity",void 0),jh([re(Ve)],Hh.prototype,"lineDash",void 0);const Yh={},Uh={constructors:{title:ms,subtitle:ms,footnote:ms,shadow:Ka,innerCircle:No,"axes[].crossLines[]":Hh,"axes[].title":bn,"series[].innerLabels[]":Io},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Xh(){return{constructors:Object.assign(Object.assign({},Uh.constructors),Yh),allowedTypes:Object.assign({},Uh.allowedTypes)}}class $h{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const qh=[];function Zh(t){const e=qh.find(e=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier);if(e){if("enterprise"===t.packageType&&"community"===e.packageType){const i=qh.indexOf(e);qh.splice(i,1,t)}}else qh.push(t)}var Jh=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Qh extends $i{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:s}=this;return new dt(t-i/2,e-s/2,i,s)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:s,height:n}=this;t.clear();const r=e-s/2,o=i-n/2,a=this.align(r),l=this.align(o),h=a+this.align(r,s),c=l+this.align(o,n);t.moveTo(a,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(a,c),t.lineTo(a,l);const d=this.gripLineGap/2,u=this.gripLineLength/2;t.moveTo(this.align(e-d),this.align(i-u)),t.lineTo(this.align(e-d),this.align(i+u)),t.moveTo(this.align(e+d),this.align(i-u)),t.lineTo(this.align(e+d),this.align(i+u))}}Qh.className="RangeHandle",Jh([re(we)],Qh.prototype,"_fill",void 0),Jh([re(we)],Qh.prototype,"_stroke",void 0),Jh([re(Ee(0))],Qh.prototype,"_strokeWidth",void 0),Jh([re(He)],Qh.prototype,"_lineCap",void 0),Jh([re(Ee(0))],Qh.prototype,"_width",void 0),Jh([re(Ee(0))],Qh.prototype,"_gripLineGap",void 0),Jh([re(Ee(0))],Qh.prototype,"_gripLineLength",void 0),Jh([re(Ee(0))],Qh.prototype,"_height",void 0);var tc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ec extends $i{constructor(){super(...arguments),this._stroke="#999999",this._strokeWidth=1,this._fill="#999999",this._fillOpacity=.2,this._lineCap="square",this._x=0,this._y=0,this._width=200,this._height=30,this.minRange=.05,this._min=0,this._max=1}set x(t){this._x!==t&&(this._x=t,this.dirtyPath=!0)}get x(){return this._x}set y(t){this._y!==t&&(this._y=t,this.dirtyPath=!0)}get y(){return this._y}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}set min(t){var e;t=Math.min(Math.max(t,0),this.max-this.minRange),isNaN(t)||this._min!==t&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=Math.max(Math.min(t,1),this.min+this.minRange),isNaN(t)||this._max!==t&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new dt(t,e,i,s)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:s,min:n,max:r}=this,o=t+i*n;return new dt(o,e,t+i*r-o,s)}updatePath(){const{path:t,x:e,y:i,width:s,height:n,min:r,max:o}=this;t.clear();const a=this.align(e),l=this.align(i),h=a+this.align(e,s),c=l+this.align(i,n);t.moveTo(a,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(a,c),t.lineTo(a,l);const d=this.align(e+s*r),u=this.align(e+s*o);t.moveTo(d,l),t.lineTo(d,c),t.lineTo(u,c),t.lineTo(u,l),t.lineTo(d,l)}}ec.className="RangeMask",tc([re(we)],ec.prototype,"_stroke",void 0),tc([re(Ee(0))],ec.prototype,"_strokeWidth",void 0),tc([re(we)],ec.prototype,"_fill",void 0),tc([re(Ee(0,1))],ec.prototype,"_fillOpacity",void 0),tc([re(He)],ec.prototype,"_lineCap",void 0),tc([re(Ee(0))],ec.prototype,"_width",void 0),tc([re(Ee(0))],ec.prototype,"_height",void 0),tc([re(Ee())],ec.prototype,"_min",void 0),tc([re(Ee())],ec.prototype,"_max",void 0);class ic extends Et{constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Qh,this.maxHandle=new Qh,this.mask=(()=>{const{x:t,y:e,width:i,height:s,min:n,max:r}=ic.defaults,o=new ec;o.x=t,o.y=e,o.width=i,o.height=s,o.min=n,o.max=r;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+s/2,this.append([o,a,l]),o.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},o})(),this._x=ic.defaults.x,this._y=ic.defaults.y,this._width=ic.defaults.width,this._height=ic.defaults.height,this._min=ic.defaults.min,this._max=ic.defaults.max,this.isContainerNode=!0}set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:s,width:n,height:r,mask:o}=this;t.centerX=i+n*o.min,e.centerX=i+n*o.max,t.centerY=e.centerY=s+r/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(this.dirty===ft.NONE&&!i)return void(s&&s.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:n,minHandle:r,maxHandle:o}=this;[n,r,o].forEach(s=>{s.visible&&(i||s.dirty>ft.NONE)&&(e.save(),s.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())}),this.markClean({force:!0}),s&&s.nodesRendered++}}ic.className="Range",ic.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class sc{constructor(t){this.rm=t}set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}}class nc{constructor(t){this.rh=t}set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}}var rc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class oc extends $h{constructor(t){super(),this.ctx=t,this.rs=new ic,this.mask=new sc(this.rs.mask),this.minHandle=new nc(this.rs.minHandle),this.maxHandle=new nc(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this._enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}),[t.interactionManager.addListener("drag-start",t=>this.onDragStart(t)),t.interactionManager.addListener("drag",t=>this.onDrag(t)),t.interactionManager.addListener("hover",t=>this.onDrag(t)),t.interactionManager.addListener("drag-end",()=>this.onDragStop())].forEach(e=>this.destroyFns.push(()=>t.interactionManager.removeListener(e))),[t.layoutService.addListener("before-series",t=>this.layout(t)),t.layoutService.addListener("layout-complete",t=>this.layoutComplete(t))].forEach(e=>this.destroyFns.push(()=>t.layoutService.removeListener(e))),t.scene.root.appendChild(this.rs),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)}),this.destroyFns.push(()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")}layout({shrinkRect:t}){if(this.enabled){const e=this.rs.height+this.margin;t.shrink(e,"bottom"),this.rs.y=t.y+t.height+this.margin}return{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:s}=this,{minHandle:n,maxHandle:r,x:o,width:a,min:l}=s,h=s.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.containsPoint(e,i)?this.minHandleDragging=!0:r.containsPoint(e,i)?this.maxHandleDragging=!0:h.containsPoint(e,i)&&(this.panHandleOffset=(e-o)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:s,y:n,width:r,height:o,minHandle:a,maxHandle:l}=e,{offsetX:h,offsetY:c}=t,d=s+r*e.min,u=s+r*e.max,p=new dt(d,n,u-d,o),g=()=>Math.min(Math.max((h-s)/r,0),1);if(a.containsPoint(h,c)||l.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=g();else if(this.maxHandleDragging)e.max=g();else if(!isNaN(i)){const t=e.max-e.min,s=Math.min(g()-i,1-t);s<=e.min?(e.min=s,e.max=e.min+t):(e.max=s+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}rc([re(me)],oc.prototype,"_enabled",void 0),rc([re(Ee(0))],oc.prototype,"margin",void 0);Zh({type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:oc,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}});var ac=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class lc extends $h{constructor(t){var e;super(),this.onLayoutComplete=t=>{const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i},this.node=new Et({name:"background"}),this.node.zIndex=ti.SERIES_BACKGROUND_ZINDEX,this.rectNode=new ha,this.node.appendChild(this.rectNode),this.fill="white",this.visible=!0,null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)});const i=t.layoutService.addListener("layout-complete",this.onLayoutComplete);this.destroyFns.push(()=>t.layoutService.removeListener(i))}}ac([re(me),ps("node","visible")],lc.prototype,"visible",void 0),ac([re(Te),ps("rectNode","fill")],lc.prototype,"fill",void 0);Zh({type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:lc});var hc=function(t,e,i,s){return new(i||(i=Promise))((function(n,r){function o(t){try{l(s.next(t))}catch(t){r(t)}}function a(t){try{l(s.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((s=s.apply(t,e||[])).next())}))};function cc(t){if(xh(t))return"cartesian";if(Sh(t))return"polar";if(Ch(t))return"hierarchy";throw new Error("AG Chart - unknown type of chart for options with type: "+t.type)}class dc{static create(t){return pc.createOrUpdate(t)}static update(t,e){if(!uc.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");pc.createOrUpdate(e,t)}static updateDelta(t,e){if(!uc.isInstance(t))throw new Error("AG Charts - invalid chart reference passed");return pc.updateUserDelta(t,e)}static download(t,e){if(!(t instanceof uc))throw new Error("AG Charts - invalid chart reference passed");return pc.download(t,e)}static getImageDataURL(t,e){if(!(t instanceof uc))throw new Error("AG Charts - invalid chart reference passed");return pc.getImageDataURL(t,e)}}class uc{constructor(t){this.chart=t}static isInstance(t){var e,i;if(t instanceof uc)return!0;if("AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart)return!0;const s=Object.keys(null===(i=t.constructor)||void 0===i?void 0:i.prototype);return!(!Object.keys(uc.prototype).every(t=>s.includes(t))||null==t.chart)}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}class pc{static initialiseModules(){pc.initialised||(!function(){for(const t of qh){if(null!=t.optionConstructors&&Object.assign(Yh,t.optionConstructors),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)cl(e,t.themeTemplate);if("series"===t.type){if(t.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+t.identifier);ml(t.identifier,t.chartTypes[0],t.instanceConstructor,t.seriesDefaults,t.themeTemplate)}if("axis"===t.type&&t.themeTemplate)for(const e of t.axisTypes)Fl(e,t.themeTemplate);"legend"===t.type&&Ur(t.identifier,t.instanceConstructor)}}(),pc.initialised=!0)}static createOrUpdate(t,e){pc.initialiseModules(),gc(">>> createOrUpdate() user options",t);const i={};!0===pc.DEBUG()&&(i.debug=!0);const{overrideDevicePixelRatio:s}=t;delete t.overrideDevicePixelRatio;const n=Th(t,i);let r=null==e?void 0:e.chart;null!=r&&cc(t)===cc(r.processedOptions)||(r=pc.createChartInstance(n,s,r)),null==e?e=new uc(r):e.chart=r;const o=r;o.queuedUserOptions.push(t);const a=()=>{const e=o.queuedUserOptions.indexOf(t);o.queuedUserOptions.splice(0,e)};return o.requestFactoryUpdate(()=>hc(this,void 0,void 0,(function*(){if(o.destroyed)return;const e=Tn(o.processedOptions,n);null!=e?(yield pc.updateDelta(o,e,t),a()):a()}))),e}static updateUserDelta(t,e){var i;const{chart:s,chart:{queuedUserOptions:n}}=t,r=null!==(i=n[n.length-1])&&void 0!==i?i:s.userOptions,o=En([r,e]);gc(">>> updateUserDelta() user delta",e),gc("base options",r),pc.createOrUpdate(o,t)}static download(t,e){(()=>hc(this,void 0,void 0,(function*(){const i=yield pc.prepareResizedChart(t,e),{chart:s}=i;s.scene.download(null==e?void 0:e.fileName,null==e?void 0:e.fileFormat),i!==t&&i.destroy()})))().catch(t=>Dt.errorOnce(t))}static getImageDataURL(t,e){return hc(this,void 0,void 0,(function*(){const i=yield pc.prepareResizedChart(t,e),{chart:s}=i,n=s.scene.canvas.getDataURL(null==e?void 0:e.fileFormat);return i!==t&&i.destroy(),n}))}static prepareResizedChart(t,e){return hc(this,void 0,void 0,(function*(){const{chart:i}=t;let{width:s,height:n}=null!=e?e:{};const r=i.width,o=i.height;if(void 0===s&&void 0===n||1===i.scene.canvas.pixelRatio&&r===s&&o===n)return t;s=null!=s?s:r,n=null!=n?n:o;const a=Object.assign(Object.assign({},i.userOptions),{container:document.createElement("div"),width:s,height:n,autoSize:!1,overrideDevicePixelRatio:1}),l=pc.createOrUpdate(a);return yield l.chart.waitForUpdate(),l}))}static createChartInstance(t,e,i){const s=null==i?void 0:i.destroy({keepTransferableResources:!0});if(xh(t))return new uo(document,e,s);if(Ch(t))return new zo(document,e,s);if(Sh(t))return new Go(document,e,s);throw new Error("AG Charts - couldn't apply configuration, check type of options: "+t.type)}static updateDelta(t,e,i){var s;return hc(this,void 0,void 0,(function*(){null==e.type&&(e=Object.assign(Object.assign({},e),{type:null!==(s=t.processedOptions.type)&&void 0!==s?s:bh(e)})),yield t.awaitUpdateCompletion(),t.destroyed||(gc("applying delta",e),function(t,e,i){var s,n,r,o;const a=En([null!==(s=t.processedOptions)&&void 0!==s?s:{},e],wh),l=function(t,e){let i=!1;const s=qh.filter(t=>"root"===t.type);for(const r of s){const s=(n=r,(t instanceof uo&&n.chartTypes.includes("cartesian")||t instanceof Go&&n.chartTypes.includes("polar")||t instanceof zo&&n.chartTypes.includes("hierarchy"))&&null!=e[r.optionsKey]),o=t.isModuleEnabled(r);s!==o&&(i=!0,s?t.addModule(r):t.removeModule(r))}var n;return i}(t,a),h=["type","data","series","listeners","theme","legend"];if(xh(e))h.push("axes");else if(!Sh(e)&&!Ch(e))throw new Error("AG Charts - couldn't apply configuration, check type of options and chart: "+e.type);e.listeners&&mc(t,e.listeners);yc(t,e,{skip:h});let c=!1;e.series&&e.series.length>0&&(!function(t,e){const i=e.series;if(!i)return;if(t.series.length===i.length&&t.series.every((t,e)=>{var s;return t.type===(null===(s=i[e])||void 0===s?void 0:s.type)}))return void t.series.forEach((e,s)=>{var n,r,o,a;const l=Tn(null!==(o=null===(r=null===(n=t.processedOptions)||void 0===n?void 0:n.series)||void 0===r?void 0:r[s])&&void 0!==o?o:{},null!==(a=i[s])&&void 0!==a?a:{});l&&(gc("applying series diff idx "+s,l),vc(e,l,{path:`series[${s}]`,index:s}),e.markNodeDataDirty())});t.series=function(t,e){const i=[],s=t.getModuleContext();let n=0;for(const t of null!=e?e:[]){const e=`series[${n++}]`,r=yl(t.type,s);vc(r,t,{path:e,index:n}),i.push(r)}return i}(t,i)}(t,e),c=!0);if(xh(e)&&e.axes){(function(t,e){const i=e.axes;if(!i)return!1;if(t.axes.length===i.length&&t.axes.every((t,e)=>t.type===i[e].type)){const e=t.processedOptions;if(xh(e))return t.axes.forEach((t,s)=>{var n,r;const o=Tn(null!==(r=null===(n=e.axes)||void 0===n?void 0:n[s])&&void 0!==r?r:{},i[s]);gc("applying axis diff idx "+s,o);yc(t,o,{path:`axes[${s}]`,skip:["axes[].type"]})}),!0}return t.axes=function(t,e){const i=[],s=["axes[].type"],n=t.getModuleContext();let r=0;for(const t of null!=e?e:[]){let e;switch(t.type){case"number":e=new $o(n);break;case Jo.type:e=new Jo(n);break;case wn.type:e=new wn(n);break;case lo.type:e=new lo(n);break;case ea.type:e=new ea(n);break;default:throw new Error("AG Charts - unknown axis type: "+t.type)}const o=`axes[${r++}]`;fc(e,t),yc(e,t,{path:o,skip:s}),i.push(e)}return i}(t,i),!0})(t,e)&&(c=!0)}!function(t,e){const i=["listeners"];t.setLegendInit(s=>{var n,r,o;yc(s,null!==(n=e.legend)&&void 0!==n?n:{},{skip:i}),(null===(r=e.legend)||void 0===r?void 0:r.listeners)&&Object.assign(t.legend.listeners,null!==(o=e.legend.listeners)&&void 0!==o?o:{})})}(t,e);const d=e.series,u=!!e.data||(null==d?void 0:d.some(t=>null!=t.data)),p=null!==(r=null!==(n=e.legend)&&void 0!==n?n:e.title)&&void 0!==r?r:e.subtitle;c=c||u||!!p,e.data&&(t.data=e.data);e.listeners&&t.updateAllSeriesListeners();t.processedOptions=a,t.userOptions=En([null!==(o=t.userOptions)&&void 0!==o?o:{},i],wh);const g=c||l?Or.PROCESS_DATA:Or.PERFORM_LAYOUT;gc("chart update type",{updateType:Or[g]}),t.update(g,{forceNodeDataRefresh:c})}(t,e,i))}))}}function gc(t,...e){[!0,"opts"].includes(pc.DEBUG())&&Dt.debug(t,...e)}function fc(t,e){let i=!1;const s=qh.filter(t=>"axis"===t.type);for(const n of s){const s=null!=e[n.optionsKey];s!==t.isModuleEnabled(n)&&(i=!0,s?t.addModule(n):t.removeModule(n))}return i}function mc(t,e){t.clearEventListeners();for(const i in e){const s=e[i];"function"==typeof s&&t.addEventListener(i,s)}}function yc(t,e,{skip:i,path:s}={}){return Rn(t,e,Object.assign(Object.assign(Object.assign({},Xh()),{skip:i}),s?{path:s}:{}))}function vc(t,e,{path:i,index:s}={}){var n;const r=["series[].listeners"],o=Xh(),a=null!==(n=o.constructors)&&void 0!==n?n:{},l={constructors:Object.assign(Object.assign({},a),{title:"pie"===t.type?Lo:a.title})},h=Rn(t,e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),l),{skip:["series[].type",...null!=r?r:[]]}),i?{path:i}:{}),{idx:null!=s?s:-1})),c=null==e?void 0:e.listeners;return null!=c&&mc(t,c),h}pc.DEBUG=()=>{var t;return null!==(t=Pt("agChartsDebug"))&&void 0!==t&&t},pc.initialised=!1;var bc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class xc extends St{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(this.dirty===ft.NONE&&!i)return void(s&&s.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(t)}}bc([yt({redraw:ft.MAJOR})],xc.prototype,"x",void 0),bc([yt({redraw:ft.MAJOR})],xc.prototype,"y",void 0),bc([yt({redraw:ft.MAJOR})],xc.prototype,"width",void 0),bc([yt({redraw:ft.MAJOR})],xc.prototype,"height",void 0),bc([yt({redraw:ft.MAJOR})],xc.prototype,"opacity",void 0);const Cc=Object.entries(hh).reduce((t,[e,i])=>(t[e]=i(),t),{}),Sc=["area","bar","column","histogram","line","pie","scatter"];function kc(t){switch(t){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":return"bar";case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"column";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"scatter":case"bubble":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}const Oc=["number","category","groupedCategory","log","time"];function wc(e,i){var s;const{chartOptionsToRestore:n,chartPaletteToRestore:r,chartThemeToRestore:o}=e,a=function(e){let i=e.getChartThemeName();const s=e.getChartThemes();t.includes(s,i)||(i=s[0]);return i}(e),l=Tc(a),h=l?{baseTheme:a}:null!==(s=Ec(e,a))&&void 0!==s?s:{},c=e.getGridOptionsChartThemeOverrides(),d=e.apiChartThemeOverrides,u="pie"===kc(e.chartType)?"polar":"cartesian",p=e.crossFiltering?function(t,e,i){const s={listeners:{legendItemClick:e=>{t.getChart().series.forEach(t=>{t.toggleSeriesItem(e.itemId,e.enabled),t.toggleSeriesItem(e.itemId+"-filtered-out",e.enabled)})}}},n={};"polar"===i&&(n.pie={tooltip:{renderer:({angleName:t,datum:e,calloutLabelKey:i,radiusKey:s,angleValue:n})=>({title:t,content:`${e[i]}: ${n*e[s]}`})}});return{[i]:{tooltip:{delay:500},legend:s,listeners:{click:t=>e.crossFilterCallback(t,!0)},series:n}}}(i,e,u):void 0,g=Object.assign({},null!=n?n:{}),f=[l?Mc(e,(()=>{const e=e=>!!e&&Object.keys(e).some(i=>t.get(e[i],"title.enabled",!1));return e(c)||e(d)})()):void 0,p,c,d,g].filter(t=>!!t).reduce((t,e)=>({baseTheme:t,overrides:e}),h);if(r&&a===o){(function(t,e){const i=(t,e)=>t.length===e.length&&t.every((t,i)=>t===e[i]);return i(t.fills,e.fills)&&i(t.strokes,e.strokes)})(r,ch(h).palette)||(f.palette=r)}return f}function Tc(e){return t.includes(Object.keys(Cc),e)}const Dc=Oc.reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:{title:{_enabledFromTheme:!0}}}),{});function Mc(t,e){const i=t.getExtraPaddingDirections();return{common:{axes:Dc,padding:{top:!e&&i.includes("top")?40:20,right:i.includes("right")?30:20,bottom:i.includes("bottom")?40:20,left:i.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function Ec(t,e){const{customChartThemes:i}=t,s=i&&i[e];return s||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),s}const Rc=t=>e=>void 0===e||t(e),Pc=t=>"string"==typeof t,Ac=t=>"boolean"==typeof t,Lc=t=>"object"==typeof t,Ic=(t,e)=>i=>`AG Grid - unable to update chart as invalid params supplied:  \`${t}: ${i}\`, expected ${e}.`;class Nc{static validateChartParams(t){switch(t.type){case"rangeChartUpdate":return Nc.validateUpdateRangeChartParams(t);case"pivotChartUpdate":return Nc.validateUpdatePivotChartParams(t);case"crossFilterChartUpdate":return Nc.validateUpdateCrossFilterChartParams(t);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${t.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateUpdateRangeChartParams(t){const e=[...Nc.commonValidations,...Nc.cellRangeValidations,{property:"seriesChartTypes",validationFn:t=>void 0===t||Array.isArray(t)&&t.every(Lc),warnMessage:Ic("seriesChartTypes","Array of SeriesChartType")}];return Nc.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(t){const e=[...Nc.commonValidations];return Nc.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(t){const e=[...Nc.commonValidations,...Nc.cellRangeValidations];return Nc.validateProperties(t,e,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(t,e,i,s){for(const i of e){const{property:e,validationFn:s,warnMessage:n}=i;if(e in t){const i=t[e];if(!s(i))return console.warn(n(i)),!1}}for(const e in t)if(!i.includes(e))return console.warn(`AG Grid - Unexpected property supplied. ${s} does not contain: \`${e}\`.`),!1;return!0}}Nc.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],Nc.validateChartType=Rc(t=>Nc.validChartTypes.includes(t)),Nc.validateAgChartThemeOverrides=Rc(t=>"object"==typeof t),Nc.validateChartParamsCellRange=Rc(t=>"object"==typeof t),Nc.validateAggFunc=Rc(t=>"string"==typeof t||"function"==typeof t),Nc.commonValidations=[{property:"chartId",validationFn:Pc,warnMessage:Ic("chartId","string")},{property:"chartType",validationFn:Nc.validateChartType,warnMessage:Ic("chartType",Nc.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:Pc,warnMessage:Ic("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:Nc.validateAgChartThemeOverrides,warnMessage:Ic("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:Ac,warnMessage:Ic("unlinkChart","boolean")}],Nc.cellRangeValidations=[{property:"cellRange",validationFn:Nc.validateChartParamsCellRange,warnMessage:Ic("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:Ac,warnMessage:Ic("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:Nc.validateAggFunc,warnMessage:Ic("aggFunc","string or IAggFunc")}];var Fc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const _c=["ag-default","ag-material","ag-pastel","ag-vivid","ag-solar"];class Bc extends s{constructor(t){super(),this.model=t}init(){this.setChartRange(),this.addManagedListener(this.eventService,n.EVENT_RANGE_SELECTION_CHANGED,t=>{t.id&&t.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,n.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,n.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,n.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,n.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,n.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,n.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(t){var e,i,s,n,r,o,a;if(!this.validUpdateType(t)||!Nc.validateChartParams(t))return!1;const{chartId:l,chartType:h,chartThemeName:c,unlinkChart:d}=t,u={chartId:l,pivotChart:this.model.pivotChart,chartType:null!=h?h:this.model.chartType,chartThemeName:null!=c?c:this.model.chartThemeName,unlinkChart:null!=d?d:this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1};let p=Object.assign({},u);switch(t.type){case"rangeChartUpdate":p.cellRange=null!==(e=this.createCellRange(t))&&void 0!==e?e:this.model.suppliedCellRange,p.aggFunc=null!==(i=t.aggFunc)&&void 0!==i?i:this.model.aggFunc,p.seriesChartTypes=t.seriesChartTypes,p.suppressChartRanges=null!==(s=t.suppressChartRanges)&&void 0!==s?s:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":p.cellRange=null!==(n=this.createCellRange(t))&&void 0!==n?n:this.model.suppliedCellRange,p.aggFunc=null!==(r=t.aggFunc)&&void 0!==r?r:this.model.aggFunc,p.crossFiltering=!0,p.suppressChartRanges=null!==(o=t.suppressChartRanges)&&void 0!==o?o:this.model.suppressChartRanges}this.model.updateModel(p);return p.unlinkChart||p.suppressChartRanges?null===(a=this.rangeService)||void 0===a||a.setCellRanges([]):this.setChartRange(),!0}updateForGridChange(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(t){this.model.updateCellRanges(t),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}getChartUpdateParams(t){const e=this.getSelectedValueColState().map(t=>({colId:t.colId,displayName:t.displayName})),i=this.getChartData(),s=this.getSelectedDimension();return{data:i,grouping:this.isGrouping(),category:{id:s.colId,name:s.displayName,chartDataType:this.model.getChartDataType(s.colId)},fields:e,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:t}}getChartModel(){const t=this.model.pivotChart?"pivot":"range",e=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:t,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:e}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(t){this.model.chartType=t,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}setChartThemeName(t){this.model.chartThemeName=t,this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemes(){return this.gridOptionsService.get("chartThemes")||_c}getPalettes(){return this.getThemes().map(t=>ch(Tc(t)?t:this.chartProxy.lookupCustomChartTheme(t)).palette)}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(t=>t.selected)}getSelectedDimension(){return this.model.getSelectedDimension()}displayNameMapper(t){const e=this.model.columnNames[t.colId];return t.displayName=e?e.join(" - "):this.model.getColDisplayName(t.column),t}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(t=!1){!this.rangeService||this.model.suppressChartRanges||this.model.unlinked||this.rangeService.setCellRanges(this.getCellRanges()),t||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()}setChartProxy(t){this.chartProxy=t}getChartProxy(){return this.chartProxy}isActiveXYChart(){return t.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const t=this.model.comboChartModel.savedCustomSeriesChartTypes;return t&&t.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(){return this.model.isComboChart()}updateSeriesChartType(t,e,i){const s=this.model.comboChartModel.seriesChartTypes.find(e=>e.colId===t);if(s){const t="customCombo"!==this.model.chartType;t&&(this.model.chartType="customCombo");const n=s.chartType;null!=e&&(s.chartType=e),null!=i&&(s.secondaryAxis=i),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),t&&this.dispatchEvent({type:Bc.EVENT_CHART_TYPE_CHANGED}),n!==e&&this.dispatchEvent({type:Bc.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const t=this.getSelectedValueColState().map(t=>t.colId);return this.getSeriesChartTypes().filter(e=>t.includes(e.colId))}getChartSeriesTypes(){return this.isComboChart()?["line","column","area"]:[kc(this.getChartType())]}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(t=>t)}createCellRange(t){var e;return t.cellRange&&(null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange))}validUpdateType(t){var e;if(!t.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;const i={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},s=null!==(e=Object.keys(i).find(t=>i[t]()))&&void 0!==e?e:"Range Chart",n=t.type===`${s[0].toLowerCase()}${s.slice(1).replace(/ /g,"")}Update`;return n||console.warn(`AG Grid - Unable to update chart as a '${t.type}' update type is not permitted on a ${s}.`),n}getCellRangeParams(){const t=this.getCellRanges(),e=t[0],i=e&&e.startRow||null,s=e&&e.endRow||null;return{rowStartIndex:i&&i.rowIndex,rowStartPinned:i&&i.rowPinned,rowEndIndex:s&&s.rowIndex,rowEndPinned:s&&s.rowPinned,columns:t.reduce((t,e)=>t.concat(e.columns.map(t=>t.getId())),[])}}raiseChartModelUpdateEvent(){const t={type:Bc.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(t)}raiseChartUpdatedEvent(){const t={type:Bc.EVENT_CHART_UPDATED};this.dispatchEvent(t)}raiseChartApiUpdateEvent(){const t={type:Bc.EVENT_CHART_API_UPDATE};this.dispatchEvent(t)}raiseChartOptionsChangedEvent(){const{chartId:t,chartType:e}=this.getChartModel(),i={type:n.EVENT_CHART_OPTIONS_CHANGED,chartId:t,chartType:e,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(i)}raiseChartRangeSelectionChangedEvent(){const t={type:n.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(t)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}}Bc.EVENT_CHART_UPDATED="chartUpdated",Bc.EVENT_CHART_API_UPDATE="chartApiUpdate",Bc.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",Bc.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",Bc.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",Fc([e("rangeService")],Bc.prototype,"rangeService",void 0),Fc([i],Bc.prototype,"init",null);var Gc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const jc={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]};class zc extends r{constructor(t,e){super(zc.TEMPLATE),this.chartController=t,this.chartOptionsService=e,this.columnComps=new Map}init(){this.updatePanels(),this.addManagedListener(this.chartController,Bc.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,Bc.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()}destroy(){this.clearComponents(),super.destroy()}updatePanels(){var e,i;const s=this.chartType,{dimensionCols:n,valueCols:r}=this.chartController.getColStateForMenu(),o=n.map(t=>t.colId).concat(r.map(t=>t.colId));this.chartType=this.chartController.getChartType();const a=this.getGroupExpandedState();if(t.areEqual(t.keys(this.columnComps),o)&&this.chartType===s){if([...n,...r].forEach(t=>{this.columnComps.get(t.colId).setValue(t.selected,!0)}),this.chartController.isActiveXYChart()){const t=this.generateGetSeriesLabel();r.forEach(e=>{this.columnComps.get(e.colId).setLabel(t(e))})}t.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);const i=null===(e=this.getDataPanelDef().groups)||void 0===e?void 0:e.reduce((t,{type:e},i)=>"seriesChartType"===e?i:t,-1);-1!==i&&this.createSeriesChartTypeGroup(r,i)}else this.clearComponents(),null===(i=this.getDataPanelDef().groups)||void 0===i||i.forEach(({type:t})=>{"categories"===t?this.createCategoriesGroup(n):"series"===t?this.createSeriesGroup(r):"seriesChartType"===t?this.createSeriesChartTypeGroup(r):console.warn(`AG Grid: invalid charts data panel group name supplied: '${t}'`)});this.restoreGroupExpandedState(a)}getGroupExpandedState(){return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map(({groupType:t,comp:e})=>{var i,s;const n=Boolean(null===(s=null===(i=this.getDataPanelDef().groups)||void 0===i?void 0:i.find(({type:e})=>e===t))||void 0===s?void 0:s.isOpen);return e?e.isExpanded():n})}restoreGroupExpandedState(t){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((e,i)=>{e&&e.toggleGroupExpand(t[i])})}createAutoScrollService(){const t=this.getGui();this.autoScrollService=new o({scrollContainer:t,scrollAxis:"y",getVerticalPosition:()=>t.scrollTop,setVerticalPosition:e=>t.scrollTop=e})}createComponent(t,e){const i=document.createElement("div");return i.id=e,i.className="ag-chart-data-section",i.appendChild(t.getGui()),i}addComponent(t,e,i){const s=this.createComponent(e,i);t.appendChild(s)}addComponentAtIndex(t,e,i,s){const n=this.createComponent(e,i);t.insertBefore(n,t.children[s])}addChangeListener(t,e){this.addManagedListener(t,a.EVENT_CHANGED,()=>{e.selected=t.getValue(),this.chartController.updateForPanelChange(e)})}createCategoriesGroup(e){this.categoriesGroupComp=this.createBean(new l({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));const i="chartDimension"+this.getCompId();e.forEach(e=>{const s=this.categoriesGroupComp.createManagedBean(new h);s.setLabel(t.escapeString(e.displayName)),s.setValue(e.selected),s.setInputName(i),this.addChangeListener(s,e),this.categoriesGroupComp.addItem(s),this.columnComps.set(e.colId,s)}),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")}createSeriesGroup(t){if(this.seriesGroupComp=this.createManagedBean(new l({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){const t=this.seriesGroupComp.createManagedBean(new c);t.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getPairedMode()).onValueChange(t=>{this.chartOptionsService.setPairedMode(!!t),this.chartController.updateForGridChange()}),this.seriesGroupComp.addItem(t)}const e=this.generateGetSeriesLabel();t.forEach(t=>{const i=this.seriesGroupComp.createManagedBean(new d);i.addCssClass("ag-data-select-checkbox");const s=e(t);i.setLabel(s),i.setValue(t.selected),this.addChangeListener(i,t),this.seriesGroupComp.addItem(i),this.columnComps.set(t.colId,i),this.addDragHandle(i,t)});const i=this.getGui(),s=this.seriesGroupComp.getGui();this.addComponent(i,this.seriesGroupComp,"seriesGroup");const n={getIconName:()=>u.ICON_MOVE,getContainer:()=>s,onDragging:t=>this.onDragging(t),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(n),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(n))}createSeriesChartTypeGroup(t,e){if(!this.chartController.isComboChart())return;this.seriesChartTypeGroupComp=this.createManagedBean(new l({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));const i=this.chartController.getSeriesChartTypes();t.forEach(t=>{if(!t.selected)return;const e=i.filter(e=>e.colId===t.colId)[0];if(!e)return;const s=this.seriesChartTypeGroupComp.createManagedBean(new l({title:t.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),n=this.seriesChartTypeGroupComp.createManagedBean(new d).setLabel(this.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType)).setValue(!!e.secondaryAxis).onValueChange(e=>this.chartController.updateSeriesChartType(t.colId,void 0,e));s.addItem(n);const r=(t,e)=>this.chartTranslationService.translate(t,e),o=[{value:"line",text:r("line","Line")},{value:"area",text:r("area","Area")},{value:"stackedArea",text:r("stackedArea","StackedArea")},{value:"groupedColumn",text:r("groupedColumn","Grouped Column")},{value:"stackedColumn",text:r("stackedColumn","Stacked Column")}],a=s.createManagedBean(new p);a.setLabelAlignment("left").setLabelWidth("flex").addOptions(o).setValue(e.chartType).onValueChange(e=>this.chartController.updateSeriesChartType(t.colId,e)),s.addItem(a),this.seriesChartTypeGroupComp.addItem(s)}),void 0===e?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",e)}addDragHandle(e,i){const s=t.createIconNoSpan("columnDrag",this.gridOptionsService);s.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",s);const n={type:g.ChartPanel,eElement:s,dragItemName:i.displayName,getDragItem:()=>({columns:[i.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(n))}generateGetSeriesLabel(){if(!this.chartController.isActiveXYChart())return e=>t.escapeString(e.displayName);const e="bubble"===this.chartType,i=this.isInPairedMode();let s=0;const n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),r=>{const o=t.escapeString(r.displayName);if(!r.selected)return o;let a;return a=i?n.get(s%(e?3:2)):0===s?"X":e&&s%2==0?"size":"Y",s++,`${o} (${a})`}}getCategoryGroupTitle(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getSeriesGroupTitle(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getDataPanelDef(){var t;const e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel;return e||jc}isInPairedMode(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")}clearComponents(){t.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()}onDragging(t){const e=this.checkHoveredItem(t);if(!e)return;this.lastDraggedColumn=t.dragItem.columns[0];const{comp:i,position:s}=e,{comp:n,position:r}=this.lastHoveredItem||{};if(i===n&&s===r)return;this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredItem={comp:i,position:s};i.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-"+s)}checkHoveredItem(e){if(t.missing(e.vDirection))return null;const i=e.event;for(const t of this.columnComps.values()){const e=t.getGui();if(!e.querySelector(".ag-chart-data-column-drag-handle"))continue;const s=e.getBoundingClientRect();if(i.clientY>=s.top&&i.clientY<=s.bottom){const n=e.clientHeight;return{comp:t,position:i.clientY>s.top+n/2?"bottom":"top"}}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){const{dimensionCols:t,valueCols:e}=this.chartController.getColStateForMenu(),i=[...t,...e].find(t=>t.column===this.lastDraggedColumn);if(i){let t=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&t++,i.order=t,this.chartController.updateForPanelChange(i)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(t=>{t.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}isInterestedIn(t){return t===g.ChartPanel}}zc.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',Gc([e("dragAndDropService")],zc.prototype,"dragAndDropService",void 0),Gc([e("chartTranslationService")],zc.prototype,"chartTranslationService",void 0),Gc([i],zc.prototype,"init",null);var Wc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Vc extends r{constructor(t){super(),this.activeComps=[],this.params=t}init(){this.setTemplate(Vc.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()}addCompToPanel(t){this.fontGroup.addItem(t),this.activeComps.push(t)}setEnabled(t){this.fontGroup.setEnabled(t)}initGroup(){this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange(t=>{this.params.setEnabled&&this.params.setEnabled(t)})}initFontFamilySelect(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],{family:i}=this.params.initialFont;let s=e[0];if(i){const n=e.map(t=>t.toLowerCase()).indexOf(i.toLowerCase());if(n>=0)s=e[n];else{const n=t.capitalise(i);e.push(n),s=n}}const n=e.sort().map(t=>({value:t,text:t}));this.familySelect.addOptions(n).setInputWidth("flex").setValue(""+s).onValueChange(t=>this.params.setFont({family:t}))}initFontSizeSelect(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],{size:i}=this.params.initialFont;t.includes(e,i)||e.push(i);const s=e.sort((t,e)=>t-e).map(t=>({value:""+t,text:""+t}));this.sizeSelect.addOptions(s).setInputWidth("flex").setValue(""+i).onValueChange(t=>this.params.setFont({size:parseInt(t,10)})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))}initFontWeightStyleSelect(){const{weight:t="normal",style:e="normal"}=this.params.initialFont,i=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let s=i.find(i=>i.weight===t&&i.style===e);s||(s={name:"predefined",weight:t,style:e},i.unshift(s));const n=i.map(t=>({value:t.name,text:this.chartTranslationService.translate(t.name)}));this.weightStyleSelect.addOptions(n).setInputWidth("flex").setValue(s.name).onValueChange(t=>{const e=i.find(e=>e.name===t);this.params.setFont({weight:e.weight,style:e.style})})}initFontColorPicker(){this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth(45).setValue(""+this.params.initialFont.color).onValueChange(t=>this.params.setFont({color:t}))}addItemToPanel(t){this.fontGroup.addItem(t),this.activeComps.push(t)}destroyActiveComps(){this.activeComps.forEach(e=>{t.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActiveComps(),super.destroy()}}Vc.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',Wc([f("fontGroup")],Vc.prototype,"fontGroup",void 0),Wc([f("familySelect")],Vc.prototype,"familySelect",void 0),Wc([f("weightStyleSelect")],Vc.prototype,"weightStyleSelect",void 0),Wc([f("sizeSelect")],Vc.prototype,"sizeSelect",void 0),Wc([f("colorPicker")],Vc.prototype,"colorPicker",void 0),Wc([e("chartTranslationService")],Vc.prototype,"chartTranslationService",void 0),Wc([i],Vc.prototype,"init",null);var Kc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Hc extends r{constructor({chartOptionsService:t,isExpandedOnInit:e=!1}){super(),this.activePanels=[],this.chartOptionsService=t,this.isExpandedOnInit=e}init(){this.setTemplate(Hc.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()}initLegendGroup(){this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange(t=>{this.chartOptionsService.setChartOption("legend.enabled",t),this.legendGroup.toggleGroupExpand(!0)})}initLegendPosition(){this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth(80).addOptions(["top","right","bottom","left"].map(t=>({value:t,text:this.chartTranslationService.translate(t)}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange(t=>this.chartOptionsService.setChartOption("legend.position",t))}initLegendPadding(){const t=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(vd(t,200)).setValue(""+t).setTextFieldWidth(45).onValueChange(t=>this.chartOptionsService.setChartOption("legend.spacing",t))}initLegendItems(){const t=(t,e,i,s)=>{const n=this.chartOptionsService.getChartOption("legend."+t);i.setLabel(this.chartTranslationService.translate(e)).setMaxValue(vd(n,s)).setValue(""+n).setTextFieldWidth(45).onValueChange(e=>{this.chartOptionsService.setChartOption("legend."+t,e)})};t("item.marker.size","markerSize",this.markerSizeSlider,40),t("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),t("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),t("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),t("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)}initLabelPanel(){const t=this.chartOptionsService,e={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:t.getChartOption("legend.item.label.fontFamily"),style:t.getChartOption("legend.item.label.fontStyle"),weight:t.getChartOption("legend.item.label.fontWeight"),size:t.getChartOption("legend.item.label.fontSize"),color:t.getChartOption("legend.item.label.color")},setFont:t=>{const e=this.chartOptionsService;t.family&&e.setChartOption("legend.item.label.fontFamily",t.family),t.weight&&e.setChartOption("legend.item.label.fontWeight",t.weight),t.style&&e.setChartOption("legend.item.label.fontStyle",t.style),t.size&&e.setChartOption("legend.item.label.fontSize",t.size),t.color&&e.setChartOption("legend.item.label.color",t.color)}},i=this.createBean(new Vc(e));this.legendGroup.addItem(i),this.activePanels.push(i)}destroyActivePanels(){this.activePanels.forEach(e=>{t.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}Hc.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Kc([f("legendGroup")],Hc.prototype,"legendGroup",void 0),Kc([f("legendPositionSelect")],Hc.prototype,"legendPositionSelect",void 0),Kc([f("legendPaddingSlider")],Hc.prototype,"legendPaddingSlider",void 0),Kc([f("markerSizeSlider")],Hc.prototype,"markerSizeSlider",void 0),Kc([f("markerStrokeSlider")],Hc.prototype,"markerStrokeSlider",void 0),Kc([f("markerPaddingSlider")],Hc.prototype,"markerPaddingSlider",void 0),Kc([f("itemPaddingXSlider")],Hc.prototype,"itemPaddingXSlider",void 0),Kc([f("itemPaddingYSlider")],Hc.prototype,"itemPaddingYSlider",void 0),Kc([e("chartTranslationService")],Hc.prototype,"chartTranslationService",void 0),Kc([i],Hc.prototype,"init",null);var Yc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Uc extends r{constructor(t){super(),this.chartOptionsService=t}init(){this.setTemplate(Uc.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()}initAxisTicks(){this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange(t=>this.chartOptionsService.setAxisProperty("tick.color",t));const t=(t,e,i,s)=>{const n=this.chartOptionsService.getAxisProperty(t);e.setLabel(i).setMaxValue(vd(n,s)).setValue(""+n).setTextFieldWidth(45).onValueChange(e=>this.chartOptionsService.setAxisProperty(t,e))};t("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),t("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)}}Uc.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Yc([f("axisTicksGroup")],Uc.prototype,"axisTicksGroup",void 0),Yc([f("axisTicksColorPicker")],Uc.prototype,"axisTicksColorPicker",void 0),Yc([f("axisTicksWidthSlider")],Uc.prototype,"axisTicksWidthSlider",void 0),Yc([f("axisTicksSizeSlider")],Uc.prototype,"axisTicksSizeSlider",void 0),Yc([e("chartTranslationService")],Uc.prototype,"chartTranslationService",void 0),Yc([i],Uc.prototype,"init",null);var Xc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class $c extends m{constructor(t){super(t,$c.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct(),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:t=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:t=>this.calculateAngleDrag(t),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(""+this.degrees).onValueChange(t=>{null!=t&&""!==t||(t="0"),t=this.eAngleValue.normalizeValue(t);let e=parseFloat(t);e>180&&(e-=360),this.setValue(e)}),this.updateNumberInput(),t.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,a.EVENT_CHANGED,()=>{const t=this.gridOptionsService.getDocument();this.eAngleValue.getInputElement().contains(t.activeElement)||this.updateNumberInput()})}updateNumberInput(){const t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())}positionChildCircle(t){const e=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,s=e.width/2,n=e.height/2;i.style.left=s+8*Math.cos(t)+"px",i.style.top=n+8*Math.sin(t)+"px"}calculatePolar(){const t=this.offsetX,e=this.offsetY,i=Math.atan2(e,t);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(t*t+e*e),this.positionChildCircle(i)}calculateCartesian(){const t=this.toRadians(this.getValue()),e=this.getRadius();this.setOffsetX(Math.cos(t)*e).setOffsetY(Math.sin(t)*e)}setOffsetX(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this}setOffsetY(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this}calculateAngleDrag(t){const e=this.parentCircleRect,i=e.width/2,s=e.height/2,n=t.clientX-e.left-i,r=t.clientY-e.top-s,o=Math.atan2(r,n);this.setValue(o,!0)}toDegrees(t){return t/Math.PI*180}toRadians(t){return t/180*Math.PI}normalizeNegativeValue(t){return t<0?360+t:t}normalizeAngle180(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t}getRadius(){return this.radius}setRadius(t){return this.radius===t||(this.radius=t,this.calculateCartesian()),this}onValueChange(t){return this.addManagedListener(this,a.EVENT_CHANGED,()=>{t(this.degrees)}),this}getValue(t){return t?this.toRadians(this.degrees):this.degrees}setValue(t,e){let i;return i=e?t:this.normalizeAngle180(this.toRadians(t)),t=this.toDegrees(i),this.degrees!==t&&(this.degrees=Math.floor(t),this.calculateCartesian(),this.positionChildCircle(i),this.dispatchEvent({type:a.EVENT_CHANGED})),this}setWidth(e){return t.setFixedWidth(this.getGui(),e),this}setDisabled(t){return super.setDisabled(t),this.eAngleValue.setDisabled(t),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}}$c.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',Xc([f("eLabel")],$c.prototype,"eLabel",void 0),Xc([f("eParentCircle")],$c.prototype,"eParentCircle",void 0),Xc([f("eChildCircle")],$c.prototype,"eChildCircle",void 0),Xc([f("eAngleValue")],$c.prototype,"eAngleValue",void 0),Xc([e("dragService")],$c.prototype,"dragService",void 0);var qc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Zc extends r{constructor({chartController:t,chartOptionsService:e,isExpandedOnInit:i=!1}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.prevXRotation=0,this.prevYRotation=0,this.chartController=t,this.chartOptionsService=e,this.isExpandedOnInit=i}init(){this.setTemplate(Zc.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();this.addManagedListener(this.chartController,Bc.EVENT_CHART_UPDATED,()=>this.axisLabelUpdateFuncs.forEach(t=>t()))}initAxis(){this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(t=>this.chartOptionsService.setAxisProperty("line.color",t));const t=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(vd(t,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(""+t).onValueChange(t=>this.chartOptionsService.setAxisProperty("line.width",t))}initAxisTicks(){const t=this.createBean(new Uc(this.chartOptionsService));this.axisGroup.addItem(t),this.activePanels.push(t)}initAxisLabels(){const t={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},e={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:t,setFont:t=>{t.family&&this.chartOptionsService.setAxisProperty("label.fontFamily",t.family),t.weight&&this.chartOptionsService.setAxisProperty("label.fontWeight",t.weight),t.style&&this.chartOptionsService.setAxisProperty("label.fontStyle",t.style),t.size&&this.chartOptionsService.setAxisProperty("label.fontSize",t.size),t.color&&this.chartOptionsService.setAxisProperty("label.color",t.color)}},i=this.createBean(new Vc(e));this.axisGroup.addItem(i),this.activePanels.push(i),this.addAdditionalLabelComps(i)}addAdditionalLabelComps(t){this.addLabelPadding(t);const{xRotationComp:e,yRotationComp:i}=this.createRotationWidgets(),s=this.initLabelRotations(e,i);t.addCompToPanel(s),t.addCompToPanel(e),t.addCompToPanel(i)}initLabelRotations(t,e){const i=t=>this.chartOptionsService.getLabelRotation(t),s=(t,e)=>{this.chartOptionsService.setLabelRotation(t,e)},n=(()=>{const t=i("xAxis"),e=i("yAxis");return null==t&&null==e&&this.chartOptionsService.getAxisProperty("label.autoRotate")})(),r=this.createBean(new d).setLabel(this.translate("autoRotate")).setValue(n).onValueChange(n=>{this.chartOptionsService.setAxisProperty("label.autoRotate",n),n?(this.prevXRotation=i("xAxis"),this.prevYRotation=i("yAxis"),s("xAxis",void 0),s("yAxis",void 0)):(s("xAxis",this.prevXRotation),s("yAxis",this.prevYRotation)),t.setDisabled(n),e.setDisabled(n)});return t.setDisabled(n),e.setDisabled(n),r}createRotationWidgets(){const t=String.fromCharCode(176),e=(e,i)=>{const s=`${this.chartTranslationService.translate(e)} ${t}`,n=this.chartOptionsService.getLabelRotation(i),r=(new $c).setLabel(s).setLabelWidth("flex").setValue(n||0).onValueChange(t=>this.chartOptionsService.setLabelRotation(i,t));return this.axisLabelUpdateFuncs.push(()=>{const t=this.chartOptionsService.getLabelRotation(i);r.setValue(t||0)}),this.createBean(r)};return{xRotationComp:e("xRotation","xAxis"),yRotationComp:e("yRotation","yAxis")}}addLabelPadding(t){const e=this.createBean(new y),i=this.chartOptionsService.getAxisProperty("label.padding");e.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(vd(i,30)).setValue(""+i).setTextFieldWidth(45).onValueChange(t=>this.chartOptionsService.setAxisProperty("label.padding",t)),t.addCompToPanel(e)}translate(t,e){return this.chartTranslationService.translate(t,e)}destroyActivePanels(){this.activePanels.forEach(e=>{t.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}Zc.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',qc([f("axisGroup")],Zc.prototype,"axisGroup",void 0),qc([f("axisColorInput")],Zc.prototype,"axisColorInput",void 0),qc([f("axisLineWidthSlider")],Zc.prototype,"axisLineWidthSlider",void 0),qc([e("chartTranslationService")],Zc.prototype,"chartTranslationService",void 0),qc([i],Zc.prototype,"init",null);var Jc=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Qc extends r{constructor({chartOptionsService:t,isExpandedOnInit:e=!1}){super(),this.chartOptionsService=t,this.isExpandedOnInit=e}init(){this.setTemplate(Qc.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()}initNavigator(){const{chartTranslationService:t}=this;this.navigatorGroup.setTitle(t.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange(t=>{this.chartOptionsService.setChartOption("navigator.enabled",t),this.navigatorGroup.toggleGroupExpand(!0)}).toggleGroupExpand(this.isExpandedOnInit);const e=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(t.translate("height")).setMinValue(10).setMaxValue(vd(e,60)).setTextFieldWidth(45).setValue(""+(e||30)).onValueChange(t=>this.chartOptionsService.setChartOption("navigator.height",t))}destroy(){super.destroy()}}Qc.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Jc([f("navigatorGroup")],Qc.prototype,"navigatorGroup",void 0),Jc([f("navigatorHeightSlider")],Qc.prototype,"navigatorHeightSlider",void 0),Jc([e("chartTranslationService")],Qc.prototype,"chartTranslationService",void 0),Jc([i],Qc.prototype,"init",null);var td=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ed extends r{constructor(t,e){super(),this.chartOptionsService=t,this.chartController=e}init(){this.setTemplate(ed.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.addManagedListener(this.eventService,n.EVENT_CHART_OPTIONS_CHANGED,t=>{this.updateTopPadding(t.chartOptions)}),this.initGroup(),this.initChartPaddingItems()}initGroup(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)}initChartPaddingItems(){const t=(t,e)=>{const i=this.chartOptionsService.getChartOption("padding."+t);e.setLabel(this.chartTranslationService.translate(t)).setMaxValue(vd(i,200)).setValue(""+i).setTextFieldWidth(45).onValueChange(e=>this.chartOptionsService.setChartOption("padding."+t,e))};t("top",this.paddingTopSlider),t("right",this.paddingRightSlider),t("bottom",this.paddingBottomSlider),t("left",this.paddingLeftSlider)}updateTopPadding(t){var e,i;const s=null===(i=null===(e=t[this.chartController.getChartSeriesTypes()[0]])||void 0===e?void 0:e.padding)||void 0===i?void 0:i.top;null!=s&&this.paddingTopSlider.setValue(s)}}ed.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',td([f("chartPaddingGroup")],ed.prototype,"chartPaddingGroup",void 0),td([f("paddingTopSlider")],ed.prototype,"paddingTopSlider",void 0),td([f("paddingRightSlider")],ed.prototype,"paddingRightSlider",void 0),td([f("paddingBottomSlider")],ed.prototype,"paddingBottomSlider",void 0),td([f("paddingLeftSlider")],ed.prototype,"paddingLeftSlider",void 0),td([e("chartTranslationService")],ed.prototype,"chartTranslationService",void 0),td([i],ed.prototype,"init",null);var id=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class sd extends r{constructor(t){super(),this.chartOptionsService=t}init(){this.setTemplate(sd.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()}initGroup(){this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(t=>this.chartOptionsService.setChartOption("background.visible",t))}initColorPicker(){this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange(t=>this.chartOptionsService.setChartOption("background.fill",t))}}sd.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',id([f("chartBackgroundGroup")],sd.prototype,"group",void 0),id([f("colorPicker")],sd.prototype,"colorPicker",void 0),id([e("chartTranslationService")],sd.prototype,"chartTranslationService",void 0),id([i],sd.prototype,"init",null);var nd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class rd extends r{constructor(t){super(rd.TEMPLATE),this.chartOptionsService=t,this.activePanels=[]}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){const t=this.getOption("title");return t&&t.enabled&&t.text&&t.text.length>0}initFontPanel(){const t=this.hasTitle(),e=(t,e)=>{t.family&&this.setOption("title.fontFamily",t.family,e),t.weight&&this.setOption("title.fontWeight",t.weight,e),t.style&&this.setOption("title.fontStyle",t.style,e),t.size&&this.setOption("title.fontSize",t.size,e),t.color&&this.setOption("title.color",t.color,e)},i={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};t||e(i,!0);const s={name:this.chartTranslationService.translate("title"),enabled:t,suppressEnabledCheckbox:!1,initialFont:i,setFont:e,setEnabled:t=>{if(this.toolbarExists()){const e=this.getOption("padding.top");this.setOption("padding.top",t?e-20:e+20)}this.setOption("title.enabled",t);const e=this.getOption("title.text"),i="Title"===e||0===(null==e?void 0:e.trim().length);t&&i&&this.setOption("title.text",this.titlePlaceholder)}},n=this.createBean(new Vc(s));n.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(n.getGui()),this.activePanels.push(n),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{n.setEnabled(this.hasTitle())})}createSpacingSlicer(){const t=this.createBean(new y),e=this.chartOptionsService.getChartOption("title.spacing");return t.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(e,100)).setValue(""+e).setTextFieldWidth(45).onValueChange(t=>this.chartOptionsService.setChartOption("title.spacing",t)),t}toolbarExists(){const t=this.gridOptionsService.getCallback("getChartToolbarItems");if(!t)return!0;const e={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some(i=>{var s;return null===(s=t&&t(e))||void 0===s?void 0:s.includes(i)})}getOption(t){return this.chartOptionsService.getChartOption(t)}setOption(t,e,i){this.chartOptionsService.setChartOption(t,e,i)}destroyActivePanels(){this.activePanels.forEach(e=>{t.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}rd.TEMPLATE="<div></div>",nd([e("chartTranslationService")],rd.prototype,"chartTranslationService",void 0),nd([i],rd.prototype,"init",null);var od=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ad extends r{constructor({chartController:t,chartOptionsService:e,isExpandedOnInit:i=!1}){super(),this.activePanels=[],this.chartController=t,this.chartOptionsService=e,this.isExpandedOnInit=i}init(){this.setTemplate(ad.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()}initGroup(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)}initTitles(){const t=this.createBean(new rd(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)}initPaddingPanel(){const t=this.createBean(new ed(this.chartOptionsService,this.chartController));this.chartGroup.addItem(t),this.activePanels.push(t)}initBackgroundPanel(){const t=this.createBean(new sd(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)}destroyActivePanels(){this.activePanels.forEach(e=>{t.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}ad.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',od([f("chartGroup")],ad.prototype,"chartGroup",void 0),od([e("chartTranslationService")],ad.prototype,"chartTranslationService",void 0),od([i],ad.prototype,"init",null);var ld=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class hd extends r{constructor(t,e){super(),this.chartOptionsService=t,this.getSelectedSeries=e}init(){this.setTemplate(hd.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()}initSeriesShadow(){this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(t=>this.chartOptionsService.setSeriesOption("shadow.enabled",t,this.getSelectedSeries())),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth(45).setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange(t=>this.chartOptionsService.setSeriesOption("shadow.color",t,this.getSelectedSeries()));const t=(t,e,i,s)=>{const n=this.chartOptionsService.getSeriesOption("shadow."+e,this.getSelectedSeries());t.setLabel(this.chartTranslationService.translate(e)).setMinValue(i).setMaxValue(vd(n,s)).setValue(""+n).onValueChange(t=>this.chartOptionsService.setSeriesOption("shadow."+e,t,this.getSelectedSeries()))};t(this.shadowBlurSlider,"blur",0,20),t(this.shadowXOffsetSlider,"xOffset",-10,10),t(this.shadowYOffsetSlider,"yOffset",-10,10)}}function cd({labelName:t,chartOptionsService:e,getSelectedSeries:i,seriesOptionLabelProperty:s}){const n=t=>`${s}.${t}`,r=t=>{const s=n(t);return e.getSeriesOption(s,i())},o=(t,s)=>{const r=n(t);e.setSeriesOption(r,s,i())},a={family:r("fontFamily"),style:r("fontStyle"),weight:r("fontWeight"),size:r("fontSize"),color:r("color")};return{name:t,enabled:r("enabled")||!1,setEnabled:t=>o("enabled",t),suppressEnabledCheckbox:!1,initialFont:a,setFont:t=>{t.family&&o("fontFamily",t.family),t.weight&&o("fontWeight",t.weight),t.style&&o("fontStyle",t.style),t.size&&o("fontSize",t.size),t.color&&o("color",t.color)}}}hd.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ld([f("shadowGroup")],hd.prototype,"shadowGroup",void 0),ld([f("shadowColorPicker")],hd.prototype,"shadowColorPicker",void 0),ld([f("shadowBlurSlider")],hd.prototype,"shadowBlurSlider",void 0),ld([f("shadowXOffsetSlider")],hd.prototype,"shadowXOffsetSlider",void 0),ld([f("shadowYOffsetSlider")],hd.prototype,"shadowYOffsetSlider",void 0),ld([e("chartTranslationService")],hd.prototype,"chartTranslationService",void 0),ld([i],hd.prototype,"init",null);var dd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class ud extends r{constructor(t,e){super(),this.chartOptionsService=t,this.getSelectedSeries=e}init(){this.setTemplate(ud.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()}initMarkers(){this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange(t=>this.setSeriesOption("marker.shape",t));const e=this.chartOptionsService.getChartType(),i=t.includes(["scatter","bubble"],e);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange(t=>this.setSeriesOption("marker.enabled",t));const s=(t,e,i,s)=>{const n=this.getSeriesOption(t);e.setLabel(this.chartTranslationService.translate(i)).setMaxValue(vd(n,s)).setValue(""+n).setTextFieldWidth(45).onValueChange(e=>this.setSeriesOption(t,e))};"bubble"===e?(s("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),s("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),s("marker.size",this.seriesMarkerSizeSlider,"size",60)),s("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)}getSeriesOption(t){return this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries())}setSeriesOption(t,e){this.chartOptionsService.setSeriesOption(t,e,this.getSelectedSeries())}}ud.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',dd([f("seriesMarkersGroup")],ud.prototype,"seriesMarkersGroup",void 0),dd([f("seriesMarkerShapeSelect")],ud.prototype,"seriesMarkerShapeSelect",void 0),dd([f("seriesMarkerSizeSlider")],ud.prototype,"seriesMarkerSizeSlider",void 0),dd([f("seriesMarkerMinSizeSlider")],ud.prototype,"seriesMarkerMinSizeSlider",void 0),dd([f("seriesMarkerStrokeWidthSlider")],ud.prototype,"seriesMarkerStrokeWidthSlider",void 0),dd([e("chartTranslationService")],ud.prototype,"chartTranslationService",void 0),dd([i],ud.prototype,"init",null);var pd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class gd extends r{constructor(t,e){super(),this.chartOptionsService=t,this.getSelectedSeries=e}init(){this.setTemplate(gd.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()}initCalloutOptions(){this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);const t=(t,e,i,s)=>{const n=this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries());e.setLabel(this.chartTranslationService.translate(i)).setMaxValue(vd(n,s)).setValue(""+n).setTextFieldWidth(45).onValueChange(e=>this.chartOptionsService.setSeriesOption(t,e,this.getSelectedSeries()))};t("calloutLine.length",this.calloutLengthSlider,"length",40),t("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),t("calloutLabel.offset",this.labelOffsetSlider,"offset",30)}}gd.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',pd([f("calloutGroup")],gd.prototype,"calloutGroup",void 0),pd([f("calloutLengthSlider")],gd.prototype,"calloutLengthSlider",void 0),pd([f("calloutStrokeWidthSlider")],gd.prototype,"calloutStrokeWidthSlider",void 0),pd([f("labelOffsetSlider")],gd.prototype,"labelOffsetSlider",void 0),pd([e("chartTranslationService")],gd.prototype,"chartTranslationService",void 0),pd([i],gd.prototype,"init",null);var fd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class md extends r{constructor({chartController:t,chartOptionsService:e,seriesType:i,isExpandedOnInit:s=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initLineWidth(),strokeWidth:()=>this.initStrokeWidth(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins()},this.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},this.chartController=t,this.chartOptionsService=e,this.seriesType=i||this.getChartSeriesType(),this.isExpandedOnInit=s}init(){this.setTemplate(md.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,Bc.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels();this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),this.seriesWidgetMappings[this.seriesType].forEach(t=>this.widgetFuncs[t]())}).catch(t=>console.error("AG Grid - chart rendering failed",t))}initSeriesSelect(){const t=this.seriesGroup.createManagedBean(new p);t.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(100).addOptions(this.getSeriesSelectOptions()).setValue(""+this.seriesType).onValueChange(t=>{this.seriesType=t,this.refreshWidgets()}),this.seriesGroup.addItem(t),this.activePanels.push(t)}initTooltips(){const t=this.createBean(new c);t.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth(45).setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange(t=>this.setSeriesOption("tooltip.enabled",t)),this.addWidget(t)}initStrokeWidth(){const t=this.getSeriesOption("strokeWidth"),e=this.createBean(new y);e.setLabel(this.translate("strokeWidth")).setMaxValue(vd(t,10)).setTextFieldWidth(45).setValue(""+t).onValueChange(t=>this.setSeriesOption("strokeWidth",t)),this.addWidget(e)}initLineWidth(){const t=this.getSeriesOption("strokeWidth"),e=this.createBean(new y);e.setLabel(this.translate("lineWidth")).setMaxValue(vd(t,10)).setTextFieldWidth(45).setValue(""+t).onValueChange(t=>this.setSeriesOption("strokeWidth",t)),this.addWidget(e)}initLineDash(){const t=this.getSeriesOption("lineDash"),e=t?t[0]:0,i=this.createBean(new y);i.setLabel(this.translate("lineDash")).setMaxValue(vd(e,30)).setTextFieldWidth(45).setValue(""+e).onValueChange(t=>this.setSeriesOption("lineDash",[t])),this.addWidget(i)}initLineOpacity(){const t=this.getSeriesOption("strokeOpacity"),e=this.createBean(new y);e.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(vd(t,1)).setTextFieldWidth(45).setValue(""+t).onValueChange(t=>this.setSeriesOption("strokeOpacity",t)),this.addWidget(e)}initFillOpacity(){const t=this.getSeriesOption("fillOpacity"),e=this.createBean(new y);e.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(vd(t,1)).setTextFieldWidth(45).setValue(""+t).onValueChange(t=>this.setSeriesOption("fillOpacity",t)),this.addWidget(e)}initLabels(){const t="pie"===this.seriesType?"calloutLabel":"label",e=cd({labelName:"pie"===this.seriesType?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:()=>this.seriesType,seriesOptionLabelProperty:t}),i=this.createBean(new Vc(e));if("pie"===this.seriesType){const t=this.createBean(new gd(this.chartOptionsService,()=>this.seriesType));i.addCompToPanel(t),this.activePanels.push(t)}if(this.addWidget(i),"pie"===this.seriesType){const t=cd({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:()=>this.seriesType,seriesOptionLabelProperty:"sectorLabel"}),e=this.createBean(new Vc(t)),i=this.getSectorLabelPositionRatio();e.addCompToPanel(i),this.addWidget(e)}}getSectorLabelPositionRatio(){const t=this.chartOptionsService.getSeriesOption("sectorLabel.positionRatio",this.seriesType);return this.createBean(new y).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(vd(t,1)).setTextFieldWidth(45).setValue(""+t).onValueChange(t=>this.chartOptionsService.setSeriesOption("sectorLabel.positionRatio",t,this.seriesType))}initShadow(){const t=this.createBean(new hd(this.chartOptionsService,()=>this.seriesType));this.addWidget(t)}initMarkers(){const t=this.createBean(new ud(this.chartOptionsService,()=>this.seriesType));this.addWidget(t)}initBins(){var t;const e=(null!==(t=this.getSeriesOption("bins"))&&void 0!==t?t:this.getSeriesOption("calculatedBins")).length,i=this.createBean(new y);i.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(vd(e,20)).setTextFieldWidth(45).setValue(""+e).onValueChange(t=>this.setSeriesOption("binCount",t)),this.addWidget(i)}addWidget(t){this.seriesGroup.addItem(t),this.activePanels.push(t)}getSeriesOption(t){return this.chartOptionsService.getSeriesOption(t,this.seriesType)}setSeriesOption(t,e){this.chartOptionsService.setSeriesOption(t,e,this.seriesType)}getChartSeriesType(){if(0===this.chartController.getSeriesChartTypes().length)return"column";const t=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===t?"column":"areaColumnCombo"===t?"area":kc(t)}getSeriesSelectOptions(){this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));const t=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(e=>{const i=kc(e.chartType);t.add(this.seriesSelectOptions.get(i))}),Array.from(t)}updateSeriesType(){const t=this.chartController.getActiveSeriesChartTypes().map(t=>kc(t.chartType));!t.includes(this.seriesType)&&t.length>0&&(this.seriesType=t[0])}translate(t,e){return this.chartTranslationService.translate(t,e)}destroyActivePanels(){this.activePanels.forEach(e=>{t.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}md.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',fd([f("seriesGroup")],md.prototype,"seriesGroup",void 0),fd([e("chartTranslationService")],md.prototype,"chartTranslationService",void 0),fd([i],md.prototype,"init",null);var yd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};function vd(t,e){return Math.max(t,e)}const bd={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]};class xd extends r{constructor(t,e){super(xd.TEMPLATE),this.chartController=t,this.chartOptionsService=e,this.panels=[],this.isGroupPanelShownInSeries=(t,e)=>{if(["chart","legend","series"].includes(t))return!0;return!(!["axis","navigator"].includes(t)||!["bar","column","line","area","scatter","histogram","cartesian"].includes(e))}}init(){this.createPanels(),this.addManagedListener(this.chartController,Bc.EVENT_CHART_UPDATED,()=>this.createPanels(!0)),this.addManagedListener(this.chartController,Bc.EVENT_CHART_API_UPDATE,()=>this.createPanels(!1))}createPanels(t){var e;const i=this.chartController.getChartType(),s=this.chartController.isGrouping(),n=kc(i);t&&i===this.chartType&&s===this.isGrouping||(this.destroyPanels(),null===(e=this.getFormatPanelDef().groups)||void 0===e||e.forEach(t=>{const e=t.type;if(!this.isGroupPanelShownInSeries(e,n))return;const i={chartController:this.chartController,chartOptionsService:this.chartOptionsService,isExpandedOnInit:t.isOpen,seriesType:n};"chart"===e?this.addComponent(new ad(i)):"legend"===e?this.addComponent(new Hc(i)):"axis"===e?this.addComponent(new Zc(i)):"series"===e?this.addComponent(new md(i)):"navigator"===e?this.addComponent(new Qc(i)):console.warn(`AG Grid: invalid charts format panel group name supplied: '${t.type}'`)}),this.chartType=i,this.isGrouping=s)}getFormatPanelDef(){var t;const e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.formatPanel;return e||bd}addComponent(t){this.createBean(t),this.panels.push(t),t.addCssClass("ag-chart-format-section"),this.getGui().appendChild(t.getGui())}destroyPanels(){this.panels.forEach(e=>{t.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyPanels(),super.destroy()}}xd.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',yd([i],xd.prototype,"init",null);var Cd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Sd extends r{constructor(t,e){super(),this.size=58,this.padding=5,this.root=new Et;const i=new Lt({document:window.document,width:this.size,height:this.size});i.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),i.root=this.root,i.container=t,this.scene=i,this.tooltipName=e}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(t=>console.error("AG Grid - chart update failed",t))}}Cd([e("chartTranslationService")],Sd.prototype,"chartTranslationService",void 0),Cd([i],Sd.prototype,"init",null);var kd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Od extends Sd{constructor(t,e){super(t,e),this.stroke="gray",this.axisOvershoot=3}addAxes(){const t=this.size,e=this.padding,i=new as;i.x1=e,i.y1=e,i.x2=e,i.y2=t-e+this.axisOvershoot,i.stroke=this.stroke;const s=new as;s.x1=e-this.axisOvershoot+1,s.y1=t-e,s.x2=t-e+1,s.y2=t-e,s.stroke=this.stroke;const n=this.root;n.append(i),n.append(s)}}function wd(t){const{stacked:e,size:i,padding:s,xScalePadding:n,xScaleDomain:r,yScaleDomain:o}=t,a=new rs;a.domain=r,a.range=[s,i-s],a.paddingInner=n,a.paddingOuter=n;const l=new Cn;l.domain=o,l.range=[i-s,s];const h=(t,e,i)=>t.map((t,s)=>{const n=i.convert(t),r=new ha;return r.x=e.convert(s),r.y=n,r.width=e.bandwidth,r.height=i.convert(0)-n,r.strokeWidth=1,r.crisp=!0,r});return e?t.data.map(t=>h(t,a,l)):h(t.data,a,l)}function Td(t,e,i,s){const n=new Cn;n.domain=[0,4],n.range=[s,i-s];const r=new Cn;r.domain=[0,10],r.range=[i-s,s];const o=e.map(t=>{const e=new $i;return e.strokeWidth=3,e.lineCap="round",e.fill=void 0,t.forEach((t,i)=>{e.path[i>0?"lineTo":"moveTo"](n.convert(i),r.convert(t))}),e}),a=new Et;return a.setClipRectInGroupCoordinateSpace(new dt(s,s,i-2*s,i-2*s)),a.append(o),t.append(a),o}kd([i],Od.prototype,"addAxes",null);class Dd extends Od{constructor(t,e,i){super(t,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:s,columnData:n,size:r,padding:o}=this;this.columns=wd({stacked:!1,root:s,data:n,size:r,padding:o,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(this.columns),this.updateColors(e,i)}updateColors(t,e){this.columns.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}}Dd.chartType="groupedColumn";class Md extends Od{constructor(t,e,i,s=Md.data,n=[0,16],r="stackedColumnTooltip"){super(t,r);const{root:o,size:a,padding:l}=this;this.stackedColumns=wd({stacked:!0,root:o,data:s,size:a,padding:l,xScaleDomain:[0,1,2],yScaleDomain:n,xScalePadding:.3}),o.append([].concat.apply([],this.stackedColumns)),this.updateColors(e,i)}updateColors(t,e){this.stackedColumns.forEach((i,s)=>i.forEach(i=>{i.fill=t[s],i.stroke=e[s]}))}}Md.chartType="stackedColumn",Md.data=[[8,12,16],[6,9,12],[2,3,4]];class Ed extends Md{constructor(t,e,i){super(t,e,i,Ed.data,[0,10],"normalizedColumnTooltip")}}Ed.chartType="normalizedColumn",Ed.data=[[10,10,10],[6,7,8],[2,4,6]];class Rd extends Od{constructor(t,e,i){super(t,"groupedBarTooltip");const s=this.padding,n=this.size,r=new rs;r.domain=[0,1,2],r.range=[s,n-s],r.paddingInner=.3,r.paddingOuter=.3;const o=new Cn;o.domain=[0,4],o.range=[n-s,s];const a=o.convert(0),l=r.bandwidth;this.bars=[2,3,4].map((t,e)=>{const i=new ha;return i.x=s,i.y=r.convert(e),i.width=a-o.convert(t),i.height=l,i.strokeWidth=1,i.crisp=!0,i}),this.updateColors(e,i),this.root.append(this.bars)}updateColors(t,e){this.bars.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}}Rd.chartType="groupedBar";class Pd extends Od{constructor(t,e,i,s=Pd.data,n=[0,16],r="stackedBarTooltip"){super(t,r);const o=this.size,a=this.padding,l=new rs;l.domain=[0,1,2],l.range=[a,o-a],l.paddingInner=.3,l.paddingOuter=.3;const h=new Cn;h.domain=n,h.range=[o-a,a];const c=h.convert(0),d=l.bandwidth;this.bars=s.map(t=>t.map((t,e)=>{const i=new ha;return i.x=a,i.y=l.convert(e),i.width=c-h.convert(t),i.height=d,i.strokeWidth=1,i.crisp=!0,i})),this.updateColors(e,i),this.root.append([].concat.apply([],this.bars))}updateColors(t,e){this.bars.forEach((i,s)=>i.forEach(i=>{i.fill=t[s],i.stroke=e[s]}))}}Pd.chartType="stackedBar",Pd.data=[[8,12,16],[6,9,12],[2,3,4]];class Ad extends Pd{constructor(t,e,i){super(t,e,i,Ad.data,[0,10],"normalizedBarTooltip")}}Ad.chartType="normalizedBar",Ad.data=[[10,10,10],[6,7,8],[2,4,6]];const Ld=Ft;class Id extends Sd{constructor(t,e,i,s=.6,n="doughnutTooltip"){super(t,n);const r=(this.size-2*this.padding)/2,o=r+this.padding,a=[[Ld(-90),Ld(30)],[Ld(30),Ld(120)],[Ld(120),Ld(180)],[Ld(180),Ld(210)],[Ld(210),Ld(240)],[Ld(240),Ld(270)]];this.sectors=a.map(([t,e])=>{const i=new yo;return i.centerX=o,i.centerY=o,i.innerRadius=r*s,i.outerRadius=r,i.startAngle=t,i.endAngle=e,i.stroke=void 0,i.strokeWidth=1,i}),this.updateColors(e,i),this.root.append(this.sectors)}updateColors(t,e){this.sectors.forEach((i,s)=>{i.fill=t[s%t.length],i.stroke=e[s%e.length]})}}Id.chartType="doughnut";class Nd extends Id{constructor(t,e,i){super(t,e,i,0,"pieTooltip")}}Nd.chartType="pie";class Fd extends Od{constructor(t,e,i){super(t,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=Td(this.root,this.data,this.size,this.padding),this.updateColors(e,i)}updateColors(t,e){this.lines.forEach((e,i)=>{e.stroke=t[i]})}}Fd.chartType="line";class _d extends Od{constructor(t,e,i){super(t,"scatterTooltip");const s=this.size,n=this.padding,r=new Cn;r.domain=[-.5,4],r.range=[2*n,s-n];const o=new Cn;o.domain=[-.5,3.5],o.range=[s-n,n];const a=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach(t=>{t.forEach(([t,e])=>{const i=new us;i.strokeWidth=1,i.centerX=r.convert(t),i.centerY=o.convert(e),i.radius=2.5,a.push(i)})}),this.points=a,this.updateColors(e,i);const l=new Et;l.setClipRectInGroupCoordinateSpace(new dt(n,n,s-2*n,s-2*n)),l.append(this.points),this.root.append(l)}updateColors(t,e){this.points.forEach((i,s)=>{i.stroke=e[s%e.length],i.fill=t[s%t.length]})}}_d.chartType="scatter";class Bd extends Od{constructor(t,e,i){super(t,"bubbleTooltip");const s=this.size,n=this.padding,r=new Cn;r.domain=[0,1],r.range=[2*n,s-n];const o=new Cn;o.domain=[0,1],o.range=[s-n,n];const a=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach(t=>{t.forEach(([t,e,i])=>{const s=new us;s.strokeWidth=1,s.centerX=r.convert(t),s.centerY=o.convert(e),s.radius=i,s.fillOpacity=.7,a.push(s)})}),this.points=a,this.updateColors(e,i);const l=new Et;l.setClipRectInGroupCoordinateSpace(new dt(n,n,s-2*n,s-2*n)),l.append(this.points),this.root.append(l)}updateColors(t,e){this.points.forEach((i,s)=>{i.stroke=e[s%e.length],i.fill=t[s%t.length]})}}Bd.chartType="bubble";class Gd extends Od{constructor(t,e,i,s=Gd.data){super(t,"groupedAreaTooltip");const n=this.size,r=this.padding,o=new rs;o.domain=[0,1,2],o.paddingInner=1,o.paddingOuter=0,o.range=[r+.5,n-r-.5];const a=new Cn;a.domain=[0,6],a.range=[n-r+.5,r];const l=2*s.length-1,h=[],c=a.convert(0);s.forEach((t,e)=>{const i=o.convert(e);t.forEach((t,s)=>{const n=a.convert(t),r=h[s]||(h[s]=[]);r[e]={x:i,y:n},r[l-e]={x:i,y:c}})}),this.areas=h.reverse().map(t=>{const e=new $i;e.strokeWidth=1,e.fillOpacity=.7;const i=e.path;return i.clear(),t.forEach((t,e)=>i[e>0?"lineTo":"moveTo"](t.x,t.y)),i.closePath(),e}),this.updateColors(e,i),this.root.append(this.areas)}updateColors(t,e){this.areas.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}}Gd.chartType="area",Gd.data=[[1,3,5],[2,6,4],[5,3,1]];class jd extends Od{constructor(t,e,i,s=jd.data,n="stackedAreaTooltip"){super(t,n);const r=this.size,o=this.padding,a=new rs;a.domain=[0,1,2],a.paddingInner=1,a.paddingOuter=0,a.range=[o+.5,r-o-.5];const l=new Cn;l.domain=[0,16],l.range=[r-o+.5,o+.5];const h=2*s.length-1,c=[];s.forEach((t,e)=>{const i=a.convert(e);let s=0;t.forEach((t,n)=>{const r=l.convert(s+t),o=c[n]||(c[n]=[]);o[e]={x:i,y:r},o[h-e]={x:i,y:l.convert(s)},s+=t})}),this.areas=c.map(t=>{const e=new $i;e.strokeWidth=1;const i=e.path;return i.clear(),t.forEach((t,e)=>i[e>0?"lineTo":"moveTo"](t.x,t.y)),i.closePath(),e}),this.updateColors(e,i),this.root.append(this.areas)}updateColors(t,e){this.areas.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]})}}jd.chartType="stackedArea",jd.data=[[2,3,2],[3,6,5],[6,2,2]];class zd extends jd{constructor(t,e,i,s=zd.data){super(t,e,i,s,"normalizedAreaTooltip")}}zd.chartType="normalizedArea",zd.data=jd.data.map(t=>{const e=t.reduce((t,e)=>t+e,0);return t.map(t=>t/e*16)});class Wd extends Od{constructor(t,e,i){super(t,"histogramTooltip");const s=this.padding,n=this.size,r=[2,5,11,13,10,6,1],o=new Cn;o.domain=[0,r.length],o.range=[s,n-s];const a=new Cn;a.domain=[0,r.reduce((t,e)=>Math.max(t,e),0)],a.range=[n-s,s];const l=a.convert(0);this.bars=r.map((t,e)=>{const i=a.convert(t),s=o.convert(e),n=o.convert(e+1),r=new ha;return r.x=s,r.y=i,r.width=n-s,r.height=l-i,r.strokeWidth=1,r.crisp=!0,r}),this.updateColors(e,i),this.root.append(this.bars)}updateColors([t],[e]){this.bars.forEach(i=>{i.fill=t,i.stroke=e})}}Wd.chartType="histogram";class Vd extends Od{constructor(t,e,i){super(t,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:n,lineData:r,size:o,padding:a}=this;this.columns=wd({stacked:!1,root:s,data:n,size:o,padding:a,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=Td(s,r,o,a),this.updateColors(e,i)}updateColors(t,e){this.columns.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]}),this.lines.forEach((e,i)=>{e.stroke=t[i+2]})}}Vd.chartType="columnLineCombo";class Kd extends Od{constructor(t,e,i){super(t,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:s,columnData:n,areaData:r,size:o,padding:a}=this;this.columns=wd({stacked:!1,root:s,data:n,size:o,padding:a,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});const l=new rs;l.range=[a,o-a],l.domain=[0,1,2,3,4],l.paddingInner=1,l.paddingOuter=0;const h=new Cn;h.range=[o-a,a],h.domain=[0,6];const c=[],d=h.convert(0),u=l.convert(0);r.forEach((t,e)=>{const i=c[e]||(c[e]=[]);t.forEach((t,e)=>{const s=t,n=e,r=l.convert(n),o=h.convert(s);i[e]={x:r,y:o}});const s=l.convert(t.length-1);c[e].push({x:s,y:d},{x:u,y:d})}),this.areas=c.map(t=>{const e=new $i;e.strokeWidth=1,e.fillOpacity=.8;const i=e.path;return t.forEach((t,e)=>i[e>0?"lineTo":"moveTo"](t.x,t.y)),e}),s.append(this.areas),s.append([].concat.apply([],this.columns)),this.updateColors(e,i)}updateColors(t,e){this.areas.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]}),this.columns.forEach((i,s)=>{i.fill=t[s+1],i.stroke=e[s+1]})}}Kd.chartType="areaColumnCombo";class Hd extends Sd{constructor(t,e,i){super(t,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:n,lineData:r,size:o,padding:a}=this;this.columns=wd({stacked:!1,root:s,data:n,size:o,padding:a,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=Td(s,r,o,a);const l=new as;l.x1=a,l.y1=a,l.x2=a,l.y2=o-a+3,l.stroke="grey";const h=new as;h.x1=a-3+1,h.y1=o-a,h.x2=o-a+1,h.y2=o-a,h.stroke="grey";const c=new $i;this.buildPenIconPath(c),c.fill="whitesmoke",c.stroke="darkslategrey",c.strokeWidth=1,s.append([h,l,c]),this.updateColors(e,i)}updateColors(t,e){this.columns.forEach((i,s)=>{i.fill=t[s],i.stroke=e[s]}),this.lines.forEach((e,i)=>{e.stroke=t[i+2]})}buildPenIconPath(t){const{path:e}=t;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)}}Hd.chartType="customCombo";var Yd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};const Ud={columnGroup:{column:Dd,stackedColumn:Md,normalizedColumn:Ed},barGroup:{bar:Rd,stackedBar:Pd,normalizedBar:Ad},pieGroup:{pie:Nd,doughnut:Id},lineGroup:{line:Fd},scatterGroup:{scatter:_d,bubble:Bd},areaGroup:{area:Gd,stackedArea:jd,normalizedArea:zd},histogramGroup:{histogram:Wd},combinationGroup:{columnLineCombo:Vd,areaColumnCombo:Kd,customCombo:Hd}};class Xd extends r{constructor(t,e,i,s=v){super(Xd.TEMPLATE),this.wrappers={},this.chartController=t,this.fills=e,this.strokes=i,this.chartGroups=Object.assign({},s)}init(){!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(t=>"customCombo"!==t));const e=this.getGui();Object.keys(this.chartGroups).forEach(i=>{const s=this.chartGroups[i],n=this.createBean(new l({title:this.chartTranslationService.translate(i),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));s.forEach(e=>{var s;const r=null===(s=Ud[i])||void 0===s?void 0:s[e];if(!r)return void(Ud[i]?t.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${i}.${e}'`),`invalid_chartGroupsDef${e}_${i}`):t.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${i}'`),"invalid_chartGroupsDef"+i));const o=document.createElement("div");o.classList.add("ag-chart-mini-thumbnail");const a=r.chartType;this.addManagedListener(o,"click",()=>{this.chartController.setChartType(a),this.updateSelectedMiniChart()}),this.wrappers[a]=o,this.createBean(new r(o,this.fills,this.strokes)),n.addItem(o)}),e.appendChild(n.getGui())}),this.updateSelectedMiniChart()}updateSelectedMiniChart(){const t=this.chartController.getChartType();for(const e in this.wrappers){const i=e===t;this.wrappers[e].classList.toggle("ag-selected",i)}}}Xd.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',Yd([e("chartTranslationService")],Xd.prototype,"chartTranslationService",void 0),Yd([i],Xd.prototype,"init",null);var $d=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class qd extends r{constructor(t){super(qd.TEMPLATE),this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[],this.chartController=t}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",t.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",t.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,Bc.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,Bc.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const t=this.miniChartsContainers.find(t=>!t.getGui().classList.contains("ag-hidden")).getGui().querySelector(".ag-selected");if(t){const e=t.offsetParent;e&&this.eMiniChartsContainer.scrollTo(0,e.offsetTop)}},250)}resetPalettes(e){var i,s;const n=this.chartController.getPalettes(),r=null===(s=null===(i=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.settingsPanel)||void 0===s?void 0:s.chartGroupsDef;t.shallowCompare(n,this.palettes)&&!e||this.isAnimating||(this.palettes=n,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex(t=>t===this.chartController.getChartThemeName()),this.cardItems=[],t.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((t,e)=>{const i=this.activePaletteIndex===e,{fills:s,strokes:n}=t,o=this.createBean(new Xd(this.chartController,s,n,r));this.miniChartsContainers.push(o),this.eMiniChartsContainer.appendChild(o.getGui()),this.addCardLink(e),i?o.updateSelectedMiniChart():o.setDisplayed(!1)}),t.setDisplayed(this.eNavBar,this.palettes.length>1),t.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))}addCardLink(t){const e=document.createElement("div");e.classList.add("ag-chart-settings-card-item"),this.addManagedListener(e,"click",()=>{this.setActivePalette(t,t<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(e),this.cardItems.push(e)}getPrev(){let t=this.activePaletteIndex-1;return t<0&&(t=this.palettes.length-1),t}getNext(){let t=this.activePaletteIndex+1;return t>=this.palettes.length&&(t=0),t}setActivePalette(e,i){if(this.isAnimating||this.activePaletteIndex===e)return;t.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");const s=this.miniChartsContainers[this.activePaletteIndex],n=s.getGui(),r=this.miniChartsContainers[e],o=r.getGui();s.updateSelectedMiniChart(),r.updateSelectedMiniChart();const a="left"===i?-1:1,l=o.style.left=t.getAbsoluteWidth(this.getGui())*a+"px";this.activePaletteIndex=e,this.isAnimating=!0;r.setDisplayed(!0),s.addCssClass("ag-animating"),r.addCssClass("ag-animating"),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{n.style.left=-parseFloat(l)+"px",o.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,s.removeCssClass("ag-animating"),r.removeCssClass("ag-animating"),s.setDisplayed(!1)},300)}destroyMiniCharts(){t.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}}qd.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',$d([e("resizeObserverService")],qd.prototype,"resizeObserverService",void 0),$d([f("eMiniChartsContainer")],qd.prototype,"eMiniChartsContainer",void 0),$d([f("eNavBar")],qd.prototype,"eNavBar",void 0),$d([f("eCardSelector")],qd.prototype,"eCardSelector",void 0),$d([f("ePrevBtn")],qd.prototype,"ePrevBtn",void 0),$d([f("eNextBtn")],qd.prototype,"eNextBtn",void 0),$d([i],qd.prototype,"postConstruct",null);var Zd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Jd extends r{constructor(t){super(),this.tabs=[];const{controller:e,panels:i,chartOptionsService:s}=t;this.chartController=e,this.chartOptionsService=s,this.panels=i}init(){this.panels.forEach(t=>{const e=t.replace("chart","").toLowerCase(),{comp:i,tab:s}=this.createTab(t,e,this.getPanelClass(e));this.tabs.push(s),this.addDestroyFunc(()=>this.destroyBean(i))}),this.tabbedLayout=new b({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)}createTab(t,e,i){const s=document.createElement("div");s.classList.add("ag-chart-tab","ag-chart-"+e);const n=new i(this.chartController,this.chartOptionsService);this.getContext().createBean(n),s.appendChild(n.getGui());const r=document.createElement("div"),o=this.chartTranslationService.translate(e);return r.innerText=o,{comp:n,tab:{title:r,titleLabel:o,bodyPromise:x.resolve(s),getScrollableContainer:()=>s.querySelector(".ag-scrollable-container")||s,name:t}}}showTab(t){const e=this.tabs[t];this.tabbedLayout.showItem(e)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}getPanelClass(t){switch(t){case Jd.TAB_DATA:return zc;case Jd.TAB_FORMAT:return xd;default:return qd}}}Jd.TAB_DATA="data",Jd.TAB_FORMAT="format",Zd([e("chartTranslationService")],Jd.prototype,"chartTranslationService",void 0),Zd([i],Jd.prototype,"init",null);var Qd=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class tu extends r{constructor(t,e,i,s){super(tu.TEMPLATE),this.eChartContainer=t,this.eMenuPanelContainer=e,this.chartController=i,this.chartOptionsService=s,this.buttons={chartSettings:["menu",()=>this.showMenu(this.defaultPanel)],chartData:["menu",()=>this.showMenu("chartData")],chartFormat:["menu",()=>this.showMenu("chartFormat")],chartLink:["linked",t=>this.toggleDetached(t)],chartUnlink:["unlinked",t=>this.toggleDetached(t)],chartDownload:["save",()=>this.saveChart()]},this.panels=[],this.buttonListenersDestroyFuncs=[],this.menuVisible=!1}postConstruct(){this.createButtons(),this.addManagedListener(this.eventService,n.EVENT_CHART_CREATED,t=>{var e;if(t.chartId===this.chartController.getChartId()){Boolean(null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.defaultToolPanel)&&this.showMenu(this.defaultPanel,!1)}}),this.refreshMenuClasses(),!this.gridOptionsService.is("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,Bc.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const t=[];return["chartLink","chartUnlink","chartDownload"].some(t=>this.chartToolbarOptions.includes(t))&&t.push("top"),["chartSettings","chartData","chartFormat"].some(t=>this.chartToolbarOptions.includes(t))&&t.push(this.gridOptionsService.is("enableRtl")?"left":"right"),t}getToolbarOptions(){var t,e,i;if(Boolean(this.gridOptionsService.get("chartToolPanelsDef"))){const s=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],n=this.gridOptionsService.getCallback("getChartToolbarItems"),r={defaultItems:s};let o=n?n(r).filter(t=>{if(!C.includes(t)){const e=S.includes(t)?`AG Grid: '${t}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:`AG Grid: '${t}' is not a valid Chart Toolbar Option`;return console.warn(e),!1}return!0}):s;const a=null===(e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.panels)||void 0===e?void 0:e.map(t=>{const e=k[t];return e||console.warn(`AG Grid - invalid panel in chartToolPanelsDef.panels: '${t}'`),e}).filter(t=>Boolean(t));this.panels=a||Object.values(k),this.chartController.isPivotChart()&&(this.panels=this.panels.filter(t=>"chartData"!==t));const l=null===(i=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel;return this.defaultPanel=l&&k[l]||this.panels[0],this.panels.length>0?[this.panels[0],...o]:o}{let t=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const e=this.gridOptionsService.getCallback("getChartToolbarItems");if(e){const i=this.gridOptionsService.is("suppressChartToolPanelsButton");t=e({defaultItems:i?t:C}).filter(t=>{if(!this.buttons[t])return console.warn(`AG Grid: '${t}' is not a valid Chart Toolbar Option`),!1;if(!i&&S.includes(t)){const e=`AG Grid: '${t}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return console.warn(e),!1}return!0}),i||(t=t.concat(S))}this.chartController.isPivotChart()&&(t=t.filter(t=>"chartData"!==t));const i=["chartUnlink","chartLink","chartDownload"];return this.panels=t.filter(t=>-1===i.indexOf(t)),this.defaultPanel=this.panels[0],t.filter(t=>-1!==i.indexOf(t)||this.panels.length&&t===this.panels[0])}}toggleDetached(t){const e=t.target,i=e.classList.contains("ag-icon-linked");e.classList.toggle("ag-icon-linked",!i),e.classList.toggle("ag-icon-unlinked",i);const s=i?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",n=this.chartTranslationService.translate(s);n&&(e.title=n),this.chartController.detachChartRange()}createButtons(){this.buttonListenersDestroyFuncs.forEach(t=>t()),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();const e=this.eMenu;t.clearElement(e),this.chartToolbarOptions.forEach(i=>{const s=this.buttons[i],[n,r]=s,o=t.createIconNoSpan(n,this.gridOptionsService,void 0,!0);o.classList.add("ag-chart-menu-icon");const a=this.chartTranslationService.translate(i+"ToolbarTooltip");a&&o instanceof HTMLElement&&(o.title=a),this.buttonListenersDestroyFuncs.push(this.addManagedListener(o,"click",r)),e.appendChild(o)})}saveChart(){const t={type:tu.EVENT_DOWNLOAD_CHART};this.dispatchEvent(t)}createMenuPanel(t){const e=this.environment.chartMenuPanelWidth(),i=this.menuPanel=this.createBean(new O({minWidth:e,width:e,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return i.setParentComponent(this),this.eMenuPanelContainer.appendChild(i.getGui()),this.tabbedMenu=this.createBean(new Jd({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(i,r.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new x(e=>{window.setTimeout(()=>{i.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(t),e(i),this.addManagedListener(this.eChartContainer,"click",t=>{this.getGui().contains(t.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())}toggleMenu(){this.menuVisible?this.hideMenu():this.showMenu()}showMenu(t,e=!0){if(e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer();else{const e=t||this.defaultPanel;let i=this.panels.indexOf(e);i<0&&(console.warn(`AG Grid: '${t}' is not a valid Chart Tool Panel name`),i=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(i),this.showContainer()):this.createMenuPanel(i).then(this.showContainer.bind(this))}e||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(){this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses()},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.is("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(t){this.eMenuPanelContainer.style.minWidth=t+"px"}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}}tu.EVENT_DOWNLOAD_CHART="downloadChart",tu.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',Qd([e("chartTranslationService")],tu.prototype,"chartTranslationService",void 0),Qd([f("eMenu")],tu.prototype,"eMenu",void 0),Qd([f("eHideButton")],tu.prototype,"eHideButton",void 0),Qd([f("eHideButtonIcon")],tu.prototype,"eHideButtonIcon",void 0),Qd([i],tu.prototype,"postConstruct",null);var eu=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class iu extends r{constructor(t){super(iu.TEMPLATE),this.chartMenu=t,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",t=>{this.editing&&"Enter"===t.key&&!t.shiftKey&&(this.handleEndEditing(),t.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(t,e){this.chartController=t,this.chartOptionsService=e;for(const t of this.destroyableChartListeners)t();this.destroyableChartListeners=[];const i=this.chartController.getChartProxy().getChart(),s=i.scene.canvas.element,n=this.addManagedListener(s,"dblclick",t=>{const{title:e}=i;if(e&&e.node.containsPoint(t.offsetX,t.offsetY)){const t=e.node.computeBBox(),i=e.node.inverseTransformPoint(t.x,t.y);this.startEditing(Object.assign(Object.assign({},t),i),s.width)}});let r=!1;const o=this.addManagedListener(s,"mousemove",t=>{const{title:e}=i,n=!!(e&&e.enabled&&e.node.containsPoint(t.offsetX,t.offsetY));r!==n&&(s.style.cursor=n?"pointer":""),r=n});this.destroyableChartListeners=[n,o]}startEditing(t,e){if(this.chartMenu&&this.chartMenu.isVisible())return;if(this.editing)return;this.editing=!0;const i=Math.max(Math.min(t.width+20,e),300),s=this.getGui();s.classList.add("currently-editing");const n=s.style;n.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),n.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),n.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),n.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",n.color=this.chartOptionsService.getChartOption("title.color");const r=this.chartOptionsService.getChartOption("title.text"),o=r===this.chartTranslationService.translate("titlePlaceholder");s.value=o?"":r;const a=r.split(/\r?\n/g).length;n.left=Math.round(t.x+t.width/2-i/2-1)+"px",n.top=Math.round(t.y+t.height/2-a*this.getLineHeight()/2-2)+"px",n.width=Math.round(i)+"px",n.lineHeight=this.getLineHeight()+"px",this.updateHeight(),s.focus()}updateHeight(){const t=this.getGui(),e=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,i=t.value.split(/\r?\n/g).length;t.style.height=Math.round(Math.max(e,i)*this.getLineHeight())+4+"px"}getLineHeight(){const t=this.chartOptionsService.getChartOption("title.lineHeight");return t?parseInt(t):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))}handleEndEditing(){const t=this.chartOptionsService.getChartOption("title.color");this.chartOptionsService.setChartOption("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartOptionsService.setChartOption("title.color",t)})}endEditing(){if(!this.editing)return;this.editing=!1;const t=this.getGui().value;t&&""!==t.trim()?(this.chartOptionsService.setChartOption("title.text",t),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}}iu.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',eu([e("chartTranslationService")],iu.prototype,"chartTranslationService",void 0),eu([i],iu.prototype,"init",null);var su=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class nu extends s{getData(t){if(t.crossFiltering){if(t.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&t.pivoting&&this.updatePivotKeysForSSRM();const e=this.extractRowsFromGridRowModel(t);return e.chartData=this.aggregateRowsByDimension(t,e.chartData),e}extractRowsFromGridRowModel(e){let i=[];const s={},n={},r={};let o,a={},l=[];if(e.crossFiltering)a=this.getFilteredRowNodes(),l=this.getAllRowNodes(),o=l.length;else{const t=this.gridRowModel.getRowCount()-1;o=(e.endRow>=0?Math.min(e.endRow,t):t)-e.startRow+1}for(let t=0;t<o;t++){const o={},h=e.crossFiltering?l[t]:this.gridRowModel.getRow(t+e.startRow);e.dimensionCols.forEach(i=>{const s=i.colId,a=this.columnModel.getGridColumn(s);if(a){const i=this.valueService.getValue(a,h);if(e.grouping){const e=i&&i.toString?String(i.toString()):"",a=nu.getGroupLabels(h,e);o[s]={labels:a,toString:function(){return this.labels.filter(t=>!!t).reverse().join(" - ")}},h.group&&(n[a.toString()]=t);const l=a.slice(1,a.length).toString();l&&(r[l]=n[l])}else o[s]=i}else o[cu.DEFAULT_CATEGORY]=t+1}),e.valueCols.forEach(t=>{let i=[];const n=t.getColDef().pivotKeys;n&&(i=n.slice());const r=t.getColDef().headerName;r&&i.push(r),i.length>0&&(s[t.getId()]=i);const l=t.getColId();if(e.crossFiltering){const i=l+"-filtered-out",s=this.valueService.getValue(t,h),n=null!=s&&"function"==typeof s.toNumber?s.toNumber():s;a[h.id]?(o[l]=n,o[i]=e.aggFunc||e.isScatter?void 0:0):(o[l]=e.aggFunc||e.isScatter?void 0:0,o[i]=n)}else{let e=this.valueService.getValue(t,h);e&&e.hasOwnProperty("toString")&&(e=parseFloat(e.toString())),o[l]=null!=e&&"function"==typeof e.toNumber?e.toNumber():e}}),h.footer&&(o.footer=!0),i.push(o)}if(e.grouping){const e=t.values(r),s=(i,s)=>!i.footer&&!t.includes(e,s);i=i.filter(s)}return{chartData:i,columnNames:s}}aggregateRowsByDimension(e,i){const s=e.dimensionCols;if(!e.aggFunc||0===s.length)return i;const n=t.last(s),r=n&&n.colId,o={},a=[];return i.forEach(t=>{let e=o;s.forEach(i=>{const n=i.colId,o=t[n];if(n===r){let i=e[o];i||(i={__children:[]},s.forEach(e=>{const s=e.colId;i[s]=t[s]}),e[o]=i,a.push(i)),i.__children.push(t)}else e[o]||(e[o]={}),e=e[o]})}),T.assertRegistered(D.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&a.forEach(t=>e.valueCols.forEach(i=>{if(e.crossFiltering)e.valueCols.forEach(i=>{const s=i.getColId(),n=t.__children.filter(t=>void 0!==t[s]).map(t=>t[s]);let r=this.aggregationStage.aggregateValues(n,e.aggFunc);t[i.getId()]=r&&void 0!==r.value?r.value:r;const o=s+"-filtered-out",a=t.__children.filter(t=>void 0!==t[o]).map(t=>t[o]);let l=this.aggregationStage.aggregateValues(a,e.aggFunc);t[o]=l&&void 0!==l.value?l.value:l});else{const s=t.__children.map(t=>t[i.getId()]);let n=0;T.assertRegistered(D.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&(n=this.aggregationStage.aggregateValues(s,e.aggFunc)),t[i.getId()]=n&&void 0!==n.value?n.value:n}})),a}updatePivotKeysForSSRM(){const t=this.columnModel.getSecondaryColumns();if(!t)return;const e=this.extractPivotKeySeparator(t);t.forEach(t=>{if(""===e)t.getColDef().pivotKeys=[];else{const i=t.getColId().split(e);t.getColDef().pivotKeys=i.slice(0,i.length-1)}})}extractPivotKeySeparator(t){if(0===t.length)return"";const e=(t,i)=>{const s=t.getGroupId();return t.getParent()?e(t.getParent(),s):i.split(s)[1][0]},i=t[0];return null==i.getParent()?"":e(i.getParent(),i.getColId())}static getGroupLabels(t,e){const i=[e];for(;t&&0!==t.level;)(t=t.parent)&&i.push(t.key);return i}getFilteredRowNodes(){const t={};return this.gridRowModel.forEachNodeAfterFilterAndSort(e=>{t[e.id]=e}),t}getAllRowNodes(){let t=[];return this.gridRowModel.forEachNode(e=>{t.push(e)}),this.sortRowNodes(t)}sortRowNodes(t){const e=this.sortController.getSortOptions();return!e||0==e.length?t:this.rowNodeSorter.doFullSort(t,e)}}su([e("rowModel")],nu.prototype,"gridRowModel",void 0),su([e("valueService")],nu.prototype,"valueService",void 0),su([e("columnModel")],nu.prototype,"columnModel",void 0),su([e("rowNodeSorter")],nu.prototype,"rowNodeSorter",void 0),su([e("sortController")],nu.prototype,"sortController",void 0),su([w("aggregationStage")],nu.prototype,"aggregationStage",void 0);var ru=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let ou=class extends s{getColumn(t){return this.columnModel.getPrimaryColumn(t)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(t){return this.columnModel.getDisplayNameForColumn(t,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){const t=this.columnModel.getAllDisplayedColumns(),e=new Set,i=new Set;return t.forEach(t=>{const s=t.getColDef(),n=s.chartDataType;if(n)switch(n){case"category":case"time":return void e.add(t);case"series":return void i.add(t);case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${n}' supplied, instead use 'category', 'series' or 'excluded'`)}"ag-Grid-AutoColumn"!==s.colId?t.isPrimary()?(this.isNumberCol(t)?i:e).add(t):i.add(t):e.add(t)}),{dimensionCols:e,valueCols:i}}isNumberCol(t){if("ag-Grid-AutoColumn"===t.getColId())return!1;const e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;let i=this.valueService.getValue(t,e);return null==i&&(i=this.extractLeafData(e,t)),null!=i&&"function"==typeof i.toNumber&&(i=i.toNumber()),"number"==typeof i}extractLeafData(t,e){if(!t.allLeafChildren)return null;for(let i=0;i<t.allLeafChildren.length;i++){const s=t.allLeafChildren[i],n=this.valueService.getValue(e,s);if(null!=n)return n}return null}};ru([e("columnModel")],ou.prototype,"columnModel",void 0),ru([e("valueService")],ou.prototype,"valueService",void 0),ru([e("rowRenderer")],ou.prototype,"rowRenderer",void 0),ou=ru([M("chartColumnService")],ou);var au=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class lu extends s{constructor(t){var e;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=t,this.seriesChartTypes=null!==(e=t.params.seriesChartTypes)&&void 0!==e?e:[]}init(){this.initComboCharts()}update(t){this.seriesChartTypes=null!=t?t:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){const t=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===this.chartDataModel.chartType||t)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map(t=>{const e=["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType);return t.secondaryAxis=!e&&t.secondaryAxis,t}),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())}updateSeriesChartTypesForCustomCombo(){this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(t=>(lu.SUPPORTED_COMBO_CHART_TYPES.includes(t.chartType)||(console.warn(`AG Grid: invalid chartType '${t.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),t.chartType="line"),t));const t=this.chartDataModel.valueColState.map(t=>{this.savedCustomSeriesChartTypes&&0!==this.savedCustomSeriesChartTypes.length||(this.savedCustomSeriesChartTypes=this.seriesChartTypes);const e=this.savedCustomSeriesChartTypes.find(e=>e.colId===t.colId);return e||(t.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${t.colId}', defaulting to 'line'.`),{colId:t.colId,chartType:"line",secondaryAxis:!1})});this.seriesChartTypes=t,this.savedCustomSeriesChartTypes=t,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:t,valueColState:e}=this.chartDataModel;let i="columnLineCombo"===t?"groupedColumn":"stackedArea",s="columnLineCombo"===t?"line":"groupedColumn";const n=e.filter(t=>t.selected),r=Math.ceil(n.length/2);this.seriesChartTypes=n.map((t,e)=>{const n=e>=r?s:i;return{colId:t.colId,chartType:n,secondaryAxis:!1}})}}lu.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],au([i],lu.prototype,"init",null);var hu=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class cu extends s{constructor(t){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=t,this.chartId=t.chartId,this.chartType=t.chartType,this.pivotChart=t.pivotChart,this.chartThemeName=t.chartThemeName,this.aggFunc=t.aggFunc,this.referenceCellRange=t.cellRange,this.suppliedCellRange=t.cellRange,this.suppressChartRanges=t.suppressChartRanges,this.unlinked=!!t.unlinkChart,this.crossFiltering=!!t.crossFiltering}init(){this.datasource=this.createManagedBean(new nu),this.chartColumnService=this.createManagedBean(new ou),this.comboChartModel=this.createManagedBean(new lu(this)),this.updateCellRanges(),this.updateData()}updateModel(t){const{cellRange:e,chartType:i,pivotChart:s,chartThemeName:n,aggFunc:r,suppressChartRanges:o,unlinkChart:a,crossFiltering:l,seriesChartTypes:h}=t;e!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=i,this.pivotChart=s,this.chartThemeName=n,this.aggFunc=r,this.referenceCellRange=e,this.suppliedCellRange=e,this.suppressChartRanges=o,this.unlinked=!!a,this.crossFiltering=!!l,this.updateSelectedDimension(null==e?void 0:e.columns),this.updateCellRanges();(this.isComboChart()||h)&&this.comboChartModel.update(h),this.unlinked||this.updateData()}updateCellRanges(t){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:e,valueCols:i}=this.chartColumnService.getChartColumns(),s=this.getAllColumnsFromRanges();t&&this.updateColumnState(t),this.setDimensionCellRange(e,s,t),this.setValueCellRange(i,s,t),t||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:i}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const s={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:i,isScatter:t.includes(["scatter","bubble"],this.chartType)},{chartData:n,columnNames:r}=this.datasource.getData(s);this.chartData=n,this.columnNames=r}isGrouping(){const t=this.gridOptionsService.isTreeData(),e=t?null:this.chartColumnService.getRowGroupColumns(),i=t||e&&e.length>0,s=this.getSelectedDimension().colId,n=this.chartColumnService.getGroupDisplayColumns().map(t=>t.getColId()).some(t=>t===s);return!!i&&n}getSelectedValueCols(){return this.valueColState.filter(t=>t.selected).map(t=>t.column)}getSelectedDimension(){return this.dimensionColState.filter(t=>t.selected)[0]}getColDisplayName(t){return this.chartColumnService.getColDisplayName(t)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(t){const e=this.chartColumnService.getColumn(t);return e?e.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(t,...e){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:e,startColumn:t===E.DIMENSION?e[0]:this.referenceCellRange.startColumn,type:t}}getAllColumnsFromRanges(){if(this.pivotChart)return t.convertToSet(this.chartColumnService.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),t.convertToSet(e)}getRowIndexes(){let t=0,e=0;const{rangeService:i,valueCellRange:s}=this;if(i&&s){t=i.getRangeStartRow(s).rowIndex;const n=i.getRangeEndRow(s);e="bottom"===n.rowPinned?-1:n.rowIndex}return{startRow:t,endRow:e}}resetColumnState(){const{dimensionCols:e,valueCols:i}=this.chartColumnService.getChartColumns(),s=this.getAllColumnsFromRanges(),n=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];let r=!1,o=1;const a=this.suppliedCellRange.columns[0];e.forEach(t=>{const e="ag-Grid-AutoColumn"===t.getColId();let i=!1;this.crossFiltering&&this.aggFunc?a.getColId()===t.getColId()&&(i=!0):i=!!e||!r&&s.has(t),this.dimensionColState.push({column:t,colId:t.getColId(),displayName:this.getColDisplayName(t),selected:i,order:o++}),i&&(r=!0)});const l={colId:cu.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!r,order:0};this.dimensionColState.unshift(l);const h=this.referenceCellRange.columns.filter(t=>i.has(t));i.forEach(e=>{n&&t.includes(this.referenceCellRange.columns,e)&&(e=h.shift()),this.valueColState.push({column:e,colId:e.getColId(),displayName:this.getColDisplayName(e),selected:s.has(e),order:o++})})}updateColumnState(t){const e=e=>e.colId===t.colId,{dimensionColState:i,valueColState:s}=this;i.filter(e).length>0?i.forEach(t=>t.selected=e(t)):s.filter(e).forEach(e=>e.selected=t.selected);const n=[...i,...s],r=[];n.forEach((e,i)=>{i===t.order&&r.push(t.colId),e.colId!==t.colId&&r.push(e.colId)}),n.forEach(t=>{const e=r.indexOf(t.colId);t.order=e>=0?r.indexOf(t.colId):n.length-1}),this.reorderColState()}reorderColState(){const t=(t,e)=>t.order-e.order;this.dimensionColState.sort(t),this.valueColState.sort(t)}setDimensionCellRange(t,e,i){if(this.dimensionCellRange=void 0,!i&&!this.dimensionColState.length)return void t.forEach(t=>{!this.dimensionCellRange&&e.has(t)&&(this.dimensionCellRange=this.createCellRange(E.DIMENSION,t))});let s=i;if(this.crossFiltering&&this.aggFunc){const t=this.suppliedCellRange.columns[0];s=this.dimensionColState.filter(e=>e.colId===t.getColId())[0]}else s&&t.has(s.column)||(s=this.dimensionColState.filter(t=>t.selected)[0]);s&&s.colId!==cu.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(E.DIMENSION,s.column))}setValueCellRange(t,e,i){this.valueCellRange=void 0;const s=[];if(t.forEach(t=>{i&&i.colId===t.getColId()?i.selected&&s.push(i.column):e.has(t)&&s.push(t)}),s.length>0){let t=[];this.valueColState.length>0?t=this.valueColState.map(t=>t.colId):e.forEach(e=>t.push(e.getColId())),s.sort((e,i)=>t.indexOf(e.getColId())-t.indexOf(i.getColId())),this.valueCellRange=this.createCellRange(E.VALUE,...s)}}updateSelectedDimension(t){const e=new Set(t.map(t=>t.getColId())),i=this.dimensionColState.find(t=>e.has(t.colId))||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map(t=>Object.assign(Object.assign({},t),{selected:t.colId===i.colId}))}syncDimensionCellRange(){const t=this.getSelectedDimension();t&&t.column&&(this.dimensionCellRange=this.createCellRange(E.DIMENSION,t.column))}isComboChart(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)}}function du(t){return null!=t.chart?t.chart:t}cu.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",hu([e("rangeService")],cu.prototype,"rangeService",void 0),hu([e("chartTranslationService")],cu.prototype,"chartTranslationService",void 0),hu([i],cu.prototype,"init",null);class uu{constructor(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=kc(this.chartType),null==this.chart?this.chart=dc.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}getChart(){return du(this.chart)}getChartRef(){return this.chart}downloadChart(t,e,i){const{chart:s}=this,n=du(s),r=e||(n.title?n.title.text:"chart"),{width:o,height:a}=t||{};dc.download(s,{width:o,height:a,fileName:r,fileFormat:i})}getChartImageDataURL(t){return this.getChart().scene.getDataURL(t)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var t;return null!==(t=this.getChartOptions().theme.overrides)&&void 0!==t?t:{}}getChartPalette(){return ch(this.getChartOptions().theme).palette}setPaired(t){const e=kc(this.chartProxyParams.chartType);dc.updateDelta(this.chart,{theme:{overrides:{[e]:{paired:t}}}})}isPaired(){const e=kc(this.chartProxyParams.chartType);return t.get(this.getChartThemeOverrides(),e+".paired",!0)}lookupCustomChartTheme(t){return Ec(this.chartProxyParams,t)}transformData(t,e,i){return i?t.map((t,i)=>{const s=t[e],n=s&&s.toString?s.toString():"",r=Object.assign({},t);return r[e]={id:i,value:s,toString:()=>n},r}):t}getCommonChartOptions(t){var e,i;const s=this.clearThemeOverrides?{}:null!==(i=null===(e=this.chart)||void 0===e?void 0:e.getOptions())&&void 0!==i?i:{},n=null!=this.chart?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,Object.assign(Object.assign({},s),{theme:Object.assign(Object.assign({},wc(this.chartProxyParams,this)),t?{overrides:t}:n),container:this.chartProxyParams.parentElement,mode:"integrated"})}getActiveFormattingPanelOverrides(){var t,e;if(this.clearThemeOverrides)return{};const i=null===(t=this.chart)||void 0===t?void 0:t.getOptions().theme;return null!==(e=null==i?void 0:i.overrides)&&void 0!==e?e:{}}destroy({keepChartInstance:t=!1}={}){if(t)return this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}}class pu extends uu{constructor(t){super(t),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}update(t){const e=this.getAxes(t),i=Object.assign(Object.assign({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.getData(t,e),axes:e,series:this.getSeries(t)});dc.update(this.getChartRef(),i)}getData(t,e){var i;const s=["area","line"].includes(this.standaloneChartType),n="bar"===this.standaloneChartType?"left":"bottom",r="category"===(null===(i=e.find(t=>t.position===n))||void 0===i?void 0:i.type);return this.crossFiltering&&s?this.getCrossFilterData(t):this.getDataTransformedData(t,r)}getDataTransformedData(t,e){return this.transformData(t.data,t.category.id,e)}getXAxisType(t){return t.grouping?"groupedCategory":pu.isTimeAxis(t)?"time":"category"}static isTimeAxis(t){if(t.category&&t.category.chartDataType)return"time"===t.category.chartDataType;const e=t.data[0];return(e&&e[t.category.id])instanceof Date}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(t){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(t)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(t,e){const i=t=>{if("area"===this.standaloneChartType){return e.getCrossFilteringContext().lastSelectedChartId===e.chartId?t+"-total":t}return t+"-total"};return t.map(t=>(t.yKey=i(t.yKey),t.listeners={nodeClick:e=>{const i=e.datum[t.xKey],s=e.event.metaKey||e.event.ctrlKey;this.crossFilteringAddSelectedPoint(s,i),this.crossFilterCallback(e)}},t.marker={formatter:t=>{const i=t.datum[e.category.id];return{fill:t.highlighted?"yellow":t.fill,size:t.highlighted?14:this.crossFilteringPointSelected(i)?8:0}}},"area"===this.standaloneChartType&&(t.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),"line"===this.standaloneChartType&&(t.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),t))}getCrossFilterData(t){this.crossFilteringAllPoints.clear();const e=t.fields[0].colId,i=e+"-filtered-out",s=t.getCrossFilteringContext().lastSelectedChartId;return t.data.map(n=>{const r=n[t.category.id];this.crossFilteringAllPoints.add(r);const o=this.crossFilteringPointSelected(r);return"area"===this.standaloneChartType&&s===t.chartId&&(n[e+"-total"]=o?n[e]:n[e]+n[i]),"line"===this.standaloneChartType&&(n[e+"-total"]=o?n[e]:n[e]+n[i]),n})}crossFilteringAddSelectedPoint(t,e){t?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]}}function gu(t,e){return!1!==e.clone&&e.isMergeableObject(t)?xu(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function fu(t,e,i){return t.concat(e).map((function(t){return gu(t,i)}))}function mu(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function yu(t,e){try{return e in t}catch(t){return!1}}function vu(t={},e={},i){const s={};return i.isMergeableObject(t)&&mu(t).forEach((function(e){s[e]=gu(t[e],i)})),mu(e).forEach((function(n){(function(t,e){return yu(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,n)||(yu(t,n)&&i.isMergeableObject(e[n])?s[n]=function(t,e){if(!e.customMerge)return xu;const i=e.customMerge(t);return"function"==typeof i?i:xu}(n,i)(t[n],e[n],i):s[n]=gu(e[n],i))})),s}function bu(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){const e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e}(t)}function xu(t,e,i){(i=i||{}).arrayMerge=i.arrayMerge||fu,i.isMergeableObject=i.isMergeableObject||bu,i.cloneUnlessOtherwiseSpecified=gu;const s=Array.isArray(e);return s===Array.isArray(t)?s?i.arrayMerge(t,e,i):vu(t,e,i):gu(e,i)}function Cu(t,e){const i=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16);return e?`rgba(${i}, ${s}, ${n}, ${e})`:`rgba(${i}, ${s}, ${n})`}function Su(t,e){return t.map(t=>{const i=ie.fromString(t);return new ie(i.r,i.g,i.b,e).toHexString()})}class ku extends pu{constructor(t){super(t)}getAxes(t){const e="bar"===this.standaloneChartType,i=[{type:this.getXAxisType(t),position:e?"left":"bottom"},{type:"number",position:e?"bottom":"left"}];if(this.isNormalised()){const t=i[1];t.label=Object.assign(Object.assign({},t.label),{formatter:t=>Math.round(t.value)+"%"})}return i}getSeries(e){const i=!this.crossFiltering&&t.includes(["groupedColumn","groupedBar"],this.chartType),s=e.fields.map(t=>({type:this.standaloneChartType,grouped:i,normalizedTo:this.isNormalised()?100:void 0,xKey:e.category.id,xName:e.category.name,yKey:t.colId,yName:t.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(s):s}extractCrossFilterSeries(t){const e=this.getChartPalette(),i=(t,i)=>Object.assign(Object.assign({},t),{highlightStyle:{item:{fill:void 0}},fill:null==e?void 0:e.fills[i],stroke:null==e?void 0:e.strokes[i],listeners:{nodeClick:this.crossFilterCallback}}),s=t=>{const e=t.yKey+"-filtered-out";return Object.assign(Object.assign({},xu({},t)),{yKey:e,fill:Cu(t.fill,"0.3"),stroke:Cu(t.stroke,"0.3"),hideInLegend:[e]})},n=[];for(let e=0;e<t.length;e++){const r=i(t[e],e);n.push(r),n.push(s(r))}return n}isNormalised(){return!this.crossFiltering&&t.includes(["normalizedColumn","normalizedBar"],this.chartType)}}class Ou extends pu{constructor(t){super(t)}getAxes(t){const e=[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const t=e[1];t.label=Object.assign(Object.assign({},t.label),{formatter:t=>Math.round(t.value)+"%"})}return e}getSeries(t){const e=t.fields.map(e=>({type:this.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:e.colId,yName:e.displayName,normalizedTo:"normalizedArea"===this.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(e,t):e}isNormalised(){return!this.crossFiltering&&"normalizedArea"===this.chartType}}class wu extends pu{constructor(t){super(t)}getAxes(t){return[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}]}getSeries(t){const e=t.fields.map(e=>({type:this.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:e.colId,yName:e.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(e,t):e}}class Tu extends uu{constructor(t){super(t)}update(t){const{data:e,category:i}=t,s=Object.assign(Object.assign({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(t):this.transformData(e,i.id),series:this.getSeries(t)});dc.update(this.getChartRef(),s)}getSeries(t){const e=t.fields.length,i={currentOffset:0,offsetAmount:e>1?20:40},s=this.getFields(t).map(s=>{var n;const r={type:this.standaloneChartType,angleKey:s.colId,angleName:s.displayName,sectorLabelKey:s.colId,calloutLabelKey:t.category.id,calloutLabelName:t.category.name};if("doughnut"===this.chartType){const{outerRadiusOffset:t,innerRadiusOffset:o}=Tu.calculateOffsets(i),a=s.displayName?{title:{text:s.displayName,showInLegend:e>1}}:void 0;return Object.assign(Object.assign(Object.assign(Object.assign({},r),{outerRadiusOffset:t,innerRadiusOffset:o}),a),{calloutLine:{colors:null===(n=this.getChartPalette())||void 0===n?void 0:n.strokes}})}return r});return this.crossFiltering?this.extractCrossFilterSeries(s):s}getCrossFilterData(t){const e=t.fields[0].colId,i=e+"-filtered-out";return t.data.map(t=>{const s=t[e]+t[i];return t[e+"-total"]=s,t[i]=1,t[e]=t[e]/s,t})}extractCrossFilterSeries(t){const e=this.getChartPalette(),i=t[0],s=i.angleKey,n=(t=>Object.assign(Object.assign({},t),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:t.angleKey,angleKey:t.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}))(i);return[((t,i)=>{var s,r;return Object.assign(Object.assign({},xu({},n)),{radiusKey:i+"-filtered-out",fills:Su(null!==(s=t.fills)&&void 0!==s?s:e.fills,.3),strokes:Su(null!==(r=t.strokes)&&void 0!==r?r:e.strokes,.3),showInLegend:!1})})(i,s),n]}static calculateOffsets(t){const e=t.currentOffset;t.currentOffset-=t.offsetAmount;const i=t.currentOffset;return t.currentOffset-=t.offsetAmount,{outerRadiusOffset:e,innerRadiusOffset:i}}getFields(t){return"pie"===this.chartType?t.fields.slice(0,1):t.fields}crossFilteringReset(){}}class Du extends pu{constructor(t){super(t)}getAxes(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(t){const e=this.isPaired(),i=this.getSeriesDefinitions(t.fields,e),s=t.category.id===cu.DEFAULT_CATEGORY?void 0:t.category,n=i.map(t=>({type:this.standaloneChartType,xKey:t.xField.colId,xName:t.xField.displayName,yKey:t.yField.colId,yName:t.yField.displayName,title:`${t.yField.displayName} vs ${t.xField.displayName}`,sizeKey:t.sizeField?t.sizeField.colId:void 0,sizeName:t.sizeField?t.sizeField.displayName:void 0,labelKey:s?s.id:t.yField.colId,labelName:s?s.name:void 0}));return this.crossFiltering?this.extractCrossFilterSeries(n,t):n}extractCrossFilterSeries(t,e){const{data:i}=e,s=this.getChartPalette(),n=t=>t+"-filtered-out",r=t.map((t,e)=>{const{sizeKey:r}=t,o=null==s?void 0:s.fills[e],a=null==s?void 0:s.strokes[e];let l=((t,e)=>{var i;const s=[1/0,-1/0];if(null!=e)for(const r of t){const t=null!==(i=r[e])&&void 0!==i?i:r[n(e)];t<s[0]&&(s[0]=t),t>s[1]&&(s[1]=t)}if(s[0]<=s[1])return s})(i,r);const h=Object.assign(Object.assign({},t.marker),{fill:o,stroke:a,domain:l});return Object.assign(Object.assign({},t),{marker:h,highlightStyle:{item:{fill:"yellow"}},listeners:Object.assign(Object.assign({},t.listeners),{nodeClick:this.crossFilterCallback})})});return[...r,...r.map(t=>{let{sizeKey:e,yKey:i,xKey:s}=t;return null!=e&&(e=n(e)),Object.assign(Object.assign({},t),{yKey:n(i),xKey:n(s),marker:Object.assign(Object.assign({},t.marker),{fillOpacity:.3,strokeOpacity:.3}),sizeKey:e,showInLegend:!1,listeners:Object.assign(Object.assign({},t.listeners),{nodeClick:t=>{const e=t.datum[n(s)],i=Object.assign(Object.assign({},t),{xKey:s,datum:Object.assign(Object.assign({},t.datum),{[s]:e})});this.crossFilterCallback(i)}})})})]}getSeriesDefinitions(t,e){if(t.length<2)return[];const i="bubble"===this.chartType;if(e)return i?t.map((e,i)=>i%3==0?{xField:e,yField:t[i+1],sizeField:t[i+2]}:null).filter(t=>t&&t.yField&&t.sizeField):t.map((e,i)=>i%2==0?{xField:e,yField:t[i+1]}:null).filter(t=>t&&t.yField);const s=t[0];return i?t.map((e,i)=>i%2==1?{xField:s,yField:e,sizeField:t[i+1]}:null).filter(t=>t&&t.sizeField):t.filter((t,e)=>e>0).map(t=>({xField:s,yField:t}))}}class Mu extends pu{constructor(t){super(t)}getSeries(t){const e=t.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}}class Eu extends s{constructor(t){super(),this.chartController=t}getChartOption(e){return t.get(this.getChart(),e,void 0)}setChartOption(t,e,i){const s=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&s.push("cartesian");let n={};s.forEach(i=>{n=xu(n,this.createChartOptions({seriesType:i,expression:t,value:e}))}),this.updateChart(n),i||this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(t){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>t()).catch(t=>console.error("AG Grid - chart update failed",t))}getAxisProperty(e){var i;return t.get(null===(i=this.getChart().axes)||void 0===i?void 0:i[0],e,void 0)}setAxisProperty(t,e){var i;const s=this.getChart();let n={};null===(i=s.axes)||void 0===i||i.forEach(i=>{n=xu(n,this.getUpdateAxisOptions(i,t,e))}),this.updateChart(n),this.raiseChartOptionsChangedEvent()}getLabelRotation(e){const i=this.getAxis(e);return t.get(i,"label.rotation",void 0)}setLabelRotation(t,e){const i=this.getAxis(t);if(i){const t=this.getUpdateAxisOptions(i,"label.rotation",e);this.updateChart(t),this.raiseChartOptionsChangedEvent()}}getSeriesOption(e,i){const s=this.getChart().series.find(t=>Eu.isMatchingSeries(i,t));return t.get(s,e,void 0)}setSeriesOption(t,e,i){const s=this.createChartOptions({seriesType:i,expression:"series."+t,value:e});this.updateChart(s),this.raiseChartOptionsChangedEvent()}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(t){this.chartController.getChartProxy().setPaired(t)}getAxis(t){const e=this.getChart();if(e.axes&&!(e.axes.length<1))return"xAxis"===t?e.axes&&"x"===e.axes[0].direction?e.axes[0]:e.axes[1]:e.axes&&"y"===e.axes[1].direction?e.axes[1]:e.axes[0]}getUpdateAxisOptions(t,e,i){const s=kc(this.getChartType());return["number","category","time","groupedCategory"].includes(t.type)?this.createChartOptions({seriesType:s,expression:`axes.${t.type}.${e}`,value:i}):{}}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(t){const e=this.chartController.getChartProxy().getChartRef();dc.updateDelta(e,t)}createChartOptions({seriesType:e,expression:i,value:s}){const n={},r={theme:{overrides:n}};return t.set(n,`${e}.${i}`,s),r}raiseChartOptionsChangedEvent(){const t=this.chartController.getChartModel(),e={type:n.EVENT_CHART_OPTIONS_CHANGED,chartId:t.chartId,chartType:t.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:t.chartOptions};this.eventService.dispatchEvent(e)}static isMatchingSeries(t,e){return Sc.includes(t)&&e.type===t}destroy(){super.destroy()}}class Ru extends pu{constructor(t){super(t)}getAxes(t){const e=t?t.fields:[],i=new Map(e.map(t=>[t.colId,t])),{primaryYKeys:s,secondaryYKeys:n}=this.getYKeys(e,t.seriesChartTypes),r=[{type:this.getXAxisType(t),position:"bottom",gridStyle:[{stroke:void 0}]}];return s.length>0&&r.push({type:"number",keys:s,position:"left"}),n.length>0&&n.forEach((t,e)=>{const o=i.get(t);if(!(o&&o.colId===t))return;const a={type:"number",keys:[t],position:"right"},l=s.some(t=>!!i.get(t)),h=e===n.length-1;!l&&h||(a.gridStyle=[{stroke:void 0}]),r.push(a)}),r}getSeries(t){const{fields:e,category:i,seriesChartTypes:s}=t;return e.map(t=>{const e=s.find(e=>e.colId===t.colId);if(e){const s=e.chartType,n=["groupedColumn","groupedBar"].includes(s)?{grouped:!0}:{};return Object.assign({type:kc(s),xKey:i.id,yKey:t.colId,yName:t.displayName,stacked:["stackedArea","stackedColumn"].includes(s)},n)}})}getYKeys(t,e){const i=[],s=[];return t.forEach(t=>{const n=t.colId,r=e.find(t=>t.colId===n);r&&(r.secondaryAxis?s.push(n):i.push(n))}),{primaryYKeys:i,secondaryYKeys:s}}}var Pu=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class Au extends r{constructor(t){super(Au.TEMPLATE),this.params=t}init(){const e=this.gridOptionsService.get("chartThemes")||_c;if(e.length<1)throw new Error("Cannot create chart: no chart themes are available to be used.");let{chartThemeName:i}=this.params;t.includes(e,i)||(i=e[0]);const s={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:i,aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},n=this.gridOptionsService.is("enableRtl");this.addCssClass(n?"ag-rtl":"ag-ltr");const r=this.createBean(new cu(s));this.chartController=this.createManagedBean(new Bc(r)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,Bc.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,tu.EVENT_DOWNLOAD_CHART,()=>this.downloadChart()),this.update(),this.raiseChartCreatedEvent()}validateCustomThemes(){const e=this.getChartThemes(),i=this.gridOptionsService.get("customChartThemes");i&&t.getAllKeysInObjects([i]).forEach(i=>{t.includes(e,i)||console.warn("AG Grid: a custom chart theme with the name '"+i+"' has been supplied but not added to the 'chartThemes' list")})}createChart(){let t=void 0;this.chartProxy&&(t=this.chartProxy.destroy({keepChartInstance:!0}));const e=this.chartController.getChartType(),i={chartType:e,chartInstance:t,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var t,e;return null!==(e=null===(t=this.chartMenu)||void 0===t?void 0:t.getExtraPaddingDirections())&&void 0!==e?e:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:(t,e)=>{this.params.crossFilteringContext.lastSelectedChartId=e?"":this.chartController.getChartId(),e&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(t,e)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:(t,e)=>this.chartTranslationService.translate(t,e)};if(this.params.chartOptionsToRestore=void 0,this.chartType=e,this.chartThemeName=this.chartController.getChartThemeName(),this.chartProxy=Au.createChartProxy(i),!this.chartProxy)return void console.warn("AG Grid: invalid chart type supplied: ",i.chartType);const s=this.eChart.querySelector("canvas");s&&s.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new Eu(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemes()}getGridOptionsChartThemeOverrides(){return this.gridOptionsService.get("chartThemeOverrides")}static createChartProxy(t){switch(t.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new ku(t);case"pie":case"doughnut":return new Tu(t);case"area":case"stackedArea":case"normalizedArea":return new Ou(t);case"line":return new wu(t);case"scatter":case"bubble":return new Du(t);case"histogram":return new Mu(t);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new Ru(t);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${t.chartType}' was supplied.`}}addDialog(){const t=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:e,height:i}=this.getBestDialogSize();this.chartDialog=new R({resizable:!0,movable:!0,maximizable:!0,title:t,width:e,height:i,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(R.EVENT_DESTROYED,()=>this.destroy())}getBestDialogSize(){const e=this.popupService.getPopupParent(),i=.75*t.getAbsoluteWidth(e),s=.75*t.getAbsoluteHeight(e),n=this.chartProxy.getChart();let r=this.params.insideDialog?850:n.width,o=this.params.insideDialog?470:n.height;return(r>i||o>s)&&(r=Math.min(r,i),o=Math.round(.553*r),o>s&&(o=s,r=Math.min(r,Math.round(o/.553)))),{width:r,height:o}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new tu(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new iu(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}update(t){if(null==t?void 0:t.chartId){if(!this.chartController.update(t))return}this.chartTypeChanged(t)&&this.createChart(),this.updateChart(null==t?void 0:t.chartThemeOverrides),(null==t?void 0:t.chartId)&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(t){const{chartProxy:e}=this,i=this.chartController.getSelectedValueColState().map(t=>({colId:t.colId,displayName:t.displayName})),s=this.chartController.getChartData();if(this.handleEmptyChart(s,i))return;let n=this.chartController.getChartUpdateParams(t);e.update(n),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}chartTypeChanged(t){const[e,i]=[this.chartController.getChartType(),null==t?void 0:t.chartType];return this.chartType!==e||!!i&&this.chartType!==i}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(t){return this.chartProxy.getChartImageDataURL(t)}handleEmptyChart(e,i){const s=this.chartController.isPivotChart()&&!this.chartController.isPivotMode();let n=1;this.chartController.isActiveXYChart()&&(n="bubble"===this.chartController.getChartType()?3:2);const r=i.length<n||0===e.length;if(this.eChart){const e=s||r;t.setDisplayed(this.eChart,!e),t.setDisplayed(this.eEmpty,e)}return s?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!r&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)}downloadChart(t,e,i){this.chartProxy.downloadChart(t,e,i)}openChartToolPanel(t){const e=t?k[t]:t;this.chartMenu.showMenu(e)}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(t){this.getGui().contains(t.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())}raiseChartCreatedEvent(){const t={type:n.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(t)})}raiseChartDestroyedEvent(){const t={type:n.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(t)}destroy(){super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog);const e=this.getGui();t.clearElement(e),t.removeFromParent(e),this.raiseChartDestroyedEvent()}}Au.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container"></div>\n        </div>',Pu([f("eChart")],Au.prototype,"eChart",void 0),Pu([f("eChartContainer")],Au.prototype,"eChartContainer",void 0),Pu([f("eMenuContainer")],Au.prototype,"eMenuContainer",void 0),Pu([f("eEmpty")],Au.prototype,"eEmpty",void 0),Pu([f("eTitleEditContainer")],Au.prototype,"eTitleEditContainer",void 0),Pu([e("chartCrossFilterService")],Au.prototype,"crossFilterService",void 0),Pu([e("chartTranslationService")],Au.prototype,"chartTranslationService",void 0),Pu([e("gridApi")],Au.prototype,"gridApi",void 0),Pu([e("popupService")],Au.prototype,"popupService",void 0),Pu([i],Au.prototype,"init",null);var Lu=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i};function Iu(t){return t.version,null==t.version&&(t.version=function(t){var e,i;const s=t;if(null!=t.version)return t.version;const n=(t,...e)=>Object.keys(t||{}).some(t=>e.includes(t)),r=s.chartOptions,o=n(r,"seriesDefaults")?null==r?void 0:r.seriesDefaults:null==r?void 0:r[Object.keys(r)[0]],a={"27.0.0":n(s,"seriesChartTypes"),"26.2.0":!n(r,"seriesDefaults"),"26.1.0":n(null==o?void 0:o.highlightStyle,"item"),"26.0.0":n(null==o?void 0:o.highlightStyle,"series"),"25.1.0":n(null==o?void 0:o.label,"minAngle"),"25.0.0":n(s,"modelType","aggFunc","unlinkChart","suppressChartRanges")||n(o,"lineDash","lineDashOffset"),"24.0.0":n(s,"chartThemeName","chart")||n(r,"series"),"23.2.0":n(r,"navigator"),"23.0.0":n(null===(i=null===(e=null==r?void 0:r.legend)||void 0===e?void 0:e.item)||void 0===i?void 0:i.marker,"shape"),"22.1.0":n(s,"chartPalette","chartType")},l="27.1.0",h=Object.entries(a).filter(([t,e])=>e),[c=l]=h[0];return c}(t)),t=Uu("23.0.0",t,Nu),t=Uu("24.0.0",t,Fu),t=Uu("25.1.0",t,_u),t=Uu("26.0.0",t,Bu),t=Uu("26.1.0",t,Gu),t=Uu("26.2.0",t,ju),t=Uu("28.0.0",t,zu),t=Uu("28.2.0",t,Wu),t=Uu("29.0.0",t,Vu),t=Uu("29.1.0",t,Ku),t=Uu("29.2.0",t,Hu),t=Uu("30.0.0",t,Yu),t=Uu("30.0.0",t=function(t){return t=tp("chartOptions.*.width",t),t=qu("chartOptions.*.axes.category.label.autoRotate",!0,t=tp("chartOptions.*.height",t))}(t),t=>t)}function Nu(t){return t=Qu("chartOptions.legend.item.marker.type","shape",t),t=Qu("chartOptions.seriesDefaults.marker.type","shape",t),t=Qu("chartOptions.legend.padding","spacing",t)}function Fu(t){var e;const i=t=tp("chartOptions.seriesDefaults.marker.minSize",t),{chartType:s,chartPalette:n}=i,r=i.chartOptions,{xAxis:o,yAxis:a}=r,l=Lu(r,["xAxis","yAxis"]),h=Lu(i,["chartType","chartPalette","chartOptions"]),c=function(t){switch(t){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","groupedCategory"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["groupedCategory","number"];case"scatter":case"bubble":return["number","number"];default:return}}(s),d=null==c?void 0:c.map((t,e)=>Object.assign({type:t},0===e?o:a));return Object.assign({chartType:s,chartThemeName:null!==(e=np[n])&&void 0!==e?e:"ag-default",chartOptions:Object.assign(Object.assign({},l),{axes:d,xAxis:o,yAxis:a})},h)}function _u(t){return t=Qu("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",t)}function Bu(t){return t=tp("chart",t=ip("chartOptions.seriesDefaults.highlightStyle",t,t=>{var{dimOpacity:e}=t,i=Lu(t,["dimOpacity"]);return Object.assign(Object.assign({},i),null!=e?{series:{dimOpacity:e}}:{})})),t=tp("chartOptions.seriesDefaults.tooltipClass",t),t=$u("chartOptions.axes[].label.rotation",0,t=tp("chartOptions.seriesDefaults.tooltipTracking",t)),t=$u("chartOptions.axes[].label.rotation",335,t)}function Gu(t){const e=t=>{var{item:e,series:i}=t,s=Lu(t,["item","series"]);return Object.assign({item:Object.assign(Object.assign({},s),e)},i?{series:i}:{})};return t=ip("chartOptions.seriesDefaults.highlightStyle",t,e),t=ip("chartOptions.series[].highlightStyle",t,e)}function ju(t){t=Zu("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",t),t=Zu("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",t),t=tp("chartOptions.seriesDefaults.fill",t=Zu("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",t)),t=tp("chartOptions.seriesDefaults.stroke",t),t=tp("chartOptions.seriesDefaults.callout.colors",t),t=tp("chartOptions.xAxis",t);const e=t=tp("chartOptions.yAxis",t),{chartType:i}=e,s=e.chartOptions,{axes:n,series:r,seriesDefaults:o}=s,a=Lu(s,["axes","series","seriesDefaults"]),l=Lu(e,["chartType","chartOptions"]),h=[kc(i)],c={};if(!h.includes("pie")){const t={top:{},bottom:{},left:{},right:{}},e=n.map(e=>{var{type:i}=e,s=Lu(e,["type"]);return{[i]:Object.assign(Object.assign({},t),s)}}).reduce(sp,{});Oc.filter(t=>null==e[t]).forEach(i=>{e[i]=Object.assign({},t)}),c.axes=e}const d=h.map(t=>({[t]:Object.assign(Object.assign(Object.assign({},c),{series:o}),a)})).reduce(sp,{});return t=Object.assign(Object.assign({},l),{chartType:i,chartOptions:d})}function zu(t){return t=tp("chartOptions.*.title.padding",t),t=tp("chartOptions.*.subtitle.padding",t),t=qu("chartOptions.*.axes.*.title.enabled",!1,t=tp("chartOptions.*.axes.*.title.padding",t))}function Wu(t){return t=Qu("chartOptions.pie.series.callout","calloutLine",t),t=Qu("chartOptions.pie.series.label","calloutLabel",t),t=Qu("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=Qu("chartOptions.pie.series.labelName","sectorLabelName",t)}function Vu(t){return t=Ju("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",t),t=Ju("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",t),t=Ju("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",t),t=Ju("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",t),t=Zu("chartOptions.scatter.series.paired","chartOptions.scatter.paired",t=Ju("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",t))}function Ku(t){return t=tp("chartOptions.axes[].tick.count",t)}function Hu(t){return t=ip("chartOptions.*.tooltip",t,t=>{var e,i,s,n,{tracking:r}=t,o=Lu(t,["tracking"]);const a=Object.assign({},o);return!1===r?(null!==(e=a.position)&&void 0!==e||(a.position={type:"pointer"}),null!==(i=a.range)&&void 0!==i||(a.range="nearest")):!0===r&&(null!==(s=a.position)&&void 0!==s||(a.position={type:"node"}),null!==(n=a.range)&&void 0!==n||(a.range="nearest")),a})}function Yu(t){return t=Qu("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=qu("chartOptions.common.legend.position","right",t=function t(e,i,s){var n;"string"==typeof e&&(e=e.split("."));const r=e[0];e.length>1&&(s[r]=t(e.slice(1),i,null!==(n=s[r])&&void 0!==n?n:{}));Object.keys(s).includes(r)||(s[r]=i);return s}("chartOptions.common.legend.enabled",!0,t=tp("chartOptions.*.series.flipXY",t=Hu(t=Ku(t=Qu("chartOptions.pie.series.labelName","sectorLabelName",t))))))}function Uu(t,e,i){if(Xu(t)>Xu(e.version)){const s=i(e);return s.version=t,s}return e}function Xu(t){const{major:e,minor:i,patch:s}=function(t){const e="string"==typeof t?t.split(".").map(t=>Number(t)):[];if(3!==e.length||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+t);return{major:e[0],minor:e[1],patch:e[2]}}(t);return 1e4*e+100*i+s}function $u(t,e,i){return ep(t,!0,i,(t,i)=>{t[i]===e&&delete t[i]})}function qu(t,e,i){return ep(t,!1,i,(t,i)=>{null==t[i]&&(t[i]=e)})}function Zu(t,e,i){let s=void 0,n=!1;return i=ep(t,!0,i,(t,e)=>{n=!0,s=t[e],delete t[e]}),n?ep(e,!1,i,(t,e)=>{t[e]=s}):i}function Ju(t,e,i){let s=void 0,n=!1;return i=ep(t,!0,i,(t,e)=>{n=!0,s=t[e],delete t[e]}),n?ep(e,!1,i,(t,e)=>{void 0===t[e]&&(t[e]=s)}):i}function Qu(t,e,i){return ep(t,!0,i,(t,i)=>{t[e]=t[i],delete t[i]})}function tp(t,e){return ep(t,!0,e,(t,e)=>delete t[e])}function ep(t,e,i,s){const n=t instanceof Array?t:t.split("."),r=n.slice(0,n.length-1),o=n[n.length-1];return ip(r,i,t=>{const i=Object.keys(t).includes(o);if(e&&!i)return t;const n=Object.assign({},t);return s(n,o),n})}function ip(t,e,i){const s=t instanceof Array?t:t.split(".");if(e=Object.assign({},e),0===s.length)return i(e);if(s[0].startsWith("{")){const t=s[0].substring(1,s[0].lastIndexOf("}")).split(",");for(const n of t)null!=e[n]&&(e[n]=ip(s.slice(1),e[n],i))}else if(s[0].endsWith("[]")){const n=s[0].substring(0,t[0].indexOf("["));e[n]instanceof Array&&(e[n]=e[n].map(t=>ip(s.slice(1),t,i)))}else if("*"===s[0])for(const t in e)e[t]=ip(s.slice(1),e[t],i);else null!=e[s[0]]&&(e[s[0]]=ip(s.slice(1),e[s[0]],i));return e}const sp=(t,e)=>Object.assign(Object.assign({},t),e),np={borneo:"ag-default",material:"ag-material",pastel:"ag-pastel",bright:"ag-vivid",flat:"ag-solar"};var rp=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let op=class extends s{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""}}updateChart(t){if(0===this.activeChartComps.size)return void console.warn("AG Grid - No active charts to update.");const e=[...this.activeChartComps].find(e=>e.getChartId()===t.chartId);e?e.update(t):console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${t.chartId}.`)}getChartModels(){const t=[];return this.activeChartComps.forEach(e=>t.push((t=>Object.assign(Object.assign({},t),{version:"30.0.0"}))(e.getChartModel()))),t}getChartRef(t){let e;return this.activeCharts.forEach(i=>{i.chartId===t&&(e=i)}),e}getChartComp(t){let e;return this.activeChartComps.forEach(i=>{i.getChartId()===t&&(e=i)}),e}getChartImageDataURL(t){let e;return this.activeChartComps.forEach(i=>{i.getChartId()===t.chartId&&(e=i.getChartImageDataURL(t.fileFormat))}),e}downloadChart(t){const e=Array.from(this.activeChartComps).find(e=>e.getChartId()===t.chartId);null==e||e.downloadChart(t.dimensions,t.fileName,t.fileFormat)}openChartToolPanel(t){const e=Array.from(this.activeChartComps).find(e=>e.getChartId()===t.chartId);null==e||e.openChartToolPanel(t.panel)}closeChartToolPanel(t){const e=Array.from(this.activeChartComps).find(e=>e.getChartId()===t);null==e||e.closeChartToolPanel()}createChartFromCurrentRange(t="groupedColumn"){const e=this.getSelectedRange();return this.createChart(e,t)}restoreChart(t,e){if(!t)return void console.warn("AG Grid - unable to restore chart as no chart model is provided");"30.0.0"!==t.version&&(t=Iu(t));const i={cellRange:t.cellRange,chartType:t.chartType,chartThemeName:t.chartThemeName,chartContainer:e,suppressChartRanges:t.suppressChartRanges,aggFunc:t.aggFunc,unlinkChart:t.unlinkChart,seriesChartTypes:t.seriesChartTypes},s=t=>this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(t):void 0;if("pivot"===t.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");const e=s({rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(t=>t.getColId())});return e?this.createChart(e,i.chartType,i.chartThemeName,!0,!0,i.chartContainer,void 0,void 0,i.unlinkChart,!1,t.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}const n=s(i.cellRange);if(n)return this.createChart(n,i.chartType,i.chartThemeName,!1,i.suppressChartRanges,i.chartContainer,i.aggFunc,void 0,i.unlinkChart,!1,t.chartOptions,t.chartPalette,i.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}createRangeChart(t){var e;const i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(i)return this.createChart(i,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,void 0,void 0,void 0,t.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}createPivotChart(t){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");const e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(t=>t.getColId())},i=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(i)return this.createChart(i,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,void 0,t.chartThemeOverrides,t.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}createCrossFilterChart(t){var e;const i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(!i)return void console.warn("AG Grid - unable to create chart as no range is selected");const s=!(void 0!==t.suppressChartRanges&&null!==t.suppressChartRanges)||t.suppressChartRanges;return this.createChart(i,t.chartType,t.chartThemeName,!1,s,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,!0)}createChart(t,e,i,s=!1,n=!1,r,o,a,l=!1,h=!1,c,d,u){const p=this.gridOptionsService.getCallback("createChartContainer"),g={chartId:this.generateId(),pivotChart:s,cellRange:t,chartType:e,chartThemeName:i,insideDialog:!(r||p),suppressChartRanges:n,aggFunc:o,chartThemeOverrides:a,unlinkChart:l,crossFiltering:h,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:c,chartPaletteToRestore:d,seriesChartTypes:u,crossFilteringResetCallback:()=>this.activeChartComps.forEach(t=>t.crossFilteringReset())},f=new Au(g);this.context.createBean(f);const m=this.createChartRef(f);if(r){r.appendChild(f.getGui());const t=this.environment.getTheme();t.el&&!t.el.contains(r)&&r.classList.add(t.theme)}else p?p(m):f.addEventListener(Au.EVENT_DESTROYED,()=>{this.activeChartComps.delete(f),this.activeCharts.delete(m)});return m}createChartRef(t){const e={destroyChart:()=>{this.activeCharts.has(e)&&(this.context.destroyBean(t),this.activeChartComps.delete(t),this.activeCharts.delete(e))},chartElement:t.getGui(),chart:t.getUnderlyingChart(),chartId:t.getChartModel().chartId};return this.activeCharts.add(e),this.activeChartComps.add(t),e}getSelectedRange(){const t=this.rangeService.getCellRanges();return t.length>0?t[0]:{}}generateId(){return"id-"+Math.random().toString(36).substring(2,18)}destroyAllActiveCharts(){this.activeCharts.forEach(t=>t.destroyChart())}};op.CHARTS_VERSION="8.0.0",rp([w("rangeService")],op.prototype,"rangeService",void 0),rp([e("columnModel")],op.prototype,"columnModel",void 0),rp([P],op.prototype,"destroyAllActiveCharts",null),op=rp([M("chartService")],op);var ap,lp=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let hp=ap=class extends s{translate(t,e){return this.localeService.getLocaleTextFunc()(t,ap.DEFAULT_TRANSLATIONS[t]||e)}};hp.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},hp=ap=lp([M("chartTranslationService")],hp);var cp,dp=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};let up=cp=class extends s{filter(t,e=!1){const i=this.gridApi.getFilterModel();if(e)return void this.resetFilters(i);let s=cp.extractFilterColId(t);this.isValidColumnFilter(s)?this.updateFilters(i,t,s):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+s+"'")}resetFilters(t){Object.keys(t).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(e,i,s){let n=cp.extractFilterColId(i),r=i.datum[n];if(void 0===r)return;let o=r.toString();if(i.event.metaKey||i.event.ctrlKey){const i=this.getCurrentGridValuesForCategory(s);let n;t.includes(i,o)?n=i.filter(t=>t!==o):(n=i,n.push(o)),e[s]=this.getUpdatedFilterModel(s,n)}else{const t=[o];e={[s]:this.getUpdatedFilterModel(s,t)}}this.gridApi.setFilterModel(e)}getUpdatedFilterModel(t,e){return"agMultiColumnFilter"===this.getColumnFilterType(t)?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}}getCurrentGridValuesForCategory(t){let e=[];const i=this.getColumnById(t);return this.gridApi.forEachNodeAfterFilter(t=>{if(i&&!t.group){const s=this.valueService.getValue(i,t)+"";e.includes(s)||e.push(s)}}),e}static extractFilterColId(t){return t.xKey||t.calloutLabelKey}isValidColumnFilter(e){e.indexOf("-filtered-out")&&(e=e.replace("-filtered-out",""));let i=this.getColumnFilterType(e);return"boolean"==typeof i?i:t.includes(["agSetColumnFilter","agMultiColumnFilter"],i)}getColumnFilterType(t){let e=this.getColumnById(t);if(e){return e.getColDef().filter}}getColumnById(t){return this.columnModel.getGridColumn(t)}};dp([e("gridApi")],up.prototype,"gridApi",void 0),dp([e("columnModel")],up.prototype,"columnModel",void 0),dp([e("valueService")],up.prototype,"valueService",void 0),up=cp=dp([M("chartCrossFilterService")],up);var pp=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};class gp extends r{constructor(t){super(gp.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=t.picker}postConstruct(){const t=this.getGui();this.initRecentColors(),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumDraggerMove.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumHueMove.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addManagedListener(t,"mousemove",this.onSpectrumAlphaMove.bind(this)),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this))}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)}onSpectrumDraggerMove(t){this.isSpectrumDragging&&this.moveDragger(t)}onSpectrumHueDown(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)}onSpectrumHueMove(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)}onSpectrumAlphaDown(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)}onSpectrumAlphaMove(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(t){const e=this.spectrumValRect;if(e){let i=t.clientX-e.left,s=t.clientY-e.top;i=Math.max(i,0),i=Math.min(i,e.width),s=Math.max(s,0),s=Math.min(s,e.height),this.setSpectrumValue(i/e.width,1-s/e.height)}}moveHueSlider(t){const e=this.spectrumHueRect;if(e){const i=this.spectrumHueSlider,s=i.getBoundingClientRect();let n=t.clientX-e.left;n=Math.max(n,0),n=Math.min(n,e.width),this.H=1-n/e.width,i.style.left=n+s.width/2+"px",this.update()}}moveAlphaSlider(t){const e=this.spectrumAlphaRect;if(e){const i=this.spectrumAlphaSlider,s=i.getBoundingClientRect();let n=t.clientX-e.left;n=Math.max(n,0),n=Math.min(n,e.width),this.A=n/e.width,i.style.left=n+s.width/2+"px",this.update()}}update(){const t=ie.fromHSB(360*this.H,this.S,this.B,this.A),e=ie.fromHSB(360*this.H,1,1),i=t.toRgbaString(),s=this.picker;ie.fromString(s.getValue()).toRgbaString()!==i&&(this.colorChanged=!0),s.setValue(i),this.spectrumColor.style.backgroundColor=e.toRgbaString(),this.spectrumDragger.style.backgroundColor=i}setSpectrumValue(t,e){const i=this.spectrumValRect||this.refreshSpectrumRect();if(i){const s=this.spectrumDragger,n=s.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),e=Math.max(0,e),e=Math.min(1,e),this.S=t,this.B=e,s.style.left=t*i.width-n.width/2+"px",s.style.top=(1-e)*i.height-n.height/2+"px",this.update()}}initRecentColors(){const t=gp.recentColors.map((t,e)=>`<div class="ag-recent-color" id=${e} style="background-color: ${t}; width: 15px; height: 15px;" recent-color="${t}"></div>`);this.recentColors.innerHTML=t.join("")}setValue(t){const e=ie.fromString(t),[i,s,n]=e.toHSB();this.H=(isNaN(i)?0:i)/360,this.A=e.a;const r=this.spectrumHueRect||this.refreshHueRect(),o=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-r.width+"px",this.spectrumAlphaSlider.style.left=this.A*o.width+"px",this.setSpectrumValue(s,n)}onRecentColorClick(e){const i=e.target;if(!t.exists(i.id))return;const s=parseInt(i.id,10);this.setValue(gp.recentColors[s]),this.destroy()}addRecentColor(){const t=ie.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString();let e=gp.recentColors;this.colorChanged&&e[0]!==t&&(e=e.filter(e=>e!=t),e=[t].concat(e),e.length>gp.maxRecentColors&&(e=e.slice(0,gp.maxRecentColors)),gp.recentColors=e)}destroy(){this.addRecentColor(),super.destroy()}}gp.maxRecentColors=8,gp.recentColors=[],gp.TEMPLATE='<div class="ag-color-panel">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',pp([f("spectrumColor")],gp.prototype,"spectrumColor",void 0),pp([f("spectrumVal")],gp.prototype,"spectrumVal",void 0),pp([f("spectrumDragger")],gp.prototype,"spectrumDragger",void 0),pp([f("spectrumHue")],gp.prototype,"spectrumHue",void 0),pp([f("spectrumHueSlider")],gp.prototype,"spectrumHueSlider",void 0),pp([f("spectrumAlpha")],gp.prototype,"spectrumAlpha",void 0),pp([f("spectrumAlphaSlider")],gp.prototype,"spectrumAlphaSlider",void 0),pp([f("recentColors")],gp.prototype,"recentColors",void 0),pp([i],gp.prototype,"postConstruct",null);function fp(t){return t&&t.match(/\d+\.\d+\.\d+/)}function mp({type:t,gridVersion:e,chartsVersion:i}){const s="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return s;const n=function(t){if(!t||!fp(t))return;const[e,i]=t.split(".")||[],s=`${e}.${i}.x`,n=parseInt(e,10)-28+6;if(n<0)return;return{gridMajorMinor:s,chartsMajorMinor:`${n}.${i}.x`}}(e);if(!n)return s;const{gridMajorMinor:r,chartsMajorMinor:o}=n;return"incompatible"===t?`AG Grid version ${e} and AG Charts version ${i} is not supported. AG Grid version ${r} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:"invalidCharts"===t?`AG Grid version ${r} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:s}function yp({gridVersion:t,chartsVersion:e}){if(!fp(e))return{isValid:!1,message:mp({type:"invalidCharts",gridVersion:t,chartsVersion:e})};if(!fp(t))return{isValid:!1,message:mp({type:"invalidGrid",gridVersion:t,chartsVersion:e})};const[i,s]=t.split(".")||[],[n,r]=e.split(".")||[],o=function({gridMajorVersion:t,chartsMajorVersion:e}){const i=parseInt(t,10)-28;return i===parseInt(e,10)-6&&i>=0}({gridMajorVersion:i,chartsMajorVersion:n});return o&&s===r?{isValid:!0}:o&&s===r?{isValid:!1,message:mp({type:"invalid",gridVersion:t,chartsVersion:e})}:{isValid:!1,message:mp({type:"incompatible",gridVersion:t,chartsVersion:e})}}const vp={version:"30.0.0",validate:()=>yp({gridVersion:"30.0.0",chartsVersion:op.CHARTS_VERSION}),moduleName:D.GridChartsModule,beans:[op,hp,up],agStackComponents:[{componentName:"AgColorPicker",componentClass:class extends A{constructor(t){super(t,"ag-color-picker","colorPicker"),t&&t.color&&(this.value=t.color)}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}showPicker(){const e=this.getGui().getBoundingClientRect(),i=this.createBean(new R({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:e.right-190,y:e.top-250}));this.isPickerDisplayed=!0,i.addCssClass("ag-color-dialog"),t.setAriaExpanded(this.eWrapper,!0);const s=this.createBean(new gp({picker:this}));return s.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)}),i.setParentComponent(this),i.setBodyComponent(s),s.setValue(this.getValue()),i.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.isDestroyingPicker=!0,s.isAlive()&&this.destroyBean(s)),this.isAlive()&&(t.setAriaExpanded(this.eWrapper,!1),this.getFocusableElement().focus()),this.isPickerDisplayed=!1}),i}setValue(t){return this.value===t?this:(this.eDisplayField.style.backgroundColor=t,super.setValue(t))}getValue(){return this.value}}},{componentName:"AgAngleSelect",componentClass:$c}],dependantModules:[I,L]},bp=0,xp={time:at,AgChart:dc};export{vp as GridChartsModule,bp as __FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT,xp as agCharts};