/**
          * @ag-grid-enterprise/menu - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/menu - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
import{Autowired as e,Bean as t,PostConstruct as o,BeanStub as i,_ as r,TabbedLayout as n,ModuleRegistry as a,ModuleNames as s,AgMenuList as l,AgMenuItemComponent as u,AgPromise as c,Optional as d,Component as p}from"@ag-grid-community/core";import{EnterpriseCoreModule as h}from"@ag-grid-enterprise/core";import{PrimaryColsPanel as m}from"@ag-grid-enterprise/column-tool-panel";var g=function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};let v=class extends i{hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,o){this.showMenu(e,i=>{const r=i.getGui();this.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:e,mouseEvent:t,ePopup:r}),o&&i.showTab(o)},"columnMenu",o,void 0,t.target)}showMenuAfterButtonClick(e,t,o,i,r){let n=-1,a="left";this.gridOptionsService.is("enableRtl")&&(n=1,a="right"),this.showMenu(e,r=>{const s=r.getGui();this.popupService.positionPopupByComponent({type:o,column:e,eventSource:t,ePopup:s,alignSide:a,nudgeX:9*n,nudgeY:-23,position:"under",keepWithinBounds:!0}),i&&r.showTab(i)},o,i,r,t)}showMenu(e,t,o,r,n,a){const{menu:s,eMenuGui:l,currentHeaderPosition:u,currentColumnIndex:c,anchorToElement:d}=this.getMenuParams(e,n,a),p=[];p.push(this.getClosedCallback(e,s,u,c,a));const h=this.localeService.getLocaleTextFunc(),m=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:e=>{p.forEach(t=>t(e))},afterGuiAttached:e=>s.afterGuiAttached(Object.assign({},{container:o},e)),positionCallback:r?()=>t(s):void 0,anchorToElement:d,ariaLabel:h("ariaLabelColumnMenu","Column Menu")});this.addStopAnchoring(null==m?void 0:m.stopAnchoringPromise,e,p),r||(s.showTabBasedOnPreviousSelection(),t(s)),s.addEventListener(C.EVENT_TAB_SELECTED,e=>{this.lastSelectedTab=e.key}),e.setMenuVisible(!0,"contextMenu"),this.activeMenu=s,s.addEventListener(i.EVENT_DESTROYED,()=>{this.activeMenu===s&&(this.activeMenu=null)})}getClosedCallback(e,t,o,i,n){return a=>{this.destroyBean(t),e.setMenuVisible(!1,"contextMenu");if(a instanceof KeyboardEvent&&n)if(r.isVisible(n)){const t=this.focusService.findTabbableParent(n);t&&(e&&this.headerNavigationService.scrollToColumn(e),t.focus())}else if(o&&-1!==i){const e=this.columnModel.getAllDisplayedColumns(),t=e[i]||r.last(e);t&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:o.headerRowIndex,column:t}})}}}addStopAnchoring(e,t,o){e&&e.then(e=>{t.addEventListener("leftChanged",e),t.addEventListener("visibleChanged",e),o.push(()=>{t.removeEventListener("leftChanged",e),t.removeEventListener("visibleChanged",e)})})}getMenuParams(e,t,o){const i=this.createBean(new C(e,this.lastSelectedTab,t));return{menu:i,eMenuGui:i.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(e),anchorToElement:o||this.ctrlsService.getGridBodyCtrl().getGui()}}isMenuEnabled(e){return e.getMenuTabs(C.TABS_DEFAULT).length>0}};g([e("popupService")],v.prototype,"popupService",void 0),g([e("focusService")],v.prototype,"focusService",void 0),g([e("headerNavigationService")],v.prototype,"headerNavigationService",void 0),g([e("ctrlsService")],v.prototype,"ctrlsService",void 0),g([e("columnModel")],v.prototype,"columnModel",void 0),v=g([t("menuFactory")],v);class C extends i{constructor(e,t,o){super(),this.tabFactories={},this.includeChecks={},this.column=e,this.initialSelection=t,this.tabFactories[C.TAB_GENERAL]=this.createMainPanel.bind(this),this.tabFactories[C.TAB_FILTER]=this.createFilterPanel.bind(this),this.tabFactories[C.TAB_COLUMNS]=this.createColumnsPanel.bind(this),this.includeChecks[C.TAB_GENERAL]=()=>!0,this.includeChecks[C.TAB_FILTER]=()=>this.filterManager.isFilterAllowed(e),this.includeChecks[C.TAB_COLUMNS]=()=>!0,this.restrictTo=o}init(){const e=this.getTabsToCreate().map(e=>this.createTab(e));this.tabbedLayout=new n({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(()=>this.destroyBean(this.tabbedLayout))}getTabsToCreate(){return this.restrictTo?this.restrictTo:this.column.getMenuTabs(C.TABS_DEFAULT).filter(e=>this.isValidMenuTabItem(e)).filter(e=>this.isNotSuppressed(e)).filter(e=>this.isModuleLoaded(e))}isModuleLoaded(e){return e!==C.TAB_COLUMNS||a.isRegistered(s.ColumnsToolPanelModule,this.context.getGridId())}isValidMenuTabItem(e){let t=!0,o=C.TABS_DEFAULT;return null!=this.restrictTo&&(t=this.restrictTo.indexOf(e)>-1,o=this.restrictTo),t=t&&C.TABS_DEFAULT.indexOf(e)>-1,t||console.warn(`AG Grid: Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of [${o}]`),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===C.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===C.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===C.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=C.TAB_COLUMNS;break;case this.tabItemFilter:t=C.TAB_FILTER;break;case this.tabItemGeneral:t=C.TAB_GENERAL}t&&this.activateTab(t)}activateTab(e){const t={type:C.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(t)}getMenuItems(){const e=this.getDefaultMenuOptions();let t;const o=this.gridOptionsService.getCallback("getMainMenuItems");return t=o?o({column:this.column,defaultItems:e}):e,r.removeRepeatsFromArray(t,C.MENU_ITEM_SEPARATOR),t}getDefaultMenuOptions(){const e=[],t=!this.column.getColDef().lockPinned,o=this.columnModel.getRowGroupColumns().length,i=o>0,r=this.columnModel.getRowGroupColumns().indexOf(this.column)>=0,n=this.column.isAllowValue(),a=this.column.isAllowRowGroup(),s=this.column.isPrimary(),l=this.columnModel.isPivotMode(),u="clientSide"===this.rowModel.getType(),c=this.gridOptionsService.isTreeData(),d=s&&i&&n||!s;t&&e.push("pinSubMenu"),d&&e.push("valueAggSubMenu"),(t||d)&&e.push(C.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(C.MENU_ITEM_SEPARATOR),a&&this.column.isPrimary()&&(r?e.push("rowUnGroup"):e.push("rowGroup")),e.push(C.MENU_ITEM_SEPARATOR),e.push("resetColumns");return u&&(c||o>(l?1:0))&&(e.push("expandAll"),e.push("contractAll")),e}createMainPanel(){this.mainMenuList=this.createManagedBean(new l);const e=this.getMenuItems(),t=this.menuItemMapper.mapWithStockItems(e,this.column);return this.mainMenuList.addMenuItems(t),this.mainMenuList.addEventListener(u.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:r.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:C.TAB_GENERAL.replace("MenuTab",""),bodyPromise:c.resolve(this.mainMenuList.getGui()),name:C.TAB_GENERAL},this.tabItemGeneral}onHidePopup(e){let t;e&&e.event&&e.event instanceof KeyboardEvent&&(t=e.event),this.hidePopupFunc(t&&{keyboardEvent:t});const o=this.focusService.getFocusedCell(),i=this.gridOptionsService.getDocument();if(i.activeElement===i.body&&o){const{rowIndex:e,rowPinned:t,column:i}=o;this.focusService.setFocusedCell({rowIndex:e,column:i,rowPinned:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}createFilterPanel(){const e=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!e)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:r.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:C.TAB_FILTER.replace("MenuTab",""),bodyPromise:null==e?void 0:e.guiPromise,afterAttachedCallback:t=>{(null==e?void 0:e.filterPromise)&&e.filterPromise.then(e=>{e&&e.afterGuiAttached&&e.afterGuiAttached(t)})},afterDetachedCallback:()=>{var t;return null===(t=null==e?void 0:e.filterPromise)||void 0===t?void 0:t.then(e=>{var t;return null===(t=null==e?void 0:e.afterGuiDetached)||void 0===t?void 0:t.call(e)})},name:C.TAB_FILTER},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const t=this.createManagedBean(new m);let o=this.column.getColDef().columnsMenuParams;o||(o={});const{contractColumnSelection:i,suppressColumnExpandAll:n,suppressColumnFilter:a,suppressColumnSelectAll:s,suppressSyncLayoutWithGrid:l,columnLayout:u}=o;t.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!i,suppressColumnExpandAll:!!n,suppressColumnFilter:!!a,suppressColumnSelectAll:!!s,suppressSyncLayoutWithGrid:!!u||!!l,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context},"columnMenu"),u&&t.setColumnLayout(u);const d=t.getGui();return d.classList.add("ag-menu-column-select"),e.appendChild(d),this.tabItemColumns={title:r.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:C.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:c.resolve(e),name:C.TAB_COLUMNS},this.tabItemColumns}afterGuiAttached(e){const{container:t,hidePopup:o}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:o}),o&&(this.hidePopupFunc=o,this.addDestroyFunc(o))}getGui(){return this.tabbedLayout.getGui()}}C.EVENT_TAB_SELECTED="tabSelected",C.TAB_FILTER="filterMenuTab",C.TAB_GENERAL="generalMenuTab",C.TAB_COLUMNS="columnsMenuTab",C.TABS_DEFAULT=[C.TAB_GENERAL,C.TAB_FILTER,C.TAB_COLUMNS],C.MENU_ITEM_SEPARATOR="separator",g([e("columnModel")],C.prototype,"columnModel",void 0),g([e("filterManager")],C.prototype,"filterManager",void 0),g([e("gridApi")],C.prototype,"gridApi",void 0),g([e("columnApi")],C.prototype,"columnApi",void 0),g([e("menuItemMapper")],C.prototype,"menuItemMapper",void 0),g([e("rowModel")],C.prototype,"rowModel",void 0),g([e("focusService")],C.prototype,"focusService",void 0),g([o],C.prototype,"init",null);var b=function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};let M=class extends i{hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,t,o){const i=[];if(r.exists(e)&&a.isRegistered(s.ClipboardModule,this.context.getGridId())&&t&&(this.gridOptionsService.is("suppressCutToClipboard")||i.push("cut"),i.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.is("enableCharts")&&a.isRegistered(s.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&i.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&i.push("chartRange")),r.exists(e)){const e=!a.isRegistered(s.CsvExportModule,this.context.getGridId()),t=!a.isRegistered(s.ExcelExportModule,this.context.getGridId()),o=this.gridOptionsService.is("suppressExcelExport")||t,n=this.gridOptionsService.is("suppressCsvExport")||e;!(r.isIOSUserAgent()||o&&n)&&i.push("export")}const n=this.gridOptionsService.getCallback("getContextMenuItems");if(n){return n({node:e,column:t,value:o,defaultItems:i.length?i:void 0})}return i}onContextMenu(e,t,o,i,r,n){if(!this.gridOptionsService.is("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey))return;if(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gridOptionsService.is("suppressContextMenu"))return;const a=e||t.touches[0];if(this.showMenu(o,i,r,a,n)){(e||t).preventDefault()}}blockMiddleClickScrollsIfNeeded(e){const{gridOptionsService:t}=this,{which:o}=e;t.is("suppressMiddleClickScrolls")&&2===o&&e.preventDefault()}showMenu(e,t,o,n,a){const s=this.getMenuItems(e,t,o),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===s||r.missingOrEmpty(s))return!1;const c=new S(s);this.createBean(c);const d=c.getGui(),p={column:t,rowNode:e,type:"contextMenu",mouseEvent:n,ePopup:d,nudgeY:1},h=this.localeService.getLocaleTextFunc(),m=this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:()=>{l.classList.remove("ag-context-menu-open"),this.destroyBean(c)},click:n,positionCallback:()=>{const e=this.gridOptionsService.is("enableRtl");this.popupService.positionPopupUnderMouseEvent(Object.assign(Object.assign({},p),{nudgeX:e?-1*(d.offsetWidth+1):1}))},anchorToElement:a,ariaLabel:h("ariaLabelContextMenu","Context Menu")});return m&&(l.classList.add("ag-context-menu-open"),c.afterGuiAttached({container:"contextMenu",hidePopup:m.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(i.EVENT_DESTROYED,()=>{this.activeMenu===c&&(this.activeMenu=null)}),m&&c.addEventListener(u.EVENT_MENU_ITEM_SELECTED,m.hideFunc),!0}};b([e("popupService")],M.prototype,"popupService",void 0),b([d("rangeService")],M.prototype,"rangeService",void 0),b([e("ctrlsService")],M.prototype,"ctrlsService",void 0),b([e("columnModel")],M.prototype,"columnModel",void 0),M=b([t("contextMenuFactory")],M);class S extends p{constructor(e){super('<div class="ag-menu" role="presentation"></div>'),this.menuList=null,this.focusedCell=null,this.menuItems=e}addMenuItems(){const e=this.createManagedBean(new l),t=this.menuItemMapper.mapWithStockItems(this.menuItems,null);e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener(u.EVENT_MENU_ITEM_SELECTED,e=>this.dispatchEvent(e))}afterGuiAttached(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){const e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){const{rowIndex:e,rowPinned:t,column:o}=this.focusedCell,i=this.gridOptionsService.getDocument();i.activeElement===i.body&&this.focusService.setFocusedCell({rowIndex:e,column:o,rowPinned:t,forceBrowserFocus:!0})}}destroy(){this.restoreFocusedCell(),super.destroy()}}b([e("menuItemMapper")],S.prototype,"menuItemMapper",void 0),b([e("focusService")],S.prototype,"focusService",void 0),b([e("cellPositionUtils")],S.prototype,"cellPositionUtils",void 0),b([o],S.prototype,"addMenuItems",null);var f=function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};let A=class extends i{mapWithStockItems(e,t){if(!e)return[];const o=[];return e.forEach(e=>{let i;if(i="string"==typeof e?this.getStockMenuItem(e,t):Object.assign({},e),!i)return;const r=i,{subMenu:n}=r;n&&n instanceof Array&&(r.subMenu=this.mapWithStockItems(n,t)),null!=i&&o.push(i)}),o}getStockMenuItem(e,t){var o;const i=this.localeService.getLocaleTextFunc(),n=this.gridOptionsService.is("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:i("pinColumn","Pin Column"),icon:r.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:i("pinLeft","Pin Left"),action:()=>this.columnModel.setColumnPinned(t,"left","contextMenu"),checked:!!t&&t.isPinnedLeft()};case"pinRight":return{name:i("pinRight","Pin Right"),action:()=>this.columnModel.setColumnPinned(t,"right","contextMenu"),checked:!!t&&t.isPinnedRight()};case"clearPinned":return{name:i("noPin","No Pin"),action:()=>this.columnModel.setColumnPinned(t,null,"contextMenu"),checked:!!t&&!t.isPinned()};case"valueAggSubMenu":return a.assertRegistered(s.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&((null==t?void 0:t.isPrimary())||(null==t?void 0:t.getColDef().pivotValueColumn))?{name:i("valueAggregation","Value Aggregation"),icon:r.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(t)}:null;case"autoSizeThis":return{name:i("autosizeThiscolumn","Autosize This Column"),action:()=>this.columnModel.autoSizeColumn(t,n,"contextMenu")};case"autoSizeAll":return{name:i("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnModel.autoSizeAllColumns(n,"contextMenu")};case"rowGroup":return{name:i("groupBy","Group by")+" "+r.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),disabled:(null==t?void 0:t.isRowGroupActive())||!(null==t?void 0:t.getColDef().enableRowGroup),action:()=>this.columnModel.addRowGroupColumn(t,"contextMenu"),icon:r.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":return{name:i("ungroupBy","Un-Group by")+" "+r.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),disabled:!(null==t?void 0:t.isRowGroupActive())||!(null==t?void 0:t.getColDef().enableRowGroup),action:()=>this.columnModel.removeRowGroupColumn(t,"contextMenu"),icon:r.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null)};case"resetColumns":return{name:i("resetColumns","Reset Columns"),action:()=>this.columnModel.resetColumnState("contextMenu")};case"expandAll":return{name:i("expandAll","Expand All Row Groups"),action:()=>this.gridApi.expandAll()};case"contractAll":return{name:i("collapseAll","Collapse All Row Groups"),action:()=>this.gridApi.collapseAll()};case"copy":return a.assertRegistered(s.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:i("copy","Copy"),shortcut:i("ctrlC","Ctrl+C"),icon:r.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return a.assertRegistered(s.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:i("copyWithHeaders","Copy with Headers"),icon:r.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return a.assertRegistered(s.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:i("copyWithGroupHeaders","Copy with Group Headers"),icon:r.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(a.assertRegistered(s.ClipboardModule,"Cut from Menu",this.context.getGridId())){const e=this.focusService.getFocusedCell(),t=e?this.rowPositionUtils.getRowNode(e):null,o=!!t&&(null==e?void 0:e.column.isCellEditable(t));return{name:i("cut","Cut"),shortcut:i("ctrlX","Ctrl+X"),icon:r.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!o||this.gridOptionsService.is("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}return null;case"paste":return a.assertRegistered(s.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:i("paste","Paste"),shortcut:i("ctrlV","Ctrl+V"),disabled:!0,icon:r.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":const l=[],u=a.isRegistered(s.CsvExportModule,this.context.getGridId()),c=a.isRegistered(s.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.is("suppressCsvExport")&&u&&l.push("csvExport"),!this.gridOptionsService.is("suppressExcelExport")&&c&&l.push("excelExport"),{name:i("export","Export"),subMenu:l,icon:r.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:i("csvExport","CSV Export"),icon:r.createIconNoSpan("csvExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsCsv({})};case"excelExport":return{name:i("excelExport","Excel Export"),icon:r.createIconNoSpan("excelExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsExcel()};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(o=this.chartMenuItemMapper.getChartItems(e))&&void 0!==o?o:null;default:return console.warn("AG Grid: unknown menu item type "+e),null}}createAggregationSubMenu(e){const t=this.localeService.getLocaleTextFunc();let o;if(e.isPrimary())o=e;else{const t=e.getColDef().pivotValueColumn;o=r.exists(t)?t:void 0}const i=[];if(o){const e=o.isValueActive(),n=this.aggFuncService.getFuncNames(o);i.push({name:t("noAggregation","None"),action:()=>{this.columnModel.removeValueColumn(o,"contextMenu"),this.columnModel.setColumnAggFunc(o,void 0,"contextMenu")},checked:!e}),n.forEach(n=>{i.push({name:t(n,r.capitalise(n)),action:()=>{this.columnModel.setColumnAggFunc(o,n,"contextMenu"),this.columnModel.addValueColumn(o,"contextMenu")},checked:e&&o.getAggFunc()===n})})}return i}};f([e("columnModel")],A.prototype,"columnModel",void 0),f([e("gridApi")],A.prototype,"gridApi",void 0),f([d("clipboardService")],A.prototype,"clipboardService",void 0),f([d("aggFuncService")],A.prototype,"aggFuncService",void 0),f([e("focusService")],A.prototype,"focusService",void 0),f([e("rowPositionUtils")],A.prototype,"rowPositionUtils",void 0),f([e("chartMenuItemMapper")],A.prototype,"chartMenuItemMapper",void 0),A=f([t("menuItemMapper")],A);var y,E=function(e,t,o,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(n<3?r(a):n>3?r(t,o,a):r(t,o))||a);return n>3&&a&&Object.defineProperty(t,o,a),a};let T=y=class extends i{getChartItems(e){var t,o;if(!this.chartService)return void a.assertRegistered(s.GridChartsModule,`the Context Menu key "${e}"`,this.context.getGridId());const i="pivotChart"===e?new k(this.gridOptionsService,this.chartService,this.localeService):new G(this.gridOptionsService,this.chartService,this.localeService);let r=i.getMenuItem();const n=null===(o=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.settingsPanel)||void 0===o?void 0:o.chartGroupsDef;return n&&(r=y.filterAndOrderChartMenu(r,n,i.getConfigLookup())),this.cleanInternals(r)}cleanInternals(e){if(!e)return e;const t=e=>{var o;return null==e||delete e._key,null===(o=null==e?void 0:e.subMenu)||void 0===o||o.forEach(e=>t(e)),e};return t(e)}static buildLookup(e){let t={};const o=e=>{t[e._key]=e,e.subMenu&&e.subMenu.forEach(e=>o(e))};return o(e),t}static filterAndOrderChartMenu(e,t,o){var i;const n=this.buildLookup(e);let a=Object.assign(Object.assign({},e),{subMenu:[]});if(Object.entries(t).forEach(([e,t])=>{var i,s;const l=o[e];if(null==l)return void r.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${e}'`),"invalid_chartGroupsDef"+e);const u=n[l._key];if(u)if(u.subMenu){const o=t.map(t=>{const o=l[t];if(null!=o)return n[o];r.doOnce(()=>console.warn(`AG Grid - invalid chartGroupsDef config '${e}.${t}'`),`invalid_chartGroupsDef${t}_${e}`)}).filter(e=>void 0!==e);o.length>0&&(u.subMenu=o,null===(i=a.subMenu)||void 0===i||i.push(u))}else null===(s=a.subMenu)||void 0===s||s.push(u)}),0!=(null===(i=a.subMenu)||void 0===i?void 0:i.length))return a}};E([d("chartService")],T.prototype,"chartService",void 0),T=y=E([t("chartMenuItemMapper")],T);class k{constructor(e,t,o){this.gridOptionsService=e,this.chartService=t,this.localeService=o}getMenuItem(){const e=this.localeService.getLocaleTextFunc(),t=(t,o,i,r)=>({name:e(t,o),action:()=>this.chartService.createPivotChart({chartType:i}),_key:r});return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","pivotPie"),t("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},t("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","pivotScatter"),t("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[t("area","Area&lrm;","area","pivotArea"),t("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},t("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:r.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}}}class G{constructor(e,t,o){this.gridOptionsService=e,this.chartService=t,this.localeService=o}getMenuItem(){const e=this.localeService.getLocaleTextFunc(),t=(t,o,i,r)=>({name:e(t,o),action:()=>this.chartService.createChartFromCurrentRange(i),_key:r});return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","rangePie"),t("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},t("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","rangeScatter"),t("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[t("area","Area&lrm;","area","rangeArea"),t("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},t("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:r.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}}}const I={version:"30.0.0",moduleName:s.MenuModule,beans:[v,M,A,T],dependantModules:[h]};export{I as MenuModule};