/**
          * @ag-grid-enterprise/sparklines - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
/**
          * @ag-grid-enterprise/sparklines - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v30.0.0
          * @link https://www.ag-grid.com/
          * @license Commercial
          */
import{RefSelector as t,Autowired as e,Component as i,PostConstruct as n,PreDestroy as s,Bean as o,BeanStub as r,ModuleNames as a}from"@ag-grid-community/core";import{EnterpriseCoreModule as l}from"@ag-grid-enterprise/core";class h{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const s=null===(n=this._rangeCallback)||void 0===n?void 0:n.call(this,t,e),o=this._encode(i?this.floor(t):this.ceil(t)),r=this._encode(i?this.ceil(e):this.floor(e));if(r<o)return[];const a=[];for(let t=o;t<=r;t++){const e=this._decode(t);a.push(e)}return null==s||s(),a}}class c extends h{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,n=0;const{snapTo:s="start"}=null!=e?e:{};if("string"==typeof s){const e=n;i=(i,o)=>{const r="start"===s?i:o;return n=this.getOffset(r,t),()=>n=e}}else"number"==typeof s?n=this.getOffset(new Date(s),t):s instanceof Date&&(n=this.getOffset(s,t));return new h(e=>{const i=this._encode(e);return Math.floor((i-n)/t)},e=>this._decode(e*t+n),i)}}const d=new c((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const u=6e4*(new Date).getTimezoneOffset();const p=new c((function(t){return Math.floor((t.getTime()-u)/1e3)}),(function(t){return new Date(u+1e3*t)})),g=6e4*(new Date).getTimezoneOffset();const f=new c((function(t){return Math.floor((t.getTime()-g)/6e4)}),(function(t){return new Date(g+6e4*t)})),m=6e4*(new Date).getTimezoneOffset();const y=new c((function(t){return Math.floor((t.getTime()-m)/36e5)}),(function(t){return new Date(m+36e5*t)}));const v=new c((function(t){const e=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor(e/864e5)}),(function(t){const e=new Date(0);return e.setDate(e.getDate()+t),e.setHours(0,0,0,0),e})),b=new Date(2023,0,1);function x(t){const e=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate())+864e5*t;return new c((function(t){const i=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((i-e)/6048e5)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const k=x(0);x(1),x(2),x(3),x(4),x(5),x(6);const S=new c((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const w=new c((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));new c((function(t){return Math.floor(t.getTime()/6e4)}),(function(t){return new Date(6e4*t)})),new c((function(t){return Math.floor(t.getTime()/36e5)}),(function(t){return new Date(36e5*t)})),new c((function(t){return Math.floor(t.getTime()/864e5)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e})),new c((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))})),new c((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}));const D=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function O(){const t=navigator.userAgent;return!D.some(e=>e.test(t))}class M{constructor({document:t=window.document,width:e=600,height:i=300,domLayer:n=!1,zIndex:s=0,name:o,overrideDevicePixelRatio:r}){this._container=void 0,this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.document=t,this.element=t.createElement("canvas"),this.element.width=e,this.element.height=i,this.context=this.element.getContext("2d"),this.imageSource=this.context.canvas;const{style:a}=this.element;a.userSelect="none",a.display="block",n&&(a.position="absolute",a.zIndex=String(s),a.top="0",a.left="0",a.pointerEvents="none",a.opacity="1",o&&(this.element.id=o)),this.setPixelRatio(r),this.resize(e,i)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t,e="image/png"){t=(null!=t?t:"").trim()||"image";const i=this.getDataURL(e),n=this.document,s=n.createElement("a");s.href=i,s.download=t,s.style.display="none",n.body.appendChild(s),s.click(),n.body.removeChild(s)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;O()||(e=1),M.overrideScale(this.context,e),this._pixelRatio=e}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:s}=this;i.width=Math.round(t*s),i.height=Math.round(e*s),i.style.width=t+"px",i.style.height=e+"px",n.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t=navigator.userAgent.indexOf("Chrome")>-1,e=navigator.userAgent.indexOf("Firefox")>-1,i=!t&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,n){const s=this.textMeasuringContext;return s.font=e,s.textBaseline=i,s.textAlign=n,s.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const n=i.measureText(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,n=i[e];if(n){const e=n[t];if(e)return e}else i[e]={};const s=this.svgText;s.style.font=e,s.textContent=t;const o=s.getBBox(),r={width:o.width,height:o.height};return i[e][t]=r,r}static overrideScale(t,e){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,n,s,o,r){"object"==typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,n*e,s*e,o*e,r*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t["$"+e]||(t["$"+e]=t[e]),t[e]=n[e])}}M.textSizeCache={};class C{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:t,y:e,width:i,height:n}=this;return new C(t,e,i,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;default:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):Object.entries(t).forEach(([t,e])=>i(t,e)),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,n=-1/0,s=-1/0;return t.forEach(t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>s&&(s=t.y+t.height)}),new C(e,i,n-e,s-i)}}class N{constructor(t=[1,0,0,1,0,0]){this.elements=t}get e(){return[...this.elements]}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const n=t[0]*e[0]+t[2]*e[1],s=t[1]*e[0]+t[3]*e[1],o=t[0]*e[2]+t[2]*e[3],r=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=n,i[1]=s,i[2]=o,i[3]=r,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new N(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],n=t[2],s=t[3];const o=t[4],r=t[5],a=1/(e*s-i*n);return e*=a,i*=a,n*=a,s*=a,new N([s,-i,-n,e,n*r-s*o,i*o-e*r])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],s=e[2],o=e[3];const r=e[4],a=e[5],l=1/(i*o-n*s);return i*=l,n*=l,s*=l,o*=l,t.setElements([o,-n,-s,i,s*a-o*r,n*r-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],s=t[3];const o=t[4],r=t[5],a=1/(e*s-i*n);return e*=a,i*=a,n*=a,s*=a,t[0]=s,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*r-s*o,t[5]=i*o-e*r,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],s=i[1],o=i[2],r=i[3],a=.5*t.width,l=.5*t.height,h=t.x+a,c=t.y+l,d=Math.abs(a*n)+Math.abs(l*o),u=Math.abs(a*s)+Math.abs(l*r);return e||(e=new C(0,0,0,0)),e.x=h*n+c*o+i[4]-d,e.y=h*s+c*r+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return N.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,n,s,o,r){const[a,l]=[0,0],h=e,c=i;let d,u;1===h&&1===c?(d=0,u=0):(d=null==(null==r?void 0:r.scalingCenterX)?a:null==r?void 0:r.scalingCenterX,u=null==(null==r?void 0:r.scalingCenterY)?l:null==r?void 0:r.scalingCenterY);const p=n,g=Math.cos(p),f=Math.sin(p);let m,y;0===p?(m=0,y=0):(m=null==(null==r?void 0:r.rotationCenterX)?a:null==r?void 0:r.rotationCenterX,y=null==(null==r?void 0:r.rotationCenterY)?l:null==r?void 0:r.rotationCenterY);const v=s,b=o,x=d*(1-h)-m,k=u*(1-c)-y;return t.setElements([g*h,f*h,-f*c,g*c,g*x-f*k+m+v,f*x+g*k+y+b]),t}static fromContext(t){const e=t.getTransform();return new N([e.a,e.b,e.c,e.d,e.e,e.f])}}N.instance=new N;const L={};function E(t){var e;const i=t.constructor,n=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!n)throw new Error(`The ${i} is missing the 'className' property.`);const s=(null!==(e=L[n])&&void 0!==e?e:0)+1;return L[n]=s,n+"-"+s}var R;!function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(R||(R={}));const I=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function T(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(n,s){const o="__"+s;n[s]||(I&&null==e&&null==i?function(t,e,i,n){const{redraw:s=R.TRIVIAL,type:o="normal",checkDirtyOnAssignment:r=!1}=null!=n?n:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===o?`this.markDirty(this, ${s});`:""}\n            ${"transform"===o?`this.markDirtyTransform(${s});`:""}\n            ${"path"===o?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${s}); }`:""}\n            ${"font"===o?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${s}); }`:""}\n        }\n        ${r?`if (value != null && value._dirty > ${R.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(n,s,o,t):function(t,e,i,n){const{redraw:s=R.TRIVIAL,type:o="normal",changeCb:r,convertor:a,checkDirtyOnAssignment:l=!1}=null!=n?n:{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===o&&this.markDirty(this,s),"transform"===o&&this.markDirtyTransform(s),"path"!==o||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,s)),"font"!==o||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,s)),r&&r(this)),l&&null!=t&&t._dirty>R.NONE&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(n,s,o,t))}}class A{constructor(){this._dirty=R.MAJOR}markDirty(t,e=R.TRIVIAL){this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=R.NONE}isDirty(){return this._dirty>R.NONE}}var _,P=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};!function(t){t[t.All=0]="All",t[t.None=1]="None"}(_||(_={}));const F=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class B extends A{constructor(){super(...arguments),this.serialNumber=B._nextSerialNumber++,this.id=E(this),this.tag=NaN,this.isContainerNode=!1,this._children=[],this.childSet={},this.matrix=new N,this.inverseMatrix=new N,this._dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=_.All}get datum(){var t;return void 0!==this._datum?this._datum:null===(t=this._parent)||void 0===t?void 0:t.datum}set datum(t){this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this.children)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){return this._children}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,R.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){if(t.parent===this){const e=this.children.indexOf(t);if(e>=0)return this._children.splice(e,1),delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,R.MAJOR),t}throw new Error("The node to be removed is not a child of this node.")}insertBefore(t,e){const i=t.parent;if(t.parent&&t.parent.removeChild(t),e&&e.parent===this){const n=this.children.indexOf(e);if(!(n>=0))throw new Error(`${e} has ${i} as the parent, but is not in its list of children.`);this._children.splice(n,0,t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager),this.dirtyZIndex=!0,this.markDirty(t,R.MAJOR)}else this.append(t);return t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=N.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this._dirtyTransform=!0,this.markDirty(this,R.MAJOR)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===_.None||!this.containsPoint(t,e))return;const n=this.children;if(n.length>1e3)for(let s=n.length-1;s>=0;s--){const o=n[s],r=(null===(i=o.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?o.pickNode(t,e):void 0;if(r)return r}else if(n.length)for(let i=n.length-1;i>=0;i--){const s=n[i].pickNode(t,e);if(s)return s}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const n=i.findNodes(t);n&&e.push(...n)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=N.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this._dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:s,translationY:o,scalingCenterX:r,scalingCenterY:a,rotationCenterX:l,rotationCenterY:h}=this;N.updateTransformMatrix(t,e,i,n,s,o,{scalingCenterX:r,scalingCenterY:a,rotationCenterX:l,rotationCenterY:h}),t.inverseTo(this.inverseMatrix),this._dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=R.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:n,width:s,height:o}=e,r=this.transformPoint(i,n),a=this.transformPoint(i+s,n+o);t.clearRect(r.x,r.y,a.x-r.x,a.y-r.y)}markDirty(t,e=R.TRIVIAL,i=e){this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if((this._dirty!==R.NONE||e)&&(this._dirty=R.NONE,i))for(const t of this.children)t.markClean()}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=R.NONE||this._dirtyTransform?1:0,i=this.visible?1:0;for(const n of this._children){const{count:s,visibleCount:o,dirtyCount:r}=n.nodeCount;t+=s,i+=o,e+=r}return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}function z(t,e){let i=0;return"number"==typeof t&&"number"==typeof e?i=t-e:"string"==typeof t&&"string"==typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function j(t,e,i){const n=t=>"function"==typeof t?t():t;for(const s in t){const o=i(n(t[s]),n(e[s]));if(0!==o)return o}return 0}B._nextSerialNumber=0,P([T({type:"transform"})],B.prototype,"scalingX",void 0),P([T({type:"transform"})],B.prototype,"scalingY",void 0),P([T({type:"transform"})],B.prototype,"scalingCenterX",void 0),P([T({type:"transform"})],B.prototype,"scalingCenterY",void 0),P([T({type:"transform"})],B.prototype,"rotationCenterX",void 0),P([T({type:"transform"})],B.prototype,"rotationCenterY",void 0),P([T({type:"transform"})],B.prototype,"rotation",void 0),P([T({type:"transform"})],B.prototype,"translationX",void 0),P([T({type:"transform"})],B.prototype,"translationY",void 0),P([T({redraw:R.MAJOR,changeCb:t=>t.visibilityChanged()})],B.prototype,"visible",void 0),P([T({redraw:R.TRIVIAL,changeCb:F})],B.prototype,"zIndex",void 0),P([T({redraw:R.TRIVIAL,changeCb:F})],B.prototype,"zIndexSubOrder",void 0);const W={};function K(t,e){W[e]||(t(),W[e]=!0)}const G={debug(...t){console.log(...t)},warn(t,...e){console.warn("AG Charts - "+t,...e)},error(t,...e){"object"==typeof t?console.error("AG Charts error",t,...e):console.error("AG Charts - "+t,...e)},warnOnce(t,...e){K(()=>G.warn(t,...e),"Logger.warn: "+t)},errorOnce(t,...e){K(()=>G.error(t,...e),"Logger.warn: "+t)}};var X=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Y extends B{constructor(t){var e;super(),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:n,name:s}=null!==(i=this.opts)&&void 0!==i?i:{},o=()=>this.getComputedOpacity(),r=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:n,name:s,getComputedOpacity:o,getVisibility:r})}}getComputedOpacity(){let t=1,e=this;do{e instanceof Y&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t,e=R.TRIVIAL){const i=e<=R.MINOR?R.TRIVIAL:e;super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),Y.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:n}={}}=this,{_debug:{consoleLog:s=!1}={}}=this,{dirty:o,dirtyZIndex:r,layer:a,children:l,clipRect:h}=this;let{ctx:c,forceRender:d,clipBBox:u}=t;const{resized:p,stats:g}=t,f=c.getTransform(),m=o>=R.MINOR||r||p,y=m||l.some(t=>t.dirty>=R.TRIVIAL);if(n&&s&&G.debug({name:n,group:this,isDirty:m,isChildDirty:y,renderCtx:t,forceRender:d}),a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)?t.isInfinite()||(d=!1):(d=!0,this.lastBBox=t)}if(!m&&!y&&!d){if(n&&s&&g){const e=this.nodeCount;G.debug({name:n,result:"skipping",renderCtx:t,counts:e,group:this})}return a&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1})}const v=this.visible;if(a){if(c=a.context,c.save(),c.resetTransform(),d=!0,a.clear(),u){const{width:e,height:i,x:o,y:r}=u;s&&G.debug({name:n,clipBBox:u,ctxTransform:c.getTransform(),renderCtx:t,group:this}),this.clipCtx(c,o,r,e,i)}c.setTransform(f)}else c.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(c),h){const{x:e,y:i,width:o,height:r}=h;c.save(),s&&G.debug({name:n,clipRect:h,ctxTransform:c.getTransform(),renderCtx:t,group:this}),this.clipCtx(c,e,i,o,r),u=this.matrix.inverse().transformBBox(h)}r&&(this.sortChildren(),d=!0);const b=d!==t.forceRender||u!==t.clipBBox||c!==t.ctx?Object.assign(Object.assign({},t),{ctx:c,forceRender:d,clipBBox:u}):t;let x=0;for(const t of l)t.visible&&v?d||t.dirty!==R.NONE?(c.save(),t.render(b),c.restore()):g&&(x+=t.nodeCount.count):(t.markClean(),g&&(x+=t.nodeCount.count));if(g&&(g.nodesSkipped+=x),super.render(t),h&&c.restore(),a&&(g&&g.layersRendered++,c.restore(),a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),n&&s&&g){const e=this.nodeCount;G.debug({name:n,result:"rendered",skipped:x,renderCtx:t,counts:e,group:this})}}sortChildren(){this.dirtyZIndex=!1,this.children.sort((t,e)=>{var i,n;return j([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.serialNumber],z)})}clipCtx(t,e,i,n,s){t.beginPath(),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+s),t.lineTo(e,i+s),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,s=-1/0;return t.forEach(t=>{if(!t.visible)return;const o=t.computeTransformedBBox();if(!o)return;const r=o.x,a=o.y;r<e&&(e=r),a<n&&(n=a),r+o.width>i&&(i=r+o.width),a+o.height>s&&(s=a+o.height)}),new C(e,n,i-e,s-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}Y.className="Group",X([T({convertor:t=>Math.min(1,Math.max(0,t))})],Y.prototype,"opacity",void 0);class H{constructor({width:t=600,height:e=300,overrideDevicePixelRatio:i}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(t,e),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.setPixelRatio(i),this.resize(t,e)}static isSupported(){return null!=window.OffscreenCanvas}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!=t?t:window.devicePixelRatio;O()||(e=1),M.overrideScale(this.context,e),this._pixelRatio=e}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:n,pixelRatio:s}=this;i.width=Math.round(t*s),i.height=Math.round(e*s),n.resetTransform(),this._width=t,this._height=e}}function V(t){const e="undefined"!=typeof window?window:void 0;return null==e?void 0:e[t]}var $=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class U{constructor(t){var e,i,n;this.id=E(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug={dirtyTree:!1,stats:!1,renderBoundingBoxes:!1,consoleLog:!1,sceneNodeHighlight:[]};const{document:s=window.document,mode:o=(null!==(e=V("agChartsSceneRenderModel"))&&void 0!==e?e:"adv-composite"),width:r,height:a,overrideDevicePixelRatio:l}=t;this.overrideDevicePixelRatio=l,this.opts={document:s,mode:o},this.debug.consoleLog=!0===V("agChartsDebug"),this.debug.stats=null!==(i=V("agChartsSceneStats"))&&void 0!==i&&i,this.debug.dirtyTree=null!==(n=V("agChartsSceneDirtyTree"))&&void 0!==n&&n,this.debug.sceneNodeHighlight=function(){var t;let e=null!==(t=V("agChartsSceneDebug"))&&void 0!==t?t:[];"string"==typeof e&&(e=[e]);const i=[];return e.forEach(t=>{"layout"===t?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(t)}),i}(),this.canvas=new M({document:s,width:r,height:a,overrideDevicePixelRatio:l})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,n=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||n||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite","dom-composite","adv-composite"].includes(i))return;const{zIndex:n=this._nextZIndex++,name:s,zIndexSubOrder:o,getComputedOpacity:r,getVisibility:a}=t,{width:l,height:h,overrideDevicePixelRatio:c}=this,d="dom-composite"===i,u="adv-composite"===i&&H.isSupported()?new H({width:l,height:h,overrideDevicePixelRatio:c}):new M({document:this.opts.document,width:l,height:h,domLayer:d,zIndex:n,name:s,overrideDevicePixelRatio:c}),p={id:this._nextLayerId++,name:s,zIndex:n,zIndexSubOrder:o,canvas:u,getComputedOpacity:r,getVisibility:a};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(p),this.sortLayers(),d){const t=this.layers.map(t=>t.canvas).filter(t=>t instanceof M),i=t.findIndex(t=>t===u);(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",u.element)}return this.debug.consoleLog&&G.debug({layers:this.layers}),p.canvas}removeLayer(t){const e=this.layers.findIndex(e=>e.canvas===t);e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug.consoleLog&&G.debug({layers:this.layers}))}moveLayer(t,e,i){const n=this.layers.find(e=>e.canvas===t);n&&(n.zIndex=e,n.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug.consoleLog&&G.debug({layers:this.layers}))}sortLayers(){this.layers.sort((t,e)=>{var i,n;return j([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(n=e.zIndexSubOrder)&&void 0!==n?n:[void 0,void 0],e.id],z)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){t!==this._root&&(this._root&&this._root._setLayerManager(),this._root=t,t&&(null===t.parent&&t.layerManager&&t.layerManager!==this&&(t.layerManager.root=null),t._setLayerManager(this)),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e;return $(this,void 0,void 0,(function*(){const{debugSplitTimes:i=[performance.now()],extraDebugStats:n={}}=null!=t?t:{},{canvas:s,canvas:{context:o},root:r,layers:a,pendingSize:l,opts:{mode:h}}=this;if(l&&(this.canvas.resize(...l),this.layers.forEach(t=>t.canvas.resize(...l)),this.pendingSize=void 0),r&&!r.visible)return void(this._dirty=!1);if(r&&!this.dirty)return this.debug.consoleLog&&G.debug("no-op",{redrawType:R[r.dirty],tree:this.buildTree(r)}),void this.debugStats(i,o,void 0,n);const c={ctx:o,forceRender:!0,resized:!!l,debugNodes:{}};"detailed"===this.debug.stats&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let d=!1;if((!r||r.dirty>=R.TRIVIAL)&&(d=!0,s.clear()),r&&this.debug.dirtyTree){const{dirtyTree:t,paths:e}=this.buildDirtyTree(r);G.debug({dirtyTree:t,paths:e})}r&&d&&(this.debug.consoleLog&&G.debug("before",{redrawType:R[r.dirty],canvasCleared:d,tree:this.buildTree(r)}),r.visible&&(o.save(),r.render(c),o.restore())),"dom-composite"!==h&&a.length>0&&d&&(this.sortLayers(),o.save(),o.setTransform(1/s.pixelRatio,0,0,1/s.pixelRatio,0,0),a.forEach(({canvas:{imageSource:t,enabled:e},getComputedOpacity:i,getVisibility:n})=>{e&&n()&&(o.globalAlpha=i(),o.drawImage(t,0,0))}),o.restore()),null===(e=o.verifyDepthZero)||void 0===e||e.call(o),this._dirty=!1,this.debugStats(i,o,c.stats,n),this.debugSceneNodeHighlight(o,this.debug.sceneNodeHighlight,c.debugNodes),r&&this.debug.consoleLog&&G.debug("after",{redrawType:R[r.dirty],canvasCleared:d,tree:this.buildTree(r)})}))}debugStats(t,e,i,n={}){const s=performance.now();if(this.debug.stats){const o=t[0];t.push(s);const r=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e)=>Math.round(100*(e-t))/100+"ms",{layersRendered:l=0,layersSkipped:h=0,nodesRendered:c=0,nodesSkipped:d=0}=null!=i?i:{},u=t.map((e,i)=>i>0?a(t[i-1],e):null).filter(t=>null!=t).join(" + "),p=Object.entries(n).map(([t,e])=>`${t}: ${e}`).join(" ; "),g=[`${a(o,s)} (${u})`,""+p,"detailed"===this.debug.stats?"Layers: "+r(l,h):null,"detailed"===this.debug.stats?"Nodes: "+r(c,d):null].filter(t=>null!=t).map(t=>[t,M.getTextSize(t,e.font)]),f=Math.max(...g.map(([,{width:t}])=>t)),m=g.reduce((t,[,{height:e}])=>t+e,0);e.save(),e.fillStyle="white",e.fillRect(0,0,f,m),e.fillStyle="black";let y=0;for(const[t,i]of g)y+=i.height,e.fillText(t,2,y);e.restore()}}debugSceneNodeHighlight(t,e,i){var n;const s=t=>e=>!!t.test(e.id)||e instanceof Y&&null!=e.name&&t.test(e.name),o=t=>e=>t===e.id||e instanceof Y&&null!=e.name&&t===e.name;for(const t of e){if("string"==typeof t&&null!=i[t])continue;const e="string"==typeof t?o(t):s(t),r=null===(n=this.root)||void 0===n?void 0:n.findNodes(e);if(r&&0!==r.length)for(const t of r)t instanceof Y&&t.name?i[t.name]=t:i[t.id]=t;else G.debug(`no debugging node with id [${t}] in scene graph.`)}t.save();for(const[e,n]of Object.entries(i)){const i=n.computeTransformedBBox();i?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(i.x,i.y,i.width,i.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(e,i.x,i.y,i.width),t.fillText(e,i.x,i.y,i.width)):G.debug(`no bbox for debugged node [${e}].`)}t.restore()}buildTree(t){var e;const i=null!==(e=t instanceof Y?t.name:null)&&void 0!==e?e:t.id;return Object.assign({name:i,node:t,dirty:R[t.dirty]},t.children.map(t=>this.buildTree(t)).reduce((t,e)=>{let{name:i}=e;const{node:{visible:n,opacity:s,zIndex:o,zIndexSubOrder:r},node:a}=e;(!n||s<=0)&&(i=`(${i})`),a instanceof Y&&a.isLayer()&&(i=`*${i}*`);return t[[""+(null!=i?i:"<unknown>"),"z: "+o,r&&"zo: "+r.join(" / ")].filter(t=>!!t).join(" ")]=e,t},{}))}buildDirtyTree(t){var e;if(t.dirty===R.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map(t=>this.buildDirtyTree(t)).filter(t=>t.paths.length>0),n=null!==(e=t instanceof Y?t.name:null)&&void 0!==e?e:t.id,s=0===i.length?[n]:i.map(t=>t.paths).reduce((t,e)=>t.concat(e),[]).map(t=>`${n}.${t}`);return{dirtyTree:Object.assign({name:n,node:t,dirty:R[t.dirty]},i.map(t=>t.dirtyTree).filter(t=>void 0!==t.dirty).reduce((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t},{})),paths:s}}}U.className="Scene";const Z=2*Math.PI;function q(t){return t%=Z,t+=Z,t%=Z}function J(t){return t%=Z,(t+=Z)!==Z&&(t%=Z),t}function Q(t){return(t%=Z)<-Math.PI?t+=Z:t>=Math.PI&&(t-=Z),t}function tt(t){return t/180*Math.PI}class et extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:n}=this,s=q(tt(n+90)),o=Math.cos(s),r=Math.sin(s),a=e.width,l=e.height,h=e.x+.5*a,c=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,n=Math.atan2(l,a);let d;d=s<Math.PI/2?s:s<Math.PI?Math.PI-s:s<3*Math.PI/2?s-Math.PI:2*Math.PI-s;const u=e*Math.abs(Math.cos(d-n)),p=t.createLinearGradient(h+o*u,c+r*u,h-o*u,c-r*u);return i.forEach(t=>{p.addColorStop(t.offset,t.color)}),p}return"black"}}var it=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};const nt=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class st extends B{constructor(){super(...arguments),this.lastInstanceId=0,this.fillOpacity=1,this.strokeOpacity=1,this.fill=st.defaultStyles.fill,this.stroke=st.defaultStyles.stroke,this.strokeWidth=st.defaultStyles.strokeWidth,this.lineDash=st.defaultStyles.lineDash,this.lineDashOffset=st.defaultStyles.lineDashOffset,this.lineCap=st.defaultStyles.lineCap,this.lineJoin=st.defaultStyles.lineJoin,this.opacity=st.defaultStyles.opacity,this.fillShadow=st.defaultStyles.fillShadow}static createInstance(t){const e=Object.create(t);return e._setParent(void 0),e.id=t.id+"-Instance-"+String(++t.lastInstanceId),e}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,n=e.length;i<n;i++){const n=e[i];this[n]=t[n]}}restoreAllStyles(){const t=this.constructor.defaultStyles;for(const e in t)this[e]=t[e]}restoreOverriddenStyles(){const t=this.constructor.defaultStyles,e=Object.getPrototypeOf(t);for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=t[i])}updateGradient(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=nt.exec(t))){const t=parseFloat(e[1]),i=[],n=e[2],s=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let o;for(;o=s.exec(n);)i.push(o[0]);this.gradient=new et,this.gradient.angle=t,this.gradient.stops=i.map((t,e)=>({offset:e/(i.length-1),color:t}))}else this.gradient=void 0}align(t,e){var i,n,s;const o=null!==(s=null===(n=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===n?void 0:n.pixelRatio)&&void 0!==s?s:1,r=Math.round(t*o)/o;return null==e?r:0===e?0:e<1?Math.ceil(e*o)/o:Math.round((e+t)*o)/o-r}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,s=this.fillShadow;(null==s?void 0:s.enabled)&&(t.shadowColor=s.color,t.shadowOffsetX=s.xOffset*n,t.shadowOffsetY=s.yOffset*n,t.shadowBlur=s.blur*n)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}st.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),it([T({redraw:R.MINOR})],st.prototype,"fillOpacity",void 0),it([T({redraw:R.MINOR})],st.prototype,"strokeOpacity",void 0),it([T({redraw:R.MINOR,changeCb:t=>t.updateGradient()})],st.prototype,"fill",void 0),it([T({redraw:R.MINOR})],st.prototype,"stroke",void 0),it([T({redraw:R.MINOR})],st.prototype,"strokeWidth",void 0),it([T({redraw:R.MINOR})],st.prototype,"lineDash",void 0),it([T({redraw:R.MINOR})],st.prototype,"lineDashOffset",void 0),it([T({redraw:R.MINOR})],st.prototype,"lineCap",void 0),it([T({redraw:R.MINOR})],st.prototype,"lineJoin",void 0),it([T({redraw:R.MINOR,convertor:t=>Math.min(1,Math.max(0,t))})],st.prototype,"opacity",void 0),it([T({redraw:R.MINOR,checkDirtyOnAssignment:!0})],st.prototype,"fillShadow",void 0);var ot=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};function rt(t){const{redraw:e=R.MAJOR,changeCb:i}=null!=t?t:{};return T({redraw:e,type:"font",changeCb:i})}class at extends st{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=at.defaultStyles.textAlign,this.textBaseline=at.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=pt(this.text)}get font(){return this._dirtyFont&&(this._dirtyFont=!1,this._font=lt(this)),this._font}computeBBox(){return M.has.textMetrics?ct(this.lines,this.x,this.y,this):dt(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(M.has.textMetrics){const n=M.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=n.fontBoundingBoxAscent)&&void 0!==e?e:n.emHeightAscent)+(null!==(i=n.fontBoundingBoxDescent)&&void 0!==i?i:n.emHeightDescent)}return M.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===R.NONE&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:s,stroke:o,strokeWidth:r}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(s){e.fillStyle=s,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines((t,i,n)=>e.fillText(t,i,n))}if(o&&r){e.strokeStyle=o,e.lineWidth=r,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:n,lineJoin:s}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),n&&(e.lineCap=n),s&&(e.lineJoin=s),this.renderLines((t,i,n)=>e.strokeText(t,i,n))}super.render(t)}renderLines(t){const{lines:e,x:i,y:n}=this,s=this.lines.map(t=>this.getLineHeight(t));let o=-(s.reduce((t,e)=>t+e,0)-s[0])*ut(this.textBaseline);for(let r=0;r<e.length;r++)t(e[r],i,n+o),o+=s[r]}static wrap(t,e,i,n,s){const o=function(t){const e=new Map,i=e=>M.getTextSize(e,t);return{size:i,width:t=>{if(e.has(t))return e.get(t);const{width:n}=i(t);return e.set(t,n),n}}}(lt(n)),r=t.split(/\r?\n/g);if(0===r.length)return"";if("never"===s)return at.truncateLine(r[0],e,o,!1);const a=[];let l=0;for(const t of r){const r=at.wrapLine(t,e,i,o,n,s,l);if(a.push(r.result),l=r.cumulativeHeight,r.truncated)break}return a.join("\n").trim()}static wrapLine(t,e,i,n,s,o,r){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:r};const a=n.size(t);if(a.width<=e)return{result:t,truncated:!1,cumulativeHeight:r+a.height};if(a.height>i||n.width("W")>e)return{result:"",truncated:!0,cumulativeHeight:r};const l=t.split(/\s+/g),h=at.wrapLineSequentially(l,e,i,n,s,o,r);r=h.cumulativeHeight;let{lines:c}=h;if(!h.wordsBrokenOrTruncated&&!h.linesTruncated){const t=h.lines.length,i=at.wrapLineBalanced(l,e,n,t);i.length===c.length&&(c=i)}return{result:c.map(t=>t.join(" ")).join("\n"),truncated:h.linesTruncated,cumulativeHeight:r}}static breakWord(t,e,i,n,s){const o=e=>at.punctuationMarks.includes(t[e]),r=n?s.width("-"):0,a=[];let l=0,h=0;for(let n=0;n<t.length;n++){const o=t[n],c=s.width(o);l+c+r>(0===h?e:i)&&(a.push(n),l=0,h++),l+=c}const c=[];let d=0;for(const e of a){let i=t.substring(d,e);n&&i.length>0&&!o(e-1)&&!o(e)&&(i+="-"),c.push(i),d=e}return c.push(t.substring(d)),c}static truncateLine(t,e,i,n){const s=i.width(t);if(s<e&&!n)return t;const o=i.width("\u2026");if(s+o<=e)return t+"\u2026";let r,a,l=Math.floor(t.length*e/s)+1;do{r=t.substring(0,l),a=i.width(r)}while(--l>=0&&a+o>e);return r+"\u2026"}static wrapLineSequentially(t,e,i,n,s,o,r){const{fontSize:a,lineHeight:l=a*at.defaultLineHeightRatio}=s,h="always"===o||"hyphenate"===o,c="hyphenate"===o,d=n.width(" ");let u=!1,p=!1;const g=[];let f=[],m=0;const y=()=>{const t=r+l;if(t>=i){const t=f.join(" "),i=at.truncateLine(t,e,n,!0);return f.splice(0,f.length,i),p=!0,!1}return f=[],m=0,r=t,g.push(f),!0};if(!y())return{lines:g,linesTruncated:!0,wordsBrokenOrTruncated:u,cumulativeHeight:r};for(let i=0;i<t.length;i++){const s=t[i],o=n.width(s),r=0===f.length?0:d,a=m+r+o;if(a<=e)f.push(s),m=a;else if(o<=e){if(!y())break;f.push(s),m=o}else{if(u=!0,!h){if(!y())break;const o=at.truncateLine(s,e,n,!0);f.push(o),i<t.length-1&&(p=!0);break}{const t=e-m-r,i=at.breakWord(s,t,e,c,n);let o=!1;for(let t=0;t<i.length;t++){const e=i[t];if(e&&f.push(e),t===i.length-1)m=n.width(e);else if(!y()){o=!0;break}}if(o)break}}}return{lines:g,linesTruncated:p,wordsBrokenOrTruncated:u,cumulativeHeight:r}}static wrapLineBalanced(t,e,i,n){const s=t.reduce((t,e)=>t+i.width(e),0),o=i.width(" "),r=(s+o*(t.length-n-2))/n,a=[];let l=[],h=i.width(t[0]),c=!0;for(const n of t){const t=i.width(n);if(c){l=[],l.push(n),h=t,c=!1,a.push(l);continue}const s=h+o+t;s<=r?(l.push(n),h=s):s<=e?(l.push(n),c=!0):(l=[n],h=t,a.push(l))}return a}}function lt(t){const{fontFamily:e,fontSize:i,fontStyle:n,fontWeight:s}=t;return[null!=n?n:"",null!=s?s:"",i+"px",e].join(" ").trim()}function ht(t,e,i,n){return M.has.textMetrics?ct(t,e,i,n):dt(t,e,i,n)}function ct(t,e,i,n){var s,o;let r=0,a=0,l=0,h=0,c=0;const d=lt(n),{lineHeight:u,textBaseline:p=at.defaultStyles.textBaseline,textAlign:g=at.defaultStyles.textAlign}=n;for(let e=0;e<t.length;e++){const i=M.measureText(t[e],d,p,g);r=Math.max(r,i.actualBoundingBoxLeft),l=Math.max(l,i.width),0==e?(a+=i.actualBoundingBoxAscent,h+=i.actualBoundingBoxAscent):c+=null!==(s=i.fontBoundingBoxAscent)&&void 0!==s?s:i.emHeightAscent,e==t.length-1?h+=i.actualBoundingBoxDescent:c+=null!==(o=i.fontBoundingBoxDescent)&&void 0!==o?o:i.emHeightDescent}return void 0!==u&&(c=(t.length-1)*u),h+=c,a+=c*ut(p),new C(e-r,i-a,l,h)}function dt(t,e,i,n){let s=0,o=0,r=0;const a=lt(n),{lineHeight:l,textBaseline:h=at.defaultStyles.textBaseline,textAlign:c=at.defaultStyles.textAlign}=n;if(t.length>0){const e=M.getTextSize(t[0],a);s=e.width,o=e.height}for(let e=1;e<t.length;e++){const i=M.getTextSize(t[e],a);s=Math.max(s,i.width),r+=null!=l?l:i.height}switch(c){case"end":case"right":e-=s;break;case"center":e-=s/2}switch(h){case"alphabetic":i-=.7*o+.5*r;break;case"middle":i-=.45*o+.5*r;break;case"ideographic":i-=o+r;break;case"hanging":i-=.2*o+.5*r;break;case"bottom":i-=o+r}return new C(e,i,s,o+r)}function ut(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function pt(t){return"string"==typeof t?t.split(/\r?\n/g):[]}at.className="Text",at.defaultLineHeightRatio=1.15,at.defaultStyles=Object.assign({},st.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),at.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],ot([T({redraw:R.MAJOR})],at.prototype,"x",void 0),ot([T({redraw:R.MAJOR})],at.prototype,"y",void 0),ot([T({redraw:R.MAJOR,changeCb:t=>t._setLines()})],at.prototype,"text",void 0),ot([rt()],at.prototype,"fontStyle",void 0),ot([rt()],at.prototype,"fontWeight",void 0),ot([rt()],at.prototype,"fontSize",void 0),ot([rt()],at.prototype,"fontFamily",void 0),ot([T({redraw:R.MAJOR})],at.prototype,"textAlign",void 0),ot([T({redraw:R.MAJOR})],at.prototype,"textBaseline",void 0),ot([T({redraw:R.MAJOR})],at.prototype,"lineHeight",void 0);class gt{constructor(){this.allEventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const{allEventListeners:i}=this;let n=i.get(t);n||(n=new Set,i.set(t,n)),n.has(e)||n.add(e)}removeEventListener(t,e){const{allEventListeners:i}=this,n=i.get(t);n&&(n.delete(e),0===n.size&&i.delete(t))}hasEventListener(t){return this.allEventListeners.has(t)}clearEventListeners(){this.allEventListeners.clear()}fireEvent(t){const e=this.allEventListeners.get(t.type);null==e||e.forEach(e=>e(t))}}const ft=t=>"string"==typeof t,mt=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&ft(t.toString());function yt(t){return ft(t)||mt(t)}function vt(t){return xt(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&xt(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function bt(t,e){return e&&vt(t)?t:e?void 0:yt(t)?t:String(t)}const xt=t=>"number"==typeof t&&Number.isFinite(t);class kt{constructor(t,e,i,n=1){this.r=Math.min(1,Math.max(0,t||0)),this.g=Math.min(1,Math.max(0,e||0)),this.b=Math.min(1,Math.max(0,i||0)),this.a=Math.min(1,Math.max(0,n||0))}static validColorString(t){return t.indexOf("#")>=0?!!kt.parseHex(t):t.indexOf("rgb")>=0?!!kt.stringToRgba(t):!!kt.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return kt.fromHexString(t);const e=kt.nameToHex[t.toLowerCase()];if(e)return kt.fromHexString(e);if(t.indexOf("rgb")>=0)return kt.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return kt.fromString(t)}catch(e){return G.warnOnce(`invalid color string: '${t}'.`),kt.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map(t=>parseInt(t,16)).map(t=>t+16*t)}if((null==e?void 0:e.length)>=3&&e.every(t=>t>=0))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=kt.parseHex(t);if(e){const[t,i,n,s]=e;return new kt(t/255,i/255,n/255,s/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let n=0;n<t.length;n++){const s=t[n];if(e||"("!==s){if(")"===s){i=n;break}}else e=n}const n=e&&i&&t.substring(e+1,i);if(!n)return;const s=n.split(","),o=[];for(let t=0;t<s.length;t++){const e=s[t];let i=parseFloat(e);if(isNaN(i))return;e.indexOf("%")>=0?(i=Math.max(0,Math.min(100,i)),i/=100):3===t?i=Math.max(0,Math.min(1,i)):(i=Math.max(0,Math.min(255,i)),i/=255),o.push(i)}return o}static fromRgbaString(t){const e=kt.stringToRgba(t);if(e){if(3===e.length)return new kt(e[0],e[1],e[2]);if(4===e.length)return new kt(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new kt(t[0],t[1],t[2],t[3]);if(3===t.length)return new kt(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i,n=1){const s=kt.HSBtoRGB(t,e,i);return new kt(s[0],s[1],s[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+kt.padHex(Math.round(255*this.r).toString(16))+kt.padHex(Math.round(255*this.g).toString(16))+kt.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=kt.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(t=3){const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return kt.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),s=Math.max(t,e,i);let o=NaN;if(n!==s){const r=s-n,a=(s-t)/r,l=(s-e)/r,h=(s-i)/r;o=t===s?h-l:e===s?2+a-h:4+l-a,o/=6,o<0&&(o+=1)}return[360*o,0!==s?(s-n)/s:0,s]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,s=0,o=0;if(0===e)n=s=o=i;else{const r=6*(t-Math.floor(t)),a=r-Math.floor(r),l=i*(1-e),h=i*(1-e*a),c=i*(1-e*(1-a));switch(r>>0){case 0:n=i,s=c,o=l;break;case 1:n=h,s=i,o=l;break;case 2:n=l,s=i,o=c;break;case 3:n=l,s=h,o=i;break;case 4:n=c,s=l,o=i;break;case 5:n=i,s=l,o=h}}return[n,s,o]}derive(t,e,i,n){const s=kt.RGBtoHSB(this.r,this.g,this.b);let o=s[2];0==o&&i>1&&(o=.05);const r=((s[0]+t)%360+360)%360,a=Math.max(Math.min(s[1]*e,1),0);o=Math.max(Math.min(o*i,1),0);const l=Math.max(Math.min(this.a*n,1),0),h=kt.HSBtoRGB(r,a,o);return h.push(l),kt.fromArray(h)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=kt.tryParseFromString(t),n=kt.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new kt(e(i.r,n.r),e(i.g,n.g),e(i.b,n.b),e(i.a,n.a)).toString()}}}kt.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const St=Symbol("BREAK");function wt(t,e){return(i,n)=>{const s=n.toString(),o="__"+s,{getters:r,setters:a}=function(t,e,i,n){null==Object.getOwnPropertyDescriptor(t,"__decorator_config")&&Object.defineProperty(t,"__decorator_config",{value:{}});const s=t.__decorator_config;if(null!=s[i])return s[i];s[i]={setters:[],getters:[]};const o=Object.getOwnPropertyDescriptor(t,e),r=null==o?void 0:o.set,a=null==o?void 0:o.get;return Object.defineProperty(t,e,{set:function(t){var o,l;const h=null!==(l=null===(o=s[i])||void 0===o?void 0:o.setters)&&void 0!==l?l:[];let c;h.some(t=>t.length>2)&&(c=a?a.call(this):this[n]);for(const i of h)if((t=i(this,e,t,c))===St)return;r?r.call(this,t):this[n]=t},get:function(){var t,o;let r=a?a.call(this):this[n];for(const n of null!==(o=null===(t=s[i])||void 0===t?void 0:t.getters)&&void 0!==o?o:[])if(r=n(this,e,r),r===St)return;return r},enumerable:!0,configurable:!1}),s[i]}(i,n,s,o);a.push(t),e&&r.splice(0,0,e)}}function Dt(t){return wt((e,i,n)=>{var s,o,r;if(t(n,{target:e}))return n;const a=i.toString().replace(/^_*/,"");let l=null!==(o=null===(s=e.constructor)||void 0===s?void 0:s.className)&&void 0!==o?o:null===(r=e.constructor)||void 0===r?void 0:r.name;(null==l?void 0:l.length)<3&&(l=null);const h=l?`of [${l}] `:"";return t.message?G.warn(`Property [${a}] ${h}cannot be set to [${JSON.stringify(n)}]; ${t.message}, ignoring.`):G.warn(`Property [${a}] ${h}cannot be set to [${JSON.stringify(n)}], ignoring.`),St})}function Ot(t,e){return t.message=e,t}const Mt=(t,e,i)=>void 0===t||i(t,e),Ct=(t,e)=>Ot((i,n)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every(t=>e(t,n))),"expecting an Array"),Nt=t=>Ot((e,i)=>Mt(e,i,Ct(t)),"expecting an optional Array"),Lt=(...t)=>Ot((e,i)=>t.every(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" AND ")),Et=t=>null!=t&&!isNaN(t),Rt=t=>Ot((e,i)=>!Et(e)||!Et(i.target[t])||e<i.target[t],"expected to be less than "+t),It=t=>Ot((e,i)=>!Et(e)||!Et(i.target[t])||e>i.target[t],"expected to be greater than "+t),Tt=Ot(t=>"function"==typeof t,"expecting a Function"),At=Ot((t,e)=>Mt(t,e,Tt),"expecting an optional Function"),_t=Ot(t=>!0===t||!1===t,"expecting a Boolean"),Pt=Ot((t,e)=>Mt(t,e,_t),"expecting an optional Boolean"),Ft=Ot(t=>"string"==typeof t,"expecting a String"),Bt=Ot((t,e)=>Mt(t,e,Ft),"expecting an optional String"),zt=Ot(t=>t instanceof Date&&!isNaN(+t),"expecting a Date object"),jt=Ot((t,e)=>Mt(t,e,zt),"expecting an optional Date");Ot(Ct(void 0,zt),"expecting an Array of Date objects");const Wt=$t(0),Kt=((...t)=>Ot((e,i)=>t.some(t=>t(e,i)),t.map(t=>t.message).filter(t=>null!=t).join(" OR ")))(jt,Ot((t,e)=>Mt(t,e,Wt),"expecting an optional number")),Gt="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Xt=Ot(t=>"string"==typeof t&&kt.validColorString(t),"expecting a color String. "+Gt),Yt=Ot((t,e)=>Mt(t,e,Xt),"expecting an optional color String. "+Gt),Ht=Ot(Ct(void 0,Xt),"expecting an Array of color strings. "+Gt),Vt=Ot((t,e)=>Mt(t,e,Ht),"expecting an optional Array of color strings. "+Gt);function $t(t,e){return Ot(i=>"number"==typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function Ut(t,e){return Ot((i,n)=>Mt(i,n,$t(t,e)),"expecting an optional finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}function Zt(t,e){return Ot(i=>"number"==typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),"expecting a finite Number"+((void 0!==t?", more than or equal to "+t:"")+(void 0!==e?", less than or equal to "+e:"")))}const qt=Ot(Ct(void 0,$t()),"expecting an Array of numbers"),Jt=Ot((t,e)=>Mt(t,e,qt),"expecting an optional Array of numbers"),Qt=Ot(Ct(void 0,Ft),"expecting an Array of strings");function te(...t){return Ot(e=>"string"==typeof e&&t.indexOf(e)>=0,"expecting one of: "+t.join(", "))}Ot((t,e)=>Mt(t,e,Qt),"expecting an optional Array of strings");const ee=Ot(Ct(void 0,_t),"expecting an Array of boolean values");Ot((t,e)=>Mt(t,e,ee),"expecting an optional Array of boolean values");const ie=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],ne=Ot(t=>"normal"===t||"italic"===t||"oblique"===t,"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),se=Ot((t,e)=>Mt(t,e,ne),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),oe=Ot(t=>ie.includes(t),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),re=Ot((t,e)=>Mt(t,e,oe),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),ae=Ot(Ct(void 0,$t(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),le=Ot((t,e)=>Mt(t,e,ae),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),he=["butt","round","square"],ce=Ot(t=>he.includes(t),"expecting a line cap keyword such as 'butt', 'round' or 'square'");Ot((t,e)=>Mt(t,e,ce),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const de=["round","bevel","miter"],ue=Ot(t=>de.includes(t),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");Ot((t,e)=>Mt(t,e,ue),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const pe=["top","right","bottom","left"],ge=Ot(t=>pe.includes(t),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),fe=["exact","nearest"],me=Ot(t=>"number"==typeof t&&Number.isFinite(t)||fe.includes(t),"expecting an interaction range of 'exact', 'nearest' or a number"),ye=["never","always","hyphenate","on-space"],ve=Ot(t=>ye.includes(t),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', 'on-space'");var be,xe;function ke(t,e=[1/0,-1/0]){for(const i of t)"number"==typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function Se(t){return t.map(t=>null==t||"number"==typeof t||"string"==typeof t||"boolean"==typeof t?t:"object"==typeof t?JSON.stringify(t):t).join("-")}function we(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),xt(e)&&xt(i)?[e,i]:[])}!function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(be||(be={})),function(t){t.X="x",t.Y="y"}(xe||(xe={}));const De=Symbol("invalid");class Oe{constructor(t){var e;const{props:i}=t;let n=!0;for(const t of i){if("key"===t.type&&!n)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===t.type&&n&&(n=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=i.filter(t=>"key"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.values=i.filter(t=>"value"===t.type).map((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:!1})),this.aggregates=i.filter(t=>"aggregate"===t.type),this.groupProcessors=i.filter(t=>"group-value-processor"===t.type),this.propertyProcessors=i.filter(t=>"property-value-processor"===t.type),this.reducers=i.filter(t=>"reducer"===t.type),this.processors=i.filter(t=>"processor"===t.type);for(const{properties:t}of null!==(e=this.aggregates)&&void 0!==e?e:[])if(0!==t.length)for(const e of t){if("string"==typeof e&&!this.values.some(t=>t.property===e))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`);if("string"!=typeof e&&!this.values.some(t=>t.id===e.id))throw new Error(`AG Charts - internal config error: aggregate properties must match defined properties (${t}).`)}}resolveProcessedDataIndexById(t){const{keys:e,values:i}=this,n=[...e,...i].find(({id:e})=>e===t);if(n)return"key"===(null==n?void 0:n.type)||"value"===(null==n?void 0:n.type)?{type:n.type,index:n.index}:void 0}resolveProcessedDataDefById(t){const{keys:e,values:i}=this,n=[...e,...i].find(({id:e})=>e===t);if(n)return n}getDomain(t,e){const i=this.resolveProcessedDataIndexById(t);return i?e.domain["key"===i.type?"keys":"values"][i.index]:[]}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:n,groupProcessors:s,reducers:o,processors:r,propertyProcessors:a}=this,l=performance.now();for(const t of[...this.keys,...this.values])t.missing=!1;if(e&&0===this.keys.length)return;let h=this.extractData(t);e?h=this.groupData(h):i&&(h=this.groupData(h,i(h))),s.length>0&&this.postProcessGroups(h),n.length>0&&this.aggregateData(h),a.length>0&&this.postProcessProperties(h),o.length>0&&this.reduceData(h),r.length>0&&this.postProcessData(h);for(const t of[...this.keys,...this.values])t.missing&&G.warnOnce(`the key '${t.property}' was not found in at least one data element.`);const c=performance.now();return h.time=c-l,Oe.DEBUG()&&function(t){var e,i;const n=(t,e)=>{e.length>0&&(console.log(t),console.table(e))};if(console.log({processedData:t}),n("Key Domains",t.domain.keys),n("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce((t,e)=>{var i,n;const s=null!==(i=e.keys)&&void 0!==i?i:[],o=null!==(n=e.aggValues)&&void 0!==n?n:[],r=e.keys.map(()=>{}),a=null==o?void 0:o.map(()=>{});return t.push(...e.values.map((t,e)=>[...0===e?s:r,...null!=t?t:[],...0==e?o:a])),t},[]);n("Values",e)}else{const e=t.data.reduce((t,e)=>{var i;const n=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...n]),t},[]);n("Values",e)}}(h),h}valueIdxLookup(t){let e;if(e="string"==typeof t?this.values.findIndex(e=>e.property===t):this.values.findIndex(e=>e.id===t.id),e>=0)return e;throw new Error("AG Charts - configuration error, unknown property: "+t)}extractData(t){const{keys:e,values:i,opts:{dataVisible:n}}=this,{dataDomain:s,processValue:o}=this.initDataDomainProcessor(),r=new Array(n?t.length:0);let a=0;for(const s of t){const t=n?new Array(e.length):void 0;let l,h=0;for(const i of e){if(l=o(i,s,l),l===De)break;t&&(t[h++]=l)}if(l===De)continue;const c=n&&i.length>0?new Array(i.length):void 0;let d,u=0;for(const t of i){if(d=o(t,s,d),d===De)break;c&&(c[u++]=d)}d!==De&&(n&&(r[a++]={datum:s,keys:t,values:c}))}r.length=a;const l=t=>{var e;const i=s.get(null!==(e=t.id)&&void 0!==e?e:t.property).domain;return Array.isArray(i)&&i[0]>i[1]?[]:[...i]};return{type:"ungrouped",data:r,domain:{keys:e.map(t=>l(t)),values:i.map(t=>l(t))},indices:{keys:e.reduce((t,{property:e,index:i})=>(t[e]=i,t),{}),values:i.reduce((t,{property:e,index:i})=>(t[e]=i,t),{})},defs:{keys:e,values:i},time:0}}groupData(t,e){const i=new Map;for(const n of t.data){const{keys:t,values:s,datum:o}=n,r=e?e(n):t,a=Se(r);if(i.has(a)){const t=i.get(a);t.values.push(s),t.datum.push(o)}else i.set(a,{keys:r,values:[s],datum:[o]})}const n=new Array(i.size),s=new Array(i.size);let o=0;for(const[,{keys:t,values:e,datum:r}]of i.entries())s[o]=t,n[o++]={keys:t,values:e,datum:r};return Object.assign(Object.assign({},t),{type:"grouped",data:n,domain:Object.assign(Object.assign({},t.domain),{groups:s})})}aggregateData(t){var e,i,n,s,o,r,a;const{aggregates:l}=this;if(!l)return;const h=l.map(()=>[1/0,-1/0]),c=l.map(t=>t.properties.map(t=>this.valueIdxLookup(t))),d=l.map(t=>t.aggregateFunction),u=l.map(t=>t.groupAggregateFunction),p=l.map(t=>t.finalFunction);for(const l of t.data){let{values:g}=l;null!==(e=l.aggValues)&&void 0!==e||(l.aggValues=new Array(c.length)),"ungrouped"===t.type&&(g=[g]);let f=0;for(const t of c){let e=null!==(n=null===(i=u[f])||void 0===i?void 0:i.call(u))&&void 0!==n?n:ke([]);for(const i of g){const n=t.map(t=>i[t]),r=d[f](n,l.keys);r&&(e=null!==(o=null===(s=u[f])||void 0===s?void 0:s.call(u,r,e))&&void 0!==o?o:ke(r,e))}const c=(null!==(a=null===(r=p[f])||void 0===r?void 0:r.call(p,e))&&void 0!==a?a:e).map(t=>{return e=t,Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(1e4*e)/1e4;var e});ke(c,h[f]),l.aggValues[f++]=c}}t.domain.aggValues=h}postProcessGroups(t){const{groupProcessors:e}=this;if(e)for(const i of e){const e=i.properties.map(t=>this.valueIdxLookup(t)),n=i.adjust();if("grouped"===t.type)for(const i of t.data)for(const t of i.values)t&&n(t,e);else for(const i of t.data)i.values&&n(i.values,e)}}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:n}of e)i()(t,this.valueIdxLookup(n))}reduceData(t){var e;const{reducers:i}=this,n=i.map(t=>t.reducer()),s=i.map(t=>t.initialValue);for(const e of t.data){let t=0;for(const i of n)s[t]=i(s[t],e),t++}for(let n=0;n<s.length;n++)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[i[n].property]=s[n]}postProcessData(t){var e;const{processors:i}=this;for(const n of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[n.property]=n.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Map,n=new Map,s=(t,e,i)=>{"category"===e?i.set(t,{type:e,domain:new Set}):i.set(t,{type:e,domain:[1/0,-1/0]})},o=(n=i)=>(t.forEach(t=>{var e;return s(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,n)}),e.forEach(t=>{var e;return s(null!==(e=t.id)&&void 0!==e?e:t.property,t.valueType,n)}),n);o();return{dataDomain:i,processValue:(t,e,s)=>{var r,a,l,h,c;const d=t.property in e,u="missingValue"in t;t.missing||d||u||(t.missing=!0),i.has(null!==(r=t.id)&&void 0!==r?r:t.property)||o(i);let p=d?e[t.property]:t.missingValue;if(d){if(!(null===(l=null===(a=t.validation)||void 0===a?void 0:a.call(t,p))||void 0===l||l)){if(!("invalidValue"in t))return De;p=t.invalidValue}}t.processor&&(n.has(t)||n.set(t,t.processor()),p=null===(h=n.get(t))||void 0===h?void 0:h(p,s!==De?s:void 0));const g=i.get(null!==(c=t.id)&&void 0!==c?c:t.property);return"category"===(null==g?void 0:g.type)?g.domain.add(p):"range"===(null==g?void 0:g.type)&&(g.domain[0]>p&&(g.domain[0]=p),g.domain[1]<p&&(g.domain[1]=p)),p},initDataDomain:o}}}function Me(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(t=>null!=t).join(" ");G.warnOnce(i)}}Oe.DEBUG=()=>{var t;return null!==(t=[!0,"data-model"].includes(V("agChartsDebug")))&&void 0!==t&&t};var Ce=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};function Ne(t,e){var i,n,s,o;if("string"==typeof t)return t;e=null!=e?e:{};const{content:r=(null!==(i=e.content)&&void 0!==i?i:""),title:a=(null!==(n=e.title)&&void 0!==n?n:void 0),color:l=(null!==(s=e.color)&&void 0!==s?s:"white"),backgroundColor:h=(null!==(o=e.backgroundColor)&&void 0!==o?o:"#888")}=t;return`${a?`<div class="ag-chart-tooltip-title"\n        style="color: ${l}; background-color: ${h}">${a}</div>`:""}<div class="ag-chart-tooltip-content">${r}</div>`}const Le=["pointer","node"],Ee=Ot(t=>Le.includes(t),"expecting a position type keyword such as 'pointer' or 'node'");class Re{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}Ce([Dt(Ee)],Re.prototype,"type",void 0),Ce([Dt($t())],Re.prototype,"xOffset",void 0),Ce([Dt($t())],Re.prototype,"yOffset",void 0);class Ie{constructor(t,e,i){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.position=new Re,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=i;const n=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(n),this.element.classList.add("ag-chart-tooltip"),this.canvasElement=t,window.IntersectionObserver){const t=new IntersectionObserver(t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}if(Ie.tooltipDocuments.indexOf(e)<0){const t=e.createElement("style");t.innerHTML='\n.ag-chart-tooltip {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: black;\n    background: rgb(244, 244, 244);\n    border-radius: 5px;\n    box-shadow: 0 0 1px rgba(3, 3, 3, 0.7), 0.5vh 0.5vh 1vh rgba(3, 3, 3, 0.25);\n}\n\n.ag-chart-tooltip-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.ag-chart-tooltip-no-animation {\n    transition: none !important;\n}\n\n.ag-chart-tooltip-hidden {\n    visibility: hidden;\n}\n\n.ag-chart-tooltip-title {\n    font-weight: bold;\n    padding: 7px;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n    color: white;\n    background-color: #888888;\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px;\n}\n\n.ag-chart-tooltip-content {\n    padding: 7px;\n    line-height: 1.7em;\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    overflow: hidden;\n}\n\n.ag-chart-tooltip-content:empty {\n    padding: 0;\n    height: 7px;\n}\n\n.ag-chart-tooltip-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 6px solid #989898;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: #989898;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-tooltip-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid black;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-top-color: rgb(244, 244, 244);\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n',e.head.insertBefore(t,e.head.querySelector("style")),Ie.tooltipDocuments.push(e)}}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains("ag-chart-tooltip-hidden")}updateClass(t,e){const{element:i,class:n,lastClass:s,enableInteraction:o}=this,r=(t,e)=>{const n="ag-chart-tooltip-"+t;e?i.classList.add(n):i.classList.remove(n)};r("no-animation",!this.isVisible()&&!!t),r("no-interaction",!o),r("hidden",!t),r("arrow",!!e),n!==s&&(s&&i.classList.remove(s),n&&i.classList.add(n),this.lastClass=n)}show(t,e,i=!1){var n,s,o,r,a,l,h;const{element:c,canvasElement:d}=this;if(void 0!==e)c.innerHTML=e;else if(!c.innerHTML)return;const u=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(s=null===(n=t.position)||void 0===n?void 0:n.xOffset)&&void 0!==s?s:0,g=null!==(r=null===(o=t.position)||void 0===o?void 0:o.yOffset)&&void 0!==r?r:0,f=d.getBoundingClientRect(),m=f.left+t.offsetX-c.clientWidth/2+p,y=f.top+t.offsetY-c.clientHeight-8+g,v=this.getWindowBoundingBox(),b=v.x+v.width-c.clientWidth-1,x=v.y+v.height-c.clientHeight,k=u(v.x,m,b),S=u(v.y,y,x),w=!(k!==m||S!==y)&&!p&&!g,D=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:w;if(this.updateShowArrow(D),c.style.transform=`translate(${Math.round(k)}px, ${Math.round(S)}px)`,this.enableInteraction=null!==(h=t.enableInteraction)&&void 0!==h&&h,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=window.setTimeout(()=>{this.toggle(!0)},this.delay));this.toggle(!0)}getWindowBoundingBox(){return new C(0,0,window.innerWidth,window.innerHeight)}toggle(t){t||window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,n=Boolean(["","-title","-content"].filter(t=>null==i?void 0:i.contains("ag-chart-tooltip"+t)));return void 0!==i&&n}updateShowArrow(t){this._showArrow=t}}function Te(t,e=[0,0]){for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function Ae(t){return{properties:t,type:"aggregate",aggregateFunction:t=>Te(t)}}function _e(t,e){const i={properties:t,type:"aggregate",aggregateFunction:(t,i=[])=>{const n=i[1]-i[0];return e.aggregateFunction(t).map(t=>t/n)}};return e.groupAggregateFunction&&(i.groupAggregateFunction=e.groupAggregateFunction),i}Ie.tooltipDocuments=[],Ce([Dt(_t)],Ie.prototype,"enabled",void 0),Ce([Dt(Pt)],Ie.prototype,"showArrow",void 0),Ce([Dt(Bt)],Ie.prototype,"class",void 0),Ce([Dt($t(0))],Ie.prototype,"delay",void 0),Ce([function(t,e){const i=Me();return wt((n,s,o)=>(o!==n[t]&&(i(s.toString(),`Use [${t}] instead.`),n[t]=e?e(o):o),St),(e,n)=>(i(n.toString(),`Use [${t}] instead.`),e[t]))}("range",t=>t?"nearest":"exact")],Ie.prototype,"tracking",void 0),Ce([Dt(me)],Ie.prototype,"range",void 0);var Pe,Fe=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Be=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i};function ze(t,e,i={}){return Object.assign({property:t,type:"key",valueType:e?"range":"category",validation:t=>null!=bt(t,e)},i)}function je(t,e,i={}){return Object.assign({property:t,type:"value",valueType:e?"range":"category",validation:t=>null!=bt(t,e)},i)}function We(t,e,i={}){return Object.assign(Object.assign({},je(t,e,i)),{processor:()=>{let t=0;return e=>"number"!=typeof e||isNaN(e)?e:(t+=e,t)}})}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(Pe||(Pe={}));class Ke{constructor(t,e,i){this.type="nodeClick",this.event=t,this.datum=e.datum,this.seriesId=i.id}}class Ge extends Ke{}class Xe extends Ke{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class Ye{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0}}Fe([Dt(Yt)],Ye.prototype,"fill",void 0),Fe([Dt(Ut(0,1))],Ye.prototype,"fillOpacity",void 0),Fe([Dt(Yt)],Ye.prototype,"stroke",void 0),Fe([Dt(Ut(0))],Ye.prototype,"strokeWidth",void 0);class He{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}Fe([Dt(Ut(0))],He.prototype,"strokeWidth",void 0),Fe([Dt(Ut(0,1))],He.prototype,"dimOpacity",void 0),Fe([Dt(Pt)],He.prototype,"enabled",void 0);class Ve{constructor(){this.color="black"}}Fe([Dt(Yt)],Ve.prototype,"color",void 0);class $e{constructor(){this.item=new Ye,this.series=new He,this.text=new Ve}}class Ue{constructor(){this.enabled=!0,this.showArrow=void 0,this.interaction=new Ze,this.position=new Re}}Fe([Dt(_t)],Ue.prototype,"enabled",void 0),Fe([Dt(Pt)],Ue.prototype,"showArrow",void 0);class Ze{constructor(){this.enabled=!1}}Fe([Dt(_t)],Ze.prototype,"enabled",void 0);class qe extends gt{constructor(t){super(),this.id=E(this),this.rootGroup=new Y({name:"seriesRoot"}),this.directions=[xe.X,xe.Y],this.nodeDataRefresh=!0,this._data=void 0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this._declarationOrder=-1,this.highlightStyle=new $e,this.ctx=t.moduleCtx;const{useSeriesGroupLayer:e=!0,useLabelLayer:i=!1,pickModes:n=[Pe.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:s={},directionNames:o={}}=t,{rootGroup:r}=this;this.directionKeys=s,this.directionNames=o,this.contentGroup=r.appendChild(new Y({name:this.id+"-content",layer:e,zIndex:be.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,0]})),this.highlightGroup=r.appendChild(new Y({name:this.id+"-highlight",layer:!0,zIndex:be.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,15e3]})),this.highlightNode=this.highlightGroup.appendChild(new Y({name:"highlightNode"})),this.highlightLabel=this.highlightGroup.appendChild(new Y({name:"highlightLabel"})),this.highlightNode.zIndex=0,this.highlightLabel.zIndex=10,this.pickModes=n,i&&(this.labelGroup=r.appendChild(new Y({name:this.id+"-series-labels",layer:!0,zIndex:be.SERIES_LABEL_ZINDEX})))}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.nodeDataRefresh=!0}get data(){return this._data}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}getBandScalePadding(){return{inner:1,outer:0}}addChartEventListeners(){}destroy(){}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=null==e?void 0:e[i],s=[],o=(...t)=>{for(const e of t)r(e)},r=t=>{Array.isArray(t)?o(...t):"object"==typeof t?o(Object.values(t)):s.push(t)};return n?(n.forEach(t=>{const e=this[t];r(e)}),s):s}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){}getOpacity(t){const{highlightStyle:{series:{dimOpacity:e=1,enabled:i=!0}}}=this;if(!1===i||1===e)return 1;switch(this.isItemIdHighlighted(t)){case"no-highlight":case"highlighted":return 1;case"peer-highlighted":case"other-highlighted":return e}}getStrokeWidth(t,e){const{highlightStyle:{series:{strokeWidth:i,enabled:n=!0}}}=this;if(!1===n||void 0===i)return t;switch(this.isItemIdHighlighted(e)){case"highlighted":return i;case"no-highlight":case"other-highlighted":case"peer-highlighted":return t}}isItemIdHighlighted(t){var e;const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),{series:n,itemId:s}=null!=i?i:{};return null!=n?n!==this?"other-highlighted":void 0===s?"highlighted":t&&i!==t&&s!==t.itemId?"peer-highlighted":"highlighted":"no-highlight"}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:s}=this;if(n&&s.visible)for(const n of i){if(e&&!e.includes(n))continue;let i=void 0;switch(n){case Pe.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case Pe.NEAREST_BY_MAIN_AXIS_FIRST:case Pe.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,n===Pe.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case Pe.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:n,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){const i=this.getNodeClickEvent(t,e);this.fireEvent(i)}fireNodeDoubleClickEvent(t,e){const i=this.getNodeDoubleClickEvent(t,e);this.fireEvent(i)}getNodeClickEvent(t,e){return new Ge(t,e,this)}getNodeDoubleClickEvent(t,e){return new Xe(t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0}isEnabled(){return this.visible}fixNumericExtent(t,e){var i;const n=we(t);if(0===n.length)return n;let[s,o]=n;if(s===o){const t=null!==(i=null==e?void 0:e.calculatePadding(s,o))&&void 0!==i?i:1;s-=t,o+=t}return[s,o]}}qe.highlightedZIndex=1e12,Fe([Dt(Ft)],qe.prototype,"id",void 0),Fe([Dt(_t)],qe.prototype,"_visible",void 0),Fe([Dt(_t)],qe.prototype,"showInLegend",void 0),Fe([Dt(Ft)],qe.prototype,"cursor",void 0),Fe([Dt(me)],qe.prototype,"nodeClickRange",void 0);var Je=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Qe{constructor(t=0,e=t,i=t,n=e){this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}}Je([Dt($t(0))],Qe.prototype,"top",void 0),Je([Dt($t(0))],Qe.prototype,"right",void 0),Je([Dt($t(0))],Qe.prototype,"bottom",void 0),Je([Dt($t(0))],Qe.prototype,"left",void 0);class ti{static init(){const t=window.ResizeObserver;if(t)this.resizeObserver=new t(t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}});else{const t=()=>{this.elements.forEach((t,e)=>{this.checkClientSize(e,t)})};window.setInterval(t,100)}this.ready=!0}static checkSize(t,e,i,n){t&&(t.size&&i===t.size.width&&n===t.size.height||(t.size={width:i,height:n},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(),this.unobserve(t),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e}),this.checkClientSize(t,{cb:e})}static unobserve(t){this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t)}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,n=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,n)}}function ei(t,e,i,n,s){let o=t.x;t.x<e?o=e:t.x>e+n&&(o=e+n);let r=t.y;t.y<i?r=i:t.y>i+s&&(r=i+s);const a=t.x-o,l=t.y-r;return Math.sqrt(a*a+l*l)<=.5*t.size}function ii(t,e,i,n,s){const o=t.x+t.width>e&&t.x<e+n,r=t.y+t.height>i&&t.y<i+s;return o&&r}ti.elements=new Map,ti.ready=!1;var ni,si=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};function oi(t,e){let i,n,s=0,o=!1;const r=()=>o,a=()=>{o=!1,null==n||n(),n=void 0,i=void 0,s>0&&t(l)},l=()=>{const t=s;s=0,o=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(){0!==s||r()||t(l),s++},await(){return si(this,void 0,void 0,(function*(){if(r())for(i||(i=new Promise(t=>{n=t}));r();)yield i}))}}}function ri(t,e,i,n){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const n=e*e-4*t*i,s=[];if(0===n){const i=-e/(2*t);i>=0&&i<=1&&s.push(i)}else if(n>0){const i=Math.sqrt(n),o=(-e-i)/(2*t),r=(-e+i)/(2*t);o>=0&&o<=1&&s.push(o),r>=0&&r<=1&&s.push(r)}return s}(e,i,n);const s=e/t,o=i/t,r=(3*o-s*s)/9,a=(9*s*o-27*(n/t)-2*s*s*s)/54,l=r*r*r+a*a,h=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),1/3),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),1/3),n=Math.abs(Math.sqrt(3)*(e-i)/2),o=-1/3*s+(e+i);if(o>=0&&o<=1&&h.push(o),0===n){const t=-1/3*s-(e+i)/2;t>=0&&t<=1&&h.push(t)}}else{const t=Math.acos(a/Math.sqrt(-r*r*r)),e=1/3*s,i=2*Math.sqrt(-r),n=i*Math.cos(1/3*t)-e,o=i*Math.cos(1/3*(t+2*Math.PI))-e,l=i*Math.cos(1/3*(t+4*Math.PI))-e;n>=0&&n<=1&&h.push(n),o>=0&&o<=1&&h.push(o),l>=0&&l<=1&&h.push(l)}return h}function ai(t,e,i,n,s,o,r,a){const l=(i-t)*(a-o)-(n-e)*(r-s);if(0===l)return null;const h=((r-s)*(e-o)-(t-s)*(a-o))/l,c=((i-t)*(e-o)-(n-e)*(t-s))/l;return h>=0&&h<=1&&c>=0&&c<=1?{x:t+h*(i-t),y:e+h*(n-e)}:null}function li(t,e,i,n,s,o,r,a,l,h,c,d){const u=[],p=h-d,g=c-l,f=l*(d-h)-h*(c-l),m=hi(t,i,s,r),y=hi(e,n,o,a),v=ri(p*m[0]+g*y[0],p*m[1]+g*y[1],p*m[2]+g*y[2],p*m[3]+g*y[3]+f);for(const t of v){const e=t*t,i=t*e,n=m[0]*i+m[1]*e+m[2]*t+m[3],s=y[0]*i+y[1]*e+y[2]*t+y[3];let o;o=l!==c?(n-l)/(c-l):(s-h)/(d-h),o>=0&&o<=1&&u.push({x:n,y:s})}return u}function hi(t,e,i,n){return[3*e-t-3*i+n,3*t-6*e+3*i,-3*t+3*e,t]}function ci(t,e,i,n,s,o,r,a,l,h){const c=(h-a)/(l-r),d=a-c*r,u=Math.pow(c,2)+1,p=2*(c*(d-e)-t),g=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),f=Math.pow(p,2)-4*u*g;if(f<0)return[];const m=(-p+Math.sqrt(f))/2/u,y=(-p-Math.sqrt(f))/2/u,v=[];return[m,y].forEach(t=>{if(!(t>=Math.min(r,l)&&t<=Math.max(r,l)))return;const e=c*t,i=q(o?s:n);let a=q(o?n:s),h=q(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),h<i&&(h+=2*Math.PI),h>=i&&h<=a&&v.push({x:t,y:e})}),v}!function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(ni||(ni={}));class di{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let n=0;t.beginPath();for(const s of e)switch(s){case ni.Move:t.moveTo(i[n++],i[n++]);break;case ni.Line:t.lineTo(i[n++],i[n++]);break;case ni.Curve:t.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);break;case ni.Arc:t.arc(i[n++],i[n++],i[n++],i[n++],i[n++],1===i[n++]);break;case ni.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(ni.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(ni.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}arc(t,e,i,n,s,o=!1){const r=t+i*Math.cos(s),a=e+i*Math.sin(s);this.xy?(this.xy[0]=r,this.xy[1]=a):this.xy=[r,a],this.commands.push(ni.Arc),this.params.push(t,e,i,n,s,o?1:0)}cubicCurveTo(t,e,i,n,s,o){this.xy||this.moveTo(t,e),this.commands.push(ni.Curve),this.params.push(t,e,i,n,s,o),this.xy[0]=s,this.xy[1]=o}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(ni.ClosePath),this._closedPath=!0)}clear({trackChanges:t}={trackChanges:!1}){t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,n=this.params,s=i.length,o=-1e4,r=-1e4;let a=NaN,l=NaN,h=0,c=0,d=0;for(let u=0,p=0;u<s;u++)switch(i[u]){case ni.Move:isNaN(a)||ai(a,l,h,c,o,r,t,e)&&d++,h=n[p++],a=h,c=n[p++],l=c;break;case ni.Line:ai(h,c,n[p++],n[p++],o,r,t,e)&&d++,h=n[p-2],c=n[p-1];break;case ni.Curve:d+=li(h,c,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],o,r,t,e).length,h=n[p-2],c=n[p-1];break;case ni.Arc:d+=ci(n[p++],n[p++],n[p++],n[p++],n[p++],Boolean(n[p++]),o,r,t,e).length,h=n[p-2],c=n[p-1];break;case ni.ClosePath:isNaN(a)||ai(a,l,h,c,o,r,t,e)&&d++}return d%2==1}}var ui=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};function pi(t){const{redraw:e=R.MAJOR,changeCb:i,convertor:n}=null!=t?t:{};return T({redraw:e,type:"path",convertor:n,changeCb:i})}class gi extends st{constructor(){super(...arguments),this.path=new di,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,R.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i;const{ctx:n,forceRender:s,stats:o}=t;if(this.dirty!==R.NONE||s){if(this.computeTransformMatrix(),this.matrix.toContext(n),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath){if(n.save(),"normal"===this.clipMode&&(this.clipPath.draw(n),n.clip()),this.path.draw(n),this.fillStroke(n),"punch-out"===this.clipMode){this.clipPath.draw(n),n.clip();const{x:t=-1e4,y:i=-1e4,width:s=2e4,height:o=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};n.clearRect(t,i,s,o)}n.restore()}else this.path.draw(n),this.fillStroke(n);null===(i=this.fillShadow)||void 0===i||i.markClean(),super.render(t)}else o&&(o.nodesSkipped+=this.nodeCount.count)}}gi.className="Path",ui([pi()],gi.prototype,"clipPath",void 0),ui([pi()],gi.prototype,"clipMode",void 0);var fi=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class mi extends gi{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,n=i/2;return new C(t-n,e-n,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:s}=this;i.clear();for(const{x:o,y:r,t:a}of e)n+=o*t,s+=r*t,"move"===a?i.moveTo(n,s):i.lineTo(n,s);i.closePath()}}fi([pi()],mi.prototype,"x",void 0),fi([pi()],mi.prototype,"y",void 0),fi([pi({convertor:Math.abs})],mi.prototype,"size",void 0);class yi extends mi{updatePath(){const{x:t,y:e,path:i,size:n}=this,s=n/2;i.clear(),i.arc(t,e,s,0,2*Math.PI),i.closePath()}}yi.className="Circle";var vi=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};const bi=["circle","cross","diamond","heart","plus","square","triangle"],xi=Ot(t=>bi.includes(t)||Object.getPrototypeOf(t)===mi,"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class ki extends A{constructor(){super(...arguments),this.enabled=!0,this.shape=yi,this.size=6,this.maxSize=30,this.domain=void 0,this.fill=void 0,this.stroke=void 0,this.strokeWidth=1,this.fillOpacity=void 0,this.strokeOpacity=void 0}}vi([Dt(_t),T({redraw:R.MAJOR})],ki.prototype,"enabled",void 0),vi([Dt(xi),T({redraw:R.MAJOR})],ki.prototype,"shape",void 0),vi([Dt($t(0)),T({redraw:R.MAJOR})],ki.prototype,"size",void 0),vi([Dt($t(0)),T({redraw:R.MAJOR})],ki.prototype,"maxSize",void 0),vi([Dt(Jt),T({redraw:R.MAJOR})],ki.prototype,"domain",void 0),vi([Dt(Yt),T({redraw:R.MAJOR})],ki.prototype,"fill",void 0),vi([Dt(Yt),T({redraw:R.MAJOR})],ki.prototype,"stroke",void 0),vi([Dt(Ut(0)),T({redraw:R.MAJOR})],ki.prototype,"strokeWidth",void 0),vi([Dt(Ut(0,1)),T({redraw:R.MAJOR})],ki.prototype,"fillOpacity",void 0),vi([Dt(Ut(0,1)),T({redraw:R.MAJOR})],ki.prototype,"strokeOpacity",void 0);class Si{constructor(t,e){this._nodes=[],this._data=[],this._parent=t,this._factory=Object.prototype.isPrototypeOf.call(B,e)?()=>new e:e}static select(t,e){return new Si(t,e)}each(t){return this._nodes.forEach((e,i)=>t(e,e.datum,i)),this}update(t,e){const i=this._data,n=this._parent,s=this._factory;t.length>i.length?t.slice(i.length).forEach(t=>{const i=s(t);i.datum=t,null==e||e(i),n.appendChild(i),this._nodes.push(i)}):t.length<i.length&&this._nodes.splice(t.length).forEach(t=>{n.removeChild(t)}),this._data=t.slice(0);for(let e=0;e<t.length;e++)this._nodes[e].datum=this._data[e];return this}clear(){return this.update([]),this}static selectAll(t,e){const i=[],n=t=>{e(t)&&i.push(t),t.children.forEach(n)};return n(t),i}static selectByClass(t,e){return Si.selectAll(t,t=>t instanceof e)}static selectByTag(t,e){return Si.selectAll(t,t=>t.tag===e)}select(t){return Si.selectAll(this._parent,t)}selectByClass(t){return this.select(e=>e instanceof t)}selectByTag(t){return this.select(e=>e.tag===t)}nodes(){return this._nodes}}function wi(t,e,i){return Math.max(e,Math.min(i,t))}class Di{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach(t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter((t,i)=>i%e==0)}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex(e=>e===t);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=wi(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=wi(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=wi(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[s,o]=this.range,r=o-s,a=r/Math.max(1,t+2*n-i),l=e?Math.floor(a):a,h=s+(r-l*(t-i))/2,c=e?Math.round(h):h,d=l*(1-i),u=e?Math.round(d):d,p=a*(1-i),g=[];for(let e=0;e<t;e++)g.push(c+l*e);this._bandwidth=u,this._rawBandwidth=p,this.ordinalRange=g}}var Oi=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Mi extends st{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}computeBBox(){return new C(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:s}=t;if(this.dirty===R.NONE&&!n)return void(s&&(s.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let o=this.x1,r=this.y1,a=this.x2,l=this.y2;if(o===a){const t=Math.round(o)+Math.floor(this.strokeWidth)%2/2;o=t,a=t}else if(r===l){const t=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=t,l=t}i.beginPath(),i.moveTo(o,r),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function Ci(t,e,i=1e-10){return Math.abs(t-e)<i}function Ni(t,e=2){const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}Mi.className="Line",Mi.defaultStyles=Object.assign({},st.defaultStyles,{fill:void 0,strokeWidth:1}),Oi([T({redraw:R.MAJOR})],Mi.prototype,"x1",void 0),Oi([T({redraw:R.MAJOR})],Mi.prototype,"y1",void 0),Oi([T({redraw:R.MAJOR})],Mi.prototype,"x2",void 0),Oi([T({redraw:R.MAJOR})],Mi.prototype,"y2",void 0);var Li,Ei=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};!function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(Li||(Li={}));class Ri extends gi{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=Li.Open,this.restoreOwnStyles()}get fullPie(){return Ci(q(this.startAngle),q(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===Li.Chord?t.closePath():this.type!==Li.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new C(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return this.type!==Li.Open&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}function Ii(t,e){return wt((i,n,s)=>(i[t][null!=e?e:n]=s,s))}function Ti(t){const{newValue:e,oldValue:i,changeValue:n}=t;return wt((t,s,o,r)=>(o!==r&&(void 0!==r&&(null==i||i.call(t,r)),void 0!==o&&(null==e||e.call(t,o)),null==n||n.call(t,o,r)),o))}Ri.className="Arc",Ri.defaultStyles=Object.assign({},st.defaultStyles,{lineWidth:1,fillStyle:null}),Ei([pi()],Ri.prototype,"centerX",void 0),Ei([pi()],Ri.prototype,"centerY",void 0),Ei([pi()],Ri.prototype,"radius",void 0),Ei([pi()],Ri.prototype,"startAngle",void 0),Ei([pi()],Ri.prototype,"endAngle",void 0),Ei([pi()],Ri.prototype,"counterClockwise",void 0),Ei([pi()],Ri.prototype,"type",void 0);var Ai=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class _i{constructor(){this.node=new at,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.spacing=_i.PADDING,this.lineHeight=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=_.None}computeTextWrap(t,e){var i,n;const{text:s,wrapping:o}=this,r=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(n=this.maxHeight)&&void 0!==n?n:e;if(!isFinite(r)&&!isFinite(a))return void(this.node.text=s);const l=at.wrap(null!=s?s:"",r,a,this,o);this.node.text=l}}function Pi(t,e){return t.length===e.length&&t.every((t,i)=>{const n=e[i];return Array.isArray(t)&&Array.isArray(n)?Pi(t,n):t===n})}function Fi(t,e){return t.length===e.length&&t.every((t,i)=>Number(t)===Number(e[i]))}_i.PADDING=10,Ai([Dt(_t)],_i.prototype,"enabled",void 0),Ai([Dt(Bt),Ii("node")],_i.prototype,"text",void 0),Ai([Dt(se),Ii("node")],_i.prototype,"fontStyle",void 0),Ai([Dt(re),Ii("node")],_i.prototype,"fontWeight",void 0),Ai([Dt($t(0)),Ii("node")],_i.prototype,"fontSize",void 0),Ai([Dt(Ft),Ii("node")],_i.prototype,"fontFamily",void 0),Ai([Dt(Yt),Ii("node","fill")],_i.prototype,"color",void 0),Ai([Dt(Ut(0))],_i.prototype,"spacing",void 0),Ai([Dt(Ut(0))],_i.prototype,"lineHeight",void 0),Ai([Dt(Ut(0))],_i.prototype,"maxWidth",void 0),Ai([Dt(Ut(0))],_i.prototype,"maxHeight",void 0),Ai([Dt(ve)],_i.prototype,"wrapping",void 0);class Bi{constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=Bi.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=null,this.strictClampByDefault=!1,this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}fromDomain(t){return"number"==typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain)?this.niceDomain:this.domain}convert(t,e){var i;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=null!==(i=null==e?void 0:e.strict)&&void 0!==i?i:this.strictClampByDefault,s=this.getDomain().map(t=>this.transform(t)),[o,r]=s,{range:a}=this,[l,h]=a;return(t=this.transform(t))<o?n?NaN:l:t>r?n?NaN:h:o===r?(l+h)/2:t===o?l:t===r?h:l+(this.fromDomain(t)-this.fromDomain(o))/(this.fromDomain(r)-this.fromDomain(o))*(h-l)}invert(t){this.refresh();const e=this.getDomain().map(t=>this.transform(t)),[i,n]=e,{range:s}=this,[o,r]=s,a=o>r;let l;return t<(a?r:o)?a?n:i:t>(a?o:r)?a?i:n:(l=o===r?this.toDomain((this.fromDomain(i)+this.fromDomain(n))/2):this.toDomain(this.fromDomain(i)+(t-o)/(r-o)*(this.fromDomain(n)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some(e=>this[e]!==t[e]))&&(this.cache={},this.cacheProps.forEach(t=>this.cache[t]=this[t]),!0)}refresh(){this.didChange()&&this.update()}isDenseInterval({start:t,stop:e,interval:i,count:n}){const{range:s}=this,o=e-t,r=Math.min(s[0],s[1]);return null!=n||(n=o/("number"==typeof i?i:1)),n>=Math.max(s[0],s[1])-r&&(G.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}function zi(t,e,i,n,s){if(i<2)return Gi(t,e,e-t);const o=Wi(t,e,i,n,s);return isNaN(o)?new Ki(0):Gi(t=Math.ceil(t/o)*o,e=Math.floor(e/o)*o,o)}Bi.defaultTickCount=5,Bi.defaultMaxTickCount=6;const ji=[1,2,5,10];function Wi(t,e,i,n=0,s=1/0){const o=(e-t)/i,r=Math.floor(Math.log10(o)),a=Math.pow(10,r),l=ji.map(o=>{const r=o*a,l=Math.ceil((e-t)/r);return{multiplier:o,isWithinBounds:l>=n&&l<=s,diffCount:Math.abs(l-i)}}).sort((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount)[0].multiplier;return!l||isNaN(l)?NaN:l*a}class Ki extends Array{constructor(t,e){if(super(),e)for(let t=0,i=e.length;t<i;t++)this[t]=e[t];this.fractionDigits=t}}function Gi(t,e,i){const n=(t=>{var e,i;const n=t.split("e");return Math.max((null!==(i=null===(e=n[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(n[1]),0)})((i%1).toExponential()),s=Math.pow(10,n),o=Math.ceil((e-t)/i),r=new Ki(n);for(let e=0;e<=o;e++){const n=t+i*e;r.push(Math.round(n*s)/s)}return r}const Xi={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Yi(t,e=new Date(t.getFullYear(),0,1)){const i=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*i;return Math.floor(n/864e5)}function Hi(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,n=new Date(t.getFullYear(),0,i+1);return n<=t?Math.floor(Yi(t,n)/7)+1:0}const Vi={a:t=>Xi.shortDays[t.getDay()],A:t=>Xi.days[t.getDay()],b:t=>Xi.shortMonths[t.getMonth()],B:t=>Xi.months[t.getMonth()],c:"%x, %X",d:(t,e)=>Ui(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>Ui(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>Ui(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":Ui(i,2,null!=e?e:"0")},j:(t,e)=>Ui(Yi(t)+1,3,null!=e?e:"0"),m:(t,e)=>Ui(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>Ui(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>Ui(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>Ui(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>Ui(Hi(t,0),2,null!=e?e:"0"),V:(t,e)=>Ui(function t(e,i=e.getFullYear()){const n=new Date(i,0,1).getDay(),s=new Date(i,0,(4-n+7)%7-3+1);return s<=e?Math.floor(Yi(e,s)/7)+1:t(e,i-1)}(t),2,null!=e?e:"0"),w:(t,e)=>Ui(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>Ui(Hi(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>Ui(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>Ui(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${Ui(Math.floor(i/60),2,"0")}${Ui(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},$i={_:" ",0:"0","-":""};function Ui(t,e,i){const n=String(Math.floor(t));return n.length>=e?n:`${i.repeat(e-n.length)}${n}`}function Zi(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const n=i>0?t.substring(0,i):t;e.push(n)}if(i<0)break;const n=t[i+1],s=$i[n];null!=s&&i++;const o=t[i+1],r=Vi[o];if("function"==typeof r)e.push([r,s]);else if("string"==typeof r){const t=Zi(r);e.push([t,s])}else e.push(`${null!=s?s:""}${o}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(t=>"string"==typeof t?t:t[0](i,t[1])).join("")}}var qi;!function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(qi||(qi={}));const Ji={[qi.MILLISECOND]:".%L",[qi.SECOND]:":%S",[qi.MINUTE]:"%I:%M",[qi.HOUR]:"%I %p",[qi.WEEK_DAY]:"%a",[qi.SHORT_MONTH]:"%b %d",[qi.MONTH]:"%B",[qi.SHORT_YEAR]:"%y",[qi.YEAR]:"%Y"};function Qi(t){return t instanceof Date?t.getTime():t}class tn extends Bi{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=w,this.month=S,this.week=k,this.day=v,this.hour=y,this.minute=f,this.second=p,this.millisecond=d,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,6e4],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,36e5],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,864e5],[this.day,2,1728e5],[this.week,1,6048e5],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,2592e6],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,31536e6]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(t=[]){let e=qi.YEAR;const i=t=>{t<e&&(e=t)};for(const e of t){i(this.getLowestGranularityFormat(e))}const n=Qi(t[0]),s=Qi(t[t.length-1]),o=new Date(n).getFullYear(),r=new Date(s).getFullYear()-o>0;return this.buildFormatString(e,r)}buildFormatString(t,e){let i=[Ji[t]],n=0;const s=this.getDomain(),o=Math.min(...s.map(Qi)),r=Math.max(...s.map(Qi))-o;switch(t){case qi.SECOND:r/6e4>1&&i.push(Ji[qi.MINUTE]);case qi.MINUTE:r/36e5>1&&i.push(Ji[qi.HOUR]);case qi.HOUR:n=i.length,r/864e5>1&&i.push(Ji[qi.WEEK_DAY]);case qi.WEEK_DAY:if(r/6048e5>1||e){const t=i.indexOf(Ji[qi.WEEK_DAY]);t>-1&&i.splice(t,1,Ji[qi.SHORT_MONTH])}case qi.SHORT_MONTH:case qi.MONTH:(r/31536e6>1||e)&&i.push(Ji[qi.YEAR])}return n<i.length&&(i=[...i.slice(0,n),i.slice(n).join(" ")]),n>0&&(i=[...i.slice(0,n).reverse(),...i.slice(n)],n<i.length&&i.splice(n,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?qi.MILLISECOND:this.minute.floor(t)<t?qi.SECOND:this.hour.floor(t)<t?qi.MINUTE:this.day.floor(t)<t?qi.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?qi.WEEK_DAY:qi.SHORT_MONTH:this.year.floor(t)<t?qi.MONTH:qi.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>Zi(e)(t)}getTickInterval({start:t,stop:e,count:i,minCount:n,maxCount:s}){const{tickIntervals:o}=this;let r,a;const l=null!=i?i:Bi.defaultTickCount,h=Math.abs(e-t)/Math.max(l,1);let c=0;for(;c<o.length&&h>o[c][2];)c++;if(0===c)a=Math.max(Wi(t,e,l,n,s),1),r=this.millisecond;else if(c===o.length){a=Wi(t/31536e6,e/31536e6,l,n,s),r=this.year}else{const t=h-o[c-1][2]<o[c][2]-h?c-1:c;[r,a]=o[t]}return r.every(a)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Qi);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks({start:t,stop:e}){const i=this.getTickInterval({start:t,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return i?i.range(new Date(t),new Date(e)):[]}getTicksForInterval({start:t,stop:e}){const{interval:i,tickIntervals:n}=this;if(!i)return[];if(i instanceof h){const n=i.range(new Date(t),new Date(e));return this.isDenseInterval({start:t,stop:e,interval:i,count:n.length})?this.getDefaultTicks({start:t,stop:e}):n}const s=Math.abs(i);if(this.isDenseInterval({start:t,stop:e,interval:s}))return this.getDefaultTicks({start:t,stop:e});const o=[...n];o.reverse();const r=o.find(t=>s%t[2]==0);if(r){return r[0].every(s/(r[2]/r[1])).range(new Date(t),new Date(e))}let a=new Date(t);const l=new Date(e),c=[];for(;a<=l;)c.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+s);return c}tickFormat({ticks:t,specifier:e}){return null==e?this.defaultTickFormat(t):Zi(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,n]=this.niceDomain;if(Qi(t)===Qi(i)&&Qi(e)===Qi(n))break;t=i,e=n}}updateNiceDomainIteration(t,e){const i=Qi(t),n=Qi(e),{interval:s}=this;let o;if(s instanceof h)o=s;else{const t="number"==typeof s?(n-i)/Math.max(s,1):this.tickCount;o=this.getTickInterval({start:i,stop:n,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(o){const i=o.range(t,e,!0),n=i[0],s=i[i.length-1];this.niceDomain=[n,s]}}}const en=t=>`(${t})`,nn=t=>en(t)+"?",sn=t=>nn("?:"+t),on=new RegExp(["^",sn(`${nn(".")}${en("[<>=^]")}`),nn("[+\\-( ]"),nn("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),nn("0"),nn("\\d+"),nn(","),sn("\\."+en("\\d+")),nn("~"),nn("[%a-z]"),"$"].join(""),"i"),rn=new RegExp(["^",en(".*?"),`#\\{${en(".+?")}\\}`,en(".*?"),"$"].join(""));function an(t){let e,i;const n=rn.exec(t);n&&([,e,t,i]=n);const s=on.exec(t);if(!s)throw new Error("The number formatter is invalid: "+t);const[,o,r,a,l,h,c,d,u,p,g]=s;return{fill:o,align:r,sign:a,symbol:l,zero:h,width:parseInt(c),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:e,suffix:i}}function ln(t){const e="string"==typeof t?an(t):t,{fill:i,align:n,sign:s="-",symbol:o,zero:r,width:a,comma:l,type:h,prefix:c="",suffix:d=""}=e;let u,{precision:p,trim:g}=e;if(h)if(h in dn&&h in cn)u=isNaN(p)?cn[h]:dn[h];else if(h in dn)u=dn[h];else{if(!(h in cn))throw new Error("The number formatter type is invalid: "+h);u=cn[h]}else u=dn.g,g=!0;return isNaN(p)&&(p=h?6:12),t=>{let e=u(t,p);return g&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const n=t.substring(0,i).split(""),s=t.substring(i);for(let t=n.length-3;t>0;t-=3)n.splice(t,0,e);return`${n.join("")}${s}`}(e,l)),e=function(t,e,i=""){if("("===i)return t>=0?e:`(${e})`;const n="+"===i?"+":"";return`${t>=0?n:"\u2212"}${e}`}(t,e,s),o&&"#"!==o&&(e=`${o}${e}`),"#"===o&&"x"===h&&(e="0x"+e),"s"===h&&(e=`${e}${function(t){return fn[un(t)]}(t)}`),"%"!==h&&"p"!==h||(e+="%"),isNaN(a)||(e=function(t,e,i=" ",n=">"){let s=t;if(">"!==n&&n){if("<"===n)s=s.padEnd(e,i);else if("^"===n){const t=Math.max(0,e-s.length),n=Math.ceil(t/2),o=Math.floor(t/2);s=s.padStart(n+s.length,i),s=s.padEnd(o+s.length,i)}}else s=s.padStart(e,i);return s}(e,a,null!=i?i:r,n)),e=`${c}${e}${d}`,e}}const hn=t=>Math.floor(Math.abs(t)),cn={b:t=>hn(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>hn(t).toString(8),x:t=>hn(t).toString(16),X:t=>cn.x(t).toUpperCase(),n:t=>cn.d(t),"%":t=>""+hn(100*t).toFixed(0)},dn={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>dn.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>dn.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i));return n>=-4&&n<e?i.toFixed(e-1-n):i.toExponential(e-1)},G:(t,e)=>dn.g(t,e).toUpperCase(),n:(t,e)=>dn.g(t,e),p:(t,e)=>dn.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const s=Math.pow(10,n);return(Math.round(i/s)*s).toFixed()},s:(t,e)=>{const i=un(t);return dn.r(t/Math.pow(10,i),e)},"%":(t,e)=>dn.f(100*t,e)};function un(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(pn,Math.min(gn,i))}const pn=-24,gn=24,fn={[pn]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[gn]:"Y"};function mn(t,e){const i=an(null!=e?e:",f");isNaN(i.precision)&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map(t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),n=i.type?6:12,s=t.toExponential(n-1).replace(/\.?0+e/,"e"),o=s.indexOf(".");if(o<0)return e>=0?0:-e;const r=s.indexOf("e")-o;return Math.max(0,r-e-1)})):i.type&&!(i.type in dn)||(i.precision=Math.max(...t.map(t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length}))));const n=ln(i);return t=>n(Number(t))}var yn=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};const vn=t=>t;class bn extends Bi{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=vn,this.basePow=vn,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t)}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?bn.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),n=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,n]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,s]=this.getDomain();let o=this.log(n),r=this.log(s);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(r-o),i=Gi(o,r,Math.min(e,t)).map(t=>this.pow(t)).filter(t=>t>=n&&t<=s);if(!this.isDenseInterval({start:n,stop:s,interval:t,count:i.length}))return i}if(!(i%1==0)||r-o>=e)return zi(o,r,Math.min(r-o,e)).map(t=>this.pow(t));const a=[],l=n>0;o=Math.floor(o)-1,r=Math.round(r)+1;const h=Math.min(...this.range),c=(Math.max(...this.range)-h)/e;let d=1/0;for(let t=o;t<=r;t++){const e=this.convert(this.pow(t+1));for(let o=1;o<i;o++){const r=l?o:i-o+1,h=this.pow(t)*r,u=this.convert(h),p=Math.abs(d-u),g=Math.abs(u-e),f=p>=c&&g>=c;h>=n&&h<=s&&(1===o||f)&&(a.push(h),d=u)}}return a}tickFormat({count:t,ticks:e,specifier:i}){const{base:n}=this;return null==i&&(i=10===n?".0e":","),"function"!=typeof i&&(i=ln(i)),t===1/0?i:(null==e&&this.ticks(),t=>i(t))}}function xn(t,e=[void 0]){return wt((i,n,s)=>e.includes(s)?t:s)}function kn(t){const{length:e}=t;if(0===e)return;let i=1/0,n=-1/0;for(let s=0;s<e;s++){let e=t[s];e instanceof Date&&(e=e.getTime()),"number"==typeof e&&(e<i&&(i=e),e>n&&(n=e))}const s=[i,n];return s.some(t=>!isFinite(t))?void 0:s}yn([Dt($t(0))],bn.prototype,"base",void 0);var Sn=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class wn{constructor(){this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}getFont(){return lt(this)}}function Dn(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,n=t.rotation?q(tt(t.rotation)):0,s=!n&&e>=0&&e<=Math.PI?-1:1,o=!n&&i>=0&&i<=Math.PI?-1:1;let r=0;return t.parallel?r=s*Math.PI/2:-1===o&&(r=Math.PI),{configuredRotation:n,defaultRotation:r,parallelFlipFlag:s,regularFlipFlag:o}}function On(t,e,i,n,s){const o=e>0&&e<=Math.PI,r=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(n*(o||r?-1:1)==-1)return"end"}else if(n*s==-1)return"end";return"start"}function Mn(t,e,i,n,s){const{width:o,height:r}=e,a=new C(i,n,0,0);s.transformBBox(a,e);const{x:l=0,y:h=0}=e;return e.width=o,e.height=r,{point:{x:l,y:h,size:0},label:{width:o,height:r,text:t}}}Sn([Dt(_t)],wn.prototype,"enabled",void 0),Sn([Dt($t(0))],wn.prototype,"fontSize",void 0),Sn([Dt(Ft)],wn.prototype,"fontFamily",void 0),Sn([Dt(se)],wn.prototype,"fontStyle",void 0),Sn([Dt(re)],wn.prototype,"fontWeight",void 0),Sn([Dt(Xt)],wn.prototype,"color",void 0);var Cn=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Nn=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i};const Ln=Ot((t,e)=>$t(0)(t,e)||t instanceof h,"expecting a tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),En=Ot((t,e)=>Mt(t,e,Ln),"expecting an optional tick count Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Rn=Ot((t,e)=>Mt(t,e,(t,e)=>0!==t&&$t(0)(t,e)||t instanceof h),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),In=["stroke","lineDash"],Tn=Ot(Ct(void 0,t=>{for(const e in t)if(!In.includes(e))return!1;return!0}),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");var An,_n;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(An||(An={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(_n||(_n={}));class Pn{constructor(){this.width=1,this.color="rgba(195, 195, 195, 1)"}}Cn([Dt($t(0))],Pn.prototype,"width",void 0),Cn([Dt(Yt)],Pn.prototype,"color",void 0);class Fn{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color="rgba(195, 195, 195, 1)",this.count=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}Cn([Dt(_t)],Fn.prototype,"enabled",void 0),Cn([Dt($t(0))],Fn.prototype,"width",void 0),Cn([Dt($t(0))],Fn.prototype,"size",void 0),Cn([Dt(Yt)],Fn.prototype,"color",void 0),Cn([Dt(En),function(t,e){const i=null==e?void 0:e.default,n=Me();return wt((e,s,o)=>(o!==i&&n(s.toString(),t),o))}("Use tick.interval or tick.minSpacing and tick.maxSpacing instead")],Fn.prototype,"count",void 0),Cn([Dt(Rn)],Fn.prototype,"interval",void 0),Cn([Dt(Nt())],Fn.prototype,"values",void 0),Cn([Dt(Lt(Zt(1),Rt("maxSpacing"))),xn(NaN)],Fn.prototype,"minSpacing",void 0);class Bn{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.autoRotate=void 0,this.autoRotateAngle=335,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0,this.format=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return lt(this)}}Cn([Dt(_t)],Bn.prototype,"enabled",void 0),Cn([Dt(Pt)],Bn.prototype,"autoWrap",void 0),Cn([Dt(Ut(0))],Bn.prototype,"maxWidth",void 0),Cn([Dt(Ut(0))],Bn.prototype,"maxHeight",void 0),Cn([Dt(se)],Bn.prototype,"fontStyle",void 0),Cn([Dt(re)],Bn.prototype,"fontWeight",void 0),Cn([Dt($t(1))],Bn.prototype,"fontSize",void 0),Cn([Dt(Ft)],Bn.prototype,"fontFamily",void 0),Cn([Dt($t(0))],Bn.prototype,"padding",void 0),Cn([Dt(Zt()),xn(NaN)],Bn.prototype,"minSpacing",void 0),Cn([Dt(Yt)],Bn.prototype,"color",void 0),Cn([Dt(Ut(-360,360))],Bn.prototype,"rotation",void 0),Cn([Dt(Pt)],Bn.prototype,"autoRotate",void 0),Cn([Dt($t(-360,360))],Bn.prototype,"autoRotateAngle",void 0),Cn([Dt(_t)],Bn.prototype,"avoidCollisions",void 0),Cn([Dt(_t)],Bn.prototype,"mirrored",void 0),Cn([Dt(_t)],Bn.prototype,"parallel",void 0),Cn([Dt(Bt)],Bn.prototype,"format",void 0);class zn{constructor(){this.enabled=!1,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.color=void 0,this.wrapping="always",this.formatter=void 0}}Cn([Dt(_t)],zn.prototype,"enabled",void 0),Cn([Dt(Bt)],zn.prototype,"text",void 0),Cn([Dt(se)],zn.prototype,"fontStyle",void 0),Cn([Dt(re)],zn.prototype,"fontWeight",void 0),Cn([Dt($t(0))],zn.prototype,"fontSize",void 0),Cn([Dt(Ft)],zn.prototype,"fontFamily",void 0),Cn([Dt(Yt)],zn.prototype,"color",void 0),Cn([Dt(ve)],zn.prototype,"wrapping",void 0),Cn([Dt(At)],zn.prototype,"formatter",void 0);class jn{constructor(t,e){this.moduleCtx=t,this.id=E(this),this.nice=!0,this.dataDomain=[],this.axisGroup=new Y({name:this.id+"-axis",zIndex:be.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Mi),this.tickLineGroup=this.axisGroup.appendChild(new Y({name:this.id+"-Axis-tick-lines",zIndex:be.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new Y({name:this.id+"-Axis-tick-labels",zIndex:be.AXIS_ZINDEX})),this.crossLineGroup=new Y({name:this.id+"-CrossLines"}),this.gridGroup=new Y({name:this.id+"-Axis-grid"}),this.gridLineGroup=this.gridGroup.appendChild(new Y({name:this.id+"-gridLines",zIndex:be.AXIS_GRID_ZINDEX})),this.gridArcGroup=this.gridGroup.appendChild(new Y({name:this.id+"-gridArcs",zIndex:be.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=Si.select(this.tickLineGroup,Mi),this.tickLabelGroupSelection=Si.select(this.tickLabelGroup,at),this.gridLineGroupSelection=Si.select(this.gridLineGroup,Mi),this.gridArcGroupSelection=Si.select(this.gridArcGroup,Ri),this._crossLines=[],this.line=new Pn,this.tick=this.createTick(),this.label=new Bn,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new _i,this._gridLength=0,this.gridStyle=[{stroke:"rgba(219, 219, 219, 1)",lineDash:[4,2]}],this._radialGrid=!1,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.thickness=0,this.maxThickness=1/0,this._scale=e,this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node)}get scale(){return this._scale}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach(t=>this.detachCrossLine(t)),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach(t=>{this.attachCrossLine(t),this.initCrossLine(t)})}get crossLines(){return this._crossLines}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach(t=>{this.initCrossLine(t)})}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,s=(e[1]-e[0])/(i[1]-i[0]),o=s*i[0],r=e[0]-o;n.range=[r,r+s],null===(t=this.crossLines)||void 0===t||t.forEach(t=>{t.clippedRange=[e[0],e[1]]})}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){t.insertBefore(this.gridGroup,e),t.insertBefore(this.axisGroup,e),t.insertBefore(this.crossLineGroup,e)}detachAxis(t){t.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t,e=0,i=0){return 0===this.inRangeEx(t,e,i)}inRangeEx(t,e=0,i=0){const{range:n}=this,s=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return t+e<s-i?-1:t>o+i?1:0}onLabelFormatChange(t,e){const{scale:i,fractionDigits:n}=this,s=!(i instanceof bn)&&n>0?t=>"number"==typeof t?t.toFixed(n):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(t){this.labelFormatter=s,G.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=s}setDomain(){var t;const{scale:e,dataDomain:i,tick:{values:n}}=this;if(n&&e instanceof Bi){const[s,o]=null!==(t=kn(n))&&void 0!==t?t:[1/0,-1/0],r=Math.min(e.fromDomain(i[0]),s),a=Math.max(e.fromDomain(i[1]),o);e.domain=[e.toDomain(r),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:n}=this;if(t&&n instanceof Bi)return"number"==typeof t?(n.tickCount=t,n.minTickCount=null!=e?e:0,void(n.maxTickCount=null!=i?i:1/0)):void(n instanceof tn&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear()),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach(t=>{this.initCrossLine(t)})}get gridLength(){return this._gridLength}set radialGrid(t){this._radialGrid!==t&&(this._radialGrid=t,this.gridLineGroupSelection=this.gridLineGroupSelection.clear(),this.gridArcGroupSelection=this.gridArcGroupSelection.clear())}get radialGrid(){return this._radialGrid}createTick(){return new Fn}update(t){const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),s=this.label.getSideFlag(),o=s*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.updatePosition({rotation:e,sideFlag:s}),this.updateLine();const r=this.generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:n,labelX:o,sideFlag:s}),{tickData:a,combinedRotation:l,textBaseline:h,textAlign:c}=r,d=Nn(r,["tickData","combinedRotation","textBaseline","textAlign"]);return this.updateSelections(a.ticks),this.updateLabels({tickLabelGroupSelection:this.tickLabelGroupSelection,combinedRotation:l,textBaseline:h,textAlign:c,labelX:o}),this.updateVisibility(),this.updateGridLines(s),this.updateTickLines(s),this.updateTitle({anyTickVisible:a.ticks.length>0,sideFlag:s}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n,sideFlag:s}),this.updateLayoutState(),t=d.primaryTickCount}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;t instanceof Bi&&(this.setTickCount(this.tick.count),t.nice=e,t.update())}calculateRotations(){const t=tt(this.rotation);return{rotation:t,parallelFlipRotation:q(t),regularFlipRotation:q(t-Math.PI/2)}}generateTicks({primaryTickCount:t,parallelFlipRotation:e,regularFlipRotation:i,labelX:n,sideFlag:s}){var o;const{scale:r,tick:a,label:{parallel:l,rotation:h,fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p}}=this,g=void 0!==t,{defaultRotation:f,configuredRotation:m,parallelFlipFlag:y,regularFlipFlag:v}=Dn({rotation:h,parallel:l,regularFlipRotation:i,parallelFlipRotation:e}),b=m+f,x=new N,{maxTickCount:k}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(o=a.maxSpacing)&&void 0!==o?o:NaN}),S=r instanceof Bi,w=a.count||!S||isNaN(k)?10:k;let D=On(l,m,0,s,v);const O=function(t,e,i,n){return t&&!e?i*n==-1?"hanging":"bottom":"middle"}(l,m,s,y),M={fontFamily:c,fontSize:d,fontStyle:u,fontWeight:p,textBaseline:O,textAlign:D};let C={rawTicks:[],ticks:[],labelCount:0},L=0,E=0,R=!0,I=!1;for(;R&&L<=w&&!I;){E=0,D=On(l,m,0,s,v);const e=this.getTickStrategies({secondaryAxis:g,index:L});for(const i of e){({tickData:C,index:L,autoRotation:E,terminate:I}=i({index:L,tickData:C,textProps:M,labelOverlap:R,terminate:I,primaryTickCount:t}));const e=C.ticks;D=On(l,m,E,s,v);const o=0!==m||0!==E,r=b+E;R=this.checkLabelOverlap(r,o,x,e,n,Object.assign(Object.assign({},M),{textAlign:D}))}}const T=f+m+E;return!g&&C.rawTicks.length>0&&(t=C.rawTicks.length),{tickData:C,primaryTickCount:t,combinedRotation:T,textBaseline:O,textAlign:D}}getTickStrategies({index:t,secondaryAxis:e}){const{scale:i,label:n,tick:s}=this,o=i instanceof Bi,r=n.enabled&&n.avoidCollisions,a=!(o&&void 0===this.tick.count)&&0!==t&&r,l=!0===n.autoRotate&&void 0===n.rotation,h=[];let c;c=this.tick.values?_n.VALUES:e?_n.CREATE_SECONDARY:a?_n.FILTER:_n.CREATE;if(h.push(({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(c,t,e,n,i)),!o&&!isNaN(s.minSpacing)){const t=({index:t,tickData:e,primaryTickCount:i,terminate:n})=>this.createTickData(_n.FILTER,t,e,n,i);h.push(t)}if(!r)return h;if(n.autoWrap){const t=({index:t,tickData:e,textProps:i})=>this.wrapLabels(e,t,i);h.push(t)}else if(l){const t=({index:t,tickData:e,labelOverlap:i,terminate:n})=>({index:t,tickData:e,autoRotation:this.getAutoRotation(i),terminate:n});h.push(t)}return h}createTickData(t,e,i,n,s){var o,r,a;const{scale:l,tick:h}=this,{maxTickCount:c,minTickCount:d,defaultTickCount:u}=this.estimateTickCount({minSpacing:h.minSpacing,maxSpacing:null!==(o=h.maxSpacing)&&void 0!==o?o:NaN}),p=l instanceof Bi,g=h.count||!p||isNaN(c)?10:c;let f=null!==(r=h.count)&&void 0!==r?r:p?Math.max(u-e,d):c;const m=void 0===h.interval&&void 0===h.values&&void 0===h.count&&f>d&&(p||t===_n.FILTER);let y=!0;for(;y&&e<=g;){const n=i.rawTicks;f=null!==(a=h.count)&&void 0!==a?a:p?Math.max(u-e,d):c;const{rawTicks:o,ticks:r,labelCount:l}=this.getTicks({tickGenerationType:t,previousTicks:n,tickCount:f,minTickCount:d,maxTickCount:c,primaryTickCount:s});i.rawTicks=o,i.ticks=r,i.labelCount=l,y=!!m&&Fi(o,n),e++}const v=void 0!==h.interval||void 0!==h.values;return n||(n=v),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,s,o){N.updateTransformMatrix(i,1,1,t,0,0);return function(t,e){const i=[];for(let n=0;n<t.length;n++){const s=t[n],{point:{x:o,y:r},label:{text:a}}=s;let{label:{width:l,height:h}}=s;l+=null!=e?e:0,h+=null!=e?e:0;if(i.some(t=>ii(t,o,r,l,h)))return!0;i.push({index:n,text:a,x:o,y:r,width:l,height:h,datum:s})}return!1}(this.createLabelData(n,s,o,i),function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e))}createLabelData(t,e,i,n){const s=[];for(const o of t){const{tickLabel:t,translationY:r}=o;if(""===t||null==t)continue;const a=pt(t),{width:l,height:h}=ht(a,e,r,i),c=Mn(t,new C(e,r,l,h),e,r,n);s.push(c)}return s}getAutoRotation(t){return t?q(tt(this.label.autoRotateAngle)):0}getTicks({tickGenerationType:t,previousTicks:e,tickCount:i,minTickCount:n,maxTickCount:s,primaryTickCount:o}){var r;const{scale:a}=this;let l=[];switch(t){case _n.VALUES:l=this.tick.values;break;case _n.CREATE_SECONDARY:l=this.updateSecondaryAxisTicks(o);break;case _n.FILTER:l=this.filterTicks(e,i);break;default:l=this.createTicks(i,n,s)}this.onLabelFormatChange(l,this.label.format),this.fractionDigits=l.fractionDigits>=0?l.fractionDigits:0;const h=(null!==(r=this.scale.bandwidth)&&void 0!==r?r:0)/2,c=[];let d=0;for(let t=0;t<l.length;t++){const e=l[t],i=a.convert(e)+h,n=this.formatTick(e,t);c.push({tick:e,tickLabel:n,translationY:i}),""!==n&&null!=n&&d++}return{rawTicks:l,ticks:c,labelCount:d}}filterTicks(t,e){var i;const n=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter((t,e)=>e%n==0)}createTicks(t,e,i){return this.setTickCount(t,e,i),this.scale.ticks()}estimateTickCount({minSpacing:t,maxSpacing:e}){const i=this.calculateAvailableRange(),n=Math.max(jn.defaultTickMinSpacing,i/Bi.defaultMaxTickCount);isNaN(t)&&isNaN(e)?(t=n)>(e=i)&&(e=t):isNaN(t)?(t=n)>e&&(t=e):isNaN(e)&&t>(e=i)&&(e=t);const s=Math.max(1,Math.floor(i/t)),o=Math.min(s,Math.ceil(i/e));let r=Bi.defaultTickCount;return r>s?r=s:r<o&&(r=o),{minTickCount:o,maxTickCount:s,defaultTickCount:r}}updateVisibility(){const{range:t}=this,e=Math.min(...t),i=Math.max(...t),n=t=>{const n=Math.floor(e),s=Math.ceil(i);if(n===s)return void(t.visible=!1);t.translationY>=n-1&&t.translationY<n&&(t.translationY=n),t.translationY>s&&t.translationY<=s+1&&(t.translationY=s);const o=t.translationY>=n&&t.translationY<=s;t.visible=o},{gridLineGroupSelection:s,gridArcGroupSelection:o,tickLineGroupSelection:r,tickLabelGroupSelection:a}=this;s.each(n),o.each(n),r.each(n),a.each(n),this.tickLineGroup.visible=this.tick.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:t,parallelFlipRotation:e,regularFlipRotation:i,sideFlag:n}){var s;const o=this.isAnySeriesActive();null===(s=this.crossLines)||void 0===s||s.forEach(s=>{var r;s.sideFlag=-n,s.direction=t===-Math.PI/2?xe.X:xe.Y,s.label.parallel=null!==(r=s.label.parallel)&&void 0!==r?r:this.label.parallel,s.parallelFlipRotation=e,s.regularFlipRotation=i,s.update(o)})}updateTickLines(t){const{tick:e}=this;this.tickLineGroupSelection.each(i=>{i.strokeWidth=e.width,i.stroke=e.color,i.x1=t*e.size,i.x2=0,i.y1=0,i.y2=0})}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateDomain(){}updatePosition({rotation:t,sideFlag:e}){const{crossLineGroup:i,axisGroup:n,gridGroup:s,translation:o,gridLineGroupSelection:r,gridPadding:a,gridLength:l}=this,h=Math.floor(o.x),c=Math.floor(o.y);i.translationX=h,i.translationY=c,i.rotation=t,n.translationX=h,n.translationY=c,n.rotation=t,s.translationX=h,s.translationY=c,s.rotation=t,r.each(t=>{t.x1=a,t.x2=-e*l+a,t.y1=0,t.y2=0})}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t){const e=this.gridLength?t:[],i=this.radialGrid?this.gridLineGroupSelection:this.gridLineGroupSelection.update(e,t=>{const e=new Mi;e.tag=An.GridLine,t.append(e)}),n=this.radialGrid?this.gridArcGroupSelection.update(e,t=>{const e=new Ri;e.tag=An.GridArc,t.append(e)}):this.gridArcGroupSelection,s=this.tickLineGroupSelection.update(t,t=>{const e=new Mi;e.tag=An.TickLine,t.appendChild(e)}),o=this.tickLabelGroupSelection.update(t,t=>{const e=new at;e.tag=An.TickLabel,t.appendChild(e)}),r=t=>t.translationY=Math.round(t.datum.translationY);i.each(r),n.each(r),s.each(r),o.each(r),this.tickLineGroupSelection=s,this.tickLabelGroupSelection=o,this.gridLineGroupSelection=i,this.gridArcGroupSelection=n}updateGridLines(t){var e;const{gridStyle:i,scale:n,tick:s,gridPadding:o,gridLength:r}=this;if(r&&i.length){const a=i.length;let l;if(this.radialGrid){const t=J(tt(r)),i=(null!==(e=this.scale.bandwidth)&&void 0!==e?e:0)/2;l=this.gridArcGroupSelection.each((e,s)=>{const o=Math.round(n.convert(s)+i);e.centerX=0,e.centerY=n.range[0]-o,e.endAngle=t,e.radius=o})}else l=this.gridLineGroupSelection.each(e=>{e.x1=o,e.x2=-t*r+o,e.y1=0,e.y2=0});l.each((t,e,n)=>{const o=i[n%a];t.stroke=o.stroke,t.strokeWidth=s.width,t.lineDash=o.lineDash,t.fill=void 0})}}updateLabels({tickLabelGroupSelection:t,combinedRotation:e,textBaseline:i,textAlign:n,labelX:s}){const{label:o,label:{enabled:r}}=this;if(!r)return{labelData:[],rotated:!1};t.each((t,r)=>{const{tickLabel:a}=r;t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.fontSize=o.fontSize,t.fontFamily=o.fontFamily,t.fill=o.color,t.text=a;""===t.text||null==t.text?t.visible=!1:(t.textBaseline=i,t.textAlign=n,t.x=s,t.rotationCenterX=s,t.rotation=e,t.visible=!0)})}wrapLabels(t,e,i){const{label:{parallel:n,maxWidth:s,maxHeight:o}}=this,r=n?Math.round(this.calculateAvailableRange()/t.labelCount):this.maxThickness,a=null!=s?s:r,l=n?this.maxThickness:Math.round(this.calculateAvailableRange()/t.labelCount),h=null!=o?o:l;return t.ticks.forEach(t=>{const{tickLabel:e}=t,n=at.wrap(e,a,h,i,"hyphenate");t.tickLabel=n}),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateLine(){const{lineNode:t,range:e}=this;t.x1=0,t.x2=0,t.y1=e[0],t.y2=e[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=!0}updateTitle({anyTickVisible:t,sideFlag:e}){var i;const n=t=>t.defaultValue,{rotation:s,title:o,_titleCaption:r,lineNode:a,range:l,tickLineGroup:h,tickLabelGroup:c,moduleCtx:{callbackCache:d}}=this,{formatter:u=n}=null!==(i=this.title)&&void 0!==i?i:{};if(!o)return void(r.enabled=!1);r.enabled=o.enabled,r.fontFamily=o.fontFamily,r.fontSize=o.fontSize,r.fontStyle=o.fontStyle,r.fontWeight=o.fontWeight,r.color=o.color,r.wrapping=o.wrapping;let p=!1;const g=r.node;if(o.enabled&&a.visible){p=!0;const i=q(s),n=_i.PADDING,o=-1===e&&i>Math.PI&&i<2*Math.PI?-1:1;g.rotation=o*e*Math.PI/2,g.x=Math.floor(o*e*(l[0]+l[1])/2);let r=0;if(t){const t=Y.computeBBox([h,c]),e=0===s?t.width:t.height;Math.abs(e)<1/0&&(r+=e)}g.y=-1===e?Math.floor(o*(-n-r)):Math.floor(-n-r),g.textBaseline=1===o?"bottom":"top",g.text=d.call(u,this.getTitleFormatterParams())}g.visible=p}formatTick(t,e){var i,n;const{label:s,labelFormatter:o,fractionDigits:r,moduleCtx:{callbackCache:a}}=this;if(s.formatter){const n=r>0?t:String(t);return null!==(i=a.call(s.formatter,{value:n,index:e,fractionDigits:r,formatter:o}))&&void 0!==i?i:n}return o&&null!==(n=a.call(o,t))&&void 0!==n?n:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return!1}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new C(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new C(t,e,i,n))}calculatePadding(t,e){return Math.abs(.01*t)}}jn.defaultTickMinSpacing=50,Cn([Dt(_t)],jn.prototype,"nice",void 0),Cn([Dt(Tn)],jn.prototype,"gridStyle",void 0),Cn([Dt($t(0))],jn.prototype,"thickness",void 0);class Wn extends Bi{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:Bi.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(t=>!isFinite(t)))return[];this.refresh();const[i,n]=this.getDomain(),{interval:s}=this;if(s){const t=Math.abs(s);if(!this.isDenseInterval({start:i,stop:n,interval:t}))return Gi(i,n,t)}return zi(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){var t,e;const i=null!==(t=this.tickCount)&&void 0!==t?t:Bi.defaultTickCount;let[n,s]=this.domain;if(i<1)return void(this.niceDomain=[n,s]);if(1===i)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),n=Math.pow(10,i);return ji.map(i=>{const s=i*n,o=Math.floor(t/s)*s,r=Math.ceil(e/s)*s;return{error:1-(e-t)/(r-o),domain:[o,r]}}).sort((t,e)=>t.error-e.error)[0].domain}(n,s));let o=n,r=s;for(let t=0;t<4;t++){const t=null!==(e=this.interval)&&void 0!==e?e:Wi(n,s,i,this.minTickCount,this.maxTickCount),[a,l]=this.domain;if(t>=1)n=Math.floor(a/t)*t,s=Math.ceil(l/t)*t;else{const e=1/t;n=Math.floor(a*e)/e,s=Math.ceil(l*e)/e}if(n===o&&s===r)break;o=n,r=s}this.niceDomain=[n,s]}tickFormat({ticks:t,specifier:e}){return mn(null!=t?t:this.ticks(),e)}}var Kn=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Gn extends jn{constructor(t,e){super(t,e),this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.modules={},this.position="left"}get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}get direction(){return["top","bottom"].includes(this.position)?xe.X:xe.Y}useCalculatedTickCount(){return this.scale instanceof Wn}update(t){return this.updateDirection(),super.update(t)}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateDomain(){const{direction:t,boundSeries:e,includeInvisibleDomains:i}=this;if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const n=[],s=e.filter(t=>i||t.isEnabled());for(const e of s)n.push(e.getDomain(t));const o=(new Array).concat(...n);this.dataDomain=this.normaliseDataDomain(o)}}normaliseDataDomain(t){return t}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(null==this.axisContext){const t=()=>this.boundSeries.map(t=>t.getKeys(this.direction)).reduce((t,e)=>(t.push(...e),t),[]);this.axisContext={axisId:this.id,position:this.position,direction:this.direction,continuous:this.scale instanceof Bi,keys:t,scaleValueFormatter:t=>{var e,i,n;return null!==(n=null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t}))&&void 0!==n?n:void 0},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i,n;return null!==(n=null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t))&&void 0!==n?n:void 0}}}const e=new t.instanceConstructor(Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext}));this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}destroy(){super.destroy();for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce((t,e)=>{const i=e.getKeys(this.direction),n=e.getNames(this.direction);for(let e=0;e<i.length;e++)t.push({key:i[e],name:n[e]});return t},[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}}Kn([Dt(Qt)],Gn.prototype,"keys",void 0),Kn([Dt(ge)],Gn.prototype,"position",void 0);var Xn=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Yn extends Gn{constructor(t){super(t,new Di),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=new Set(t);return new Array(...e.values())}calculateDomain(){if(!this._paddingOverrideEnabled){const{boundSeries:t}=this,e=t.map(t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)}).filter(t=>null!=t);e.length>0&&(this.scale.paddingInner=Math.min(...e.map(t=>t.inner)),this.scale.paddingOuter=Math.max(...e.map(t=>t.outer)))}return super.calculateDomain()}}function Hn(t,e){const i=Jn(t),n=Jn(e);if("array"===n){const n=e;return"array"!==i||t.length!==n.length||n.some((e,i)=>{var n;return null!=Hn(null===(n=t)||void 0===n?void 0:n[i],e)})?[...n]:null}if("primitive"===n)return"primitive"!==i?Object.assign({},e):t!==e?e:null;const s=t||{},o=e||{},r=new Set([...Object.keys(s),...Object.keys(o)]);let a=0;const l={};for(const t of r){if(s[t]===o[t])continue;const e=e=>{l[t]=e,a++},i=Jn(s[t]),n=Jn(o[t]);if(i!==n){e(o[t]);continue}if("primitive"===n||null===n){e(o[t]);continue}if("array"===n&&s[t].length!==o[t].length){e(o[t]);continue}if("class-instance"===n){e(o[t]);continue}if("function"===n&&s[t]!==o[t]){e(o[t]);continue}const r=Hn(s[t],o[t]);null!==r&&e(r)}return 0===a?null:l}Yn.className="CategoryAxis",Yn.type="category",Xn([Dt($t(0,1))],Yn.prototype,"groupPaddingInner",void 0);const Vn=Symbol("<delete-property>"),$n=Symbol("<unspecified-property>");function Un(t,e){var i;const n=null!==(i=null==e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map(t=>Jn(t)).some(t=>"array"===t)){const i=t[t.length-1];return i instanceof Array?i.map(t=>{const i=Jn(t);return"array"===i?Un([[],t],e):"object"===i?Un([{},t],e):t}):i}const s={},o=new Set(t.map(t=>null!=t?Object.keys(t):[]).reduce((t,e)=>t.concat(e),[]));for(const i of o){const o=t.map(t=>null!=t&&i in t?t[i]:$n).filter(t=>t!==$n);if(0===o.length)continue;const r=o[o.length-1];if(r===Vn)continue;const a=o.map(t=>Jn(t)),l=a[0];a.some(t=>t!==l)?s[i]=r:"array"!==l&&"object"!==l||n.includes(i)?s[i]="array"===l?[...r]:r:s[i]=Un(o,e)}return s}function Zn(t,e,i,...n){var s;const o=Jn(t),r=null!==(s=i.skip)&&void 0!==s?s:[];if("array"!==o){if("object"===o){e(o,t,...n);for(const s in t){if(r.indexOf(s)>=0)continue;const o=t[s],a=null==n?void 0:n.map(t=>null==t?void 0:t[s]),l=Jn(o);"object"!==l&&"array"!==l||Zn(o,e,i,...a)}}}else t.forEach((t,s)=>{Zn(t,e,i,...(null!=n?n:[]).map(t=>null==t?void 0:t[s]))})}const qn="undefined"!=typeof window;function Jn(t){return null==t?null:qn&&t instanceof HTMLElement?"primitive":t instanceof Array?"array":t instanceof Date?"primitive":"object"==typeof t&&t.constructor===Object?"object":"function"==typeof t?"function":"object"==typeof t&&null!=t.constructor?"class-instance":"primitive"}class Qn extends mi{updatePath(){const{path:t,x:e,y:i}=this,n=this.size/2;t.clear(),t.moveTo(this.align(e-n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i+n)),t.lineTo(this.align(e-n),this.align(i+n)),t.closePath()}}Qn.className="Square";class ts extends mi{updatePath(){const t=this.size/4.2;super.applyPath(t,ts.moves)}}ts.className="Cross",ts.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class es extends mi{updatePath(){const t=this.size/2;super.applyPath(t,es.moves)}}es.className="Diamond",es.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class is extends mi{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:n}=this,s=i/4,o=this.y+s/2;e.clear(),e.arc(t-s,o-s,s,n(130),n(330)),e.arc(t+s,o-s,s,n(220),n(50)),e.lineTo(t,o+s),e.closePath()}}is.className="Heart";class ns extends mi{updatePath(){const t=this.size/3;super.applyPath(t,ns.moves)}}ns.className="Plus",ns.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class ss extends mi{updatePath(){const t=1.1*this.size;super.applyPath(t,ss.moves)}}function os(t=Qn){if("string"==typeof t)switch(t){case"circle":return yi;case"cross":return ts;case"diamond":return es;case"heart":return is;case"plus":return ns;case"triangle":return ss;default:return Qn}return"function"==typeof t?t:Qn}ss.className="Triangle",ss.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];class rs{constructor(t,e){this.debug=!1,this.state=t,this.states=e,this.debug&&G.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,n,s,o,r;const a=this.states[this.state],l=null===(i=null==a?void 0:a.on)||void 0===i?void 0:i[t];if(!l)return void(this.debug&&G.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey"));const h=l.target,c=this.states[h];return this.debug&&G.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${h}`,"color: green"),l.action(e),null===(s=null===(n=null==a?void 0:a.actions)||void 0===n?void 0:n.onExit)||void 0===s||s.call(n),null===(r=null===(o=null==c?void 0:c.actions)||void 0===o?void 0:o.onEnter)||void 0===r||r.call(o),this.state=h,this.state}}var as=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},ls=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const hs={[xe.X]:["xKey"],[xe.Y]:["yKey"]},cs={[xe.X]:["xName"],[xe.Y]:["yName"]};class ds extends Ke{constructor(t,e,i,n,s){super(i,n,s),this.xKey=t,this.yKey=e}}class us extends ds{constructor(){super(...arguments),this.type="nodeClick"}}class ps extends ds{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class gs extends rs{}class fs extends qe{constructor(t){var e,i;super(Object.assign(Object.assign({},t),{useSeriesGroupLayer:!0,directionKeys:null!==(e=t.directionKeys)&&void 0!==e?e:hs,directionNames:null!==(i=t.directionNames)&&void 0!==i?i:cs})),this._contextNodeData=[],this.nodeDataDependencies={},this.highlightSelection=Si.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Si.select(this.highlightLabel,at),this.subGroups=[],this.subGroupId=0,this.seriesItemEnabled=new Map;const{pathsPerSeries:n=1,hasMarkers:s=!1,pathsZIndexSubOrderOffset:o=[]}=t;this.opts={pathsPerSeries:n,hasMarkers:s,pathsZIndexSubOrderOffset:o},this.animationState=new gs("empty",{empty:{on:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}}},ready:{on:{update:{target:"ready",action:t=>this.animateReadyUpdate(t)},highlight:{target:"ready",action:t=>this.animateReadyHighlight(t)},highlightMarkers:{target:"ready",action:t=>this.animateReadyHighlightMarkers(t)},resize:{target:"ready",action:t=>this.animateReadyResize(t)}}}})}get contextNodeData(){var t;return null===(t=this._contextNodeData)||void 0===t?void 0:t.slice()}addChartEventListeners(){var t,e;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t)),null===(e=this.chartEventManager)||void 0===e||e.addListener("legend-item-double-click",t=>this.onLegendItemDoubleClick(t))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}checkDomainXY(t,e,i,n){return(i&&vt(t)||!i&&yt(t))&&(n&&vt(e)||!n&&yt(e))?[t,e]:void 0}checkRangeXY(t,e,i,n){return!isNaN(t)&&!isNaN(e)&&i.inRange(t)&&n.inRange(e)}update({seriesRect:t}){var e,i;return ls(this,void 0,void 0,(function*(){const{seriesItemEnabled:n,visible:s}=this,{series:o}=null!==(i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&void 0!==i?i:{},r=o?o===this:void 0,a=s&&0===n.size||[...n.values()].some(t=>!0===t),l={seriesRectWidth:null==t?void 0:t.width,seriesRectHeight:null==t?void 0:t.height};null!=Hn(this.nodeDataDependencies,l)&&(this.nodeDataDependencies=l,this.markNodeDataDirty(),this.animationState.transition("resize",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t)})),yield this.updateSelections(r,a),yield this.updateNodes(r,a),this.animationState.transition("update",{datumSelections:this.subGroups.map(({datumSelection:t})=>t),markerSelections:this.subGroups.map(({markerSelection:t})=>t),labelSelections:this.subGroups.map(({labelSelection:t})=>t),contextData:this._contextNodeData,paths:this.subGroups.map(({paths:t})=>t),seriesRect:t})}))}updateSelections(t,e){return ls(this,void 0,void 0,(function*(){yield this.updateHighlightSelection(t),e&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())&&(this.nodeDataRefresh&&(this.nodeDataRefresh=!1,this._contextNodeData=yield this.createNodeData(),yield this.updateSeriesGroups()),yield Promise.all(this.subGroups.map((t,e)=>this.updateSeriesGroupSelections(t,e))))}))}updateSeriesGroupSelections(t,e){return ls(this,void 0,void 0,(function*(){const{datumSelection:i,labelSelection:n,markerSelection:s}=t,o=this._contextNodeData[e],{nodeData:r,labelData:a}=o;t.datumSelection=yield this.updateDatumSelection({nodeData:r,datumSelection:i,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:a,labelSelection:n,seriesIdx:e}),s&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:r,markerSelection:s,seriesIdx:e}))}))}nodeFactory(){return new Y}markerFactory(){return new(os())}updateSeriesGroups(){var t;return ls(this,void 0,void 0,(function*(){const{_contextNodeData:e,contentGroup:i,subGroups:n,opts:{pathsPerSeries:s,hasMarkers:o,pathsZIndexSubOrderOffset:r}}=this;if(e.length===n.length)return;e.length<n.length&&n.splice(e.length).forEach(({dataNodeGroup:t,markerGroup:e,labelGroup:n,paths:s})=>{i.removeChild(t),e&&i.removeChild(e),n&&i.removeChild(n);for(const t of s)i.removeChild(t)});const a=e.length;for(;a>n.length;){const e=!1,a=this.subGroupId++,l=a,h=new Y({name:`${this.id}-series-sub${a}-dataNodes`,layer:e,zIndex:be.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,l]}),c=o?new Y({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:e,zIndex:be.SERIES_LAYER_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,1e4+a]}):void 0,d=new Y({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:e,zIndex:be.SERIES_LABEL_ZINDEX,zIndexSubOrder:[()=>this._declarationOrder,a]});i.appendChild(h),i.appendChild(d),c&&i.appendChild(c);const u=[];for(let e=0;e<s;e++)u[e]=new gi,u[e].zIndex=be.SERIES_LAYER_ZINDEX,u[e].zIndexSubOrder=[()=>this._declarationOrder,(null!==(t=r[e])&&void 0!==t?t:0)+l],i.appendChild(u[e]);n.push({paths:u,dataNodeGroup:h,markerGroup:c,labelGroup:d,labelSelection:Si.select(d,at),datumSelection:Si.select(h,()=>this.nodeFactory()),markerSelection:c?Si.select(c,()=>this.markerFactory()):void 0})}}))}updateNodes(t,e){var i;return ls(this,void 0,void 0,(function*(){const{highlightSelection:n,highlightLabelSelection:s,_contextNodeData:o,seriesItemEnabled:r,opts:{hasMarkers:a}}=this,l=this.visible&&(null===(i=this._contextNodeData)||void 0===i?void 0:i.length)>0&&e;this.rootGroup.visible=l,this.contentGroup.visible=l,this.highlightGroup.visible=l&&!!t;const h=this.getOpacity(),c=this.subGroups.map((t,e)=>{const{itemId:i}=o[e];return this.getOpacity({itemId:i})}),d=c.some(t=>t!==h);this.contentGroup.opacity=d?1:h,a?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),yield this.updateLabelNodes({labelSelection:s,seriesIdx:-1}),yield Promise.all(this.subGroups.map((t,e)=>ls(this,void 0,void 0,(function*(){var i;const{dataNodeGroup:n,markerGroup:s,datumSelection:h,labelSelection:u,markerSelection:p,paths:g,labelGroup:f}=t,{itemId:m}=o[e],y=l&&(null===(i=r.get(m))||void 0===i||i),v=d?c[e]:1;n.opacity=v,n.visible=y,f.visible=y,s&&(s.opacity=v,s.zIndex=n.zIndex>=be.SERIES_LAYER_ZINDEX?n.zIndex:n.zIndex+1,s.visible=y),f&&(f.opacity=v);for(const t of g)t.opacity=v,t.visible=y;n.visible&&(yield this.updateDatumNodes({datumSelection:h,isHighlight:!1,seriesIdx:e}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:e}),a&&p&&(yield this.updateMarkerNodes({markerSelection:p,isHighlight:!1,seriesIdx:e})))}))))}))}updateHighlightSelection(t){var e;return ls(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:s}=this,o=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),r=t&&(null==o?void 0:o.datum)?o:void 0;let a;if(this.highlightSelection=yield this.updateHighlightSelectionItem({item:r,highlightSelection:i}),this.isLabelEnabled()&&null!=r){const{itemId:t}=r;for(const{labelData:e}of s)if(a=e.find(e=>e.datum===r.datum&&e.itemId===t),null!=a)break}this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({item:a,highlightLabelSelection:n})}))}pickNodeExactShape(t){const e=super.pickNodeExactShape(t);if(e)return e;const{x:i,y:n}=t,{opts:{hasMarkers:s}}=this;for(const{dataNodeGroup:t,markerGroup:e}of this.subGroups){let o=t.pickNode(i,n);if(!o&&s&&(o=null==e?void 0:e.pickNode(i,n)),o)return{datum:o.datum,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:s}=t,{xAxis:o,yAxis:r,rootGroup:a,_contextNodeData:l}=this,h=a.transformPoint(n,s);let c,d=1/0;for(const t of l)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==o?void 0:o.inRange(t))&&(null==r?void 0:r.inRange(i))))continue;const n=Math.max(Math.pow(h.x-t,2)+Math.pow(h.y-i,2),0);n<d&&(d=n,c=e)}if(c){return{datum:c,distance:Math.max(Math.sqrt(d)-(null!==(i=null===(e=c.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,n;const{x:s,y:o}=t,{xAxis:r,yAxis:a,rootGroup:l,_contextNodeData:h}=this,c=[r,a].filter(t=>t instanceof Yn).map(t=>t.direction);if(e&&0===c.length)return;const[d=xe.X]=c,u=l.transformPoint(s,o),p=d===xe.X?[u.x,u.y]:[u.y,u.x],g=[1/0,1/0];let f=void 0;for(const t of h)for(const e of t.nodeData){const{point:{x:t=NaN,y:i=NaN}={}}=e;if(isNaN(t)||isNaN(i))continue;if(!((null==r?void 0:r.inRange(t))&&(null==a?void 0:a.inRange(i))))continue;const n=d===xe.X?[t,i]:[i,t];let s=!0;for(let t=0;t<n.length;t++){const e=Math.abs(n[t]-p[t]);if(e>g[t]){s=!1;break}e<g[t]&&(g[t]=e,g.fill(1/0,t+1,g.length))}s&&(f=e)}if(f){return{datum:f,distance:Math.max(Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2))-(null!==(n=null===(i=f.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0),0)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:s}=t,o=Object.values(s).reduce((t,e)=>t+e,0),r=n.id===this.id||e&&1===o;this.toggleSeriesItem(i,r)}toggleSeriesItem(t,e){this.seriesItemEnabled.size>0?(this.seriesItemEnabled.set(t,e),this.nodeDataRefresh=!0):super.toggleSeriesItem(t,e)}isEnabled(){if(this.seriesItemEnabled.size>0){for(const[,t]of this.seriesItemEnabled)if(t)return!0;return!1}return super.isEnabled()}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}isAnySeriesVisible(){for(const t of this.seriesItemEnabled.values())if(t)return!0;return!1}updateHighlightSelectionItem(t){return ls(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{item:i,highlightSelection:n}=t,s=i?[i]:[];if(e){const t=n;return this.updateMarkerSelection({nodeData:s,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:s,datumSelection:n,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return ls(this,void 0,void 0,(function*(){const{item:e,highlightLabelSelection:i}=t,n=e?[e]:[];return this.updateLabelSelection({labelData:n,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return ls(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return ls(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return ls(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return ls(this,void 0,void 0,(function*(){}))}animateEmptyUpdateReady(t){}animateReadyUpdate(t){}animateReadyHighlight(t){}animateReadyHighlightMarkers(t){}animateReadyResize(t){}}class ms extends ki{constructor(){super(...arguments),this.formatter=void 0}}function ys(t){return new Promise(e=>{setTimeout(()=>e(void 0),t)})}as([Dt(At),T({redraw:R.MAJOR})],ms.prototype,"formatter",void 0);var vs=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class bs{constructor(t,e){this.renderer=void 0,this.text=void 0,this.className=t,this.parentElement=e}show(t){var e,i;let n=this.element;if(this.element||(n=document.createElement("div"),n.className=this.className,this.element=n),n.style.position="absolute",n.style.left=t.x+"px",n.style.top=t.y+"px",n.style.width=t.width+"px",n.style.height=t.height+"px",this.renderer)this.element.innerHTML=this.renderer();else{const t=document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",n.append(t)}null===(i=this.parentElement)||void 0===i||i.append(n)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}vs([Dt(At)],bs.prototype,"renderer",void 0),vs([Dt(Bt)],bs.prototype,"text",void 0);class xs{constructor(t){this.noData=new bs("ag-chart-no-data-overlay",t)}}class ks{constructor(){this.registeredListeners={}}addListener(t,e){var i;const n=Symbol(t);return this.registeredListeners[t]||(this.registeredListeners[t]=[]),null===(i=this.registeredListeners[t])||void 0===i||i.push({symbol:n,handler:e}),n}dispatch(t,...e){var i;const n=null!==(i=this.registeredListeners[t])&&void 0!==i?i:[],s=[];for(const t of n)try{s.push(t.handler(...e))}catch(t){G.errorOnce(t),s.push(void 0)}return s}cancellableDispatch(t,e,...i){var n;const s=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[],o=[];for(const t of s){if(e())break;o.push(t.handler(...i))}return o}reduceDispatch(t,e,...i){var n;const s=null!==(n=this.registeredListeners[t])&&void 0!==n?n:[];let o=void 0;for(const t of s)o=t.handler(...i),i=e(o,...i);return o}removeListener(t){for(const e in this.registeredListeners){const i=this.registeredListeners[e],n=null==i?void 0:i.findIndex(e=>e.symbol===t);null!=n&&n>=0&&(null==i||i.splice(n,1)),null!=n&&0===(null==i?void 0:i.length)&&delete this.registeredListeners[e]}}}class Ss{constructor(){this.listeners=new ks}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}}function ws(t,e){return t=+t,e=+e,i=>t*(1-i)+e*i}function Ds(t,e){if("string"==typeof t)try{t=kt.fromString(t)}catch(e){t=kt.fromArray([0,0,0])}if("string"==typeof e)try{e=kt.fromString(e)}catch(t){e=kt.fromArray([0,0,0])}const i=ws(t.r,e.r),n=ws(t.g,e.g),s=ws(t.b,e.b),o=ws(t.a,e.a);return function(t){return kt.fromArray([i(t),n(t),s(t),o(t)]).toRgbaString()}}function Os(t,e){const i=typeof e;let n;if("number"===i)return ws(t,e);if("string"===i)try{return n=kt.fromString(e),Ds(t,e=n)}catch(t){}throw new Error("Unable to interpolate values")}function Ms({from:t,to:e}){return Os(t,e)}const Cs=(Ns=t=>Math.sin(t*Math.PI/2),({from:t,to:e})=>{const i=Os(t,e);return t=>i(Ns(t))});var Ns,Ls;function Es({driver:t,duration:e,from:i,to:n,autoplay:s=!0,delay:o=0,ease:r=Ms,repeat:a=1/0,repeatType:l=Ls.Loop,onComplete:h,onPlay:c,onRepeat:d,onStop:u,onUpdate:p}){let g,f=0,m=0,y=0,v=!0,b=!1;const x=r({from:i,to:n}),k={isPlaying:!1,play:w,pause:function(){return k.isPlaying=!1,k},stop:D,reset:function(){return b=!1,m=0,y=0,S.reset(),k}},S=t((function(t){v||(t=-t);if(!(f>=o))return void(f+=t);m+=t;b||(g=x(Math.min(1,Math.max(0,m/e))),b=v?m>=e:m<=0);null==p||p(g),b&&(y<a?function(){y++,l===Ls.Reverse?(v=y%2==0,m=v?m%e:e-m%e):m%=e;b=!1,null==d||d()}():(D(),null==h||h()))}));function w(){return k.isPlaying=!0,S.start(),null==c||c(),k}function D(){return k.isPlaying=!1,S.stop(),null==u||u(),k}return s&&w(),k}!function(t){t.Loop="loop",t.Reverse="reverse"}(Ls||(Ls={}));class Rs extends Ss{constructor(t){super(),this.controllers={},this.debouncers={},this.updaters=[],this.isPlaying=!1,this.readyToPlay=!1,this.skipAnimations=!1,this.interactionManager=t,window.addEventListener("DOMContentLoaded",()=>{this.readyToPlay=!0}),setTimeout(()=>{this.readyToPlay=!0},10)}play(){if(!this.isPlaying){this.isPlaying=!0;for(const t in this.controllers)this.controllers[t].play();this.startAnimationCycle()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].pause()}}stop(){this.isPlaying=!1,this.cancelAnimationFrame();for(const t in this.controllers)this.controllers[t].stop()}animate(t,e){var i,n;const s=Es(Object.assign(Object.assign({},e),{autoplay:!!this.isPlaying&&e.autoplay,driver:this.createDriver(t,e.disableInteractions)}));return this.controllers[t]&&(this.controllers[t].stop(),delete this.controllers[t]),this.controllers[t]=s,this.skipAnimations?(null===(i=e.onUpdate)||void 0===i||i.call(e,e.to),s.stop()):null===(n=e.onUpdate)||void 0===n||n.call(e,e.from),s}animateMany(t,e,i){const n=e.map(t=>t.from);let s=0,o=0;const r=t=>o=>{var r;n[t]=o,++s>=e.length&&(null===(r=i.onUpdate)||void 0===r||r.call(i,n),s=0)},a=()=>{var t;++o>=e.length&&(null===(t=i.onComplete)||void 0===t||t.call(i))},l=e.map((e,n)=>{const s=`${t}-${n}`;return this.animate(s,Object.assign(Object.assign(Object.assign({},i),e),{onUpdate:r(n),onComplete:a}))}),h={get isPlaying(){return l.some(t=>t.isPlaying)},play:()=>(l.forEach(t=>t.play()),h),pause:()=>(l.forEach(t=>t.pause()),h),stop:()=>(l.forEach(t=>t.stop()),h),reset:()=>(l.forEach(t=>t.reset()),h)};return h}debouncedAnimate(t,e){var i;return this.debouncers[t]&&Date.now()-this.debouncers[t]<(null!==(i=e.duration)&&void 0!==i?i:300)?this.controllers[t]:(this.debouncers[t]=Date.now(),this.animate(t,e))}tween(t){const e="tween-"+btoa(JSON.stringify(t));return function(t){let e;const i=Es(Object.assign(Object.assign({},t),{repeat:0,autoplay:!1,onUpdate:t=>{null==e||e(t)}})),n={start:t=>(i.stop(),i.reset(),i.play(),e=t,n),stop:()=>(i.stop(),n)};return n}(Object.assign(Object.assign({},t),{driver:this.createDriver(e)}))}createDriver(t,e){return i=>({start:()=>{this.updaters.push([t,i]),null==this.requestId&&this.startAnimationCycle(),e&&this.interactionManager.pause("animation_"+t)},stop:()=>{this.updaters=this.updaters.filter(([e])=>e!==t),this.updaters.length<=0&&this.cancelAnimationFrame(),e&&this.interactionManager.resume("animation_"+t)},reset:()=>{}})}startAnimationCycle(){const t=e=>{if(this.requestId=requestAnimationFrame(t),!this.readyToPlay)return;void 0===this.lastTime&&(this.lastTime=e);const i=e-this.lastTime;this.lastTime=e,this.updaters.forEach(([t,e])=>{e(i)}),this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:i})};this.requestId=requestAnimationFrame(t)}cancelAnimationFrame(){this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=void 0)}}class Is{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:i}])=>t=i),this.element.style.cursor=t}}class Ts extends Ss{legendItemClick(t,e,i){const n={type:"legend-item-click",series:t,itemId:e,enabled:i};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,n){const s={type:"legend-item-double-click",series:t,itemId:e,enabled:i,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",s)}}class As extends Ss{constructor(){super(),this.states={},this.activeHighlight=void 0}updateHighlight(t,e){delete this.states[t],null!=e&&(this.states[t]={highlightedDatum:e}),this.applyStates()}getActiveHighlight(){return this.activeHighlight}applyStates(){const t=this.activeHighlight;let e=void 0;Object.entries(this.states).reverse().slice(0,1).forEach(([t,{highlightedDatum:i}])=>e=i),this.activeHighlight=e;var i,n;if(i=t,n=this.activeHighlight,!(i===n||(null==i?void 0:i.series)===(null==n?void 0:n.series)&&(null==i?void 0:i.itemId)===(null==n?void 0:n.itemId)&&(null==i?void 0:i.datum)===(null==n?void 0:n.datum))){const e={type:"highlight-change",previousHighlight:t,currentHighlight:this.activeHighlight};this.listeners.dispatch("highlight-change",e)}}}var _s=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const Ps=["pagehide","mousemove","mouseup","wheel"],Fs=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel"];class Bs extends Ss{constructor(t,e=document){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.enabled=!0,this.pausers=[],this.rootElement=e.body,this.element=t;for(const e of Fs)e.startsWith("touch")?t.addEventListener(e,this.eventHandler,{passive:!0}):t.addEventListener(e,this.eventHandler);for(const t of Ps)"wheel"===t?window.addEventListener(t,this.eventHandler,{passive:!1}):window.addEventListener(t,this.eventHandler);if(Bs.interactionDocuments.indexOf(e)<0){const t=document.createElement("style");t.innerHTML="\n.ag-chart-wrapper {\n    touch-action: none;\n}\n",document.head.insertBefore(t,document.head.querySelector("style")),Bs.interactionDocuments.push(e)}}destroy(){for(const t of Ps)window.removeEventListener(t,this.eventHandler);for(const t of Fs)this.element.removeEventListener(t,this.eventHandler)}resume(t){return this.pausers=this.pausers.filter(e=>e!==t),this.enabled=this.pausers.length<=0,this.enabled}pause(t){this.enabled=!1,this.pausers.push(t)}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.enabled&&this.dispatchEvent(t,e).catch(t=>G.errorOnce(t))}dispatchEvent(t,e){return _s(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null!=i)for(const n of e){const e=this.buildEvent(Object.assign(Object.assign({event:t},i),{type:n}));this.listeners.cancellableDispatch(n,()=>e.consumed,e)}}))}decideInteractionEventTypes(t){switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,["drag-start"];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const e=t instanceof MouseEvent&&1==(1&t.buttons);return this.mouseDown!==e?(this.mouseDown=e,[e?"drag-start":"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:n,pageY:s,offsetX:o,offsetY:r}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:n,pageY:s,offsetX:o,offsetY:r})}if("undefined"!=typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:n,clientY:s,pageX:o,pageY:r}=i;return Object.assign(Object.assign({},Bs.NULL_COORDS),{clientX:n,clientY:s,pageX:o,pageY:r})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return Bs.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const n=i(this.dragStartElement),s=i(t.target);e.offsetX-=n.x-s.x,e.offsetY-=n.y-s.y}return e}buildEvent(t){const{type:e,event:i,clientX:n,clientY:s}=t;let{offsetX:o,offsetY:r,pageX:a,pageY:l}=t;if(!xt(o)||!xt(r)){const t=this.element.getBoundingClientRect();o=n-t.left,r=s-t.top}if(!xt(a)||!xt(l)){const t=this.rootElement.getBoundingClientRect();a=n-t.left,l=s-t.top}const h={type:e,offsetX:o,offsetY:r,pageX:a,pageY:l,sourceEvent:i,consumed:!1,consume:()=>h.consumed=!0};return h}}Bs.interactionDocuments=[],Bs.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class zs{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t;const i=e.addListener("hover",t=>this.checkExclusiveRects(t));this.destroyFns.push(()=>e.removeListener(i))}updateTooltip(t,e,i){var n;null==i&&(i=null===(n=this.states[t])||void 0===n?void 0:n.content),i?this.states[t]={content:i,meta:e}:delete this.states[t],this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,n]of Object.entries(this.exclusiveAreas))if(n.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i=void 0,n=void 0;if(e.reverse(),e.slice(0,1).forEach(t=>{var e;const{content:s,meta:o}=null!==(e=this.states[t])&&void 0!==e?e:{};i=s,n=o}),void 0===n||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(n,void 0,t)}else this.tooltip.show(n,i);this.appliedState={content:i,meta:n}}}class js extends Ss{constructor(){super(),this.states={},this.currentZoom=void 0}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e)),this.applyStates()}getZoom(){return this.currentZoom}applyStates(){const t=this.currentZoom,e={};for(const[t,{x:i,y:n}]of Object.entries(this.states))e.x=null!=i?i:e.x,e.y=null!=n?n:e.y;this.currentZoom=null!=e.x||null!=e.y?e:void 0;var i,n,s,o,r,a,l,h,c,d;if(!(i=t,n=this.currentZoom,!(i===n||(null===(s=null==i?void 0:i.x)||void 0===s?void 0:s.min)===(null===(o=null==n?void 0:n.x)||void 0===o?void 0:o.min)&&(null===(r=null==i?void 0:i.x)||void 0===r?void 0:r.max)===(null===(a=null==n?void 0:n.x)||void 0===a?void 0:a.max)&&(null===(l=null==i?void 0:i.y)||void 0===l?void 0:l.max)===(null===(h=null==n?void 0:n.y)||void 0===h?void 0:h.max)&&(null===(c=null==i?void 0:i.y)||void 0===c?void 0:c.min)===(null===(d=null==n?void 0:n.y)||void 0===d?void 0:d.min))))return;const u=Object.assign({type:"zoom-change"},null!=t?t:{});this.listeners.dispatch("zoom-change",u)}}class Ws{constructor(){this.layoutProcessors=new ks,this.listeners=new ks}addListener(t,e){if("layout-complete"!==t)return this.layoutProcessors.addListener(t,e);if(function(t){return"layout-complete"===t}(t))return this.listeners.addListener(t,e);throw new Error("AG Charts - unsupported listener type: "+t)}removeListener(t){this.listeners.removeListener(t),this.layoutProcessors.removeListener(t)}dispatchPerformLayout(t,e){const i=this.layoutProcessors.reduceDispatch(t,({shrinkRect:t},e)=>[Object.assign(Object.assign({},e),{shrinkRect:t})],e);return null!=i?i:e}dispatchLayoutComplete(t){this.listeners.dispatch("layout-complete",t)}}class Ks{constructor(t){this.getSeries=t}}var Gs;!function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(Gs||(Gs={}));class Xs{constructor(t){this.updateCallback=t}update(t=Gs.FULL,{forceNodeDataRefresh:e=!1}={}){this.updateCallback(t,{forceNodeDataRefresh:e})}}var Ys=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Hs{constructor(){this.range="tooltip"}}Ys([Dt(te("tooltip","node"))],Hs.prototype,"range",void 0);var Vs=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class $s extends Y{constructor(){super({name:"markerLabelGroup"}),this.label=new at,this._marker=new Qn,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=M.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}function Us({orientation:t,bboxes:e,maxHeight:i,maxWidth:n,itemPaddingY:s=0,itemPaddingX:o=0,forceResult:r=!1}){const a="horizontal"===t,l={max:a?n:i,fn:a?t=>t.width:t=>t.height,padding:a?o:s},h={max:a?i:n,fn:a?t=>t.height:t=>t.width,padding:a?s:o};let c=0;const d=[];for(;c<e.length;){const t=Zs(e.slice(c),c,l,h,r);if(!t)return;c+=t.processedBBoxCount,d.push(t.pageIndices)}return function(t,e,i,n,s){let o=0,r=0;return{pages:t.map(t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach((t,i)=>{t.forEach((t,n)=>{e[n][i]=t})}),e}(t));let a=0;const l=t.map(t=>{const e=t.map(t=>(a=Math.max(t,a),i[t]));let o=0,r=0;return e.forEach(t=>{o+=t.height+n,r=Math.max(r,t.width+s)}),{indices:t,bboxes:e,columnHeight:o,columnWidth:r}});let h=0,c=0;return l.forEach(t=>{h+=t.columnWidth,c=Math.max(c,t.columnHeight)}),o=Math.max(h,o),r=Math.max(c,r),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:h,pageHeight:c}}),maxPageWidth:o,maxPageHeight:r}}(d,t,e,s,o)}function Zs(t,e,i,n,s){let o=function(t,e){const i=t.length;let n=0;for(let s=0;s<i;s++)if(n+=e.fn(t[s])+e.padding,n>e.max){return i/s<2?Math.ceil(i/2):s}return i}(t,i);if(o<1){if(!s)return;o=1}for(let r=o;r>=1;r--){const o=qs(t,e,r,i,n,s);if(null==o&&r<=1)return;if(null==o)continue;if("number"==typeof o){if(o<=1)return;r=o<r&&o>1?o:r;continue}return{processedBBoxCount:o.length*o[0].length,pageIndices:o}}}function qs(t,e,i,n,s,o){var r;const a=[];let l=0,h=0,c=[];const d=[];for(let u=0;u<t.length;u++){const p=(u+i)%i;0===p&&(l+=h,h=0,c.length>0&&a.push(c),c=[]);const g=n.fn(t[u])+n.padding;d[p]=Math.max(null!==(r=d[p])&&void 0!==r?r:0,g),h=Math.max(h,s.fn(t[u])+s.padding);const f=l+h,m=!o||a.length>0;if(f>s.max&&m){c=[];break}if(d.reduce((t,e)=>t+e,0)>n.max&&!o)return d.length<i?d.length:void 0;c.push(u+e)}return c.length>0&&a.push(c),a.length>0?a:void 0}$s.className="MarkerLabel",Vs([Ii("label")],$s.prototype,"text",void 0),Vs([Ii("label")],$s.prototype,"fontStyle",void 0),Vs([Ii("label")],$s.prototype,"fontWeight",void 0),Vs([Ii("label")],$s.prototype,"fontSize",void 0),Vs([Ii("label")],$s.prototype,"fontFamily",void 0),Vs([Ii("label","fill")],$s.prototype,"color",void 0),Vs([Ii("marker","fill")],$s.prototype,"markerFill",void 0),Vs([Ii("marker","stroke")],$s.prototype,"markerStroke",void 0),Vs([Ii("marker","strokeWidth")],$s.prototype,"markerStrokeWidth",void 0),Vs([Ii("marker","fillOpacity")],$s.prototype,"markerFillOpacity",void 0),Vs([Ii("marker","strokeOpacity")],$s.prototype,"markerStrokeOpacity",void 0);var Js=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Qs{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}Js([Dt(Xt)],Qs.prototype,"color",void 0),Js([Dt(se)],Qs.prototype,"fontStyle",void 0),Js([Dt(re)],Qs.prototype,"fontWeight",void 0),Js([Dt($t(0))],Qs.prototype,"fontSize",void 0),Js([Dt(Ft)],Qs.prototype,"fontFamily",void 0);class to{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}Js([Dt($t(0))],to.prototype,"size",void 0),Js([Dt(Yt)],to.prototype,"fill",void 0),Js([Dt(Ut(0,1))],to.prototype,"fillOpacity",void 0),Js([Dt(Yt)],to.prototype,"stroke",void 0),Js([Dt($t(0))],to.prototype,"strokeWidth",void 0),Js([Dt($t(0,1))],to.prototype,"strokeOpacity",void 0);class eo{constructor(){this.size=15,this._shape=ss,this.padding=8}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}Js([Dt($t(0))],eo.prototype,"size",void 0),Js([Dt($t(0))],eo.prototype,"padding",void 0);class io{constructor(t,e,i,n){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=n,this.id=E(this),this.group=new Y({name:"pagination"}),this.labelNode=new at,this.marker=new eo,this.activeStyle=new to,this.inactiveStyle=new to,this.highlightStyle=new to,this.label=new Qs,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new ss,this._previousButton=new ss;const{labelNode:s}=this;s.textBaseline="middle",s.fontSize=12,s.fontFamily="Verdana, sans-serif",s.fill="black",s.y=M.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,s]),this.interactionManager.addListener("click",t=>this.onPaginationClick(t)),this.interactionManager.addListener("hover",t=>this.onPaginationMouseMove(t)),this.marker.parent=this,this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){switch(this._orientation=t,t){case"horizontal":this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break;case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:n,fontStyle:s,fontWeight:o,fontSize:r,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=n,i.fontStyle=s,i.fontWeight=o,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:s,inactiveStyle:o,highlightStyle:r,highlightActive:a}=this,l=(t,e)=>e?o:t===a?r:s;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",n))}updateMarker(t,e){var i;const{size:n}=this.marker;t.size=n,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,n=t===e-1,s=0===t;this.nextButtonDisabled=n||i,this.previousButtonDisabled=s||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Gs.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=os(this.marker.shape||ss);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Gs.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}io.className="Pagination";var no=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};const so=["horizontal","vertical"],oo=Ot((t,e)=>Mt(t,e,t=>so.includes(t)),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class ro{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}no([Dt(Ut(0))],ro.prototype,"maxLength",void 0),no([Dt(Xt)],ro.prototype,"color",void 0),no([Dt(se)],ro.prototype,"fontStyle",void 0),no([Dt(re)],ro.prototype,"fontWeight",void 0),no([Dt($t(0))],ro.prototype,"fontSize",void 0),no([Dt(Ft)],ro.prototype,"fontFamily",void 0),no([Dt(At)],ro.prototype,"formatter",void 0);class ao{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=1}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}no([Dt($t(0))],ao.prototype,"size",void 0),no([Dt($t(0))],ao.prototype,"padding",void 0),no([Dt($t(0))],ao.prototype,"strokeWidth",void 0);class lo{constructor(){this.marker=new ao,this.label=new ro,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}no([Dt(Ut(0))],lo.prototype,"maxWidth",void 0),no([Dt($t(0))],lo.prototype,"paddingX",void 0),no([Dt($t(0))],lo.prototype,"paddingY",void 0),no([Dt(_t)],lo.prototype,"toggleSeriesVisible",void 0);class ho{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}no([Dt(At)],ho.prototype,"legendItemClick",void 0);class co{constructor(t){this.ctx=t,this.id=E(this),this.group=new Y({name:"legend",layer:!0,zIndex:be.LEGEND_ZINDEX}),this.itemSelection=Si.select(this.group,$s),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new lo,this.listeners=new ho,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new io(e=>t.updateService.update(e),t=>this.updatePageNumber(t),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=[t.interactionManager.addListener("click",t=>this.checkLegendClick(t)),t.interactionManager.addListener("dblclick",t=>this.checkLegendDoubleClick(t)),t.interactionManager.addListener("hover",t=>this.handleLegendMouseMove(t))],i=[t.layoutService.addListener("start-layout",t=>this.positionLegend(t.shrinkRect))];this.destroyFns.push(...e.map(e=>()=>t.interactionManager.removeListener(e)),...i.map(e=>()=>t.layoutService.removeListener(e)),()=>this.detachLegend())}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach(t=>t())}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,R.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":M.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:n,label:s,maxWidth:o,marker:{size:r,padding:a,shape:l},label:{maxLength:h=1/0,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p}}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);const f=[],m=lt(s),y=null!=o?o:.8*t,v=r+a+i;if(this.itemSelection.each((t,e)=>{var i;const n=os(null!=l?l:e.marker.shape);t.marker&&t.marker instanceof n||(t.marker=new n),t.markerSize=r,t.spacing=a,t.fontStyle=c,t.fontWeight=d,t.fontSize=u,t.fontFamily=p;const s=null!==(i=e.itemId)&&void 0!==i?i:e.id,o=this.getItemLabel(e),g=(null!=o?o:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(g,h,y,v,m,s),f.push(t.computeBBox())}),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,x=this.oldSize;b[0]=t,b[1]=e,b[0]===x[0]&&b[1]===x[1]||(x[0]=b[0],x[1]=b[1]);const{pages:k,maxPageHeight:S,maxPageWidth:w}=this.updatePagination(f,t,e);this.pages=k,this.maxPageSize=[w-i,S-n];const D=this.pagination.currentPage,O=this.pages[D];this.pages.length<1||!O?this.visible=!1:(this.visible=!0,this.updatePositions(D),this.update())}truncate(t,e,i,n,s,o){const r=t.split("");let a=!1;t.length>e&&(t=""+t.substring(0,e),a=!0);if(Math.floor(n+M.getTextSize(t,s).width)>i){let e="";const o=this.getCharacterWidths(s);let l=n+o["..."];for(const t of r){if(o[t]||(o[t]=M.getTextSize(t,s).width),l+=o[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(o)):this.truncatedItems.delete(o),t}updatePagination(t,e,i){const n=this.getOrientation(),s=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:r,maxPageWidth:a,paginationBBox:l,paginationVertical:h}=this.calculatePagination(t,e,i),c=o.findIndex(t=>t.endIndex>=s);this.pagination.currentPage=Math.min(Math.max(c,0),o.length-1);const{paddingX:d,paddingY:u}=this.item,p=a-d,g=r-u;let f=0,m=-l.y-this.item.marker.size/2;return h?m+=g+8:(f+=-l.x+p+8,m+=(g-l.height)/2),this.pagination.translationX=f,this.pagination.translationY=m,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:r,maxPageWidth:a,pages:o}}calculatePagination(t,e,i){var n,s,o;const{paddingX:r,paddingY:a}=this.item,l=this.getOrientation(),h=["left","right"].includes(this.position);let c=this.pagination.computeBBox(),d=new C(0,0,0,0),u=[],p=0,g=0,f=0;const m=t=>{const{width:e,height:i}=t;return e===c.width&&i===c.height},y=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(f++>10){G.warn("unable to find stable legend layout.");break}c=d;const m=e-(h?0:c.width),v=Us({orientation:l,bboxes:t,maxHeight:i-(h?c.height:0),maxWidth:m,itemPaddingY:a,itemPaddingX:r,forceResult:y});u=null!==(n=null==v?void 0:v.pages)&&void 0!==n?n:[],p=null!==(s=null==v?void 0:v.maxPageWidth)&&void 0!==s?s:0,g=null!==(o=null==v?void 0:v.maxPageHeight)&&void 0!==o?o:0;const b=u.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while(!m(d));return{maxPageWidth:p,maxPageHeight:g,pages:u,paginationBBox:c,paginationVertical:h}}updatePositions(t=0){const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:s,startIndex:o,endIndex:r}=n[t];let a=0,l=0;const h=s.length,c=s[0].indices.length,d="horizontal"===this.getOrientation(),u=s[0].bboxes[0].height+e,p=[];i.each((t,e,i)=>{var n,g;if(i<o||i>r)return void(t.visible=!1);const f=i-o;let m=0,y=0;d?(m=f%h,y=Math.floor(f/h)):(m=Math.floor(f/c),y=f%c),t.visible=!0;const v=s[m];v&&(l=u*y,a=null!==(n=p[y])&&void 0!==n?n:0,p[y]=(null!==(g=p[y])&&void 0!==g?g:0)+v.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))})}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=n:this.paginationTrackingIndex=Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(Gs.SCENE_RENDER)}update(){const{marker:{strokeWidth:t},label:{color:e}}=this.item;this.itemSelection.each((i,n)=>{const s=n.marker;i.markerFill=s.fill,i.markerStroke=s.stroke,i.markerStrokeWidth=t,i.markerFillOpacity=s.fillOpacity,i.markerStrokeOpacity=s.strokeOpacity,i.opacity=n.enabled?1:.5,i.color=e})}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const s of this.group.children){if(!s.visible)continue;if(!(s instanceof $s))continue;const o=s.computeBBox();if(o.grow(this.item.paddingX/2,"horizontal"),o.grow(this.item.paddingY/2,"vertical"),o.containsPoint(t,e))return s.datum;const r=t-o.x-this.item.paddingX/2,a=e-o.y-this.item.paddingY/2,l=Math.pow(r,2)+Math.pow(a,2);r>=0&&a>=0&&l<n.dist&&(n.dist=l,n.datum=s.datum),i.push(o)}if(C.merge(i).containsPoint(t,e))return n.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:n},item:{toggleSeriesVisible:s}}=this,{offsetX:o,offsetY:r}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(o,r),h=this.getDatumForPoint(o,r);if(!l||!h)return;const{id:c,itemId:d,enabled:u}=h,p=i.getSeries().find(t=>t.id===c);if(!p)return;t.consume();let g=u;s&&(g=!u,this.ctx.chartEventManager.legendItemClick(p,d,g)),g?n.updateHighlight(this.id,{series:p,itemId:d,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(Gs.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:g,itemId:d,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:n},item:{toggleSeriesVisible:s}}=this,{offsetX:o,offsetY:r}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(o,r),h=this.getDatumForPoint(o,r);if(!l||!h)return;const{id:c,itemId:d,seriesId:u}=h,p=n.getSeries(),g=p.find(t=>t.id===c);if(g){if(t.consume(),s){const t=p.reduce((t,e)=>[...t,...e.getLegendData().filter(t=>"category"===t.legendType)],[]),i={};t.forEach(t=>{var e,n;null!==(e=i[n=t.seriesId])&&void 0!==e||(i[n]=0),t.enabled&&i[t.seriesId]++});const n=t.find(t=>t.itemId===d&&t.seriesId===u);this.ctx.chartEventManager.legendItemDoubleClick(g,d,null!==(e=null==n?void 0:n.enabled)&&void 0!==e&&e,i)}this.ctx.updateService.update(Gs.PROCESS_DATA,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:d,seriesId:g.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:n},listeners:s}=this;if(!i)return;const o=this.computeBBox(),{pageX:r,pageY:a,offsetX:l,offsetY:h}=t,c=this.group.visible&&o.containsPoint(l,h);if(!c)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const d=this.getDatumForPoint(l,h);if(!(c&&void 0!==d))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const u=d?this.ctx.dataService.getSeries().find(t=>t.id===(null==d?void 0:d.id)):void 0;if(d&&this.truncatedItems.has(null!==(e=d.itemId)&&void 0!==e?e:d.id)){const e=this.getItemLabel(d);this.ctx.tooltipManager.updateTooltip(this.id,{pageX:r,pageY:a,offsetX:l,offsetY:h,event:t,showArrow:!1},Ne({content:e}))}else this.ctx.tooltipManager.removeTooltip(this.id);(n||null!=s.legendItemClick||null!=s.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==d?void 0:d.enabled)&&u?this.ctx.highlightManager.updateHighlight(this.id,{series:u,itemId:null==d?void 0:d.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,n);const s=this.computePagedBBox(),o=()=>{switch(this.position){case"top":return 0;case"bottom":return t.height-s.height;case"left":return 0;case"right":default:return t.width-s.width}};if(this.visible){let i,n;switch(this.position){case"top":case"bottom":i=(t.width-s.width)/2,n=o(),e.shrink(s.height,this.position);break;case"left":case"right":default:i=o(),n=(t.height-s.height)/2,e.shrink(s.width,this.position)}this.group.translationX=Math.floor(-s.x+t.x+i),this.group.translationY=Math.floor(-s.y+t.y+n)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=s.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let s=0,o=0;switch(this.position){case"top":case"bottom":const t=n<1?Math.min(.5,1/n*.2):.2;s=this.maxWidth?Math.min(this.maxWidth,e):e,o=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;case"left":case"right":default:const r=n>1?Math.min(.5,.25*n):.25;s=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*r),o=this.maxHeight?Math.min(this.maxHeight,i):i}return[s,o]}}co.className="Legend",no([Dt(_t)],co.prototype,"_enabled",void 0),no([Dt(ge)],co.prototype,"position",void 0),no([Dt(Ut(0))],co.prototype,"maxWidth",void 0),no([Dt(Ut(0))],co.prototype,"maxHeight",void 0),no([Dt(Pt)],co.prototype,"reverseOrder",void 0),no([Dt(oo)],co.prototype,"orientation",void 0),no([Dt($t(0))],co.prototype,"spacing",void 0);const uo={category:co};class po{constructor(){this.cache=new Map}call(t,...e){let i,n=this.cache.get(t);const s=()=>{try{const s=t(...e);return n&&null!=i&&n.set(i,s),s}catch(t){return void G.warnOnce("User callback errored, ignoring",t)}};try{i=JSON.stringify(e)}catch(t){return s()}return null==n&&(n=new Map,this.cache.set(t,n)),n.has(i)?n.get(i):s()}invalidateCache(){this.cache=new Map}}var go=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},fo=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class mo extends gt{constructor(t=window.document,e,i){var n;super(),this.id=E(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new Y({name:this.id+"-Series-root"}),this.extraDebugStats={},this._container=void 0,this.data=[],this.padding=new Qe(20),this.seriesAreaPadding=new Qe(0),this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this.modules={},this.legendModules={},this._pendingFactoryUpdates=[],this._performUpdateNoRenderCount=0,this._performUpdateType=Gs.NONE,this.seriesToUpdate=new Set,this.performUpdateTrigger=oi(t=>setTimeout(t,0),({count:t})=>fo(this,void 0,void 0,(function*(){if(!this._destroyed)try{yield this.performUpdate(t)}catch(t){this._lastPerformUpdateError=t,G.error("update error",t)}}))),this._axes=[],this._series=[],this.applyLegendOptions=void 0,this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return oi(t=>requestAnimationFrame(t),t)}(()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0}),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)};const s=null==i?void 0:i.scene,o=null!==(n=null==i?void 0:i.element)&&void 0!==n?n:t.createElement("div"),r=null==i?void 0:i.container,a=new Y({name:"root"});a.visible=!1,a.append(this.seriesRoot),this.axisGroup=new Y({name:"Axes",layer:!0,zIndex:be.AXIS_ZINDEX}),a.appendChild(this.axisGroup),this.element=o,o.classList.add("ag-chart-wrapper"),o.style.position="relative",this.scene=null!=s?s:new U({document:t,overrideDevicePixelRatio:e}),this.debug=!1,this.scene.debug.consoleLog=!1,this.scene.root=a,this.scene.container=o,this.autoSize=!0,this.chartEventManager=new Ts,this.cursorManager=new Is(o),this.highlightManager=new As,this.interactionManager=new Bs(o),this.zoomManager=new js,this.dataService=new Ks(()=>this.series),this.layoutService=new Ws,this.updateService=new Xs((t=Gs.FULL,{forceNodeDataRefresh:e})=>this.update(t,{forceNodeDataRefresh:e})),this.callbackCache=new po,this.animationManager=new Rs(this.interactionManager),this.animationManager.skipAnimations=!0,this.animationManager.play(),this.tooltip=new Ie(this.scene.canvas.element,t,t.body),this.tooltipManager=new zs(this.tooltip,this.interactionManager),this.overlays=new xs(this.element),this.highlight=new Hs,this.container=r,ti.observe(this.element,t=>{var e;const{width:i,height:n}=t;if(!this.autoSize)return;if(0===i&&0===n)return;const[s=0,o=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];s===i&&o===n||(this._lastAutoSize=[i,n],this.resize())}),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)),this.interactionManager.addListener("click",t=>this.onClick(t)),this.interactionManager.addListener("dblclick",t=>this.onDoubleClick(t)),this.interactionManager.addListener("hover",t=>this.onMouseMove(t)),this.interactionManager.addListener("leave",t=>this.onLeave(t)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.disablePointer()),this.animationManager.addListener("animation-frame",t=>{this.update(Gs.SCENE_RENDER)}),this.highlightManager.addListener("highlight-change",t=>this.changeHighlightDatum(t)),this.zoomManager.addListener("zoom-change",t=>this.update(Gs.PROCESS_DATA,{forceNodeDataRefresh:!0})),this.attachLegend("category")}getOptions(){var t;const{queuedUserOptions:e}=this;return Un([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}set container(t){if(this._container!==t){const{parentNode:e}=this.element;null!=e&&e.removeChild(this.element),t&&!this.destroyed&&t.appendChild(this.element),this._container=t}}get container(){return this._container}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize()}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:s,interactionManager:o,tooltipManager:r,zoomManager:a,dataService:l,layoutService:h,updateService:c,mode:d,callbackCache:u}=this;return{scene:t,animationManager:e,chartEventManager:i,cursorManager:n,highlightManager:s,interactionManager:o,tooltipManager:r,zoomManager:a,dataService:l,layoutService:h,updateService:c,mode:d,callbackCache:u}}destroy(t){var e;if(this._destroyed)return;const i=null==t?void 0:t.keepTransferableResources;let n=void 0;this._performUpdateType=Gs.NONE,this._pendingFactoryUpdates.splice(0),this.tooltipManager.destroy(),this.tooltip.destroy(),null===(e=this.legend)||void 0===e||e.destroy(),this.overlays.noData.hide(),ti.unobserve(this.element);for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this[t];return this.interactionManager.destroy(),i?(this.scene.strip(),n={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.series.forEach(t=>t.destroy()),this.series=[],this.axes.forEach(t=>t.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,n}log(t){this.debug&&G.debug(t)}disablePointer(t=!1){t||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){const e=this._pendingFactoryUpdates,i=e.length;0===i?(e.push(t),this._processCallbacks().catch(t=>G.errorOnce(t))):e.splice(1,i-1,t)}_processCallbacks(){return fo(this,void 0,void 0,(function*(){const t=this._pendingFactoryUpdates;for(;t.length>0;)if(this.updatePending)yield ys(1);else{try{yield t[0](),this.callbackCache.invalidateCache()}catch(t){G.error("update error",t)}t.shift()}}))}get performUpdateType(){return this._performUpdateType}get updatePending(){return this._performUpdateType!==Gs.NONE||null!=this.lastInteractionEvent}get lastPerformUpdateError(){return this._lastPerformUpdateError}awaitUpdateCompletion(){return fo(this,void 0,void 0,(function*(){yield this.performUpdateTrigger.await()}))}update(t=Gs.FULL,e){const{forceNodeDataRefresh:i=!1,seriesToUpdate:n=this.series}=null!=e?e:{};i&&this.series.forEach(t=>t.markNodeDataDirty());for(const t of n)this.seriesToUpdate.add(t);t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule())}performUpdate(t){var e;return fo(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:n}=this,s=[performance.now()];switch(i){case Gs.FULL:case Gs.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),s.push(performance.now());case Gs.PERFORM_LAYOUT:if(this.autoSize&&!this._lastAutoSize){if(this._performUpdateNoRenderCount++<5){this._performUpdateType=Gs.PERFORM_LAYOUT,this.performUpdateTrigger.schedule();break}}this._performUpdateNoRenderCount=0,yield this.performLayout(),this.handleOverlays(),s.push(performance.now());case Gs.SERIES_UPDATE:const{seriesRect:t}=this,o=[...this.seriesToUpdate].map(e=>e.update({seriesRect:t}));this.seriesToUpdate.clear(),yield Promise.all(o),s.push(performance.now());case Gs.TOOLTIP_RECALCULATION:const r=this.tooltipManager.getTooltipMeta(this.id);i<Gs.SERIES_UPDATE&&"hover"===(null===(e=null==r?void 0:r.event)||void 0===e?void 0:e.type)&&this.handlePointer(r.event);case Gs.SCENE_RENDER:yield this.scene.render({debugSplitTimes:s,extraDebugStats:n}),this.extraDebugStats={};case Gs.NONE:this._performUpdateType=Gs.NONE}const o=performance.now();this.log({chart:this,durationMs:Math.round(100*(o-s[0]))/100,count:t,performUpdateType:Gs[i]})}))}set axes(t){const e=new Set;this._axes.forEach(t=>{t.detachAxis(this.axisGroup),e.add(t)}),this._axes=t.filter(t=>!t.linkedTo).concat(t.filter(t=>t.linkedTo)),this._axes.forEach(t=>{t.attachAxis(this.axisGroup),e.delete(t)}),e.forEach(t=>t.destroy())}get axes(){return this._axes}set series(t){this.removeAllSeries(),t.forEach(t=>this.addSeries(t))}get series(){return this._series}addSeries(t,e){const{series:i,seriesRoot:n}=this;if(i.indexOf(t)<0){const s=e?i.indexOf(e):-1;return s>=0?(i.splice(s,0,t),n.insertBefore(t.rootGroup,e.rootGroup)):(i.push(t),n.append(t.rootGroup)),this.initSeries(t),!0}return!1}initSeries(t){t.chart=this,t.highlightManager=this.highlightManager,t.animationManager=this.animationManager,t.data||(t.data=this.data),this.addSeriesListeners(t),t.chartEventManager=this.chartEventManager,t.addChartEventListeners()}freeSeries(t){t.chart=void 0,t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}removeAllSeries(){this.series.forEach(t=>{this.freeSeries(t),this.seriesRoot.removeChild(t.rootGroup)}),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)})}assignSeriesToAxes(){this.axes.forEach(t=>{t.boundSeries=this.series.filter(e=>(t.direction===xe.X?e.xAxis:e.yAxis)===t)})}assignAxesToSeries(t=!1){const e={};this.axes.forEach(t=>{var i;const n=t.direction;(null!==(i=e[n])&&void 0!==i?i:e[n]=[]).push(t)}),this.series.forEach(i=>{i.directions.forEach(n=>{if((n===xe.X?i.xAxis:i.yAxis)&&!t)return;const s=e[n];if(!s)return void G.warn(`no available axis for direction [${n}]; check series and axes configuration.`);const o=i.getKeys(n),r=this.findMatchingAxis(s,i.getKeys(n));r?n===xe.X?i.xAxis=r:i.yAxis=r:G.warn(`no matching axis for direction [${n}] and keys [${o}]; check series and axes configuration.`)})})}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const n of e)if(t.indexOf(n)>=0)return i}}resize(t,e){var i,n,s,o;null!=t||(t=null!==(i=this.width)&&void 0!==i?i:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!=e||(e=null!==(s=this.height)&&void 0!==s?s:this.autoSize?null===(o=this._lastAutoSize)||void 0===o?void 0:o[1]:this.scene.canvas.height),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)&&(this.disablePointer(),this.update(Gs.PERFORM_LAYOUT,{forceNodeDataRefresh:!0}))}processData(){return fo(this,void 0,void 0,(function*(){(this.axes.length>0||this.series.some(t=>t instanceof fs))&&(this.assignAxesToSeries(!0),this.assignSeriesToAxes()),yield Promise.all(this.series.map(t=>t.processData())),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const n of this.series){if(!n.visible)continue;const s=n.getLabelData();s&&(null!=(i=s[0])&&"object"==typeof i.point&&"object"==typeof i.label)&&(e.push(s),t.push(n))}var i;const{seriesRect:n}=this,s=n&&e.length>0?function(t,e,i=5){const n=[];t=t.map(t=>t.slice().sort((t,e)=>e.point.size-t.point.size));for(let l=0;l<t.length;l++){const h=n[l]=[],c=t[l];if((null==c?void 0:c.length)&&c[0].label)for(let l=0,d=c.length;l<d;l++){const d=c[l],u=d.label,p=.5*d.point.size,g=d.point.x-.5*u.width,f=d.point.y-p-u.height-i,{width:m,height:y}=u;if(!(!e||(r=f,a=y,(o=g)+m<(s=e).x+s.width&&o>s.x&&r>s.y&&r+a<s.y+s.height)))continue;if(t.some(t=>t.some(t=>ei(t.point,g,f,m,y))))continue;n.some(t=>t.some(t=>ii(t,g,f,m,y)))||h.push({index:l,text:u.text,x:g,y:f,width:m,height:y,datum:d})}}var s,o,r,a;return n}(e,{x:0,y:0,width:n.width,height:n.height}):[];return new Map(s.map((e,i)=>[t[i],e]))}attachLegend(t){var e;if(this.legendType===t)return;null===(e=this.legend)||void 0===e||e.destroy(),this.legend=void 0;const i=this.getModuleContext();this.legend=function(t,e){if(uo[t])return new uo[t](e);throw new Error("AG Charts - unknown legend type: "+t)}(t,i),this.legend.attachLegend(this.scene.root),this.legendType=t}setLegendInit(t){this.applyLegendOptions=t}updateLegend(){var t;return fo(this,void 0,void 0,(function*(){const e=[];this.series.filter(t=>t.showInLegend).forEach(t=>{const i=t.getLegendData();e.push(...i)});const i=e.length>0?e[0].legendType:"category";this.attachLegend(i),null===(t=this.applyLegendOptions)||void 0===t||t.call(this,this.legend),"category"===i&&this.validateLegendData(e),this.legend.data=e}))}validateLegendData(t){const e={};t.forEach(t=>{var i,n,s,o,r;const a=null===(i=this.series.find(e=>e.id===t.seriesId))||void 0===i?void 0:i.type;if(!a)return;const l=t;null!==(n=e[a])&&void 0!==n||(e[a]={[l.label.text]:new Set}),null!==(s=(o=e[a])[r=l.label.text])&&void 0!==s||(o[r]=new Set),null!=l.marker.fill&&e[a][l.label.text].add(l.marker.fill)}),Object.keys(e).forEach(t=>{Object.keys(e[t]).forEach(i=>{e[t][i].size>1&&G.warnOnce(`legend item '${i}' has multiple fill colors, this may cause unexpected behaviour.`)})})}performLayout(){return fo(this,void 0,void 0,(function*(){this.scene.root.visible=!0;const{scene:{width:t,height:e}}=this;let i=new C(0,0,t,e);return({shrinkRect:i}=this.layoutService.dispatchPerformLayout("start-layout",{shrinkRect:i})),({shrinkRect:i}=this.layoutService.dispatchPerformLayout("before-series",{shrinkRect:i})),i}))}positionPadding(t){const{padding:e}=this;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e;const{title:i,subtitle:n,footnote:s}=this,o=t.clone(),r=e=>{var i;const n=t.height/10,s=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*at.defaultLineHeightRatio,o=t.width,r=Math.max(s,n);e.computeTextWrap(o,r)},a=t=>{var e;const i=o.y;t.node.x=o.x+o.width/2,t.node.y=i,t.node.textBaseline="top",r(t);const n=t.node.computeBBox(),s=Math.ceil(n.y-i+n.height+(null!==(e=t.spacing)&&void 0!==e?e:0));o.shrink(s,"top")};return i&&(i.node.visible=i.enabled,i.node.visible&&a(i)),n&&(n.node.visible=null!==(e=(null==i?void 0:i.enabled)&&n.enabled)&&void 0!==e&&e,n.node.visible&&a(n)),s&&(s.node.visible=s.enabled,s.node.visible&&(t=>{var e;const i=o.y+o.height;t.node.x=o.x+o.width/2,t.node.y=i,t.node.textBaseline="bottom",r(t);const n=t.node.computeBBox(),s=Math.ceil(i-n.y+(null!==(e=t.spacing)&&void 0!==e?e:0));o.shrink(s,"bottom")})(s)),{shrinkRect:o}}getSeriesRect(){return this.seriesRect}pickSeriesNode(t,e,i){var n,s;const o=performance.now(),r=e?[Pe.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l=void 0;for(const e of a){if(!e.visible||!e.rootGroup.visible)continue;const{match:s,distance:o}=null!==(n=e.pickNode(t,r))&&void 0!==n?n:{};if(s&&null!=o&&((!l||l.distance>o)&&o<=(null!=i?i:1/0)&&(l={series:e,distance:o,datum:s}),0===o))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(s=this.extraDebugStats.pickSeriesNode)&&void 0!==s?s:0)+(performance.now()-o)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(Gs.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){const{lastPick:e,hoverRect:i}=this,{offsetX:n,offsetY:s}=t,o=(t=!1)=>{e&&this.disablePointer(t)};(null==i?void 0:i.containsPoint(n,s))?(this.handlePointerTooltip(t,o),this.handlePointerNode(t)):o()}handlePointerTooltip(t,e){var i,n;const{lastPick:s,tooltip:o}=this,{range:r}=o,{pageX:a,pageY:l,offsetX:h,offsetY:c}=t;let d;"number"==typeof r&&Number.isFinite(r)&&(d=r);const u=this.pickSeriesNode({x:h,y:c},"exact"===r,d);if(!u)return this.tooltipManager.updateTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const p="node"===this.highlight.range||!s||s.datum!==u.datum;let g;p?(g=u.series.getTooltipHtml(u.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,u.datum)):s&&(s.event=t.sourceEvent);const f=null!=d,m=this.tooltip.enabled&&u.series.tooltip.enabled,y="exact"===r&&0===u.distance,v=m&&("nearest"===r||f||y)&&(!p||void 0!==g),b={xOffset:u.datum.series.tooltip.position.xOffset,yOffset:u.datum.series.tooltip.position.yOffset},x=this.mergePointerDatum({pageX:a,pageY:l,offsetX:h,offsetY:c,event:t,showArrow:u.series.tooltip.showArrow,position:b},u.datum);x.enableInteraction=null!==(n=null===(i=u.series.tooltip.interaction)||void 0===i?void 0:i.enabled)&&void 0!==n&&n,v&&this.tooltipManager.updateTooltip(this.id,x,g)}handlePointerNode(t){this.checkSeriesNodeRange(t,(t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(Gs.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(Gs.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeClickEvent(t.sourceEvent,i))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,(e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=null==i?void 0:i.datum,s=null==n?void 0:n.series.nodeClickRange;if(n&&"nearest"===s)return e(n.series,n),!0;let o;"number"==typeof s&&Number.isFinite(s)&&(o=s);const r=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},"exact"===s,o);if(!r)return!1;const a=null!=o,l="exact"===s&&0===r.distance;return!(!a&&!l)&&(e(r.series,r.datum),!0)}mergePointerDatum(t,e){const{type:i}=e.series.tooltip.position;if("node"===i&&e.nodeMidPoint){const{x:i,y:n}=e.nodeMidPoint,{canvas:s}=this.scene,o=e.series.rootGroup.inverseTransformPoint(i,n),r=s.element.getBoundingClientRect();return Object.assign(Object.assign({},t),{pageX:Math.round(r.left+window.scrollX+o.x),pageY:Math.round(r.top+window.scrollY+o.y),offsetX:Math.round(o.x),offsetY:Math.round(o.y)})}return t}changeHighlightDatum(t){var e,i;const n=new Set,{series:s,datum:o}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:r,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};r&&n.add(r),s&&n.add(s),(null==r?void 0:r.cursor)&&a&&this.cursorManager.updateCursor(r.id),(null==s?void 0:s.cursor)&&o&&this.cursorManager.updateCursor(s.id,s.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==s||null==r?this.update(Gs.SERIES_UPDATE):this.update(Gs.SERIES_UPDATE,{seriesToUpdate:n})}waitForUpdate(t=5e3){return fo(this,void 0,void 0,(function*(){const e=performance.now();for(;this._pendingFactoryUpdates.length>0||this.updatePending;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield ys(5)}yield this.awaitUpdateCompletion()}))}handleOverlays(){this.handleNoDataOverlay()}handleNoDataOverlay(){const t=!this.series.some(t=>t.hasData()),e=this.getSeriesRect();t&&e?this.overlays.noData.show(e):this.overlays.noData.hide()}}go([Ti({newValue(t){this.scene.debug.consoleLog=t}})],mo.prototype,"debug",void 0),go([Ti({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach(e=>e.data=t)}})],mo.prototype,"data",void 0),go([Ti({newValue(t){this.resize(t)}})],mo.prototype,"width",void 0),go([Ti({newValue(t){this.resize(void 0,t)}})],mo.prototype,"height",void 0),go([Ti({changeValue(t){this.autoSizeChanged(t)}}),Dt(_t)],mo.prototype,"autoSize",void 0),go([Ti({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],mo.prototype,"title",void 0),go([Ti({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],mo.prototype,"subtitle",void 0),go([Ti({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}})],mo.prototype,"footnote",void 0),go([Dt(te("standalone","integrated"))],mo.prototype,"mode",void 0);class yo{constructor(t="",e,i=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((t,e)=>e!==this.number):[]}}function vo(t,e=!0){const i=new yo;let n=0;return e&&t.forEach(t=>n=Math.max(n,t.labels.length)),t.forEach(t=>{if(e)for(;t.labels.length<n;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),n=i.length-1;i.forEach((e,i)=>{const s=t.children,o=s.find(t=>t.label===e),r=i!==n;if(o&&r)t=o;else{const i=new yo(e,t);i.number=s.length,s.push(i),r&&(t=i)}})}(i,t)}),i}function bo(t,e,i){const n=i/(e.number-t.number);e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function xo(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function ko(t,e){const i=t.children;if(i.length){let n=i[0];i.forEach(t=>{ko(t,e),n=function(t,e,i){const n=t.getLeftSibling();if(n){let s=t,o=t,r=n,a=o.getLeftmostSibling(),l=o.mod,h=s.mod,c=r.mod,d=a.mod;for(;r.nextRight()&&o.nextLeft();){r=r.nextRight(),o=o.nextLeft(),a=a.nextLeft(),s=s.nextRight(),s.ancestor=t;const n=r.prelim+c-(o.prelim+l)+i;n>0&&(bo(xo(r,t,e),t,n),l+=n,h+=n),c+=r.mod,l+=o.mod,d+=a.mod,h+=s.mod}r.nextRight()&&!s.nextRight()?(s.thread=r.nextRight(),s.mod+=c-h):(o.nextLeft()&&!a.nextLeft()&&(a.thread=o.nextLeft(),a.mod+=l-d),e=t)}return e}(t,n,e)}),function(t){const e=t.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const s=e[n];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}}(t);const s=(i[0].prelim+i[i.length-1].prelim)/2,o=t.getLeftSibling();o?(t.prelim=o.prelim+e,t.mod=t.prelim-s):t.prelim=s}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class So{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}}function wo(t){const e=new Do;return ko(t,1),function t(e,i,n){e.x=e.prelim+i,e.y=e.depth,n.update(e),e.children.forEach(s=>t(s,i+e.mod,n))}(t,-t.prelim,e),function t(e){const i=e.children;let n=0;i.forEach(e=>{t(e),e.children.length?n+=e.leafCount:n++}),e.leafCount=n,i.length?(e.subtreeLeft=i[0].subtreeLeft,e.subtreeRight=i[e.children.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}(t),e}class Do{constructor(){this.dimensions=new So,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,t=>({x:t.x,y:t.y})),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e,i=0,n=0,s=!1){const o=this.leafCount-1,r=this.depth,a=this.dimensions;let l=1,h=1;if(t>0&&o){const e=(a.right-a.left)/o;l=t/o/e,s&&(l=-l)}if(e>0&&r){const t=(a.bottom-a.top)/r;h=e/r/t}const c=new So;this.nodes.forEach(t=>{t.screenX=t.x*l,t.screenY=t.y*h,c.update(t,t=>({x:t.screenX,y:t.screenY}))});const d=-c.left,u=-c.top;this.nodes.forEach(t=>{t.screenX+=d+i,t.screenY+=u+n})}}var Oo=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Mo extends Bn{constructor(){super(...arguments),this.grid=!1}}Oo([Dt(_t)],Mo.prototype,"grid",void 0);class Co extends Gn{constructor(t){super(t,new Di),this.tickScale=new Di,this.translation={x:0,y:0},this.line=new Pn,this.label=new Mo,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:s,scale:o}=this;o.paddingOuter=.1,o.paddingInner=2*o.paddingOuter,this.range=o.range.slice(),this.refreshScale(),s.paddingInner=1,s.paddingOuter=0,this.gridLineSelection=Si.select(n,Mi),this.axisLineSelection=Si.select(e,Mi),this.separatorSelection=Si.select(e,Mi),this.labelSelection=Si.select(i,at)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),s=n*e[0],o=t[0]-s;this.tickScale.range=i.range=[o,o+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,s=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*s,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-n.depth*s,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e,boundSeries:i}=this,n=[];let s=void 0;i.filter(t=>t.visible).forEach(t=>{if(e===xe.X)if(void 0===s){const i=t.getDomain(e);n.push(i),s="number"==typeof i[0]}else s&&n.push(t.getDomain(e));else n.push(t.getDomain(e))});const o=(new Array).concat(...n),r=null!==(t=kn(o))&&void 0!==t?t:o;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain}normaliseDataDomain(t){const e=t.filter((t,e,i)=>i.indexOf(t)===e),i=vo(e);this.tickTreeLayout=wo(i);const n=e.slice();return n.push(""),this.tickScale.domain=n,this.resizeTickTree(),e}update(t){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:e,label:i,label:{parallel:n},moduleCtx:{callbackCache:s},tickScale:o,range:r,title:a,title:{formatter:l=(t=>t.defaultValue)}={},_titleCaption:h}=this,c=e.range[0],d=e.range[1],u=Math.abs(d-c)/e.domain.length||0,p=tt(this.rotation),g=Math.abs(Math.cos(p))<1e-8,f=i.getSideFlag();this.updatePosition({rotation:p,sideFlag:f}),h.node.visible=!1;const m=this.lineHeight,y=this.tickTreeLayout,v=e.ticks(),b=y?y.nodes:[],x=!!y&&y.depth>1,k=o.ticks(),{defaultRotation:S,configuredRotation:w,parallelFlipFlag:D}=Dn({rotation:i.rotation,parallel:n,regularFlipRotation:q(p-Math.PI/2),parallelFlipRotation:q(p)}),O=this.gridLineSelection.update(this.gridLength?k:[]),M=this.labelSelection.update(b),C=i.formatter,N=new Map;let L=0;M.each((t,e,n)=>{var o;t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.fill=i.color,t.textBaseline=-1===D?"bottom":"hanging",t.textAlign="center",t.translationX=e.screenY-.25*i.fontSize,t.translationY=e.screenX,0===n?(null==a?void 0:a.enabled)&&v.length>0?(t.visible=!0,t.text=s.call(l,this.getTitleFormatterParams()),t.fontSize=a.fontSize,t.fontStyle=a.fontStyle,t.fontWeight=a.fontWeight,t.fontFamily=a.fontFamily,t.textBaseline="hanging"):t.visible=!1:C?(t.text=null!==(o=s.call(C,{value:String(e.label),index:n}))&&void 0!==o?o:String(e.label),t.visible=e.screenX>=r[0]&&e.screenX<=r[1]):(t.text=String(e.label),t.visible=e.screenX>=r[0]&&e.screenX<=r[1]);const h=t.computeBBox();N.set(t.id,h),h.width>L&&(L=h.width)});const E=f*i.padding,R=this.label.grid,I=[];M.each((t,e,i)=>{if(t.x=E,t.rotationCenterX=E,e.children.length){t.translationX-=L-m+this.label.padding;const i=e.leafCount*u,n=N.get(t.id);n&&n.width>i?t.visible=!1:t.rotation=g?S:-Math.PI/2}else{t.rotation=w,t.textAlign="end",t.textBaseline="middle";const e=N.get(t.id);e&&e.height>u&&(t.visible=!1)}if(e.parent&&x){const t=e.children.length?e.screenX-e.leafCount*u/2:e.screenX-u/2;if(e.children.length){const n=-L-2*this.label.padding+e.screenY;I.push({y:t,x1:n+m,x2:n,toString:()=>String(i)})}else(e.number!==e.children.length-1||R)&&I.push({y:t,x1:0,x2:-L-2*this.label.padding,toString:()=>String(i)})}});let T=0;I.forEach(t=>T=Math.min(T,t.x2)),I.push({y:Math.max(c,d),x1:0,x2:T,toString:()=>String(I.length)});const A=this.separatorSelection.update(I);A.each((t,e)=>{t.x1=e.x1,t.x2=e.x2,t.y1=e.y,t.y2=e.y,t.visible=e.y>=r[0]-1e-7&&e.y<=r[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}),this.gridLineSelection=O,this.labelSelection=M;const _=y?y.depth+1:1,P=[];for(let t=0;t<_;t++)P.push(t);if(this.axisLineSelection.update(P).each((t,e,i)=>{const n=i>0?-L-2*this.label.padding-(i-1)*m:0;t.x1=n,t.x2=n,t.y1=r[0],t.y2=r[1],t.strokeWidth=this.line.width,t.stroke=this.line.color,t.visible=v.length>0&&(0===i||R&&x)}),this.gridLength){const t=this.gridStyle,e=t.length;O.each((i,n,s)=>{const a=Math.round(o.convert(n));i.x1=0,i.x2=-f*this.gridLength,i.y1=a,i.y2=a,i.visible=a>=r[0]&&a<=r[1];const l=t[s%e];i.stroke=l.stroke,i.strokeWidth=this.tick.width,i.lineDash=l.lineDash,i.fill=void 0})}return t}}Co.className="GroupedCategoryAxis",Co.type="groupedCategory",Oo([Dt(Yt)],Co.prototype,"labelColor",void 0);var No=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const Lo=["top","right","bottom","left"];class Eo extends mo{constructor(t=window.document,e,i){super(t,e,i),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return No(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesRect:i,visibility:n,clipSeries:s}=this.updateAxes(e);this.seriesRoot.visible=n.series,this.seriesRect=i,this.series.forEach(t=>{t.rootGroup.translationX=Math.floor(i.x),t.rootGroup.translationY=Math.floor(i.y)});const{seriesRoot:o,seriesAreaPadding:r}=this,a=i.clone().grow(r),l=a.clone().grow(20);return this.hoverRect=l,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:a,hoverRect:l,visible:n.series},axes:this.axes.map(t=>Object.assign({id:t.id},t.getLayoutState()))}),s?o.setClipRectInGroupCoordinateSpace(a):o.setClipRectInGroupCoordinateSpace(),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),n=Object.assign({},this._lastVisibility),s=new Set(this._axes.map(t=>t.position));for(const t of Object.keys(i))s.has(t)||delete i[t];const o=(t,e)=>!Object.keys(t).some(t=>null==i[t])&&(n.crossLines===e.crossLines&&n.series===e.series&&Object.entries(i).every(([e,i])=>{const n=t[e];return null==i&&null==n||i===n}));let r={},a={},l=!1,h=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),c=0;do{Object.assign(i,r),Object.assign(n,a);const e=this.updateAxesPass(i,t.clone(),h);if(d=e.axisWidths,r=Object.entries(d).reduce((t,[e,i])=>(i&&Math.abs(i)===1/0&&(i=0),t[e]=null!=i?Math.ceil(i):i,t),{}),a=e.visibility,l=e.clipSeries,h=e.seriesRect,c++>10){G.warn("unable to find stable axis layout.");break}}while(!o(r,a));var d;return this.axes.forEach(e=>{if(e.setCrossLinesVisible(n.crossLines),h)switch(e.clipGrid(h.x,h.y,h.width+5,h.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,h.y,t.width+5,h.height+5);break;case"top":case"bottom":e.clipTickLines(h.x,t.y,h.width+5,t.height+5)}}),this._lastAxisWidths=i,this._lastVisibility=n,{seriesRect:h,visibility:n,clipSeries:l}}updateAxesPass(t,e,i){const{axes:n}=this,s={},o={},r={series:!0,crossLines:!0};let a=!1;const l={},h=this.applySeriesPadding(e),c=i?this.buildCrossLinePadding(t):{},d=this.buildAxisBound(h,t,c,r),u=this.buildSeriesRect(d,t);return n.forEach(e=>{var i,n;const{position:r}=e,{clipSeries:c,axisThickness:p,axisOffset:g}=this.calculateAxisDimensions({axis:e,seriesRect:u,paddedBounds:h,axisWidths:t,newAxisWidths:o,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=s[r])&&void 0!==i?i:0)>0});s[r]=(null!==(n=s[r])&&void 0!==n?n:0)+1,a=a||c,this.positionAxis({axis:e,axisBound:d,axisOffset:g,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:u})}),{clipSeries:a,seriesRect:u,axisWidths:o,visibility:r}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach(t=>{t.crossLines&&t.crossLines.forEach(t=>{t.calculatePadding(i)})});for(const[n,s=0]of Object.entries(i))i[n]=Math.max(s-(null!==(e=t[n])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return Lo.forEach(t=>{const n=this.seriesAreaPadding[t],s=i.find(e=>e.position===t);s?s.seriesAreaPadding=n:e.shrink(n,t)}),e}buildAxisBound(t,e,i,n){var s,o,r,a;const l=t.clone(),{top:h=0,right:c=0,bottom:d=0,left:u=0}=i,p=u+c,g=h+d,f=(null!==(s=e.left)&&void 0!==s?s:0)+(null!==(o=e.right)&&void 0!==o?o:0)+p,m=(null!==(r=e.top)&&void 0!==r?r:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+g;return l.width<=f||l.height<=m?(n.crossLines=!1,n.series=!1,l):(l.x+=u,l.y+=h,l.width-=p,l.height-=g,l)}buildSeriesRect(t,e){const i=t.clone(),{top:n,bottom:s,left:o,right:r}=e;return i.x+=null!=o?o:0,i.y+=null!=n?n:0,i.width-=(null!=o?o:0)+(null!=r?r:0),i.height-=(null!=n?n:0)+(null!=s?s:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,n){const{x:s,y:o,width:r,height:a}=t,l=[s,o,s+r,o+a];return(1===n?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===n?0:2)])}calculateAxisDimensions(t){var e,i,n,s,o,r;const{axis:a,seriesRect:l,paddedBounds:h,axisWidths:c,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:p}=t;let{clipSeries:g}=t;const{position:f,direction:m}=a,y=null!==(e=d[f])&&void 0!==e?e:0;switch(f){case"top":case"bottom":a.range=[0,l.width],a.gridLength=l.height;break;case"right":case"left":a.range=(t=>t instanceof Yn||t instanceof Co?[0,l.height]:[l.height,0])(a),a.gridLength=l.width}const v=null===(i=this.zoomManager.getZoom())||void 0===i?void 0:i[a.direction],{min:b=0,max:x=1}=null!=v?v:{};a.visibleRange=[b,x],!g&&(a.visibleRange[0]>0||a.visibleRange[1]<1)&&(g=!0);let k=a.nice?u[m]:void 0;a.thickness>0?a.maxThickness=a.thickness:m===xe.Y?a.maxThickness=.3*h.width:a.maxThickness=.3*h.height,k=a.update(k),u[m]=null!==(n=u[m])&&void 0!==n?n:k;let S=0;if(a.thickness)S=a.thickness;else{const t=a.computeBBox();S=m===xe.X?t.height:t.width}return p&&(S+=15),S=Math.ceil(S),d[f]=(null!==(s=d[f])&&void 0!==s?s:0)+S,a.gridPadding=(null!==(o=c[f])&&void 0!==o?o:0)-(null!==(r=d[f])&&void 0!==r?r:0),{clipSeries:g,axisThickness:S,axisOffset:y}}positionAxis(t){var e,i,n,s;const{axis:o,axisBound:r,axisWidths:a,seriesRect:l,axisOffset:h,axisThickness:c}=t,{position:d}=o;switch(d){case"top":o.translation.x=r.x+(null!==(e=a.left)&&void 0!==e?e:0),o.translation.y=this.clampToOutsideSeriesRect(l,r.y+1+h+c,"y",1);break;case"bottom":o.translation.x=r.x+(null!==(i=a.left)&&void 0!==i?i:0),o.translation.y=this.clampToOutsideSeriesRect(l,r.y+r.height+1-c-h,"y",-1);break;case"left":o.translation.y=r.y+(null!==(n=a.top)&&void 0!==n?n:0),o.translation.x=this.clampToOutsideSeriesRect(l,r.x+h+c,"x",1);break;case"right":o.translation.y=r.y+(null!==(s=a.top)&&void 0!==s?s:0),o.translation.x=this.clampToOutsideSeriesRect(l,r.x+r.width-c-h,"x",-1)}o.updatePosition({rotation:tt(o.rotation),sideFlag:o.label.getSideFlag()})}}Eo.className="CartesianChart",Eo.type="cartesian";class Ro extends qe{constructor({moduleCtx:t,useLabelLayer:e=!1,pickModes:i=[Pe.EXACT_SHAPE_MATCH]}){super({moduleCtx:t,useLabelLayer:e,pickModes:i,directionKeys:{[xe.X]:["angleKey"],[xe.Y]:["radiusKey"]},directionNames:{[xe.X]:["angleName"],[xe.Y]:["radiusName"]}}),this.centerX=0,this.centerY=0,this.radius=0}getLabelData(){return[]}computeLabelsBBox(t,e){return null}}function Io(t,e,i){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:s,outerRadius:o}=i;if(n<Math.min(s,o)||n>Math.max(s,o))return!1;let r=Math.atan2(e,t);r<-Math.PI/2&&(r+=2*Math.PI);const{startAngle:a,endAngle:l}=i;return l===-Math.PI/2?r<a:a===3*Math.PI/2?r>l:r<=l&&r>=a}function To(t,e){const{startAngle:i,endAngle:n,innerRadius:s,outerRadius:o}=e,r={x:o*Math.cos(i),y:o*Math.sin(i)},a={x:o*Math.cos(n),y:o*Math.sin(n)},l=0===s?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)},h=0===s?{x:0,y:0}:{x:s*Math.cos(n),y:s*Math.sin(n)};return null!=ai(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,l.x,l.y)||null!=ai(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,h.x,h.y)||ci(0,0,o,i,n,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var Ao=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class _o extends gi{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0}computeBBox(){const t=this.outerRadius;return new C(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,e=this.angleOffset,i=Math.min(this.startAngle,this.endAngle)+e,n=Math.max(this.startAngle,this.endAngle)+e,s=Math.min(this.innerRadius,this.outerRadius),o=Math.max(this.innerRadius,this.outerRadius),r=Ci(q(this.startAngle),q(this.endAngle)),a=this.centerX,l=this.centerY;t.clear(),r?(t.arc(a,l,o,i,n),s>0&&(t.moveTo(a+s*Math.cos(n),l+s*Math.sin(n)),t.arc(a,l,s,n,i,!0))):(t.moveTo(a+s*Math.cos(i),l+s*Math.sin(i)),t.arc(a,l,o,i,n),s>0?t.arc(a,l,s,n,i,!0):t.lineTo(a,l)),t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,n=this.startAngle+i,s=this.endAngle+i,o=Math.min(this.innerRadius,this.outerRadius),r=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return Io(a.x,a.y,{startAngle:n,endAngle:s,innerRadius:o,outerRadius:r})}}_o.className="Sector",Ao([pi()],_o.prototype,"centerX",void 0),Ao([pi()],_o.prototype,"centerY",void 0),Ao([pi()],_o.prototype,"innerRadius",void 0),Ao([pi()],_o.prototype,"outerRadius",void 0),Ao([pi()],_o.prototype,"startAngle",void 0),Ao([pi()],_o.prototype,"endAngle",void 0),Ao([pi()],_o.prototype,"angleOffset",void 0);const Po={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return(e,i)=>{const n=i.keys[0],s=Math.abs(n-t);return t=n,!isNaN(s)&&s>0&&s<e?s:e}}},Fo={type:"processor",property:"aggValuesExtent",calculate:t=>{var e,i,n,s;const o=[...null!==(i=null===(e=t.domain.aggValues)||void 0===e?void 0:e[0])&&void 0!==i?i:[0,0]];for(const[e,i]of null!==(s=null===(n=t.domain.aggValues)||void 0===n?void 0:n.slice(1))&&void 0!==s?s:[])e<o[0]&&(o[0]=e),i>o[1]&&(o[1]=i);return o}},Bo={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:t}})=>{if(null!=t)return[...t].sort((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0})}};function zo(t,e,i="sum"){const n=(t,i)=>{const n=t*e/i;return n>=0?Math.min(e,n):Math.max(-e,n)};return{type:"group-value-processor",properties:t,adjust:()=>(t,e)=>{const s=[0,0];for(const n of e){const e=t[n],o=e<0?0:1;"sum"===i?s[o]+=e:s[o]=0===o?Math.min(s[o],e):Math.max(s[o],e)}const o=Math.max(Math.abs(s[0]),s[1]);for(const i of e)t[i]=n(t[i],o)}}}function jo(t,e,i,n){const s=e[1]-e[0],o=(t,i,n)=>{const o=e[0]+(t-i)/n*s;return 0===n||o>=e[1]?e[1]:o<e[0]?e[0]:o};return{type:"property-value-processor",property:t,adjust:()=>(t,s)=>{let[r,a]=t.domain.values[s];null!=i&&(r=i),null!=n&&(a=n);const l=a-r;t.domain.values[s]=[e[0],e[1]];for(const e of t.data){let i=e.values;"ungrouped"===t.type&&(i=[i]);for(const t of i)t[s]=o(t[s],r,l)}}}}var Wo,Ko=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Go=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Xo extends Ke{constructor(t,e,i,n,s,o,r){super(s,o,r),this.angleKey=t,this.calloutLabelKey=e,this.sectorLabelKey=i,this.radiusKey=n}}class Yo extends Xo{constructor(){super(...arguments),this.type="nodeClick"}}class Ho extends Xo{constructor(){super(...arguments),this.type="nodeDoubleClick"}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(Wo||(Wo={}));class Vo extends wn{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.formatter=void 0,this.minSpacing=4,this.maxCollisionOffset=50}}Ko([Dt($t(0))],Vo.prototype,"offset",void 0),Ko([Dt($t(0))],Vo.prototype,"minAngle",void 0),Ko([Dt(At)],Vo.prototype,"formatter",void 0),Ko([Dt($t(0))],Vo.prototype,"minSpacing",void 0),Ko([Dt($t(0))],Vo.prototype,"maxCollisionOffset",void 0);class $o extends wn{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5,this.formatter=void 0}}Ko([Dt($t())],$o.prototype,"positionOffset",void 0),Ko([Dt($t(0,1))],$o.prototype,"positionRatio",void 0),Ko([Dt(At)],$o.prototype,"formatter",void 0);class Uo{constructor(){this.colors=void 0,this.length=10,this.strokeWidth=1}}Ko([Dt(Vt)],Uo.prototype,"colors",void 0),Ko([Dt($t(0))],Uo.prototype,"length",void 0),Ko([Dt($t(0))],Uo.prototype,"strokeWidth",void 0);class Zo extends Ue{constructor(){super(...arguments),this.renderer=void 0}}Ko([Dt(At)],Zo.prototype,"renderer",void 0);Ko([Dt(_t)],class extends _i{constructor(){super(...arguments),this.showInLegend=!1}}.prototype,"showInLegend",void 0);class qo extends wn{constructor(){super(...arguments),this.text="",this.margin=2}}Ko([Dt(Ft)],qo.prototype,"text",void 0),Ko([Dt($t())],qo.prototype,"margin",void 0);class Jo{constructor(){this.fill="transparent",this.fillOpacity=1}}Ko([Dt(Xt)],Jo.prototype,"fill",void 0),Ko([Dt(Ut(0,1))],Jo.prototype,"fillOpacity",void 0);class Qo extends rs{}class tr extends Ro{constructor(t){super({moduleCtx:t,useLabelLayer:!0}),this.radiusScale=new Wn,this.groupSelection=Si.select(this.contentGroup,Y),this.highlightSelection=Si.select(this.highlightGroup,Y),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new Vo,this.sectorLabel=new $o,this.calloutLine=new Uo,this.tooltip=new Zo,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new $e,this.surroundingRadius=void 0,this.angleScale=new Wn,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.backgroundGroup=this.rootGroup.appendChild(new Y({name:this.id+"-background",layer:!0,zIndex:be.SERIES_BACKGROUND_ZINDEX}));const e=new Y({name:"pieCalloutLabels"}),i=new Y({name:"pieSectorLabels"}),n=new Y({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=Si.select(e,Y),this.sectorLabelSelection=Si.select(i,at),this.innerLabelsSelection=Si.select(n,at),this.animationState=new Qo("empty",{empty:{on:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()}}},ready:{on:{update:{target:"ready",action:()=>this.animateReadyUpdateReady()}}}})}set data(t){this._data=t,this.processSeriesItemEnabled()}get data(){return this._data}addChartEventListeners(){var t;null===(t=this.chartEventManager)||void 0===t||t.addListener("legend-item-click",t=>this.onLegendItemClick(t))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null==e?void 0:e.map(()=>i))&&void 0!==t?t:[]}getDomain(t){return t===xe.X?this.angleScale.domain:this.radiusScale.domain}processData(){var t,e;return Go(this,void 0,void 0,(function*(){let{data:i=[]}=this;const{angleKey:n,radiusKey:s,seriesItemEnabled:o}=this;if(!n)return;const r=[];s&&(r.push(function(t,e={}){const{min:i=-1/0,max:n=1/0}=e,s=Be(e,["min","max"]);return Object.assign({type:"value",property:t,valueType:"range",validation:t=>null!=bt(t,!0),processor:()=>t=>"number"!=typeof t||isNaN(t)?t:Math.min(Math.max(t,i),n)},s)}(s,{id:"radiusValue",min:null!==(t=this.radiusMin)&&void 0!==t?t:0,max:this.radiusMax}),je(s,!0,{id:"radiusRaw"}),jo({id:"radiusValue"},[0,1],null!==(e=this.radiusMin)&&void 0!==e?e:0,this.radiusMax)),r.push()),i=i.map((t,e)=>o[e]?t:Object.assign(Object.assign({},t),{[n]:0})),this.dataModel=new Oe({props:[We(n,!0,{id:"angleValue"}),je(n,!0,{id:"angleRaw"}),jo({id:"angleValue"},[0,1],0),...r]}),this.processedData=this.dataModel.processData(i)}))}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=this._createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){return Go(this,void 0,void 0,(function*(){return this._createNodeData()}))}_createNodeData(){var t,e,i,n;const{id:s,processedData:o,dataModel:r,rotation:a,angleScale:l}=this;if(!o||!r||"ungrouped"!==o.type)return[];const h=null!==(e=null===(t=r.resolveProcessedDataIndexById("angleValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,c=null!==(n=null===(i=r.resolveProcessedDataIndexById("radiusValue"))||void 0===i?void 0:i.index)&&void 0!==n?n:-1;if(h<0)return[];let d=0;const u=o.data.map((t,e)=>{var i;const{datum:n,values:s}=t,o=s[h],r=l.convert(d)+tt(a);d=o;const u=l.convert(d)+tt(a),p=Math.abs(u-r),g=r+p/2,f=s[h+1],m=c>=0&&null!==(i=s[c])&&void 0!==i?i:1,y=c>=0?s[c+1]:void 0,v=this.getLabels(n,g,p,!0),b=this.getSectorFormat(n,e,e,!1);return Object.assign({itemId:e,series:this,datum:n,index:e,angleValue:f,midAngle:g,midCos:Math.cos(g),midSin:Math.sin(g),startAngle:r,endAngle:u,sectorFormat:b,radius:m,radiusValue:y},v)});return[{itemId:s,nodeData:u,labelData:u}]}getLabels(t,e,i,n){const{calloutLabel:s,sectorLabel:o,legendItemKey:r,ctx:{callbackCache:a}}=this,l=!n||s.enabled?this.calloutLabelKey:void 0,h=!n||o.enabled?this.sectorLabelKey:void 0;if(!l&&!h&&!r)return{};const c=this.getLabelFormatterParams(t);let d,u,p;if(l){d=i>tt(s.minAngle)?s.formatter?a.call(s.formatter,c):String(t[l]):void 0}return h&&(u=o.formatter?a.call(o.formatter,c):String(t[h])),r&&(p=String(t[r])),Object.assign(Object.assign(Object.assign({},null!=d?{calloutLabel:Object.assign(Object.assign({},this.getTextAlignment(e)),{text:d,hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})}:{}),null!=u?{sectorLabel:{text:u}}:{}),null!=r&&null!=p?{legendItem:{key:r,text:p}}:{})}getLabelFormatterParams(t){const{id:e,radiusKey:i,radiusName:n,angleKey:s,angleName:o,calloutLabelKey:r,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:h}=this;return{datum:t,angleKey:s,angleValue:t[s],angleName:o,radiusKey:i,radiusValue:i?t[i]:void 0,radiusName:n,calloutLabelKey:r,calloutLabelValue:r?t[r]:void 0,calloutLabelName:a,sectorLabelKey:l,sectorLabelValue:l?t[l]:void 0,sectorLabelName:h,seriesId:e}}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Q(t)- -3*Math.PI/4,n=Math.floor(i/(Math.PI/2));var s,o;return e[(o=e.length,(s=n)>=0?Math.floor(s%o):Math.floor(s%o+o))]}getSectorFormat(t,e,i,n){var s,o,r,a,l,h,c,d,u;const{angleKey:p,radiusKey:g,fills:f,strokes:m,fillOpacity:y,formatter:v,id:b,ctx:{callbackCache:x}}=this,k=null===(s=this.highlightManager)||void 0===s?void 0:s.getActiveHighlight(),S=n&&(null==k?void 0:k.series)===this&&e===k.itemId,w=S?this.highlightStyle.item:null,D=null!==(o=null==w?void 0:w.fill)&&void 0!==o?o:f[i%f.length],O=null!==(r=null==w?void 0:w.fillOpacity)&&void 0!==r?r:y,M=null!==(a=null==w?void 0:w.stroke)&&void 0!==a?a:m[i%m.length],C=null!==(l=null==w?void 0:w.strokeWidth)&&void 0!==l?l:this.getStrokeWidth(this.strokeWidth);let N;return v&&(N=x.call(v,{datum:t,angleKey:p,radiusKey:g,fill:D,stroke:M,strokeWidth:C,highlighted:S,seriesId:b})),{fill:null!==(h=null==N?void 0:N.fill)&&void 0!==h?h:D,fillOpacity:null!==(c=null==N?void 0:N.fillOpacity)&&void 0!==c?c:O,stroke:null!==(d=null==N?void 0:N.stroke)&&void 0!==d?d:M,strokeWidth:null!==(u=null==N?void 0:N.strokeWidth)&&void 0!==u?u:C}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,n=t*(null!=e?e:1)+(i||0);return n===t||n<0?0:n}getOuterRadius(){const{radius:t,outerRadiusRatio:e,outerRadiusOffset:i}=this,n=t*(null!=e?e:1)+(i||0);return n<0?0:n}updateRadiusScale(){const t=this.getInnerRadius(),e=this.getOuterRadius();this.radiusScale.range=[t,e]}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update({seriesRect:t}){return Go(this,void 0,void 0,(function*(){const{title:e}=this;if(this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(),this.updateInnerCircleNodes(),this.rootGroup.translationX=this.centerX,this.rootGroup.translationY=this.centerY,e){const t=this.getTitleTranslationY(),i=e.node.computeBBox();e.node.visible=e.enabled&&isFinite(t)&&!this.bboxIntersectsSurroundingSeries(i,0,t),e.node.translationY=isFinite(t)?t:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(t)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:n}=this;n!==i&&(n&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(n.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateInnerCircleNodes(){var t;const{innerCircle:e,oldInnerCircle:i,innerCircleNode:n}=this;if(i!==e){let i;n&&this.backgroundGroup.removeChild(n),e&&(i=new yi,i.fill=e.fill,i.fillOpacity=null!==(t=e.fillOpacity)&&void 0!==t?t:1,this.backgroundGroup.appendChild(i)),this.oldInnerCircle=e,this.innerCircleNode=i}}updateNodeMidPoint(){this.nodeData.forEach(t=>{const e=this.radiusScale.convert(t.radius);t.nodeMidPoint={x:t.midCos*Math.max(0,e/2),y:t.midSin*Math.max(0,e/2)}})}updateSelections(){return Go(this,void 0,void 0,(function*(){yield this.updateGroupSelection()}))}updateGroupSelection(){return Go(this,void 0,void 0,(function*(){const{groupSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:s}=this,o=t=>t.update(this.nodeData,t=>{const e=new _o;e.tag=Wo.Sector,t.appendChild(e)});this.groupSelection=o(t),this.highlightSelection=o(e),i.update(this.nodeData,t=>{const e=new Mi;e.tag=Wo.Callout,e.pointerEvents=_.None,t.appendChild(e);const i=new at;i.tag=Wo.Label,i.pointerEvents=_.None,t.appendChild(i)}),n.update(this.nodeData,t=>{t.pointerEvents=_.None}),s.update(this.innerLabels,t=>{t.pointerEvents=_.None})}))}updateNodes(t){var e;return Go(this,void 0,void 0,(function*(){const i=null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),n=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=n,this.backgroundGroup.visible=n,this.contentGroup.visible=n,this.highlightGroup.visible=n&&(null==i?void 0:i.series)===this,this.labelGroup.visible=n,this.contentGroup.opacity=this.getOpacity(),this.updateInnerCircle();const{radiusScale:s}=this,o=s.convert(0),r=(t,e,i,n)=>{const r=s.convert(e.radius),a=t.parent,l=null==a?void 0:a.parent;n&&a&&l&&(l.removeChild(a),l.appendChild(a)),t.innerRadius=Math.max(0,o),t.outerRadius=Math.max(0,r),n&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle);const h=this.getSectorFormat(e.datum,e.itemId,i,n);t.fill=h.fill,t.stroke=h.stroke,t.strokeWidth=h.strokeWidth,t.fillOpacity=h.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round",t.visible=this.seriesItemEnabled[i]};this.groupSelection.selectByTag(Wo.Sector).forEach((t,e)=>r(t,t.datum,e,!1)),this.highlightSelection.selectByTag(Wo.Sector).forEach((t,e)=>{const n=(null==i?void 0:i.series)===this&&t.datum.itemId===i.itemId;t.visible=n,t.visible&&r(t,t.datum,e,n)}),this.animationState.transition("update"),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes()}))}updateCalloutLineNodes(){var t;const{radiusScale:e,calloutLine:i}=this,n=i.length,s=i.strokeWidth,o=null!==(t=i.colors)&&void 0!==t?t:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(Wo.Callout).forEach((t,i)=>{const a=t.datum,l=e.convert(a.radius),h=Math.max(0,l),c=a.calloutLabel;if((null==c?void 0:c.text)&&!c.hidden&&0!==h){t.visible=!0,t.strokeWidth=s,t.stroke=o[i%o.length],t.fill=void 0;const e=a.midCos*h,l=a.midSin*h;let d=a.midCos*(h+n),u=a.midSin*(h+n);if(c.collisionTextAlign||0!==c.collisionOffsetY){const t=c.box;let e=d,i=u;d<t.x?e=t.x:d>t.x+t.width&&(e=t.x+t.width),u<t.y?i=t.y:u>t.y+t.height&&(i=t.y+t.height);const n=e-d,s=i-u,o=Math.sqrt(Math.pow(n,2)+Math.pow(s,2)),a=o-r;a>0&&(d+=n*a/o,u+=s*a/o)}t.x1=e,t.y1=l,t.x2=d,t.y2=u}else t.visible=!1})}getLabelOverflow(t,e,i){const n=i.x-this.centerX,s=i.x+i.width-this.centerX,o=i.y-this.centerY,r=i.y+i.height-this.centerY;let a=1;e.x+1<n?a=(e.x+e.width-n)/e.width:e.x+e.width-1>s&&(a=(s-e.x)/e.width);const l=e.y+1<o||e.y+e.height-1>r;return{visibleTextPart:a,textLength:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t,e=0,i=0){const{surroundingRadius:n}=this;if(null==n)return!1;const s=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],o=Math.pow(n,2);return s.some(t=>Math.pow(t.x,2)+Math.pow(t.y,2)>o)}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:n,minSpacing:s}=e,o=t.convert(0),r=this.nodeData,a=this.nodeData.filter(e=>!(e=>{const i=e.calloutLabel,n=t.convert(e.radius),s=Math.max(0,n);return!i||0===s})(e));if(a.forEach(t=>{const e=t.calloutLabel;e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0}),a.length<=1)return;const l=a.filter(t=>t.midCos<0).sort((t,e)=>t.midSin-e.midSin),h=a.filter(t=>t.midCos>=0).sort((t,e)=>t.midSin-e.midSin),c=a.filter(t=>t.midSin<0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),d=a.filter(t=>t.midSin>=0&&"center"===t.calloutLabel.textAlign).sort((t,e)=>t.midCos-e.midCos),u=new at,p=e=>{const s=e.calloutLabel,o=t.convert(e.radius),r=Math.max(0,o)+i.length+n,a=e.midCos*r,l=e.midSin*r+s.collisionOffsetY;return this.setTextDimensionalProps(u,a,l,this.calloutLabel,s),u.computeBBox()},g=(t,e,i)=>{const n=p(t).grow(s/2),o=p(e).grow(s/2);if(n.x<o.x+o.width&&n.x+n.width>o.x&&("to-top"===i?n.y<o.y+o.height:n.y+n.height>o.y)){const t="to-top"===i?n.y-o.y-o.height:n.y+n.height-o.y;e.calloutLabel.collisionOffsetY=t}},f=t=>{const e=t.slice().sort((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin))[0],i=t.indexOf(e);for(let e=i-1;e>=0;e--){const i=t[e+1],n=t[e];g(i,n,"to-top")}for(let e=i+1;e<t.length;e++){const i=t[e-1],n=t[e];g(i,n,"to-bottom")}},m=e=>{const i=a.some(t=>0!==t.calloutLabel.collisionOffsetY),n=e.map(t=>p(t)),l=n.map(t=>t.clone().grow(s/2));let h=!1;for(let t=0;t<l.length&&!h;t++){const i=l[t];for(let n=t+1;n<e.length;n++){const t=l[n];if(i.collidesBBox(t)){h=!0;break}}}const c=r.map(e=>{const{startAngle:i,endAngle:n}=e,s=t.convert(e.radius),r=Math.max(0,s);return{startAngle:i,endAngle:n,innerRadius:o,outerRadius:r}}),d=n.some(t=>c.some(e=>function(t,e){const i={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},s={x:t.x,y:t.y+t.height},o={x:t.x+t.width,y:t.y+t.height};return To({start:i,end:n},e)||To({start:s,end:o},e)}(t,e)));(h||i||d)&&e.filter(t=>"center"===t.calloutLabel.textAlign).forEach(t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"})};f(l),f(h),m(c),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:n}=this,s=n.length,{offset:o,color:r}=i,a=new at;this.calloutLabelSelection.selectByTag(Wo.Label).forEach(i=>{const{datum:n}=i,l=n.calloutLabel,h=e.convert(n.radius),c=Math.max(0,h);if(!(null==l?void 0:l.text)||0===c||l.hidden)return void(i.visible=!1);const d=c+s+o,u=n.midCos*d,p=n.midSin*d+l.collisionOffsetY;this.setTextDimensionalProps(a,u,p,this.calloutLabel,l);const g=a.computeBBox(),{visibleTextPart:f,textLength:m,hasVerticalOverflow:y}=this.getLabelOverflow(l.text,g,t),v=1===f?l.text:l.text.substring(0,m)+"\u2026";this.setTextDimensionalProps(i,u,p,this.calloutLabel,Object.assign(Object.assign({},l),{text:v})),i.fill=r,i.visible=!y})}computeLabelsBBox(t,e){var i;const{radiusScale:n,calloutLabel:s,calloutLine:o}=this,r=o.length,{offset:a,maxCollisionOffset:l,minSpacing:h}=s;this.maybeRefreshNodeData(),this.updateRadiusScale(),this.computeCalloutLabelCollisionOffsets();const c=[],d=new at;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(this.setTextDimensionalProps(d,0,t,this.title,{text:this.title.text,textBaseline:"bottom",textAlign:"center",hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0}),u=d.computeBBox(),c.push(u))}return this.nodeData.forEach(i=>{const s=i.calloutLabel,o=n.convert(i.radius),p=Math.max(0,o);if(!s||0===p)return null;const g=p+r+a,f=i.midCos*g,m=i.midSin*g+s.collisionOffsetY;this.setTextDimensionalProps(d,f,m,this.calloutLabel,s);const y=d.computeBBox();if(s.box=y,Math.abs(s.collisionOffsetY)>l)s.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new C(u.x-h,t,u.width+2*h,u.y+u.height+h-t);if(y.collidesBBox(i))return void(s.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(s.text,y,e),o=s.text.length>2&&t<2;if(i||o||n)return void(s.hidden=!0)}s.hidden=!1,c.push(y)}}),0===c.length?null:C.merge(c)}setTextDimensionalProps(t,e,i,n,s){var o,r;const{fontStyle:a,fontWeight:l,fontSize:h,fontFamily:c}=n;t.fontStyle=a,t.fontWeight=l,t.fontSize=h,t.fontFamily=c,t.text=s.text,t.x=e,t.y=i,t.textAlign=null!==(r=null!==(o=null==s?void 0:s.collisionTextAlign)&&void 0!==o?o:null==s?void 0:s.textAlign)&&void 0!==r?r:"center",t.textBaseline=s.textBaseline}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:s,fontFamily:o,positionOffset:r,positionRatio:a,color:l}=this.sectorLabel,h=e>0,c=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((d,u)=>{const p=u.sectorLabel,g=t.convert(u.radius),f=Math.max(0,g);let m=!1;if(p&&0!==f){const t=e*(1-a)+g*a+r;d.fill=l,d.fontStyle=n,d.fontWeight=s,d.fontSize=i,d.fontFamily=o,d.text=p.text;!h&&c?(d.x=0,d.y=0):(d.x=u.midCos*t,d.y=u.midSin*t),d.textAlign="center",d.textBaseline="middle";const y=d.computeBBox(),v=[[y.x,y.y],[y.x+y.width,y.y],[y.x+y.width,y.y+y.height],[y.x,y.y+y.height]],{startAngle:b,endAngle:x}=u,k={startAngle:b,endAngle:x,innerRadius:e,outerRadius:f};v.every(([t,e])=>Io(t,e,k))&&(m=!0)}d.visible=m})}updateInnerCircle(){const t=this.innerCircleNode;if(!t)return;const e=this.getInnerRadius();if(0===e)t.size=0;else{const i=Math.min(e,this.getOuterRadius()),n=1;t.size=Math.ceil(2*i+n)}}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each((i,n)=>{const{fontStyle:s,fontWeight:o,fontSize:r,fontFamily:a,color:l}=n;i.fontStyle=s,i.fontWeight=o,i.fontSize=r,i.fontFamily=a,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(n.margin)});const i=t=>0===t?0:e[t],n=t=>t===e.length-1?0:e[t],s=t.reduce((t,e,s)=>t+e.height+i(s)+n(s),0),o=Math.max(...t.map(t=>t.width)),r=this.getInnerRadius(),a=Math.sqrt(Math.pow(o/2,2)+Math.pow(s/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let e=0,o=-s/2;e<t.length;e++){const s=t[e].height+o+i(e);l.push(s),o=s+n(e)}this.innerLabelsSelection.each((t,e,i)=>{t.y=l[i],t.visible=a})}getNodeClickEvent(t,e){return new Yo(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new Ho(this.angleKey,this.calloutLabelKey,this.sectorLabelKey,this.radiusKey,t,e,this)}getTooltipHtml(t){var e;const{angleKey:i}=this;if(!i)return"";const{tooltip:n,angleName:s,radiusKey:o,radiusName:r,calloutLabelKey:a,sectorLabelKey:l,calloutLabelName:h,sectorLabelName:c,id:d}=this,{renderer:u}=n,{datum:p,angleValue:g,radiusValue:f,sectorFormat:{fill:m},calloutLabel:{text:y=""}={}}=t,v="number"==typeof g?Ni(g):String(g),b=null===(e=this.title)||void 0===e?void 0:e.text,x={title:b,backgroundColor:m,content:`${y?y+": ":""}${v}`};return u?Ne(u({datum:p,angleKey:i,angleValue:g,angleName:s,radiusKey:o,radiusValue:f,radiusName:r,calloutLabelKey:a,calloutLabelName:h,sectorLabelKey:l,sectorLabelName:c,title:b,color:m,seriesId:d}),x):Ne(x)}getLegendData(){var t,e,i;const{calloutLabelKey:n,legendItemKey:s,id:o,data:r}=this;if(!r||0===r.length)return[];if(!s&&!n)return[];const a=(null===(t=this.title)||void 0===t?void 0:t.showInLegend)&&this.title.text,l=[];for(let t=0;t<r.length;t++){const h=r[t],c=[];a&&c.push(a);const d=this.getLabels(h,2*Math.PI,2*Math.PI,!1);if(s&&void 0!==d.legendItem?c.push(d.legendItem.text):n&&void 0!==(null===(e=d.calloutLabel)||void 0===e?void 0:e.text)&&c.push(null===(i=d.calloutLabel)||void 0===i?void 0:i.text),0===c.length)continue;const u=this.getSectorFormat(h,t,t,!1);l.push({legendType:"category",id:o,itemId:t,seriesId:o,enabled:this.seriesItemEnabled[t],label:{text:c.join(" - ")},marker:{fill:u.fill,stroke:u.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity}})}return l}onLegendItemClick(t){const{enabled:e,itemId:i,series:n}=t;n.id===this.id?this.toggleSeriesItem(i,e):"pie"===n.type&&this.toggleOtherSeriesItems(n,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var n,s;const{legendItemKey:o}=this;if(!o)return;const r=t.legendItemKey&&(null===(n=t.data)||void 0===n?void 0:n.find((t,i)=>i===e)[t.legendItemKey]);r&&(null===(s=this.data)||void 0===s||s.forEach((t,e)=>{t[o]===r&&this.toggleSeriesItem(e,i)}))}animateEmptyUpdateReady(){const t=Math.PI/-2+tt(this.rotation);this.groupSelection.selectByTag(Wo.Sector).forEach(e=>{var i;const n=e.datum;null===(i=this.animationManager)||void 0===i||i.animateMany(`${this.id}_empty-update-ready_${e.id}`,[{from:t,to:n.startAngle},{from:t,to:n.endAngle}],{disableInteractions:!0,duration:1e3,ease:Cs,repeat:0,onUpdate([t,i]){e.startAngle=t,e.endAngle=i}})});const e={from:0,to:1,delay:1e3,duration:200,ease:Ms,repeat:0};this.calloutLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.sectorLabelSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))}),this.innerLabelsSelection.each(t=>{var i;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},e),{onUpdate(e){t.opacity=e}}))})}animateReadyUpdateReady(){this.groupSelection.selectByTag(Wo.Sector).forEach(t=>{const{datum:e}=t;t.startAngle=e.startAngle,t.endAngle=e.endAngle})}}tr.className="PieSeries",tr.type="pie",Ko([Dt(Ft)],tr.prototype,"angleKey",void 0),Ko([Dt(Ft)],tr.prototype,"angleName",void 0),Ko([Dt(Bt)],tr.prototype,"radiusKey",void 0),Ko([Dt(Bt)],tr.prototype,"radiusName",void 0),Ko([Dt(Ut(0))],tr.prototype,"radiusMin",void 0),Ko([Dt(Ut(0))],tr.prototype,"radiusMax",void 0),Ko([Dt(Bt)],tr.prototype,"calloutLabelKey",void 0),Ko([Dt(Bt)],tr.prototype,"calloutLabelName",void 0),Ko([Dt(Bt)],tr.prototype,"sectorLabelKey",void 0),Ko([Dt(Bt)],tr.prototype,"sectorLabelName",void 0),Ko([Dt(Bt)],tr.prototype,"legendItemKey",void 0),Ko([Dt(Ht)],tr.prototype,"fills",void 0),Ko([Dt(Ht)],tr.prototype,"strokes",void 0),Ko([Dt($t(0,1))],tr.prototype,"fillOpacity",void 0),Ko([Dt($t(0,1))],tr.prototype,"strokeOpacity",void 0),Ko([Dt(le)],tr.prototype,"lineDash",void 0),Ko([Dt($t(0))],tr.prototype,"lineDashOffset",void 0),Ko([Dt(At)],tr.prototype,"formatter",void 0),Ko([Dt($t(-360,360))],tr.prototype,"rotation",void 0),Ko([Dt($t())],tr.prototype,"outerRadiusOffset",void 0),Ko([Dt($t(0))],tr.prototype,"outerRadiusRatio",void 0),Ko([Dt($t())],tr.prototype,"innerRadiusOffset",void 0),Ko([Dt($t(0))],tr.prototype,"innerRadiusRatio",void 0),Ko([Dt($t(0))],tr.prototype,"strokeWidth",void 0);var er=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class ir extends mo{constructor(t=window.document,e,i){super(t,e,i),this.padding=new Qe(40)}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return er(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();this.computeSeriesRect(e),this.computeCircle();const n=e.clone().grow(20);return this.hoverRect=n,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:i,paddedRect:e,hoverRect:n,visible:!0},axes:[]}),e}))}computeSeriesRect(t){const{seriesAreaPadding:e}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t}computeCircle(){const t=this.seriesRect,e=this.series.filter(t=>t instanceof Ro),i=(t,i,n)=>{e.forEach(e=>{e.centerX=t,e.centerY=i,e.radius=n});const s=e.filter(t=>t instanceof tr);if(s.length>1){const t=s.map(t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}}).sort((t,e)=>t.innerRadius-e.innerRadius);t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},n=t.x+t.width/2,s=t.y+t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let r=o;i(n,s,r);const a=({hideWhenNecessary:a=!1}={})=>{const l=[];for(const i of e){const e=i.computeLabelsBBox({hideWhenNecessary:a},t);null!=e&&l.push(e)}if(0===l.length)return void i(n,s,o);const h=C.merge(l),c=this.refineCircle(h,r);i(c.centerX,c.centerY,c.radius),c.radius!==r&&(r=c.radius)};a(),a(),a(),a({hideWhenNecessary:!0}),a({hideWhenNecessary:!0})}refineCircle(t,e){const i=this.seriesRect,n=-e,s=-e,o=e,r=e;let a=Math.max(0,n-t.x),l=Math.max(0,s-t.y),h=Math.max(0,t.x+t.width-o),c=Math.max(0,t.y+t.height-r);const d=i.width-a-h,u=i.height-l-c;let p=Math.min(d,u)/2;const g=.5*i.width/2,f=.5*i.height/2,m=Math.min(g,f);if(p<m){p=m;const t=a+h;if(2*p+(l+c)>i.height){const t=i.height-2*p;2*Math.min(l,c)>t?(l=t/2,c=t/2):l>c?l=t-c:c=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,h)>t?(a=t/2,h=t/2):a>h?a=t-h:h=t-a}}const y=a+2*p+h,v=l+2*p+c;return{centerX:i.x+(i.width-y)/2+a+p,centerY:i.y+(i.height-v)/2+l+p,radius:p}}}ir.className="PolarChart",ir.type="polar";var nr=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class sr extends mo{constructor(t=window.document,e,i){super(t,e,i),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return nr(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesAreaPadding:i}=this,n=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e;const s=e.clone().grow(20);this.hoverRect=s,yield Promise.all(this.series.map(t=>nr(this,void 0,void 0,(function*(){t.rootGroup.translationX=Math.floor(e.x),t.rootGroup.translationY=Math.floor(e.y),yield t.update({seriesRect:e})}))));const{seriesRoot:o}=this;return o.setClipRectInGroupCoordinateSpace(new C(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},series:{rect:n,paddedRect:e,hoverRect:s,visible:!0},axes:[]}),e}))}}sr.className="HierarchyChart",sr.type="hierarchy";const or=/(#\{(.*?)\})/g;function rr(t,e,i){return t.replace(or,(function(...t){const n=t[2],[s,o]=n.split(":"),r=e[s];if("number"==typeof r){const t=o&&i&&i[o];if(t){const{locales:e,options:i}=t;return r.toLocaleString(e,i)}return String(r)}if(r instanceof Date){const t=o&&i&&i[o];if("string"==typeof t){return Zi(t)(r)}return r.toDateString()}return"string"==typeof r||(null==r?void 0:r.toString)?String(r):""}))}let ar=null;function lr(t){return ar=null!=ar?ar:document.createElement("div"),t?(ar.textContent=t,ar.innerHTML):""}function hr(t,e){let i=Math.floor(t[0]),n=t[1];i=function(t,e,i){const n=Math.abs(e-t)/(i-1),s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return Math.floor(t/o)*o}(i,n,e);const s=function(t,e,i){return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),n=t/i*10;if(n>0&&n<=1)return i/10;if(n>1&&n<=2)return 2*i/10;if(n>1&&n<=5)return 5*i/10;if(n>5&&n<=10)return 10*i/10;if(n>10&&n<=20)return 20*i/10;if(n>20&&n<=40)return 40*i/10;if(n>40&&n<=50)return 50*i/10;if(n>50&&n<=100)return 100*i/10;return n}((e-t)/(i-1))}(i,n,e);n=i+(e-1)*s;return[[i,n],function(t,e,i){const n=Math.floor(Math.log10(e)),s=e>0&&e<1?Math.abs(n):0,o=Math.pow(10,s),r=new Ki(s);for(let n=0;n<i;n++){const i=t+e*n;r[n]=Math.round(i*o)/o}return r}(i,s,e)]}var cr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class dr extends Fn{constructor(){super(...arguments),this.maxSpacing=NaN}}cr([Dt(Lt(Zt(1),It("minSpacing"))),xn(NaN)],dr.prototype,"maxSpacing",void 0);class ur extends Gn{constructor(t,e=new Wn){super(t,e),this.min=NaN,this.max=NaN,e.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:n}=this;return t.length>2&&(t=null!==(e=kn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(n)||(t=[t[0],n]),t[0]>t[1]&&(t=[]),t}formatDatum(t){return"number"==typeof t?t.toFixed(2):(G.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new dr}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");const[e,i]=hr(this.dataDomain,null!=t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}ur.className="NumberAxis",ur.type="number",cr([Dt(Lt(Zt(),Rt("max"))),xn(NaN)],ur.prototype,"min",void 0),cr([Dt(Lt(Zt(),It("min"))),xn(NaN)],ur.prototype,"max",void 0);var pr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};function gr(){return Ot(t=>"number"==typeof t&&0!==t,"expecting a non-zero Number")}class fr extends ur{constructor(t){super(t,new bn),this.min=NaN,this.max=NaN,this.scale.strictClampByDefault=!0}normaliseDataDomain(t){var e;const{min:i,max:n}=this;t.length>2&&(t=null!==(e=kn(t))&&void 0!==e?e:[NaN,NaN]),isNaN(i)||(t=[i,t[1]]),isNaN(n)||(t=[t[0],n]);const s=t[0]>t[1],o=t[0]<0&&t[1]>0,r=0===t[0]&&0===t[1];return(s||o||r)&&(t=[],o?G.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):r&&G.warn("the data domain has 0 extent, no data is rendered.")),0===t[0]&&(t[0]=1),0===t[1]&&(t[1]=-1),t}set base(t){this.scale.base=t}get base(){return this.scale.base}}fr.className="LogAxis",fr.type="log",pr([Dt(Lt(Zt(),Rt("max"),gr())),xn(NaN)],fr.prototype,"min",void 0),pr([Dt(Lt(Zt(),It("min"),gr())),xn(NaN)],fr.prototype,"max",void 0);var mr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class yr extends Fn{constructor(){super(...arguments),this.maxSpacing=NaN}}mr([Dt(Lt(Zt(1),It("minSpacing"))),xn(NaN)],yr.prototype,"maxSpacing",void 0);class vr extends Gn{constructor(t){super(t,new tn),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;e.strictClampByDefault=!0,this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:n}=this;return"number"==typeof i&&(i=new Date(i)),"number"==typeof n&&(n=new Date(n)),t.length>2&&(t=(null!==(e=kn(t))&&void 0!==e?e:[0,1e3]).map(t=>new Date(t))),i instanceof Date&&(t=[i,t[1]]),n instanceof Date&&(t=[t[0],n]),t[0]>t[1]&&(t=[]),t}createTick(){return new yr}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return 1}}vr.className="TimeAxis",vr.type="time",mr([Dt(Lt(Kt,Rt("max")))],vr.prototype,"min",void 0),mr([Dt(Lt(Kt,It("min")))],vr.prototype,"max",void 0);var br,xr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},kr=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Sr extends wn{constructor(){super(...arguments),this.formatter=void 0}}xr([Dt(At)],Sr.prototype,"formatter",void 0);class wr extends Ue{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}xr([Dt(At)],wr.prototype,"renderer",void 0),xr([Dt(Bt)],wr.prototype,"format",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(br||(br={}));class Dr extends fs{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,directionKeys:{[xe.X]:["xKey"],[xe.Y]:["yKeys"]},directionNames:{[xe.X]:["xName"],[xe.Y]:["yNames"]}}),this.tooltip=new wr,this.marker=new ms,this.label=new Sr,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this._yKeys=[],this._visibles=[],this.yNames=[],this.strokeWidth=2,this.shadow=void 0;const{marker:e,label:i}=this;e.enabled=!1,i.enabled=!1}set yKeys(t){Pi(this._yKeys,t)||(this._yKeys=t,this.processedData=void 0,this.processSeriesItemEnabled())}get yKeys(){return this._yKeys}set visibles(t){this._visibles=t,this.processSeriesItemEnabled()}get visibles(){return this._visibles}processSeriesItemEnabled(){const{seriesItemEnabled:t,_visibles:e=[]}=this;t.clear(),this._yKeys.forEach((i,n)=>{var s;return t.set(i,null===(s=e[n])||void 0===s||s)})}set normalizedTo(t){const e=t?Math.abs(t):void 0;this._normalizedTo!==e&&(this._normalizedTo=e)}get normalizedTo(){return this._normalizedTo}processData(){return kr(this,void 0,void 0,(function*(){const{xKey:t,yKeys:e,seriesItemEnabled:i,xAxis:n,yAxis:s,normalizedTo:o}=this,r=t&&e.length&&this.data?this.data:[],a=(null==n?void 0:n.scale)instanceof Bi,l=(null==s?void 0:s.scale)instanceof Bi,h=[...i.entries()].filter(([,t])=>t).map(([t])=>t),c=o&&isFinite(o)?o:void 0,d=[];c&&d.push(zo(h,c,"sum")),this.dataModel=new Oe({props:[ze(t,a,{id:"xValue"}),...h.map(t=>je(t,l,{id:"yValue-"+t,missingValue:NaN,invalidValue:void 0})),Ae(h),...d],groupByKeys:!0,dataVisible:this.visible&&h.length>0}),this.processedData=this.dataModel.processData(r)}))}getDomain(t){const{processedData:e,xAxis:i,yAxis:n}=this;if(!e)return[];const{defs:{keys:[s]},domain:{keys:[o],values:[r],aggValues:[a]=[]}}=e;return t===xe.X?"category"===s.valueType?o:this.fixNumericExtent(kn(o),i):n instanceof fr||n instanceof vr?this.fixNumericExtent(r,n):this.fixNumericExtent(a,n)}createNodeData(){var t;return kr(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,data:n,processedData:{data:s}={},ctx:{callbackCache:o}}=this;if(!e||!i||!n)return[];const r=[],{yKeys:a,xKey:l="",marker:h,label:c,fills:d,strokes:u,id:p}=this,{scale:g}=e,{scale:f}=i,m=f instanceof Bi,y=(null!==(t=g.bandwidth)&&void 0!==t?t:0)/2,v=n.length,b=new Array(v).fill(null).map(()=>({left:0,right:0})),x=new Array(v).fill(0),k=(t,e,i,n)=>{const s=g.convert(t)+y,o=b[i][n],r=b[i][n]+e,a=f.convert(o,{strict:!1}),l=f.convert(r,{strict:!1});return b[i][n]=r,[{x:s,y:l,size:h.size},{x:s,y:a,size:h.size}]},S=(t,e,i,n)=>{let s;const o=this.normalizedTo&&isFinite(this.normalizedTo),r=o&&m&&vt(n);(!o&&!isNaN(n)||r)&&(s=x[i]+=e);return{x:g.convert(t)+y,y:f.convert(s,{strict:!1}),size:h.size}};return a.forEach((t,e)=>{var i;const n=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("yValue-"+t),a=[],g=[],f={itemId:t,points:[],yValues:[]},m={itemId:t,points:[]};if(r[e]={itemId:t,fillSelectionData:m,labelData:a,nodeData:g,strokeSelectionData:f},!n)return;const y=m.points,v=[],b=f.points,w=f.yValues;let D=-1;null==s||s.forEach((i,r)=>{const{keys:[f],datum:m,values:O}=i;O.forEach((M,C)=>{var N;D++;const L=m[C],E=M[n.index],R=isNaN(E)?void 0:E,I=C<O.length-1,T=I?i:s[r+1],A=null==T?void 0:T.keys[0],_=I?C+1:0,P=null==T?void 0:T.values[_][n.index],F=isNaN(P)?void 0:P,B=S(f,+R,D,L[t]);let z;h&&g.push({index:D,series:this,itemId:t,datum:L,nodeMidPoint:{x:B.x,y:B.y},cumulativeValue:x[D],yValue:R,yKey:t,xKey:l,point:B,fill:d[e%d.length],stroke:u[e%u.length]}),z=c.formatter?null!==(N=o.call(c.formatter,{value:R,seriesId:p}))&&void 0!==N?N:"":xt(R)?Number(R).toFixed(2):String(R),c&&a.push({index:D,itemId:t,point:B,label:z?{text:z,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0});const j=[f,A],W=[R,F];if(j.some(t=>null==t))return;W.some(t=>null==t)&&(W[0]=0,W[1]=0);const K=k(j[0],+W[0],D,"right");y.push(K[0]),v.push(K[1]);const G=k(j[1],+W[1],D,"left");y.push(G[0]),v.push(G[1]),b.push({x:NaN,y:NaN}),w.push(void 0),b.push(K[0]),w.push(R),void 0!==F&&(b.push(G[0]),w.push(R))})});for(let t=v.length-1;t>=0;t--)y.push(v[t])}),r}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(os(t))}updateMarkerSelection(t){return kr(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this,s=n&&e?e:[];return this.marker.isDirty()&&i.clear(),i.update(s,t=>{t.tag=br.Marker})}))}updateMarkerNodes(t){var e;return kr(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:n}=t,{id:s,xKey:o="",marker:r,seriesItemEnabled:a,yKeys:l,fills:h,strokes:c,fillOpacity:d,marker:{fillOpacity:u=d},strokeOpacity:p,highlightStyle:{item:{fill:g,fillOpacity:f=u,stroke:m,strokeWidth:y}},ctx:{callbackCache:v}}=this,{size:b,formatter:x}=r,k=null!==(e=r.strokeWidth)&&void 0!==e?e:this.strokeWidth,S="function"==typeof r.shape;i.each((t,e)=>{var i,d,w,D,O,M,C,N;const L=l.indexOf(e.yKey),E=n&&void 0!==g?g:null!==(i=r.fill)&&void 0!==i?i:h[L%h.length],R=n?f:u,I=n&&void 0!==m?m:null!==(d=r.stroke)&&void 0!==d?d:c[L%h.length],T=n&&void 0!==y?y:k;let A=void 0;x&&(A=v.call(x,{datum:e.datum,xKey:o,yKey:e.yKey,fill:E,stroke:I,strokeWidth:T,size:b,highlighted:n,seriesId:s})),t.fill=null!==(w=null==A?void 0:A.fill)&&void 0!==w?w:E,t.stroke=null!==(D=null==A?void 0:A.stroke)&&void 0!==D?D:I,t.strokeWidth=null!==(O=null==A?void 0:A.strokeWidth)&&void 0!==O?O:T,t.fillOpacity=null!=R?R:1,t.strokeOpacity=null!==(C=null!==(M=r.strokeOpacity)&&void 0!==M?M:p)&&void 0!==C?C:1,t.size=null!==(N=null==A?void 0:A.size)&&void 0!==N?N:b,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!!a.get(e.yKey)&&!isNaN(e.point.x)&&!isNaN(e.point.y),S&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),n||this.marker.markClean()}))}updateLabelSelection(t){return kr(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=br.Label})}))}updateLabelNodes(t){return kr(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:s,fontSize:o,fontFamily:r,color:a}=this.label;e.each((t,e)=>{const{point:l,label:h}=e;h&&i?(t.fontStyle=n,t.fontWeight=s,t.fontSize=o,t.fontFamily=r,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i;return new us(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new ps(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getTooltipHtml(t){var e,i,n,s;const{xKey:o,id:r}=this,{yKey:a}=t,l=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue-"+a);if(!o||!a||!l)return"";const h=t.datum,c=h[o],d=h[a],{xAxis:u,yAxis:p,yKeys:g}=this;if(!(u&&p&&xt(d)&&l))return"";const{xName:f,yNames:m,fills:y,strokes:v,tooltip:b,marker:x}=this,{size:k,formatter:S,strokeWidth:w,fill:D,stroke:O}=x,M=u.formatDatum(c),C=p.formatDatum(d),N=g.indexOf(a),L=null===(n=null===(i=this.processedData)||void 0===i?void 0:i.data[t.index])||void 0===n?void 0:n.values[0][null==l?void 0:l.index],E=m[N],R=lr(E),I=lr(M+": "+C),T=null!=w?w:this.strokeWidth,A=null!=D?D:y[N%y.length],_=null!=O?O:v[N%y.length];let P=void 0;S&&(P=S({datum:h,xKey:o,yKey:a,fill:A,stroke:_,strokeWidth:T,size:k,highlighted:!1,seriesId:r}));const F=null!==(s=null==P?void 0:P.fill)&&void 0!==s?s:A,B={title:R,backgroundColor:F,content:I},{renderer:z,format:j}=b;if(j||z){const t={datum:h,xKey:o,xName:f,xValue:c,yKey:a,yValue:d,processedYValue:L,yName:E,color:F,title:R,seriesId:r};if(j)return Ne({content:rr(j,t)},B);if(z)return Ne(z(t),B)}return Ne(B)}getLegendData(){var t,e,i,n,s;const{data:o,id:r,xKey:a,yKeys:l,yNames:h,seriesItemEnabled:c,marker:d,fills:u,strokes:p,fillOpacity:g,strokeOpacity:f}=this;if(!(null==o?void 0:o.length)||!a||!l.length)return[];const m=[];for(let o=l.length-1;o>=0;o--){const a=l[o];m.push({legendType:"category",id:r,itemId:a,seriesId:r,enabled:null!==(t=c.get(a))&&void 0!==t&&t,label:{text:h[o]||l[o]},marker:{shape:d.shape,fill:null!==(e=d.fill)&&void 0!==e?e:u[o%u.length],stroke:null!==(i=d.stroke)&&void 0!==i?i:p[o%p.length],fillOpacity:null!==(n=d.fillOpacity)&&void 0!==n?n:g,strokeOpacity:null!==(s=d.strokeOpacity)&&void 0!==s?s:f}})}return m}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:s}=t,o={},r=1===Object.values(s).reduce((t,e)=>t+e,0)&&e;if(n.id===this.id){const t=Object.values(s).filter(t=>1===t).length===Object.keys(s).length;this.yKeys.forEach(n=>{var s;const a=n===i||r||t&&e;o[n]=null!==(s=o[n])&&void 0!==s?s:a})}else this.yKeys.forEach(t=>{o[t]=r});Object.keys(o).forEach(t=>{super.toggleSeriesItem(t,o[t])})}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n,seriesRect:s}){const{strokes:o,fills:r,fillOpacity:a,lineDash:l,lineDashOffset:h,strokeOpacity:c,strokeWidth:d,shadow:u}=this;i.forEach(({fillSelectionData:i,strokeSelectionData:p,itemId:g},f)=>{var m,y,v;const[b,x]=n[f],k={from:0,to:null!==(m=null==s?void 0:s.width)&&void 0!==m?m:0,disableInteractions:!0,duration:1e3,ease:Ms,repeat:0};{const{points:t,yValues:e}=p;x.tag=br.Stroke,x.fill=void 0,x.lineJoin=x.lineCap="round",x.pointerEvents=_.None,x.stroke=o[f%o.length],x.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:g}),x.strokeOpacity=c,x.lineDash=l,x.lineDashOffset=h,null===(y=this.animationManager)||void 0===y||y.animate(`${this.id}_empty-update-ready_stroke_${f}`,Object.assign(Object.assign({},k),{onUpdate(i){x.path.clear({trackChanges:!0});let n=!0;t.forEach((s,o)=>{if(void 0===e[o]||isNaN(s.x)||isNaN(s.y))n=!0;else if(s.x<=i)n?(x.path.moveTo(s.x,s.y),n=!1):x.path.lineTo(s.x,s.y);else if(o>0&&void 0!==e[o]&&void 0!==e[o-1]&&t[o-1].x<=i){const e=t[o-1],n=s,r=i,a=e.y+(r-e.x)*(n.y-e.y)/(n.x-e.x);x.path.lineTo(r,a)}}),x.checkPathDirty()}}))}{const{points:t}=i,e=t.slice(0,t.length/2),n=t.slice(t.length/2);b.tag=br.Fill,b.stroke=void 0,b.lineJoin="round",b.pointerEvents=_.None,b.fill=r[f%r.length],b.fillOpacity=a,b.strokeOpacity=c,b.strokeWidth=d,b.lineDash=l,b.lineDashOffset=h,b.fillShadow=u,null===(v=this.animationManager)||void 0===v||v.animate(`${this.id}_empty-update-ready_fill_${f}`,Object.assign(Object.assign({},k),{onUpdate(t){b.path.clear({trackChanges:!0});let i=0,s=0;e.forEach((n,o)=>{if(n.x<=t)i=n.x,s=n.y,b.path.lineTo(n.x,n.y);else if(o>0&&e[o-1].x<t){const r=e[o-1],a=n;i=t,s=r.y+(i-r.x)*(a.y-r.y)/(a.x-r.x),b.path.lineTo(i,s)}}),n.forEach((s,o)=>{const r=n.length-o-1;if(s.x<=t)b.path.lineTo(s.x,s.y);else if(r>0&&e[r-1].x<t){const t=s,e=n[o+1],r=t.y+(i-t.x)*(e.y-t.y)/(e.x-t.x);b.path.lineTo(i,r)}}),n.length>0&&b.path.lineTo(n[n.length-1].x,n[n.length-1].y),b.path.closePath(),b.checkPathDirty()}}))}t[f].each((t,e)=>{var i,n,o,r;const a=(null==s?void 0:s.width)?e.point.x/s.width*1e3:0,l=this.animateFormatter(e),h=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;null===(o=this.animationManager)||void 0===o||o.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},k),{to:null!==(r=null==l?void 0:l.size)&&void 0!==r?r:h,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[f].each((t,e)=>{var i;const n=(null==s?void 0:s.width)?e.point.x/s.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:n,duration:200,ease:Ms,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({contextData:t,paths:e}){const{strokes:i,fills:n,fillOpacity:s,lineDash:o,lineDashOffset:r,strokeOpacity:a,strokeWidth:l,shadow:h}=this;t.forEach(({strokeSelectionData:t,fillSelectionData:c,itemId:d},u)=>{const[p,g]=e[u];g.stroke=i[u%i.length],g.strokeWidth=this.getStrokeWidth(this.strokeWidth,{itemId:d}),g.strokeOpacity=a,g.lineDash=o,g.lineDashOffset=r,g.path.clear({trackChanges:!0});let f=!0;t.points.forEach((e,i)=>{void 0===t.yValues[i]||isNaN(e.x)||isNaN(e.y)?f=!0:f?(g.path.moveTo(e.x,e.y),f=!1):g.path.lineTo(e.x,e.y)}),g.checkPathDirty(),p.fill=n[u%n.length],p.fillOpacity=s,p.strokeOpacity=a,p.strokeWidth=l,p.lineDash=o,p.lineDashOffset=r,p.fillShadow=h,p.path.clear({trackChanges:!0}),c.points.forEach(t=>{p.path.lineTo(t.x,t.y)}),p.path.closePath(),p.checkPathDirty()})}animateFormatter(t){var e,i,n;const{marker:s,fills:o,strokes:r,xKey:a="",yKeys:l,id:h,ctx:{callbackCache:c}}=this,{size:d,formatter:u}=s,p=l.indexOf(t.yKey),g=null!==(e=s.fill)&&void 0!==e?e:o[p%o.length],f=null!==(i=s.stroke)&&void 0!==i?i:r[p%o.length],m=null!==(n=s.strokeWidth)&&void 0!==n?n:this.strokeWidth;let y=void 0;return u&&(y=c.call(u,{datum:t.datum,xKey:a,yKey:t.yKey,fill:g,stroke:f,strokeWidth:m,size:d,highlighted:!1,seriesId:h})),y}isLabelEnabled(){return this.label.enabled}}Dr.className="AreaSeries",Dr.type="area",xr([Dt(Ht)],Dr.prototype,"fills",void 0),xr([Dt(Ht)],Dr.prototype,"strokes",void 0),xr([Dt($t(0,1))],Dr.prototype,"fillOpacity",void 0),xr([Dt($t(0,1))],Dr.prototype,"strokeOpacity",void 0),xr([Dt(le)],Dr.prototype,"lineDash",void 0),xr([Dt($t(0))],Dr.prototype,"lineDashOffset",void 0),xr([Dt(Bt)],Dr.prototype,"xKey",void 0),xr([Dt(Bt)],Dr.prototype,"xName",void 0),xr([Dt(Qt)],Dr.prototype,"_yKeys",void 0),xr([Dt(ee)],Dr.prototype,"_visibles",void 0),xr([Dt(Qt)],Dr.prototype,"yNames",void 0),xr([Dt(Ut())],Dr.prototype,"_normalizedTo",void 0),xr([Dt($t(0))],Dr.prototype,"strokeWidth",void 0);var Or=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Mr extends gi{constructor(){super(...arguments),this.borderPath=new di,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=st.defaultStyles.strokeWidth,this.effectiveStrokeWidth=st.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:n,borderPath:s,crisp:o}=this;let{x:r,y:a,width:l,height:h,strokeWidth:c}=this;const d=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let u=1;if(n.clear({trackChanges:!0}),s.clear({trackChanges:!0}),o&&(l<=d&&(u*=l/d),h<=d&&(u*=h/d),l=this.align(r,l),h=this.align(a,h),r=this.align(r),a=this.align(a)),c)if(l<d){const t=r+d/2;s.moveTo(t,a),s.lineTo(t,a+h),c=d,this.borderClipPath=void 0}else if(h<d){const t=a+d/2;s.moveTo(r,t),s.lineTo(r+l,t),c=d,this.borderClipPath=void 0}else if(c<l&&c<h){const t=c/2;r+=t,a+=t,l-=c,h-=c,this.borderClipPath=void 0,n.rect(r,a,l,h),s.rect(r,a,l,h)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new di,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(r,a,l,h),s.rect(r,a,l,h);else this.borderClipPath=void 0,n.rect(r,a,l,h);this.effectiveStrokeWidth=c,this.lastUpdatePathStrokeWidth=c,this.microPixelEffectOpacity=u}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new C(t,e,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this,{globalAlpha:s}=t;t.globalAlpha=s*n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:n,borderClipPath:s,opacity:o,microPixelEffectOpacity:r}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:h,lineCap:c,lineJoin:d}=this;s&&(s.draw(t),t.clip()),n.draw(t);const{globalAlpha:u}=t;t.strokeStyle=e,t.globalAlpha=u*o*a*r,t.lineWidth=i,l&&t.setLineDash(l),h&&(t.lineDashOffset=h),c&&(t.lineCap=c),d&&(t.lineJoin=d),t.stroke(),t.globalAlpha=u}}}Mr.className="Rect",Or([pi()],Mr.prototype,"x",void 0),Or([pi()],Mr.prototype,"y",void 0),Or([pi()],Mr.prototype,"width",void 0),Or([pi()],Mr.prototype,"height",void 0),Or([pi()],Mr.prototype,"radius",void 0),Or([pi()],Mr.prototype,"crisp",void 0);var Cr=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i};function Nr({value:t,rect:e,placement:i,seriesId:n,padding:s=0,formatter:o,barAlongX:r,ctx:{callbackCache:a}}){let l;o&&(l=a.call(o,{value:xt(t)?t:void 0,seriesId:n})),void 0===l&&(l=xt(t)?t.toFixed(2):"");let h=e.x+e.width/2,c=e.y+e.height/2,d="center",u="middle";const p=t>=0;switch(i){case"start":r?(h=p?e.x-s:e.x+e.width+s,d=p?"start":"end"):(c=p?e.y+e.height+s:e.y-s,u=p?"top":"bottom");break;case"outside":case"end":r?(h=p?e.x+e.width+s:e.x-s,d=p?"start":"end"):(c=p?e.y-s:e.y+e.height+s,u=p?"bottom":"top");break;case"inside":default:u="middle"}return{text:l,textAlign:d,textBaseline:u,x:h,y:c}}var Lr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Er=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const Rr=["inside","outside"];var Ir;!function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(Ir||(Ir={}));class Tr extends wn{constructor(){super(...arguments),this.formatter=void 0,this.placement="inside"}}Lr([Dt(At)],Tr.prototype,"formatter",void 0),Lr([Dt((t,e)=>Mt(t,e,t=>Rr.includes(t)))],Tr.prototype,"placement",void 0);class Ar extends Ue{constructor(){super(...arguments),this.renderer=void 0}}Lr([Dt(At)],Ar.prototype,"renderer",void 0);class _r extends fs{constructor(t){super({moduleCtx:t,pickModes:[Pe.EXACT_SHAPE_MATCH],pathsPerSeries:0,directionKeys:{[xe.X]:["xKey"],[xe.Y]:["yKeys"]},directionNames:{[xe.X]:["xName"],[xe.Y]:["yNames"]}}),this.label=new Tr,this.tooltip=new Ar,this.fills=["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],this.strokes=["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"],this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.groupScale=new Di,this.xKey=void 0,this.xName=void 0,this.cumYKeyCount=[],this.flatYKeys=void 0,this.hideInLegend=[],this.yKeys=[],this.yKeysCache=[],this.visibles=[],this.grouped=!1,this.stackGroups={},this.yNames={},this.legendItemNames={},this.strokeWidth=1,this.shadow=void 0,this.smallestDataInterval=void 0,this.label.enabled=!1}resolveKeyDirection(t){return this.getBarDirection()===xe.X?t===xe.X?xe.Y:xe.X:t}processYKeys(){let{yKeys:t}=this,e=void 0;var i;(i=t).length>0&&Array.isArray(i[0])||(e=t,t=this.grouped?e.map(t=>[t]):[e]);const n=Object.values(this.stackGroups);if(n.length>0){const e=t=>t.reduce((t,e)=>t.concat(e),[]),i=e(t),s=new Set(e(n)),o=i.filter(t=>!s.has(t));t=n.map(t=>t),o.length>0&&t.push(o);const r=(t=>t.reduce((t,e,i)=>t.set(e,i),new Map))(e(t)),a=t=>{const e=Array.from({length:t.length});return t.forEach((t,n)=>{const s=i[n],o=r.get(s);e[o]=t}),e};this.fills=a(this.fills),this.strokes=a(this.strokes),this.visibles=a(this.visibles)}if(!Pi(this.yKeysCache,t)){this.flatYKeys=e||void 0,this.yKeys=t;let i=0;this.cumYKeyCount=[];const n=[];t.forEach((t,e)=>{t.length>0&&n.push(String(e)),this.cumYKeyCount.push(i),i+=t.length}),this.processSeriesItemEnabled();const{groupScale:s}=this;s.domain=n}this.yKeysCache=t}processSeriesItemEnabled(){const{seriesItemEnabled:t}=this,e=this.visibles.reduce((t,e)=>t.concat(...Array.isArray(e)?e:[e]),[]);t.clear();let i=0;this.yKeys.forEach(n=>{n.forEach(n=>{var s;return t.set(n,null===(s=e[i++])||void 0===s||s)})})}getStackGroup(t){var e;const{stackGroups:i}=this;return null===(e=Object.entries(i).find(([e,i])=>i.includes(t)))||void 0===e?void 0:e[0]}processYNames(){const t=this.yNames;if(Array.isArray(t)&&this.flatYKeys){const e={};this.flatYKeys.forEach((i,n)=>{e[i]=t[n]}),this.yNames=e}}processData(){var t,e,i,n,s;return Er(this,void 0,void 0,(function*(){this.processYKeys(),this.processYNames();const{xKey:o,seriesItemEnabled:r,normalizedTo:a,data:l=[]}=this,h=Math.abs(null!=a?a:NaN),c=(null===(t=this.getCategoryAxis())||void 0===t?void 0:t.scale)instanceof Bi,d=(null===(e=this.getValueAxis())||void 0===e?void 0:e.scale)instanceof Bi,u=[...r.entries()].filter(([,t])=>t).map(([t])=>t),p=this.yKeys.map(t=>t.filter(t=>r.get(t))).filter(t=>t.length>0),g=h&&isFinite(h)?h:void 0,f=[];g&&f.push(zo(u,g,"sum")),this.dataModel=new Oe({props:[ze(o,c),...u.map(t=>je(t,d,{invalidValue:null})),...p.map(t=>Ae(t)),...c?[Po]:[],Fo,...f],groupByKeys:!0,dataVisible:this.visible&&u.length>0}),this.processedData=this.dataModel.processData(l),this.smallestDataInterval={x:null!==(s=null===(n=null===(i=this.processedData)||void 0===i?void 0:i.reduced)||void 0===n?void 0:n[Po.property])&&void 0!==s?s:1/0,y:1/0}}))}getDomain(t){var e;const{processedData:i}=this;if(!i)return[];const{defs:{keys:[n]},domain:{keys:[s],values:[o]},reduced:{[Po.property]:r,[Fo.property]:a}={}}=i;if(t===this.getCategoryDirection()){if("category"===n.valueType)return s;const i=null!==(e=kn(s))&&void 0!==e?e:[NaN,NaN];return t===xe.Y?[i[0]+-r,i[1]]:[i[0],i[1]+r]}return this.getValueAxis()instanceof fr?this.fixNumericExtent(o):this.fixNumericExtent(a)}getNodeClickEvent(t,e){var i;return new us(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getNodeDoubleClickEvent(t,e){var i;return new ps(null!==(i=this.xKey)&&void 0!==i?i:"",e.yKey,t,e,this)}getCategoryAxis(){return this.getCategoryDirection()===xe.Y?this.yAxis:this.xAxis}getValueAxis(){return this.getBarDirection()===xe.Y?this.yAxis:this.xAxis}calculateStep(t){var e;const{smallestDataInterval:i}=this,n=this.getCategoryAxis();if(!n)return;const s=(n.dataDomain[1]-n.dataDomain[0])/(null!==(e=null==i?void 0:i.x)&&void 0!==e?e:1)+1,o=Math.floor(t),r=Math.min(s,o);return t/Math.max(1,r)}createNodeData(){return Er(this,void 0,void 0,(function*(){const{data:t,visible:e}=this,i=this.getCategoryAxis(),n=this.getValueAxis();if(!(t&&e&&i&&n))return[];const s=i.scale,o=n.scale,{groupScale:r,yKeys:a,xKey:l="",cumYKeyCount:h,fills:c,strokes:d,strokeWidth:u,seriesItemEnabled:p,label:g,id:f,processedData:m,ctx:y}=this;let v=s.bandwidth;if(s instanceof Bi){const t=Math.max(i.range[0],i.range[1]);v=this.calculateStep(t)}r.range=[0,v],r.padding=i instanceof Yn?i.groupPaddingInner:i instanceof Co?.1:0,0===r.padding?r.round=!1:r.round=!0;const b=r.bandwidth>=1?r.bandwidth:r.rawBandwidth,x=[];return null==m||m.data.forEach(({keys:t,datum:e,values:n},v)=>{var k,S,w,D,O,M;const C=s.convert(t[0]);for(let t=0;t<(null!==(k=null==a?void 0:a.length)&&void 0!==k?k:0);t++){const s=null!==(S=null==a?void 0:a[t])&&void 0!==S?S:[];null!==(w=x[t])&&void 0!==w||(x[t]=[]);let k=0,N=0;for(let a=0;a<s.length;a++){const S=s[a],w=null!==(D=null==m?void 0:m.indices.values[S])&&void 0!==D?D:-1;if(null!==(O=(M=x[t])[a])&&void 0!==O||(M[a]={itemId:S,nodeData:[],labelData:[]}),void 0===w)continue;const L=n[0][w],E=+L,R=C+r.convert(String(t));if(!i.inRange(R,b))continue;if(isNaN(E))continue;const I=E<0?k:N,T=o.convert(I+E,{strict:!1}),A=o.convert(I,{strict:!1}),_=this.getBarDirection()===xe.X,P={x:_?Math.min(T,A):R,y:_?R:Math.min(T,A),width:_?Math.abs(A-T):b,height:_?b:Math.abs(A-T)},F={x:P.x+P.width/2,y:P.y+P.height/2},{fontStyle:B,fontWeight:z,fontSize:j,fontFamily:W,color:K,formatter:G,placement:X}=g,{text:Y,textAlign:H,textBaseline:V,x:$,y:U}=Nr({value:L,rect:P,formatter:G,placement:X,seriesId:f,barAlongX:_,ctx:y}),Z=h[t]+a,q={index:v,series:this,itemId:S,datum:e[0],cumulativeValue:I+E,yValue:L,yKey:S,xKey:l,x:P.x,y:P.y,width:P.width,height:P.height,nodeMidPoint:F,colorIndex:Z,fill:c[Z%c.length],stroke:d[Z%d.length],strokeWidth:u,label:p.get(S)&&Y?{text:Y,fontStyle:B,fontWeight:z,fontSize:j,fontFamily:W,textAlign:H,textBaseline:V,fill:K,x:$,y:U}:void 0};x[t][a].nodeData.push(q),x[t][a].labelData.push(q),E<0?k+=E:N+=E}}}),x.reduce((t,e)=>t.concat(...e),[])}))}nodeFactory(){return new Mr}updateDatumSelection(t){return Er(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>t.tag=Ir.Bar)}))}updateDatumNodes(t){var e;return Er(this,void 0,void 0,(function*(){const{datumSelection:i,isHighlight:n}=t,{fills:s,strokes:o,fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:h,shadow:c,formatter:d,id:u,highlightStyle:{item:p},ctx:g}=this,f=function(t=[]){const[e,i]=t;return!(0!==e||1!==i)}(null===(e=this.xAxis)||void 0===e?void 0:e.visibleRange),m=this.getCategoryDirection()===xe.X;i.each((t,e)=>{const{colorIndex:i}=e,y={fill:s[i%s.length],stroke:o[i%s.length],fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:h,fillShadow:c,strokeWidth:this.getStrokeWidth(this.strokeWidth,e)},v=m?e.width>0:e.height>0,b=function(t){var e,i,n,s,o,r,a,{datum:l,isHighlighted:h,style:c,highlightStyle:d,formatter:u,seriesId:p,stackGroup:g,ctx:{callbackCache:f}}=t,m=Cr(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","stackGroup","ctx"]);const y=h&&null!==(e=d.fill)&&void 0!==e?e:c.fill,v=h&&null!==(i=d.stroke)&&void 0!==i?i:c.stroke,b=h&&null!==(n=d.strokeWidth)&&void 0!==n?n:c.strokeWidth,x=h&&null!==(s=d.fillOpacity)&&void 0!==s?s:c.fillOpacity,{strokeOpacity:k,fillShadow:S,lineDash:w,lineDashOffset:D}=c;let O=void 0;return u&&(O=f.call(u,Object.assign({datum:l.datum,xKey:l.xKey,yKey:l.yKey,fill:y,stroke:v,strokeWidth:b,highlighted:h,seriesId:p,stackGroup:g},m))),{fill:null!==(o=null==O?void 0:O.fill)&&void 0!==o?o:y,stroke:null!==(r=null==O?void 0:O.stroke)&&void 0!==r?r:v,strokeWidth:null!==(a=null==O?void 0:O.strokeWidth)&&void 0!==a?a:b,fillOpacity:x,strokeOpacity:k,lineDash:w,lineDashOffset:D,fillShadow:S}}({datum:e,isHighlighted:n,style:y,highlightStyle:p,formatter:d,seriesId:u,stackGroup:this.getStackGroup(e.yKey),ctx:g});b.crisp=f,b.visible=v,function({rect:t,config:e}){const{crisp:i=!0,fill:n,stroke:s,strokeWidth:o,fillOpacity:r,strokeOpacity:a,lineDash:l,lineDashOffset:h,fillShadow:c,visible:d=!0}=e;t.crisp=i,t.fill=n,t.stroke=s,t.strokeWidth=o,t.fillOpacity=r,t.strokeOpacity=a,t.lineDash=l,t.lineDashOffset=h,t.fillShadow=c,t.visible=d}({rect:t,config:b})})}))}updateLabelSelection(t){return Er(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t,{enabled:n}=this.label,s=n?e:[];return i.update(s,t=>{t.tag=Ir.Label,t.pointerEvents=_.None})}))}updateLabelNodes(t){return Er(this,void 0,void 0,(function*(){const{labelSelection:e}=t;e.each((t,e)=>{!function({labelNode:t,labelDatum:e,config:i,visible:n}){if(e&&i&&i.enabled){const{x:s,y:o,text:r,textAlign:a,textBaseline:l}=e,{fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,color:p}=i;t.fontStyle=h,t.fontWeight=c,t.fontSize=d,t.fontFamily=u,t.textAlign=a,t.textBaseline=l,t.text=r,t.x=s,t.y=o,t.fill=p,t.visible=n}else t.visible=!1}({labelNode:t,labelDatum:e.label,config:this.label,visible:!0})})}))}getTooltipHtml(t){var e;const{xKey:i,yKeys:n,processedData:s,ctx:{callbackCache:o}}=this,r=this.getCategoryAxis(),a=this.getValueAxis(),{yKey:l}=t;if(!(s&&i&&l&&r&&a))return"";let h=0,c=0,d=0;for(;d<n.length;d++){const t=n[d];if(c=t.indexOf(l),c>=0){h+=c;break}h+=t.length}const{xName:u,yNames:p,fills:g,strokes:f,tooltip:m,formatter:y,id:v}=this,{renderer:b}=m,x=t.datum,k=p[l],S=this.getStackGroup(l),w=g[h%g.length],D=f[h%g.length],O=this.getStrokeWidth(this.strokeWidth),M=x[i],C=x[l],N=lr(r.formatDatum(M)),L=lr(a.formatDatum(C)),E=lr(k),R=N+": "+L;let I=void 0;y&&(I=o.call(y,{datum:x,fill:w,stroke:D,strokeWidth:O,highlighted:!1,xKey:i,yKey:l,seriesId:v,stackGroup:S}));const T=null!==(e=null==I?void 0:I.fill)&&void 0!==e?e:w,A={title:E,backgroundColor:T,content:R};return b?Ne(b({datum:x,xKey:i,xValue:M,xName:u,yKey:l,yValue:C,yName:k,color:T,title:E,seriesId:v,stackGroup:S}),A):Ne(A)}getLegendData(){const{id:t,data:e,xKey:i,yKeys:n,yNames:s,legendItemNames:o,cumYKeyCount:r,seriesItemEnabled:a,hideInLegend:l,fills:h,strokes:c,fillOpacity:d,strokeOpacity:u}=this;if(!(null==e?void 0:e.length)||!i||!n.length)return[];const p=[];return this.validateLegendData(),this.yKeys.forEach((e,i)=>{var n,g,f;for(let m=0;m<e.length;m++){const y=e[m];if(l.indexOf(y)>=0)return;const v=r[i]+m;p.push({legendType:"category",id:t,itemId:y,seriesId:t,enabled:null!==(n=a.get(y))&&void 0!==n&&n,label:{text:null!==(f=null!==(g=o[y])&&void 0!==g?g:s[y])&&void 0!==f?f:y},marker:{fill:h[v%h.length],stroke:c[v%c.length],fillOpacity:d,strokeOpacity:u}})}}),p}validateLegendData(){const{hideInLegend:t,legendItemNames:e}=this;let i=!1;this.yKeys.forEach(n=>{n.forEach(n=>{if(t.indexOf(n)>=0)return;const s=void 0!==e[n];i&&!s&&G.warnOnce("a series is missing the legendItemName property, unexpected behaviour may occur."),i=s})})}onLegendItemClick(t){const{itemId:e,enabled:i,series:n}=t;n.id===this.id&&(super.toggleSeriesItem(e,i),Object.keys(this.legendItemNames).filter(t=>void 0!==this.legendItemNames[t]&&this.legendItemNames[t]===this.legendItemNames[e]).forEach(t=>{t!==e&&super.toggleSeriesItem(t,i)}),this.calculateVisibleDomain())}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,numVisibleItems:n}=t,s=Object.values(n).reduce((t,e)=>t+e,0),o=Object.values(n).filter(t=>1===t).length===Object.keys(n).length,r={};this.yKeys.forEach(t=>{t.forEach(t=>{var n;const a=t===i||1===s&&e||o&&e;r[t]=null!==(n=r[t])&&void 0!==n?n:a,Object.keys(this.legendItemNames).filter(e=>void 0!==this.legendItemNames[e]&&this.legendItemNames[e]===this.legendItemNames[t]).forEach(t=>{var e;r[t]=null!==(e=r[t])&&void 0!==e?e:a})})}),Object.keys(r).forEach(t=>{super.toggleSeriesItem(t,r[t])}),this.calculateVisibleDomain()}calculateVisibleDomain(){const t=this.yKeys.map(t=>t.slice());this.seriesItemEnabled.forEach((e,i)=>{e||t.forEach(t=>{const e=t.indexOf(i);e>=0&&t.splice(e,1)})});const e=[];t.forEach((t,i)=>{t.length>0&&e.push(String(i))}),this.groupScale.domain=e,this.nodeDataRefresh=!0}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=1/0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.min(i,e.x))})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.x},{from:0,to:e.width}],{disableInteractions:!0,duration:1e3,ease:Cs,repeat:0,onUpdate([i,n]){t.x=i,t.width=n,t.y=e.y,t.height=e.height}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Ms,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:.2,outer:.3}}getBarDirection(){return xe.X}getCategoryDirection(){return xe.Y}}_r.className="BarSeries",_r.type="bar",Lr([Dt(Ht)],_r.prototype,"fills",void 0),Lr([Dt(Ht)],_r.prototype,"strokes",void 0),Lr([Dt($t(0,1))],_r.prototype,"fillOpacity",void 0),Lr([Dt($t(0,1))],_r.prototype,"strokeOpacity",void 0),Lr([Dt(le)],_r.prototype,"lineDash",void 0),Lr([Dt($t(0))],_r.prototype,"lineDashOffset",void 0),Lr([Dt(At)],_r.prototype,"formatter",void 0),Lr([Dt(Bt)],_r.prototype,"xKey",void 0),Lr([Dt(Bt)],_r.prototype,"xName",void 0),Lr([Dt(Qt)],_r.prototype,"hideInLegend",void 0),Lr([Dt(ee)],_r.prototype,"visibles",void 0),Lr([Dt(_t)],_r.prototype,"grouped",void 0),Lr([Dt(Ut())],_r.prototype,"normalizedTo",void 0),Lr([Dt($t(0))],_r.prototype,"strokeWidth",void 0);class Pr extends _r{getBarDirection(){return xe.Y}getCategoryDirection(){return xe.X}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{e.yValue>=0&&(i=Math.max(i,e.height+e.y))})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:Cs,repeat:0,onUpdate([i,n]){t.y=i,t.height=n,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Ms,repeat:0,onUpdate:e=>{t.opacity=e}})})})}}Pr.type="column",Pr.className="ColumnSeries";var Fr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Br=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};const zr=["count","sum","mean"],jr=Ot(t=>zr.includes(t),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var Wr;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(Wr||(Wr={}));class Kr extends wn{constructor(){super(...arguments),this.formatter=void 0}}Fr([Dt(At)],Kr.prototype,"formatter",void 0);class Gr extends Ue{constructor(){super(...arguments),this.renderer=void 0}}Fr([Dt(At)],Gr.prototype,"renderer",void 0);class Xr extends fs{constructor(t){super({moduleCtx:t,pickModes:[Pe.EXACT_SHAPE_MATCH]}),this.label=new Kr,this.tooltip=new Gr,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.bins=void 0,this.aggregation="count",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[],this.label.enabled=!1}deriveBins(t){if(void 0===this.binCount){const e=zi(t[0],t[1],10),i=Wi(t[0],t[1],10),n=e[0],s=t=>[t,t+i];return[[n-i,n],...e.map(s)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],s=e||1,{start:o,binSize:r}=this.calculateNiceStart(i,n,s);return this.getBins(o,n,r,s)}getBins(t,e,i,n){const s=[];for(let o=0;o<n;o++){const r=Math.round(10*(t+o*i))/10;let a=Math.round(10*(t+(o+1)*i))/10;o===n-1&&(a=Math.max(a,e)),s[o]=[r,a]}return s}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return{start:Math.floor(t/o)*o,binSize:n}}processData(){return Br(this,void 0,void 0,(function*(){const{xKey:t,yKey:e,data:i,areaPlot:n,aggregation:s}=this,o=[ze(t,!0),Bo];if(e){let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}};"count"===s||("sum"===s?t=function(t){return{type:"aggregate",properties:t,aggregateFunction:t=>Te(t),groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}}}([e]):"mean"===s&&(t=function(t){return{properties:t,type:"aggregate",aggregateFunction:t=>Te(t),groupAggregateFunction:(t,e=[0,0,-1])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e[2]++,e},finalFunction:(t=[0,0,0])=>{const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}([e]))),n&&(t=_e([e],t)),o.push(je(e,!0,{invalidValue:void 0}),t)}else{let t={type:"aggregate",properties:[],aggregateFunction:()=>[0,1],groupAggregateFunction:(t,e=[0,0])=>{var i,n;return e[0]+=null!==(i=null==t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(n=null==t?void 0:t[1])&&void 0!==n?n:0,e}};n&&(t=_e([],t)),o.push(t)}this.dataModel=new Oe({props:o,dataVisible:this.visible,groupByFn:t=>{var e;const i=we(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const n=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),s=n.length;return this.calculatedBins=[...n],t=>{const e=t.keys[0];for(let t=0;t<s;t++){const i=n[t];if(e>=i[0]&&e<i[1])return i;if(t===s-1&&e<=i[1])return i}return[]}}}),this.processedData=this.dataModel.processData(null!=i?i:[])}))}getDomain(t){var e,i,n,s;const{processedData:o}=this;if(!o)return[];const{domain:{aggValues:[r]=[]}}=o,a=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],l=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(s=null===(n=this.calculatedBins)||void 0===n?void 0:n.length)&&void 0!==s?s:0)-1][1];return t===xe.X?we([a,l]):we(r)}getNodeClickEvent(t,e){var i,n;return new us(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new ps(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t;return Br(this,void 0,void 0,(function*(){const{xAxis:e,yAxis:i,processedData:n,ctx:{callbackCache:s}}=this;if(!(this.seriesItemEnabled&&e&&i&&n&&"grouped"===n.type))return[];const{scale:o}=e,{scale:r}=i,{fill:a,stroke:l,strokeWidth:h,id:c,yKey:d="",xKey:u=""}=this,p=[],g=t=>String(t.value),{label:{formatter:f=g,fontStyle:m,fontWeight:y,fontSize:v,fontFamily:b,color:x}}=this;return n.data.forEach(t=>{var e;const{aggValues:[[i,n]]=[[0,0]],datum:g,datum:{length:k},keys:S,keys:[w,D]}=t,O=o.convert(w),M=o.convert(D),C=i+n,N=r.convert(0),L=r.convert(C),E=M-O,R=Math.abs(L-N),I=0!==C?{text:null!==(e=s.call(f,{value:C,seriesId:c}))&&void 0!==e?e:String(C),fontStyle:m,fontWeight:y,fontSize:v,fontFamily:b,fill:x,x:O+E/2,y:L+R/2}:void 0,T={x:O+E/2,y:L+R/2};p.push({series:this,datum:g,aggregatedValue:C,frequency:k,domain:S,yKey:d,xKey:u,x:O,y:L,width:E,height:R,nodeMidPoint:T,fill:a,stroke:l,strokeWidth:h,label:I})}),[{itemId:null!==(t=this.yKey)&&void 0!==t?t:this.id,nodeData:p,labelData:p}]}))}nodeFactory(){return new Mr}updateDatumSelection(t){return Br(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,t=>{t.tag=Wr.Bin,t.crisp=!0})}))}updateDatumNodes(t){return Br(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:n,strokeOpacity:s,shadow:o,highlightStyle:{item:{fill:r,fillOpacity:a=n,stroke:l,strokeWidth:h}}}=this;e.each((t,e,c)=>{var d,u;const p=i&&void 0!==h?h:e.strokeWidth,g=i?a:n;t.x=e.x,t.width=e.width,t.fill=null!==(d=i?r:void 0)&&void 0!==d?d:e.fill,t.stroke=null!==(u=i?l:void 0)&&void 0!==u?u:e.stroke,t.fillOpacity=g,t.strokeOpacity=s,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=o,t.zIndex=i?qe.highlightedZIndex:c,t.visible=e.height>0})}))}updateLabelSelection(t){return Br(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,t=>{t.tag=Wr.Label,t.pointerEvents=_.None,t.textAlign="center",t.textBaseline="middle"})}))}updateLabelNodes(t){return Br(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each((t,e)=>{const n=e.label;n&&i?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1})}))}getTooltipHtml(t){const{xKey:e,yKey:i="",xAxis:n,yAxis:s}=this;if(!e||!n||!s)return"";const{xName:o,yName:r,fill:a,tooltip:l,aggregation:h,id:c}=this,{renderer:d}=l,{aggregatedValue:u,frequency:p,domain:g,domain:[f,m]}=t,y=`${lr(null!=o?o:e)}: ${n.formatDatum(f)} - ${n.formatDatum(m)}`;let v=i?`<b>${lr(null!=r?r:i)} (${h})</b>: ${s.formatDatum(u)}<br>`:"";v+="<b>Frequency</b>: "+p;const b={title:y,backgroundColor:a,content:v};return d?Ne(d({datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xValue:g,xName:o,yKey:i,yValue:u,yName:r,color:a,title:y,seriesId:c}),b):Ne(b)}getLegendData(){var t;const{id:e,data:i,xKey:n,yName:s,visible:o,fill:r,stroke:a,fillOpacity:l,strokeOpacity:h}=this;if(!i||0===i.length)return[];return[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:o,label:{text:null!==(t=null!=s?s:n)&&void 0!==t?t:"Frequency"},marker:{fill:null!=r?r:"rgba(0, 0, 0, 0)",stroke:null!=a?a:"rgba(0, 0, 0, 0)",fillOpacity:l,strokeOpacity:h}}]}animateEmptyUpdateReady({datumSelections:t,labelSelections:e}){let i=0;t.forEach(t=>t.each((t,e)=>{i=Math.max(i,e.height+e.y)})),t.forEach(t=>{t.each((t,e)=>{var n;null===(n=this.animationManager)||void 0===n||n.animateMany(`${this.id}_empty-update-ready_${t.id}`,[{from:i,to:e.y},{from:0,to:e.height}],{disableInteractions:!0,duration:1e3,ease:Cs,repeat:0,onUpdate([i,n]){t.y=i,t.height=n,t.x=e.x,t.width=e.width}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Ms,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({datumSelections:t}){t.forEach(t=>{this.resetSelectionRects(t)})}animateReadyHighlight(t){this.resetSelectionRects(t)}animateReadyResize({datumSelections:t}){var e;null===(e=this.animationManager)||void 0===e||e.stop(),t.forEach(t=>{this.resetSelectionRects(t)})}resetSelectionRects(t){t.each((t,e)=>{t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height})}isLabelEnabled(){return this.label.enabled}}Xr.className="HistogramSeries",Xr.type="histogram",Fr([Dt(Yt)],Xr.prototype,"fill",void 0),Fr([Dt(Yt)],Xr.prototype,"stroke",void 0),Fr([Dt($t(0,1))],Xr.prototype,"fillOpacity",void 0),Fr([Dt($t(0,1))],Xr.prototype,"strokeOpacity",void 0),Fr([Dt(le)],Xr.prototype,"lineDash",void 0),Fr([Dt($t(0))],Xr.prototype,"lineDashOffset",void 0),Fr([Dt(Bt)],Xr.prototype,"xKey",void 0),Fr([Dt(_t)],Xr.prototype,"areaPlot",void 0),Fr([Dt(Nt())],Xr.prototype,"bins",void 0),Fr([Dt(jr)],Xr.prototype,"aggregation",void 0),Fr([Dt(Ut(0))],Xr.prototype,"binCount",void 0),Fr([Dt(Bt)],Xr.prototype,"xName",void 0),Fr([Dt(Bt)],Xr.prototype,"yKey",void 0),Fr([Dt(Bt)],Xr.prototype,"yName",void 0),Fr([Dt($t(0))],Xr.prototype,"strokeWidth",void 0);var Yr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Hr=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Vr extends wn{constructor(){super(...arguments),this.formatter=void 0}}Yr([Dt(At)],Vr.prototype,"formatter",void 0);class $r extends Ue{constructor(){super(...arguments),this.renderer=void 0,this.format=void 0}}Yr([Dt(At)],$r.prototype,"renderer",void 0),Yr([Dt(Bt)],$r.prototype,"format",void 0);class Ur extends fs{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[Pe.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Pe.NEAREST_NODE,Pe.EXACT_SHAPE_MATCH]}),this.marker=new ms,this.label=new Vr,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.tooltip=new $r,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0;const{marker:e,label:i}=this;e.fill="#c16068",e.stroke="#874349",i.enabled=!1}processData(){return Hr(this,void 0,void 0,(function*(){const{xAxis:t,yAxis:e,xKey:i="",yKey:n=""}=this,s=i&&n&&this.data?this.data:[],o=(null==t?void 0:t.scale)instanceof Bi,r=(null==e?void 0:e.scale)instanceof Bi;this.dataModel=new Oe({props:[je(i,o,{id:"xValue"}),je(n,r,{id:"yValue",invalidValue:void 0})],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=s?s:[])}))}getDomain(t){const{xAxis:e,yAxis:i,dataModel:n,processedData:s}=this;if(!s||!n)return[];const o=n.resolveProcessedDataDefById("xValue");if(t===xe.X){const t=n.getDomain("xValue",s);return"category"===(null==o?void 0:o.valueType)?t:this.fixNumericExtent(kn(t),e)}{const t=n.getDomain("yValue",s);return this.fixNumericExtent(t,i)}}createNodeData(){var t,e,i,n,s,o,r,a,l,h,c;return Hr(this,void 0,void 0,(function*(){const{processedData:d,dataModel:u,xAxis:p,yAxis:g,marker:{enabled:f,size:m,strokeWidth:y},ctx:{callbackCache:v}}=this;if(!(d&&u&&p&&g))return[];const{label:b,yKey:x="",xKey:k="",id:S}=this,w=p.scale,D=g.scale,O=(null!==(t=w.bandwidth)&&void 0!==t?t:0)/2,M=(null!==(e=D.bandwidth)&&void 0!==e?e:0)/2,C=new Array(d.data.length),N=f?m:0,L=null!==(s=null===(n=null===(i=this.dataModel)||void 0===i?void 0:i.resolveProcessedDataIndexById("xValue"))||void 0===n?void 0:n.index)&&void 0!==s?s:-1,E=null!==(a=null===(r=null===(o=this.dataModel)||void 0===o?void 0:o.resolveProcessedDataIndexById("yValue"))||void 0===r?void 0:r.index)&&void 0!==a?a:-1;let R=!0,I=void 0,T=void 0,A=0;for(let t=0;t<d.data.length;t++){const{datum:e,values:i}=null!=T?T:d.data[t],n=i[L],s=i[E];if(void 0===s)I=void 0,R=!0;else{const i=w.convert(n)+O;if(isNaN(i)){I=void 0,R=!0;continue}const o=(null!==(l=w.bandwidth)&&void 0!==l?l:.5*m+(null!=y?y:0))+1;T=void 0===(null===(h=d.data[t+1])||void 0===h?void 0:h.values[E])?void 0:d.data[t+1];const r=null===(c=d.data[t+1])||void 0===c?void 0:c.values[L],a=p.inRangeEx(i,0,o),u=T&&p.inRangeEx(w.convert(r)+O,0,o);if(-1===a&&-1===u){R=!0;continue}if(1===a&&1===I){R=!0;continue}I=a;const g=D.convert(s)+M;let f;b.formatter&&(f=v.call(b.formatter,{value:s,seriesId:S})),void 0!==f||("number"==typeof s&&isFinite(s)?f=s.toFixed(2):s&&(f=String(s))),C[A++]={series:this,datum:e,yKey:x,xKey:k,point:{x:i,y:g,moveTo:R,size:N},nodeMidPoint:{x:i,y:g},label:f?{text:f,fontStyle:b.fontStyle,fontWeight:b.fontWeight,fontSize:b.fontSize,fontFamily:b.fontFamily,textAlign:"center",textBaseline:"bottom",fill:b.color}:void 0},R=!1}}return C.length=A,[{itemId:x,nodeData:C,labelData:C}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(os(t))}updateMarkerSelection(t){return Hr(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:s}=this.marker;return e=n&&s?e:[],this.marker.isDirty()&&i.clear(),i.update(e)}))}updateMarkerNodes(t){var e;return Hr(this,void 0,void 0,(function*(){const{markerSelection:i,isHighlight:n}=t,{marker:s,marker:{fillOpacity:o},xKey:r="",yKey:a="",stroke:l,strokeOpacity:h,highlightStyle:{item:{fill:c,fillOpacity:d=o,stroke:u,strokeWidth:p}},id:g,ctx:{callbackCache:f}}=this,{size:m,formatter:y}=s,v=null!==(e=s.strokeWidth)&&void 0!==e?e:this.strokeWidth,b="function"==typeof s.shape;i.each((t,e)=>{var i,x,k,S,w,D,O;const M=n&&void 0!==c?c:s.fill,C=n?d:o,N=n&&void 0!==u?u:null!==(i=s.stroke)&&void 0!==i?i:l,L=n&&void 0!==p?p:v;let E=void 0;y&&(E=f.call(y,{datum:e.datum,xKey:r,yKey:a,fill:M,stroke:N,strokeWidth:L,size:m,highlighted:n,seriesId:g})),t.fill=null!==(x=null==E?void 0:E.fill)&&void 0!==x?x:M,t.stroke=null!==(k=null==E?void 0:E.stroke)&&void 0!==k?k:N,t.strokeWidth=null!==(S=null==E?void 0:E.strokeWidth)&&void 0!==S?S:L,t.fillOpacity=null!=C?C:1,t.strokeOpacity=null!==(D=null!==(w=s.strokeOpacity)&&void 0!==w?w:h)&&void 0!==D?D:1,t.size=null!==(O=null==E?void 0:E.size)&&void 0!==O?O:m,t.translationX=e.point.x,t.translationY=e.point.y,t.visible=t.size>0&&!isNaN(e.point.x)&&!isNaN(e.point.y),b&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),n||this.marker.markClean()}))}updateLabelSelection(t){return Hr(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:n,enabled:s}=this.marker;return e=n&&s?e:[],i.update(e)}))}updateLabelNodes(t){return Hr(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:s,fontSize:o,fontFamily:r,color:a}=this.label;e.each((t,e)=>{const{point:l,label:h}=e;e&&h&&i?(t.fontStyle=n,t.fontWeight=s,t.fontSize=o,t.fontFamily=r,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1})}))}getNodeClickEvent(t,e){var i,n;return new us(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new ps(null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getTooltipHtml(t){var e,i;const{xKey:n,yKey:s,xAxis:o,yAxis:r}=this;if(!(n&&s&&o&&r))return"";const{xName:a,yName:l,tooltip:h,marker:c,id:d}=this,{renderer:u,format:p}=h,g=t.datum,f=g[n],m=g[s],y=o.formatDatum(f),v=r.formatDatum(m),b=lr(null!==(e=this.title)&&void 0!==e?e:l),x=lr(y+": "+v),{formatter:k,fill:S,stroke:w,strokeWidth:D,size:O}=c,M=null!=D?D:this.strokeWidth;let C=void 0;k&&(C=k({datum:g,xKey:n,yKey:s,fill:S,stroke:w,strokeWidth:M,size:O,highlighted:!1,seriesId:d}));const N=null!==(i=null==C?void 0:C.fill)&&void 0!==i?i:S,L={title:b,backgroundColor:N,content:x};if(p||u){const t={datum:g,xKey:n,xValue:f,xName:a,yKey:s,yValue:m,yName:l,title:b,color:N,seriesId:d};if(p)return Ne({content:rr(p,t)},L);if(u)return Ne(u(t),L)}return Ne(L)}getLegendData(){var t,e,i,n,s,o,r;const{id:a,data:l,xKey:h,yKey:c,yName:d,visible:u,title:p,marker:g,stroke:f,strokeOpacity:m}=this;if(!((null==l?void 0:l.length)&&h&&c))return[];return[{legendType:"category",id:a,itemId:c,seriesId:a,enabled:u,label:{text:null!==(t=null!=p?p:d)&&void 0!==t?t:c},marker:{shape:g.shape,fill:null!==(e=g.fill)&&void 0!==e?e:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(i=g.stroke)&&void 0!==i?i:f)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(s=g.fillOpacity)&&void 0!==s?s:1,strokeOpacity:null!==(r=null!==(o=g.strokeOpacity)&&void 0!==o?o:m)&&void 0!==r?r:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e,contextData:i,paths:n,seriesRect:s}){i.forEach(({nodeData:i},o)=>{var r,a;const[l]=n[o],{path:h}=l;l.fill=void 0,l.lineJoin="round",l.pointerEvents=_.None,l.stroke=this.stroke,l.strokeWidth=this.getStrokeWidth(this.strokeWidth),l.strokeOpacity=this.strokeOpacity,l.lineDash=this.lineDash,l.lineDashOffset=this.lineDashOffset;const c={from:0,to:null!==(r=null==s?void 0:s.width)&&void 0!==r?r:0,disableInteractions:!0,ease:Ms,repeat:0};null===(a=this.animationManager)||void 0===a||a.animate(this.id+"_empty-update-ready",Object.assign(Object.assign({},c),{duration:1e3,onUpdate(t){h.clear({trackChanges:!0}),i.forEach((e,n)=>{if(e.point.x<=t)e.point.moveTo?h.moveTo(e.point.x,e.point.y):h.lineTo(e.point.x,e.point.y);else if(n>0&&i[n-1].point.x<t){const s=i[n-1].point,o=e.point,r=t,a=s.y+(r-s.x)*(o.y-s.y)/(o.x-s.x);e.point.moveTo?h.moveTo(r,a):h.lineTo(r,a)}}),l.checkPathDirty()}})),t[o].each((t,e)=>{var i,n,o,r;const a=(null==s?void 0:s.width)?e.point.x/s.width*1e3:0,l=this.animateFormatter(e),h=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;null===(o=this.animationManager)||void 0===o||o.animate(`${this.id}_empty-update-ready_${t.id}`,Object.assign(Object.assign({},c),{to:null!==(r=null==l?void 0:l.size)&&void 0!==r?r:h,delay:a,duration:200,onUpdate(e){t.size=e}}))}),e[o].each((t,e)=>{var i;const n=(null==s?void 0:s.width)?e.point.x/s.width*1e3:0;null===(i=this.animationManager)||void 0===i||i.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:n,duration:200,ease:Ms,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate(t){this.resetMarkersAndPaths(t)}animateReadyResize(t){var e;null===(e=this.animationManager)||void 0===e||e.stop(),this.resetMarkersAndPaths(t)}resetMarkersAndPaths({markerSelections:t,contextData:e,paths:i}){e.forEach(({nodeData:e},n)=>{const[s]=i[n],{path:o}=s;s.stroke=this.stroke,s.strokeWidth=this.getStrokeWidth(this.strokeWidth),s.strokeOpacity=this.strokeOpacity,s.lineDash=this.lineDash,s.lineDashOffset=this.lineDashOffset,o.clear({trackChanges:!0}),e.forEach(t=>{t.point.moveTo?o.moveTo(t.point.x,t.point.y):o.lineTo(t.point.x,t.point.y)}),s.checkPathDirty(),t[n].each((t,e)=>{var i,n,s;const o=this.animateFormatter(e),r=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;t.size=null!==(s=null==o?void 0:o.size)&&void 0!==s?s:r})})}animateFormatter(t){var e,i;const{marker:n,xKey:s="",yKey:o="",stroke:r,id:a,ctx:{callbackCache:l}}=this,{size:h,formatter:c}=n,d=n.fill,u=null!==(e=n.stroke)&&void 0!==e?e:r,p=null!==(i=n.strokeWidth)&&void 0!==i?i:this.strokeWidth;let g=void 0;return c&&(g=l.call(c,{datum:t.datum,xKey:s,yKey:o,fill:d,stroke:u,strokeWidth:p,size:h,highlighted:!1,seriesId:a})),g}isLabelEnabled(){return this.label.enabled}}Ur.className="LineSeries",Ur.type="line",Yr([Dt(Bt)],Ur.prototype,"title",void 0),Yr([Dt(Yt)],Ur.prototype,"stroke",void 0),Yr([Dt(le)],Ur.prototype,"lineDash",void 0),Yr([Dt($t(0))],Ur.prototype,"lineDashOffset",void 0),Yr([Dt($t(0))],Ur.prototype,"strokeWidth",void 0),Yr([Dt($t(0,1))],Ur.prototype,"strokeOpacity",void 0),Yr([Dt(Bt)],Ur.prototype,"xKey",void 0),Yr([Dt(Bt)],Ur.prototype,"xName",void 0),Yr([Dt(Bt)],Ur.prototype,"yKey",void 0),Yr([Dt(Bt)],Ur.prototype,"yName",void 0);class Zr{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(t=>kt.fromString(t))}update(){const{domain:t,range:e}=this;t.length<2&&(G.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let e=1;e<t.length;e++){if(t[e-1]>=t[e]){G.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort((t,e)=>t-e);break}}const i=e.length<t.length;if(i||t.length>2&&e.length>t.length)if(G.warnOnce("Number of elements in `colorRange` needs to match the number of elements in `colorDomain`."),i)for(let i=e.length;i<t.length;i++)e.push("black");else e.splice(t.length);this.parsedRange=this.range.map(t=>kt.fromString(t))}convert(t){const{domain:e,range:i,parsedRange:n}=this,s=e[0],o=e[e.length-1],r=i[0],a=i[i.length-1];if(t<=s)return r;if(t>=o)return a;let l,h;if(2===e.length){const e=(t-s)/(o-s),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),h=(e-l*n)/n}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];h=(t-i)/(e[l+1]-i)}return Ds(n[l],n[l+1])(h)}}var qr=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},Jr=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class Qr extends wn{constructor(){super(...arguments),this.formatter=void 0}}qr([Dt(At)],Qr.prototype,"formatter",void 0);class ta extends ds{constructor(t,e,i,n,s,o){super(e,i,n,s,o),this.sizeKey=t}}class ea extends ta{constructor(){super(...arguments),this.type="nodeClick"}}class ia extends ta{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class na extends Ue{constructor(){super(...arguments),this.renderer=void 0}}qr([Dt(At)],na.prototype,"renderer",void 0);class sa extends fs{constructor(t){super({moduleCtx:t,pickModes:[Pe.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Pe.NEAREST_NODE,Pe.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0}),this.sizeScale=new Wn,this.marker=new ms,this.label=new Qr,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorDomain=void 0,this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Zr,this.tooltip=new na;const{label:e}=this;e.enabled=!1}processData(){var t,e,i,n,s,o;return Jr(this,void 0,void 0,(function*(){const{xKey:r="",yKey:a="",sizeKey:l,xAxis:h,yAxis:c,marker:d,data:u}=this,p=(null==h?void 0:h.scale)instanceof Bi,g=(null==c?void 0:c.scale)instanceof Bi,{colorScale:f,colorDomain:m,colorRange:y,colorKey:v}=this;if(this.dataModel=new Oe({props:[je(r,p,{id:"xValue"}),je(a,g,{id:"yValue"}),...l?[je(l,!0,{id:"sizeValue"})]:[],...v?[je(v,!0,{id:"colorValue"})]:[]],dataVisible:this.visible}),this.processedData=this.dataModel.processData(null!=u?u:[]),l){const s=null!==(e=null===(t=this.dataModel.resolveProcessedDataIndexById("sizeValue"))||void 0===t?void 0:t.index)&&void 0!==e?e:-1,o=null!==(n=null===(i=this.processedData)||void 0===i?void 0:i.domain.values[s])&&void 0!==n?n:[];this.sizeScale.domain=d.domain?d.domain:o}if(v){const t=null!==(o=null===(s=this.dataModel.resolveProcessedDataIndexById("colorValue"))||void 0===s?void 0:s.index)&&void 0!==o?o:-1;f.domain=null!=m?m:this.processedData.domain.values[t],f.range=y,f.update()}}))}getDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n=t===xe.X?"xValue":"yValue",s=e.resolveProcessedDataDefById(n),o=e.getDomain(n,i);if("category"===(null==s?void 0:s.valueType))return o;const r=t===xe.X?this.xAxis:this.yAxis;return this.fixNumericExtent(kn(o),r)}getNodeClickEvent(t,e){var i,n;return new ea(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}getNodeDoubleClickEvent(t,e){var i,n;return new ia(this.sizeKey,null!==(i=this.xKey)&&void 0!==i?i:"",null!==(n=this.yKey)&&void 0!==n?n:"",t,e,this)}createNodeData(){var t,e,i,n,s,o,r,a,l;return Jr(this,void 0,void 0,(function*(){const{visible:h,xAxis:c,yAxis:d,yKey:u="",xKey:p="",label:g,labelKey:f,ctx:{callbackCache:m}}=this,y=null===(t=this.dataModel)||void 0===t?void 0:t.resolveProcessedDataIndexById("xValue"),v=null===(e=this.dataModel)||void 0===e?void 0:e.resolveProcessedDataIndexById("yValue");if(!(y&&v&&h&&c&&d))return[];const{colorScale:b,sizeKey:x,colorKey:k,id:S}=this,w=c.scale,D=d.scale,O=(null!==(i=w.bandwidth)&&void 0!==i?i:0)/2,C=(null!==(n=D.bandwidth)&&void 0!==n?n:0)/2,{sizeScale:N,marker:L}=this,E=new Array(null!==(o=null===(s=this.processedData)||void 0===s?void 0:s.data.length)&&void 0!==o?o:0);N.range=[L.size,L.maxSize];const R=g.getFont();let I=0;for(const{values:t,datum:e}of null!==(a=null===(r=this.processedData)||void 0===r?void 0:r.data)&&void 0!==a?a:[]){const i=t[y.index],n=t[v.index],s=w.convert(i)+O,o=D.convert(n)+C;if(!this.checkRangeXY(s,o,c,d))continue;let r;g.formatter&&(r=m.call(g.formatter,{value:n,seriesId:S,datum:e})),void 0===r&&(r=f?String(e[f]):"");const a=M.getTextSize(r,R),l=x?N.convert(t[2]):L.size,h=x?3:2,T=k?b.convert(t[h]):void 0;E[I++]={series:this,itemId:u,yKey:u,xKey:p,datum:e,point:{x:s,y:o,size:l},nodeMidPoint:{x:s,y:o},fill:T,label:Object.assign({text:r},a)}}return E.length=I,[{itemId:null!==(l=this.yKey)&&void 0!==l?l:this.id,nodeData:E,labelData:E}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce((t,e)=>t.concat(e.labelData),[])}markerFactory(){const{shape:t}=this.marker;return new(os(t))}updateMarkerSelection(t){return Jr(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:n}}=this;this.marker.isDirty()&&i.clear();const s=n?e:[];return i.update(s)}))}updateMarkerNodes(t){return Jr(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{marker:n,xKey:s="",yKey:o="",sizeScale:r,marker:{fillOpacity:a,strokeOpacity:l,strokeWidth:h},highlightStyle:{item:{fill:c,fillOpacity:d=a,stroke:u,strokeWidth:p}},id:g,ctx:{callbackCache:f}}=this,{formatter:m}=n;r.range=[n.size,n.maxSize];const y="function"==typeof n.shape;e.each((t,e)=>{var r,v,b,x,k,S,w,D,O,M;const C=i&&void 0!==c?c:null!==(r=e.fill)&&void 0!==r?r:n.fill,N=i?d:a,L=i&&void 0!==u?u:n.stroke,E=l,R=i&&void 0!==p?p:null!=h?h:1,I=null!==(b=null===(v=e.point)||void 0===v?void 0:v.size)&&void 0!==b?b:0;let T=void 0;m&&(T=f.call(m,{datum:e.datum,xKey:s,yKey:o,fill:C,stroke:L,strokeWidth:R,size:I,highlighted:i,seriesId:g})),t.fill=null!==(x=null==T?void 0:T.fill)&&void 0!==x?x:C,t.stroke=null!==(k=null==T?void 0:T.stroke)&&void 0!==k?k:L,t.strokeWidth=null!==(S=null==T?void 0:T.strokeWidth)&&void 0!==S?S:R,t.fillOpacity=null!=N?N:1,t.strokeOpacity=null!=E?E:1,t.translationX=null!==(D=null===(w=e.point)||void 0===w?void 0:w.x)&&void 0!==D?D:0,t.translationY=null!==(M=null===(O=e.point)||void 0===O?void 0:O.y)&&void 0!==M?M:0,t.visible=t.size>0,y&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return Jr(this,void 0,void 0,(function*(){const{labelSelection:n}=t,{label:{enabled:s}}=this,o=(s&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map(t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}));return n.update(o)}))}updateLabelNodes(t){return Jr(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each((t,e)=>{var n,s,o,r;t.text=e.label.text,t.fill=i.color,t.x=null!==(s=null===(n=e.point)||void 0===n?void 0:n.x)&&void 0!==s?s:0,t.y=null!==(r=null===(o=e.point)||void 0===o?void 0:o.y)&&void 0!==r?r:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"})}))}getTooltipHtml(t){var e,i,n,s,o,r,a;const{xKey:l,yKey:h,xAxis:c,yAxis:d}=this;if(!(l&&h&&c&&d))return"";const{marker:u,tooltip:p,xName:g,yName:f,sizeKey:m,sizeName:y,labelKey:v,labelName:b,id:x,ctx:{callbackCache:k}}=this,{stroke:S}=u,w=null!==(e=t.fill)&&void 0!==e?e:u.fill,D=this.getStrokeWidth(null!==(i=u.strokeWidth)&&void 0!==i?i:1),{formatter:O}=this.marker;let M=void 0;O&&(M=k.call(O,{datum:t,xKey:l,yKey:h,fill:w,stroke:S,strokeWidth:D,size:null!==(s=null===(n=t.point)||void 0===n?void 0:n.size)&&void 0!==s?s:0,highlighted:!1,seriesId:x}));const C=null!==(r=null!==(o=null==M?void 0:M.fill)&&void 0!==o?o:w)&&void 0!==r?r:"gray",N=null!==(a=this.title)&&void 0!==a?a:f,L=t.datum,E=L[l],R=L[h],I=lr(c.formatDatum(E)),T=lr(d.formatDatum(R));let A=`<b>${lr(null!=g?g:l)}</b>: ${I}<br><b>${lr(null!=f?f:h)}</b>: ${T}`;m&&(A+=`<br><b>${lr(null!=y?y:m)}</b>: ${lr(L[m])}`),v&&(A=`<b>${lr(null!=b?b:v)}</b>: ${lr(L[v])}<br>`+A);const _={title:N,backgroundColor:C,content:A},{renderer:P}=p;return P?Ne(P({datum:L,xKey:l,xValue:E,xName:g,yKey:h,yValue:R,yName:f,sizeKey:m,sizeName:y,labelKey:v,labelName:b,title:N,color:C,seriesId:x}),_):Ne(_)}getLegendData(){var t,e,i,n,s;const{id:o,data:r,xKey:a,yKey:l,yName:h,title:c,visible:d,marker:u}=this,{fill:p,stroke:g,fillOpacity:f,strokeOpacity:m}=u;if(!((null==r?void 0:r.length)&&a&&l))return[];return[{legendType:"category",id:o,itemId:l,seriesId:o,enabled:d,label:{text:null!==(t=null!=c?c:h)&&void 0!==t?t:l},marker:{shape:u.shape,fill:null!==(i=null!==(e=u.fill)&&void 0!==e?e:p)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(s=null!==(n=u.stroke)&&void 0!==n?n:g)&&void 0!==s?s:"rgba(0, 0, 0, 0)",fillOpacity:null!=f?f:1,strokeOpacity:null!=m?m:1}}]}animateEmptyUpdateReady({markerSelections:t,labelSelections:e}){t.forEach(t=>{t.each((t,e)=>{var i,n,s,o;const r=this.animateFormatter(t,e),a=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0,l=null!==(s=null==r?void 0:r.size)&&void 0!==s?s:a;null===(o=this.animationManager)||void 0===o||o.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:l,disableInteractions:!0,duration:1e3,ease:Ms,repeat:0,onUpdate(e){t.size=e}})})}),e.forEach(t=>{t.each(t=>{var e;null===(e=this.animationManager)||void 0===e||e.animate(`${this.id}_empty-update-ready_${t.id}`,{from:0,to:1,delay:1e3,duration:200,ease:Ms,repeat:0,onUpdate:e=>{t.opacity=e}})})})}animateReadyUpdate({markerSelections:t}){t.forEach(t=>{this.resetMarkers(t)})}animateReadyHighlightMarkers(t){this.resetMarkers(t)}resetMarkers(t){t.each((t,e)=>{var i,n,s;const o=this.animateFormatter(t,e),r=null!==(n=null===(i=e.point)||void 0===i?void 0:i.size)&&void 0!==n?n:0;t.size=null!==(s=null==o?void 0:o.size)&&void 0!==s?s:r})}animateFormatter(t,e){var i,n,s;const{xKey:o="",yKey:r="",marker:{strokeWidth:a},id:l,ctx:{callbackCache:h}}=this,{formatter:c}=this.marker,d=null!==(i=e.fill)&&void 0!==i?i:t.fill,u=t.stroke,p=null!=a?a:1,g=null!==(s=null===(n=e.point)||void 0===n?void 0:n.size)&&void 0!==s?s:0;let f=void 0;return c&&(f=h.call(c,{datum:e.datum,xKey:o,yKey:r,fill:d,stroke:u,strokeWidth:p,size:g,highlighted:!1,seriesId:l})),f}isLabelEnabled(){return this.label.enabled}}sa.className="ScatterSeries",sa.type="scatter",qr([Dt(Bt)],sa.prototype,"title",void 0),qr([Dt(Bt)],sa.prototype,"labelKey",void 0),qr([Dt(Bt)],sa.prototype,"xName",void 0),qr([Dt(Bt)],sa.prototype,"yName",void 0),qr([Dt(Bt)],sa.prototype,"sizeName",void 0),qr([Dt(Bt)],sa.prototype,"labelName",void 0),qr([Dt(Bt)],sa.prototype,"xKey",void 0),qr([Dt(Bt)],sa.prototype,"yKey",void 0),qr([Dt(Bt)],sa.prototype,"sizeKey",void 0),qr([Dt(Bt)],sa.prototype,"colorKey",void 0),qr([Dt(Bt)],sa.prototype,"colorName",void 0),qr([Dt(Jt)],sa.prototype,"colorDomain",void 0),qr([Dt(Ht)],sa.prototype,"colorRange",void 0);class oa extends qe{constructor(t){super({moduleCtx:t,pickModes:[Pe.EXACT_SHAPE_MATCH]})}getLabelData(){return[]}}var ra=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class aa extends A{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}ra([Dt(_t),T({redraw:R.MAJOR})],aa.prototype,"enabled",void 0),ra([Dt(Xt),T({redraw:R.MAJOR})],aa.prototype,"color",void 0),ra([Dt($t()),T({redraw:R.MAJOR})],aa.prototype,"xOffset",void 0),ra([Dt($t()),T({redraw:R.MAJOR})],aa.prototype,"yOffset",void 0),ra([Dt($t(0)),T({redraw:R.MAJOR})],aa.prototype,"blur",void 0);var la,ha=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r},ca=function(t,e,i,n){return new(i||(i=Promise))((function(s,o){function r(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((n=n.apply(t,e||[])).next())}))};class da extends Ue{constructor(){super(...arguments),this.renderer=void 0}}ha([Dt(At)],da.prototype,"renderer",void 0);class ua extends Ke{constructor(t,e,i,n,s,o){super(n,s,o),this.labelKey=t,this.sizeKey=e,this.colorKey=i}}class pa extends ua{constructor(){super(...arguments),this.type="nodeClick"}}class ga extends ua{constructor(){super(...arguments),this.type="nodeDoubleClick"}}class fa extends wn{constructor(){super(...arguments),this.padding=10}}ha([Dt($t(0))],fa.prototype,"padding",void 0);class ma extends wn{constructor(){super(...arguments),this.wrapping="on-space"}}ha([Dt(ve)],ma.prototype,"wrapping",void 0);class ya{constructor(){this.style=(()=>{const t=new wn;return t.color="white",t})()}}ha([Dt(Bt)],ya.prototype,"key",void 0),ha([Dt(Bt)],ya.prototype,"name",void 0),ha([Dt(At)],ya.prototype,"formatter",void 0),function(t){t[t.Name=0]="Name",t[t.Value=1]="Value"}(la||(la={}));const va=new at;function ba(t,e){const{fontStyle:i,fontWeight:n,fontSize:s,fontFamily:o}=e;va.fontStyle=i,va.fontWeight=n,va.fontSize=s,va.fontFamily=o,va.text=t,va.x=0,va.y=0,va.textAlign="left",va.textBaseline="top";const{width:r,height:a}=va.computeBBox();return{width:r,height:a}}function xa(t){if("string"==typeof t&&!kt.validColorString(t)){const e="black";return G.warnOnce(`invalid Treemap tile colour string "${t}". Affected treemap tiles will be coloured ${e}.`),"black"}return t}class ka{constructor(){this.color="black"}}ha([Dt(Yt)],ka.prototype,"color",void 0);class Sa extends $e{constructor(){super(...arguments),this.text=new ka}}class wa extends oa{constructor(){super(...arguments),this.groupSelection=Si.select(this.contentGroup,Y),this.highlightSelection=Si.select(this.highlightGroup,Y),this.title=(()=>{const t=new fa;return t.color="white",t.fontWeight="bold",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.padding=15,t})(),this.subtitle=(()=>{const t=new fa;return t.color="white",t.fontSize=9,t.fontFamily="Verdana, sans-serif",t.padding=13,t})(),this.labels={large:(()=>{const t=new ma;return t.color="white",t.fontWeight="bold",t.fontSize=18,t})(),medium:(()=>{const t=new ma;return t.color="white",t.fontWeight="bold",t.fontSize=14,t})(),small:(()=>{const t=new ma;return t.color="white",t.fontWeight="bold",t.fontSize=10,t})(),formatter:void 0,value:new ya},this.nodePadding=2,this.nodeGap=0,this.labelKey="label",this.sizeKey="size",this.colorKey="color",this.colorDomain=[-5,5],this.colorRange=["#cb4b3f","#6acb64"],this.groupFill="#272931",this.groupStroke="black",this.groupStrokeWidth=1,this.tileStroke="black",this.tileStrokeWidth=1,this.gradient=!0,this.formatter=void 0,this.colorName="Change",this.rootName="Root",this.highlightGroups=!0,this.tileShadow=new aa,this.labelShadow=new aa,this.tooltip=new da,this.highlightStyle=new Sa}getNodePaddingTop(t,e){var i;const{title:n,subtitle:s,nodePadding:o}=this,r=t.label;if(t.isLeaf||!r||0===t.depth)return o;const a=t.depth>1?s:n,l=ba(r,a);return a.fontSize>e.width/3||a.fontSize>e.height/3||l.height>=e.height?o:l.height+o+(null!==(i=a.padding)&&void 0!==i?i:0)}getNodePadding(t,e){const{nodePadding:i}=this;return{top:this.getNodePaddingTop(t,e),right:i,bottom:i,left:i}}squarify(t,e,i=new Map){if(e.width<=0||e.height<=0)return i;i.set(t,e);const n=this.getNodePadding(t,e),s=e.width-n.left-n.right,o=e.height-n.top-n.bottom;if(s<=0||o<=0||t.value<=0)return i;let r=0,a=0,l=1/0,h=t.value;const c=t.children,d=new C(e.x+n.left,e.y+n.top,s,o),u=d.clone();for(let t=0;t<c.length;t++){const e=c[t].value,n=c[a].value,s=u.width<u.height;r+=e;const o=s?u.height:u.width,p=s?u.width:u.height,g=p*n/r;let f=o*r/h;const m=Math.max(g,f)/Math.min(g,f),y=Math.abs(1-m);if(y<l){l=y;continue}r-=e,f=o*r/h;let v=s?u.x:u.y;for(let e=a;e<t;e++){const t=c[e],n=s?v:u.x,o=s?u.y:v,a=p*t.value/r,l=new C(n,o,s?a:f,s?f:a);this.applyGap(d,l),this.squarify(t,l,i),h-=t.value,v+=a}s?(u.y+=f,u.height-=f):(u.x+=f,u.width-=f),a=t,r=0,l=1/0,t--}const p=u.width<u.height;let g=p?u.x:u.y;for(let t=a;t<c.length;t++){const e=p?g:u.x,n=p?u.y:g,s=c[t].value/h,o=u.width*(p?s:1),r=u.height*(p?1:s),a=new C(e,n,o,r);this.applyGap(d,a),this.squarify(c[t],a,i),g+=p?o:r}return i}applyGap(t,e){const i=this.nodeGap/2,n=t=>({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height}),s=n(t),o=n(e);Object.keys(s).forEach(t=>{Ci(s[t],o[t])||e.shrink(i,t)})}processData(){return ca(this,void 0,void 0,(function*(){if(!this.data)return;const{data:t,sizeKey:e,labelKey:i,colorKey:n,colorDomain:s,colorRange:o,groupFill:r}=this,a=this.labels.formatter,l=new Zr;l.domain=s,l.range=o,l.update();const h=(t,s=0,o)=>{var c,d,u;let p;a&&(p=this.ctx.callbackCache.call(a,{datum:t})),void 0!==p||(p=i&&null!==(c=t[i])&&void 0!==c?c:"");let g=n&&null!==(d=t[n])&&void 0!==d?d:s;g=xa(g);const f=!t.children;let m=r;"string"==typeof g?m=g:!f&&r||(m=l.convert(g));const y={datum:t,depth:s,parent:o,value:0,label:p,fill:m,series:this,isLeaf:f,children:[]};return f?y.value=e&&null!==(u=t[e])&&void 0!==u?u:1:(t.children.forEach(t=>{const e=h(t,s+1,y),i=e.value;!isNaN(i)&&isFinite(i)&&0!==i&&(y.value+=i,y.children.push(e))}),y.children.sort((t,e)=>e.value-t.value)),y};this.dataRoot=h(t)}))}createNodeData(){return ca(this,void 0,void 0,(function*(){return[]}))}update(){return ca(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes()}))}updateSelections(){return ca(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t,dataRoot:e}=this;if(!t||!e)return;if(!t.getSeriesRect())return;const i=[],n=t=>{var e;i.push(t),null===(e=t.children)||void 0===e||e.forEach(n)};n(this.dataRoot);const{groupSelection:s,highlightSelection:o}=this,r=t=>t.update(i,t=>{const e=new Mr,i=new at;i.tag=la.Name;const n=new at;n.tag=la.Value,t.append([e,i,n])});this.groupSelection=r(s),this.highlightSelection=r(o)}))}isDatumHighlighted(t){var e;return t===(null===(e=this.highlightManager)||void 0===e?void 0:e.getActiveHighlight())&&(t.isLeaf||this.highlightGroups)}getTileFormat(t,e){var i;const{formatter:n,ctx:{callbackCache:s}}=this;if(!n)return{};const{gradient:o,colorKey:r,labelKey:a,sizeKey:l,tileStroke:h,tileStrokeWidth:c,groupStroke:d,groupStrokeWidth:u}=this,p=t.isLeaf?h:d,g=t.isLeaf?c:u,f=s.call(n,{seriesId:this.id,datum:t.datum,depth:t.depth,parent:null===(i=t.parent)||void 0===i?void 0:i.datum,colorKey:r,sizeKey:l,labelKey:a,fill:t.fill,stroke:p,strokeWidth:g,gradient:o,highlighted:e});return null!=f?f:{}}updateNodes(){return ca(this,void 0,void 0,(function*(){if(!this.chart)return;const{gradient:t,highlightStyle:{item:{fill:e,fillOpacity:i,stroke:n,strokeWidth:s},text:{color:o}},tileStroke:r,tileStrokeWidth:a,groupStroke:l,groupStrokeWidth:h,tileShadow:c,labelShadow:d}=this,u=this.chart.getSeriesRect(),p=this.squarify(this.dataRoot,new C(0,0,u.width,u.height)),g=this.buildLabelMeta(p),f=this.getHighlightedSubtree();this.updateNodeMidPoint(p);const m=(o,d,u)=>{var g,f,m,y,v,b;const x=p.get(d);if(!x)return void(o.visible=!1);const k=u&&void 0!==e?e:d.fill,S=null!==(g=u?i:1)&&void 0!==g?g:1;let w=l;u&&void 0!==n?w=n:d.isLeaf&&(w=r);let D=h;u&&void 0!==s?D=s:d.isLeaf&&(D=a);const O=this.getTileFormat(d,u),M=xa(null!==(f=null==O?void 0:O.fill)&&void 0!==f?f:k);if(null!==(m=null==O?void 0:O.gradient)&&void 0!==m?m:t){const t=kt.tryParseFromString(k).brighter().toString(),e=kt.tryParseFromString(k).darker().toString();o.fill=`linear-gradient(180deg, ${t}, ${e})`}else o.fill=M;o.fillOpacity=null!==(y=null==O?void 0:O.fillOpacity)&&void 0!==y?y:S,o.stroke=xa(null!==(v=null==O?void 0:O.stroke)&&void 0!==v?v:w),o.strokeWidth=null!==(b=null==O?void 0:O.strokeWidth)&&void 0!==b?b:D,o.fillShadow=c,o.crisp=!0,o.x=x.x,o.y=x.y,o.width=x.width,o.height=x.height,o.visible=!0};this.groupSelection.selectByClass(Mr).forEach(t=>m(t,t.datum,!1)),this.highlightSelection.selectByClass(Mr).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&m(t,t.datum,e)});const y=(t,e,i,n)=>{const s=g.get(e),r=null==s?void 0:s[n];r?(t.text=r.text,t.fontFamily=r.style.fontFamily,t.fontSize=r.style.fontSize,t.fontWeight=r.style.fontWeight,t.fill=i&&null!=o?o:r.style.color,t.fillShadow=i?void 0:d,t.textAlign=r.hAlign,t.textBaseline=r.vAlign,t.x=r.x,t.y=r.y,t.visible=!0):t.visible=!1};this.groupSelection.selectByTag(la.Name).forEach(t=>y(t,t.datum,!1,"label")),this.highlightSelection.selectByTag(la.Name).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&y(t,t.datum,e,"label")}),this.groupSelection.selectByTag(la.Value).forEach(t=>y(t,t.datum,!1,"value")),this.highlightSelection.selectByTag(la.Value).forEach(t=>{const e=this.isDatumHighlighted(t.datum);t.visible=e||f.has(t.datum),t.visible&&y(t,t.datum,e,"value")})}))}updateNodeMidPoint(t){t.forEach((t,e)=>{e.nodeMidPoint={x:t.x+t.width/2,y:t.y}})}getHighlightedSubtree(){const t=new Set,e=i=>{var n;(this.isDatumHighlighted(i)||i.parent&&t.has(i.parent))&&t.add(i),null===(n=i.children)||void 0===n||n.forEach(e)};return e(this.dataRoot),t}buildLabelMeta(t){const{labels:e,title:i,subtitle:n,nodePadding:s,labelKey:o,ctx:{callbackCache:r}}=this,a=/-$/m,l=new Map;return t.forEach((t,h)=>{var c,d,u;if(!o||0===h.depth)return;const p=t.width-2*s,g=t.height-2*s,f=e=>e.fontSize>t.width/3||e.fontSize>t.height/3;let m=h.isLeaf?h.label:h.label.toUpperCase(),y="";const v=e.value,b=v.style,x=Math.ceil(2*b.fontSize*(at.defaultLineHeightRatio-1));h.isLeaf&&(v.formatter?y=null!==(c=r.call(v.formatter,{datum:h.datum}))&&void 0!==c?c:"":v.key&&(y=h.datum[v.key]));let k,S=ba(y,b);y&&S.width>p&&(y="");let w="";if(h.isLeaf){k=e.small;const t=()=>{const t=g-(y?b.fontSize+x:0),i=[e.large,e.medium,e.small];for(const n of i){const{width:i,height:s}=ba(m,n);if(s>t||f(n))continue;if(i<=p)return{style:n,wrappedText:void 0};const o=at.wrap(m,p,t,n,n.wrapping);if(o&&"\u2026"!==o&&(n===e.small||!a.exec(o)&&!o.endsWith("\u2026")))return{style:n,wrappedText:o}}return ba(m,e.small).height<=t&&!f(e.small)?{style:e.small,wrappedText:void 0}:{style:void 0,wrappedText:void 0}};let i=t();!i.style&&y&&(y="",i=t()),k=null!==(d=i.style)&&void 0!==d?d:e.small,w=null!==(u=i.wrappedText)&&void 0!==u?u:""}else k=1===h.depth?i:n;const D=ba(w||m,k);if(f(k))return;if(D.width>p){const t=Math.floor(m.length*p/D.width)-1;m=m.substring(0,t).trim()+"\u2026"}S=ba(y,b);const O=y&&S.width<p&&S.height+D.height+x<g;l.set(h,{label:Object.assign({text:w||m,style:k},h.isLeaf?{hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2-(O?S.height/2+x/2:0)}:{hAlign:"left",vAlign:"top",x:t.x+s,y:t.y+s}),value:O?{text:y,style:b,hAlign:"center",vAlign:"middle",x:t.x+t.width/2,y:t.y+t.height/2+D.height/2+x/2}:void 0})}),l}getDomain(t){return[0,1]}getNodeClickEvent(t,e){return new pa(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getNodeDoubleClickEvent(t,e){return new ga(this.labelKey,this.sizeKey,this.colorKey,t,e,this)}getTooltipHtml(t){var e,i,n,s;if(!this.highlightGroups&&!t.isLeaf)return"";const{tooltip:o,sizeKey:r,labelKey:a,colorKey:l,rootName:h,id:c,labels:d,ctx:{callbackCache:u}}=this,{datum:p}=t,{renderer:g}=o,f=t.depth?p[a]:null!==(e=p[a])&&void 0!==e?e:h;let m="";const y=this.getTileFormat(t,!1),v=null!==(n=null!==(i=null==y?void 0:y.fill)&&void 0!==i?i:t.fill)&&void 0!==n?n:"gray",b=d.value.key,x=d.value.formatter;if(b||x){let t="";if(x)t=u.call(x,{datum:p});else{const e=p[b];"number"==typeof e&&isFinite(e)&&(t=Ni(e))}t&&(d.value.name&&(m+=`<b>${d.value.name}:</b> `),m+=t)}const k={title:f,backgroundColor:v,content:m};return g?Ne(g({datum:t.datum,parent:null===(s=t.parent)||void 0===s?void 0:s.datum,depth:t.depth,sizeKey:r,labelKey:a,colorKey:l,title:f,color:v,seriesId:c}),k):f||m?Ne(k):""}getLegendData(){return[]}}wa.className="TreemapSeries",wa.type="treemap",ha([Dt($t(0))],wa.prototype,"nodePadding",void 0),ha([Dt($t(0))],wa.prototype,"nodeGap",void 0),ha([Dt(Ft)],wa.prototype,"labelKey",void 0),ha([Dt(Bt)],wa.prototype,"sizeKey",void 0),ha([Dt(Bt)],wa.prototype,"colorKey",void 0),ha([Dt(qt)],wa.prototype,"colorDomain",void 0),ha([Dt(Ht)],wa.prototype,"colorRange",void 0),ha([Dt(Bt)],wa.prototype,"groupFill",void 0),ha([Dt(Yt)],wa.prototype,"groupStroke",void 0),ha([Dt(Ut(0))],wa.prototype,"groupStrokeWidth",void 0),ha([Dt(Yt)],wa.prototype,"tileStroke",void 0),ha([Dt(Ut(0))],wa.prototype,"tileStrokeWidth",void 0),ha([Dt(_t)],wa.prototype,"gradient",void 0),ha([Dt(At)],wa.prototype,"formatter",void 0),ha([Dt(Ft)],wa.prototype,"colorName",void 0),ha([Dt(Ft)],wa.prototype,"rootName",void 0),ha([Dt(Pt)],wa.prototype,"highlightGroups",void 0);const Da={area:"cartesian",bar:"cartesian",column:"cartesian",histogram:"cartesian",line:"cartesian",scatter:"cartesian",treemap:"hierarchy",pie:"polar"},Oa={},Ma={has:t=>Object.prototype.hasOwnProperty.call(Da,t),isCartesian:t=>"cartesian"===Da[t],isPolar:t=>"polar"===Da[t],isHierarchy:t=>"hierarchy"===Da[t],get seriesTypes(){return Object.keys(Da)},get cartesianTypes(){return this.seriesTypes.filter(t=>this.isCartesian(t))},get polarTypes(){return this.seriesTypes.filter(t=>this.isPolar(t))},get hierarchyTypes(){return this.seriesTypes.filter(t=>this.isHierarchy(t))}};function Ca(t){var e;return null!==(e=Oa[t])&&void 0!==e?e:{}}const Na={};function La(t){return Na[t]}function Ea(t,e){if(Ia(t)&&Ia(e)){const i={};return Object.keys(t).forEach(n=>{i[n]=n in e?Ea(t[n],e[n]):t[n]}),Object.keys(e).forEach(n=>{n in t||(i[n]=e[n])}),i}return Array.isArray(t)&&!Array.isArray(e)||Ra(t)&&!Ra(e)?t:e}function Ra(t){return t&&"object"==typeof t}function Ia(t){return Ra(t)&&t.constructor===Object}ur.type,Yn.type;const Ta={number:"number",time:"time",log:"log",category:"category",groupedCategory:"groupedCategory"},Aa={},_a={has:t=>Object.prototype.hasOwnProperty.call(Ta,t),get axesTypes(){return Object.keys(Ta)}};const Pa={fills:["#f3622d","#fba71b","#57b757","#41a9c9","#4258c9","#9a42c8","#c84164","#888888"],strokes:["#aa4520","#b07513","#3d803d","#2d768d","#2e3e8d","#6c2e8c","#8c2d46","#5f5f5f"]},Fa=Symbol("extends-series-defaults"),Ba=Symbol("override-series-label-defaults"),za=Symbol("default-font");class ja{constructor(t){t=Ea({},null!=t?t:{});const{overrides:e=null,palette:i=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t,cartesian:i,polar:s,hierarchy:o}=e,r=(t,e,i)=>{i&&(n[t]=Ea(n[t],i),e.forEach(t=>{const e=t;n[e]=Ea(n[e],i)}))};r("common",Object.keys(n),t),r("cartesian",Ma.cartesianTypes,i),r("polar",Ma.polarTypes,s),r("hierarchy",Ma.hierarchyTypes,o),Ma.seriesTypes.forEach(t=>{const i=t,s=e[i];s&&(s.series&&(s.series={[i]:s.series}),n[i]=Ea(n[i],s))})}this.palette=null!=i?i:this.getPalette(),this.config=Object.freeze(n)}getPalette(){return Pa}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},thickness:0,title:{enabled:!1,text:"Axis Title",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)"},label:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,rotation:void 0,color:"rgb(87, 87, 87)",formatter:void 0,autoRotate:!1,avoidCollisions:!0},line:{width:1,color:"rgb(195, 195, 195)"},tick:{width:1,size:6,color:"rgb(195, 195, 195)"},gridStyle:[{stroke:"rgb(219, 219, 219)",lineDash:[4,2]}],crossLines:{enabled:!1,fill:"rgb(187,221,232)",stroke:"rgb(70,162,192)",strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,padding:5,color:"rgb(87, 87, 87)",rotation:void 0}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"yellow",fillOpacity:1},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getBarSeriesDefaults(){return Object.assign(Object.assign({},this.getSeriesDefaults()),{fillOpacity:1,strokeOpacity:1,normalizedTo:void 0,strokeWidth:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5}})}static getLineSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{format:void 0,position:{type:"node"}})})}static getAreaSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{nodeClickRange:"nearest",tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getScatterSeriesDefaults(){const t=this.getSeriesDefaults();return Object.assign(Object.assign({},t),{tooltip:Object.assign(Object.assign({},t.tooltip),{position:{type:"node"}})})}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:6,maxSize:30,strokeWidth:1,formatter:void 0}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:"white"},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:"bold",fontSize:16,fontFamily:this.fontFamily,color:"rgb(70, 70, 70)",wrapping:ja.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",wrapping:ja.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,color:"rgb(140, 140, 140)",spacing:30,wrapping:ja.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:20,listeners:{},item:{paddingX:16,paddingY:8,marker:{shape:void 0,size:15,strokeWidth:1,padding:8},label:{color:"black",fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:this.fontFamily,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:"rgb(70, 70, 70)"},inactiveStyle:{fill:"rgb(219, 219, 219)"},highlightStyle:{fill:"rgb(70, 70, 70)"},label:{color:"rgb(70, 70, 70)"}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}createChartConfigPerChartType(t){const e={cartesian:Ma.cartesianTypes,polar:Ma.polarTypes,hierarchy:Ma.hierarchyTypes,groupedCategory:[]};return Object.entries(e).forEach(([e,i])=>{const n=e,s=this.templateTheme(Ca(n));i.forEach(e=>{const i=e;t[i]||(t[i]=Ea({},t[n]),Ea(t[i],s))})}),t}getDefaults(){const t=Ea({},ja.defaults),e=(t,e)=>{const i=this.templateTheme(Ca(t));return i.series=e.reduce((t,e)=>{const i=La(e);return i&&(t[e]=this.templateTheme(i)),t},{}),"cartesian"===t&&(i.axes=_a.axesTypes.reduce((t,e)=>{const i=function(t){var e;return null!==(e=Aa[t])&&void 0!==e?e:{}}(e);return i&&(t[e]=this.templateTheme(i)),t},{})),i};return Ea(t,{cartesian:e("cartesian",Ma.cartesianTypes),groupedCategory:e("cartesian",Ma.cartesianTypes),polar:e("polar",Ma.polarTypes),hierarchy:e("hierarchy",Ma.hierarchyTypes)})}templateTheme(t){const e=Un([t]),{extensions:i,properties:n}=this.getTemplateParameters();return Zn(e,(t,e)=>{if(e.__extends__){const t=e.__extends__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n,e),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,n=i.get(t);if(null==n)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,n),delete e.__overrides__}for(const[t,i]of Object.entries(e))n.has(i)&&(e[t]=n.get(i))},{}),e}getTemplateParameters(){const t=new Map;t.set(Fa,ja.getSeriesDefaults()),t.set(Ba,{});const e=new Map;return e.set(za,ja.fontFamily),{extensions:t,properties:e}}mergeWithParentDefaults(t,e){return Ea(t,e)}}ja.fontFamily="Verdana, sans-serif",ja.cartesianDefaults=Object.assign(Object.assign({},ja.getChartDefaults()),{axes:{number:Object.assign({},ja.getAxisDefaults()),log:Object.assign(Object.assign({},ja.getAxisDefaults()),{base:10}),category:Object.assign(Object.assign({},ja.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},ja.getAxisDefaults().label),{autoRotate:!0})}),groupedCategory:Object.assign({},ja.getAxisDefaults()),time:Object.assign({},ja.getAxisDefaults())},series:{column:Object.assign({},ja.getBarSeriesDefaults()),bar:Object.assign({},ja.getBarSeriesDefaults()),line:Object.assign(Object.assign({},ja.getLineSeriesDefaults()),{title:void 0,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:Object.assign(Object.assign({},ja.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),scatter:Object.assign(Object.assign({},ja.getScatterSeriesDefaults()),{sizeName:"Size",labelName:"Label",marker:Object.assign({},ja.getCartesianSeriesMarkerDefaults()),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)"}}),area:Object.assign(Object.assign({},ja.getAreaSeriesDefaults()),{normalizedTo:void 0,fillOpacity:.8,strokeOpacity:1,strokeWidth:2,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},marker:Object.assign(Object.assign({},ja.getCartesianSeriesMarkerDefaults()),{fillOpacity:1,strokeOpacity:1,enabled:!1}),label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0}}),histogram:Object.assign(Object.assign({},ja.getSeriesDefaults()),{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,areaPlot:!1,bins:void 0,aggregation:"sum",label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)",formatter:void 0},shadow:{enabled:!0,color:"rgba(0, 0, 0, 0.5)",xOffset:0,yOffset:0,blur:5}})}}),ja.polarDefaults=Object.assign(Object.assign({},ja.getChartDefaults()),{series:{pie:Object.assign(Object.assign({},ja.getSeriesDefaults()),{title:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)",spacing:0},radiusKey:void 0,radiusName:void 0,calloutLabelKey:void 0,calloutLabelName:void 0,sectorLabelKey:void 0,sectorLabelName:void 0,calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)",offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)",positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:ja.fontFamily,color:"rgb(70, 70, 70)",margin:2}})}}),ja.hierarchyDefaults=Object.assign(Object.assign({},ja.getChartDefaults()),{series:{treemap:Object.assign(Object.assign({},ja.getSeriesDefaults()),{showInLegend:!1,labelKey:"label",sizeKey:"size",colorKey:"color",colorDomain:[-5,5],colorRange:["#cb4b3f","#6acb64"],groupFill:"#272931",groupStroke:"black",groupStrokeWidth:1,tileStroke:"black",tileStrokeWidth:1,gradient:!0,tileShadow:{enabled:!1,color:"rgba(0, 0, 0, 0.5)",xOffset:3,yOffset:3,blur:5},labelShadow:{enabled:!0,color:"rgba(0, 0, 0, 0.4)",xOffset:1.5,yOffset:1.5,blur:5},highlightGroups:!0,nodePadding:2,nodeGap:0,title:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:"bold",fontSize:12,fontFamily:"Verdana, sans-serif",padding:2},subtitle:{enabled:!0,color:"white",fontStyle:void 0,fontWeight:void 0,fontSize:9,fontFamily:"Verdana, sans-serif",padding:2},labels:{large:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:18,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},medium:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:14,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},small:{enabled:!0,fontStyle:void 0,fontWeight:"bold",fontSize:10,fontFamily:"Verdana, sans-serif",color:"white",wrapping:"on-space"},value:{style:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:"Verdana, sans-serif",color:"white"}}}})}}),ja.defaults={cartesian:ja.cartesianDefaults,groupedCategory:ja.cartesianDefaults,polar:ja.polarDefaults,hierarchy:ja.hierarchyDefaults};class Wa extends ja{constructor(t){super(t)}getDefaults(){const t=Wa.fontColor,e=Wa.mutedFontColor,i={title:{color:t},label:{color:t},gridStyle:[{stroke:"rgb(88, 88, 88)",lineDash:[4,2]}]},n={label:{color:t}},s={axes:{number:Object.assign({},i),category:Object.assign({},i),time:Object.assign({},i)}},o={background:{fill:"rgb(34, 38, 41)"},title:{color:t},subtitle:{color:e},legend:{item:{label:{color:t}},pagination:{activeStyle:{fill:t},inactiveStyle:{fill:e},highlightStyle:{fill:t},label:{color:t}}}},r=t=>t.reduce((t,e)=>{const i=La(e);return i&&(t[e]=this.templateTheme(i)),t},{});return this.mergeWithParentDefaults(super.getDefaults(),{cartesian:Object.assign(Object.assign(Object.assign({},o),s),{series:Object.assign({line:Object.assign({},n),bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},r(Ma.cartesianTypes))}),groupedCategory:Object.assign(Object.assign(Object.assign({},o),s),{series:Object.assign({bar:Object.assign({},n),column:Object.assign({},n),histogram:Object.assign({},n)},r(Ma.cartesianTypes))}),polar:Object.assign(Object.assign({},o),{series:Object.assign({pie:{calloutLabel:{color:t},sectorLabel:{color:t},title:{color:t},innerLabels:{color:t}}},r(Ma.polarTypes))}),hierarchy:Object.assign(Object.assign({},o),{series:Object.assign({treemap:{tileStroke:"white",groupStroke:"white",title:{color:t},subtitle:{color:e},labels:{large:{color:t},medium:{color:t},small:{color:t},value:{style:{color:t}}}}},r(Ma.hierarchyTypes))})})}getTemplateParameters(){const t=super.getTemplateParameters();return t.extensions.set(Ba,Wa.seriesLabelDefaults.label),t}}Wa.fontColor="rgb(200, 200, 200)",Wa.mutedFontColor="rgb(150, 150, 150)",Wa.seriesLabelDefaults={label:{color:Wa.fontColor}};const Ka={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class Ga extends ja{getPalette(){return Ka}}const Xa={fills:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722"],strokes:["#ab2f26","#a31545","#6d1b7b","#482980","#2c397f","#1769aa","#0276ab","#008494","#00695f","#357a38","#618834","#909a28","#b3a429","#b38705","#b36a00","#b33d18"]};class Ya extends Wa{getPalette(){return Xa}}const Ha={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class Va extends ja{getPalette(){return Ha}}const $a={fills:["#c16068","#a2bf8a","#ebcc87","#80a0c3","#b58dae","#85c0d1"],strokes:["#874349","#718661","#a48f5f","#5a7088","#7f637a","#5d8692"]};class Ua extends Wa{getPalette(){return $a}}const Za={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class qa extends ja{getPalette(){return Za}}const Ja={fills:["#febe76","#ff7979","#badc58","#f9ca23","#f0932b","#eb4c4b","#6ab04c","#7ed6df","#e056fd","#686de0"],strokes:["#b28553","#b35555","#829a3e","#ae8d19","#a8671e","#a43535","#4a7b35","#58969c","#9d3cb1","#494c9d"]};class Qa extends Wa{getPalette(){return Ja}}const tl={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class el extends ja{getPalette(){return tl}}const il={fills:["#5BC0EB","#FDE74C","#9BC53D","#E55934","#FA7921","#fa3081"],strokes:["#4086a4","#b1a235","#6c8a2b","#a03e24","#af5517","#af225a"]};class nl extends Wa{getPalette(){return il}}const sl=()=>new ja,ol=()=>new Wa,rl={undefined:sl,null:sl,"ag-default":sl,"ag-material":()=>new Ga,"ag-pastel":()=>new Va,"ag-solar":()=>new qa,"ag-vivid":()=>new el},al={undefined:ol,null:ol,"ag-default-dark":ol,"ag-material-dark":()=>new Ya,"ag-pastel-dark":()=>new Ua,"ag-solar-dark":()=>new Qa,"ag-vivid-dark":()=>new nl},ll=Object.assign(Object.assign({},al),rl),hl={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},cl={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};const dl=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e/2,y:i}:{x:e,y:isNaN(n)?i:(i+n)/2},ul=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:s})=>t?{x:e,y:isNaN(s)?n:(n+s)/2}:{x:i/2,y:n},pl=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:(i+n)/2}:{x:e/2,y:isNaN(n)?i:n},gl=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:s})=>t?{x:i/2,y:isNaN(s)?n:s}:{x:e,y:isNaN(s)?n:(n+s)/2},fl=({yDirection:t,xStart:e,xEnd:i,yStart:n})=>t?{x:e/2,y:n}:{x:i,y:n},ml=({yDirection:t,xStart:e,yStart:i,yEnd:n})=>t?{x:e,y:isNaN(n)?i:n}:{x:e,y:i},yl=({yDirection:t,xEnd:e,yStart:i,yEnd:n})=>t?{x:e,y:i}:{x:e,y:isNaN(n)?i:n},vl=({yDirection:t,xStart:e,xEnd:i,yStart:n,yEnd:s})=>t?{x:i,y:isNaN(s)?n:s}:{x:e,y:isNaN(s)?n:s},bl={top:{c:dl},bottom:{c:gl},left:{c:ul},right:{c:pl},topLeft:{c:fl},topRight:{c:yl},bottomLeft:{c:ml},bottomRight:{c:vl},inside:{c:({xEnd:t,yStart:e,yEnd:i})=>({x:t/2,y:isNaN(i)?e:(e+i)/2})},insideLeft:{c:ul},insideRight:{c:pl},insideTop:{c:dl},insideBottom:{c:gl},insideTopLeft:{c:fl},insideBottomLeft:{c:ml},insideTopRight:{c:yl},insideBottomRight:{c:vl}};var xl=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class kl extends st{constructor(){super(),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new C(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:s}=t;if(this.dirty===R.NONE&&!n)return void(s&&(s.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:o,y1:r,x2:a,y2:l}=this;o=this.align(o),r=this.align(r),a=this.align(a),l=this.align(l);const{fill:h,opacity:c,isRange:d}=this;if(!(!d||!h)){const{fillOpacity:t}=this;i.fillStyle=h,i.globalAlpha=c*t,i.beginPath(),i.moveTo(o,r),i.lineTo(a,r),i.lineTo(a,l),i.lineTo(o,l),i.closePath(),i.fill()}const{stroke:u,strokeWidth:p,startLine:g,endLine:f}=this;if(!(!g&&!f||!u||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:n,lineCap:s,lineJoin:h}=this;i.strokeStyle=u,i.globalAlpha=c*t,i.lineWidth=p,e&&i.setLineDash(e),n&&(i.lineDashOffset=n),s&&(i.lineCap=s),h&&(i.lineJoin=h),i.beginPath(),g&&(i.moveTo(o,r),i.lineTo(a,r)),f&&(i.moveTo(a,l),i.lineTo(o,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}kl.className="Range",kl.defaultStyles=Object.assign(Object.assign({},st.defaultStyles),{strokeWidth:1}),xl([T({redraw:R.MINOR})],kl.prototype,"x1",void 0),xl([T({redraw:R.MINOR})],kl.prototype,"y1",void 0),xl([T({redraw:R.MINOR})],kl.prototype,"x2",void 0),xl([T({redraw:R.MINOR})],kl.prototype,"y2",void 0),xl([T({redraw:R.MINOR})],kl.prototype,"startLine",void 0),xl([T({redraw:R.MINOR})],kl.prototype,"endLine",void 0),xl([T({redraw:R.MINOR})],kl.prototype,"isRange",void 0);var Sl=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};const wl=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],Dl=Ot((t,e)=>Mt(t,e,t=>wl.includes(t)),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),Ol=Ot((t,e)=>Mt(t,e,t=>"range"===t||"line"===t),"expecting a crossLine type keyword such as 'range' or 'line'");class Ml{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}Sl([Dt(Pt)],Ml.prototype,"enabled",void 0),Sl([Dt(Bt)],Ml.prototype,"text",void 0),Sl([Dt(se)],Ml.prototype,"fontStyle",void 0),Sl([Dt(re)],Ml.prototype,"fontWeight",void 0),Sl([Dt($t(0))],Ml.prototype,"fontSize",void 0),Sl([Dt(Ft)],Ml.prototype,"fontFamily",void 0),Sl([Dt($t(0))],Ml.prototype,"padding",void 0),Sl([Dt(Yt)],Ml.prototype,"color",void 0),Sl([Dt(Dl)],Ml.prototype,"position",void 0),Sl([Dt(Ut(-360,360))],Ml.prototype,"rotation",void 0),Sl([Dt(Pt)],Ml.prototype,"parallel",void 0);class Cl{constructor(){this.id=E(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Ml,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=xe.X,this.group=new Y({name:""+this.id,layer:!0,zIndex:Cl.LINE_LAYER_ZINDEX}),this.crossLineRange=new kl,this.crossLineLabel=new at,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=_.None}update(t){if(!this.enabled)return;if(this.group.visible=t,!t)return;this.createNodeData()?(this.updateNodes(),this.group.zIndex=this.getZIndex(this.isRange)):this.group.visible=!1}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:n,sideFlag:s,direction:o,label:{position:r="top"},clippedRange:a,strokeWidth:l=0}=this;if(!i)return!1;const h=null!==(t=i.bandwidth)&&void 0!==t?t:0,c=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[d,u]=[0,s*n];let[p,g]=this.getRange(),[f,m]=[Number(i.convert(p,{strict:!1})),i.convert(g,{strict:!1})+h];f=c(f),m=c(m),[p,g]=[Number(i.convert(p)),i.convert(g)+h];const y=!isNaN(f)&&!isNaN(m)&&(p===f||g===m||f!==m)&&Math.abs(m-f)>0;if(y){f!==Math.min(f,m)&&([f,m]=[Math.min(f,m),Math.max(f,m)],[p,g]=[g,p])}if(this.isRange=y,this.startLine=!isNaN(p)&&l>0&&p===f,this.endLine=!isNaN(g)&&l>0&&g===m,!y&&!this.startLine&&!this.endLine)return!1;if(this.data=[f,m],this.label.enabled){const t=o===xe.Y,{c:i=dl}=null!==(e=bl[r])&&void 0!==e?e:{},{x:n,y:s}=i({yDirection:t,xStart:d,xEnd:u,yStart:f,yEnd:m});this.labelPoint={x:n,y:s}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:s,startLine:o,endLine:r,isRange:a,fill:l,fillOpacity:h,stroke:c,strokeWidth:d,lineDash:u}=this;e.x1=0,e.x2=i*n,e.y1=s[0],e.y2=s[1],e.startLine=o,e.endLine=r,e.isRange=a,e.fill=l,e.fillOpacity=null!=h?h:1,e.stroke=c,e.strokeWidth=null!=d?d:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:s,position:o="top",padding:r=0},direction:a,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===e||void 0===i)return;const{defaultRotation:c,configuredRotation:d}=Dn({rotation:s,parallel:n,regularFlipRotation:h,parallelFlipRotation:l});t.rotation=c+d,t.textBaseline="middle",t.textAlign="center";const u=this.computeLabelBBox();if(!u)return;const p=a===xe.Y,{xTranslation:g,yTranslation:f}=function({yDirection:t,padding:e=0,position:i="top",bbox:n}){const s=t?hl:cl,{xTranslationDirection:o,yTranslationDirection:r}=s[i];return{xTranslation:o*(e+(t?n.width:n.height)/2),yTranslation:r*(e+(t?n.height:n.width)/2)}}({yDirection:p,padding:r,position:o,bbox:u});t.translationX=e+g,t.translationY=i+f}getZIndex(t=!1){return t?Cl.RANGE_LAYER_ZINDEX:Cl.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,n=i instanceof Bi;let[s,o]=null!=e?e:[t,void 0];return n||void 0!==o||(o=s),s=null!=bt(s,n)?s:void 0,o=null!=bt(o,n)?o:void 0,n&&s===o&&(o=void 0),void 0===s&&void 0!==o&&(s=o,o=void 0),[s,o]}computeLabelBBox(){return this.crossLineLabel.computeTransformedBBox()}calculatePadding(t){var e,i,n,s,o,r,a,l;const{isRange:h,startLine:c,endLine:d,direction:u,label:{padding:p=0,position:g="top"}}=this;if(!h&&!c&&!d)return;const f=this.computeLabelBBox(),m=null==f?void 0:f.x,y=null==f?void 0:f.y;if(!f||null==m||null==y)return;const v=function({yDirection:t,bbox:e,padding:i=0,position:n="top"}){const s={};return n.startsWith("inside")||("top"!==n||t?"bottom"!==n||t?"left"===n&&t?s.left=i+e.width:"right"===n&&t&&(s.right=i+e.width):s.bottom=i+e.height:s.top=i+e.height),s}({yDirection:u===xe.Y,padding:p,position:g,bbox:f});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=v.left)&&void 0!==i?i:0),t.right=Math.max(null!==(n=t.right)&&void 0!==n?n:0,null!==(s=v.right)&&void 0!==s?s:0),t.top=Math.max(null!==(o=t.top)&&void 0!==o?o:0,null!==(r=v.top)&&void 0!==r?r:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=v.bottom)&&void 0!==l?l:0)}}Cl.LINE_LAYER_ZINDEX=be.SERIES_CROSSLINE_LINE_ZINDEX,Cl.RANGE_LAYER_ZINDEX=be.SERIES_CROSSLINE_RANGE_ZINDEX,Cl.className="CrossLine",Sl([Dt(Pt)],Cl.prototype,"enabled",void 0),Sl([Dt(Ol)],Cl.prototype,"type",void 0),Sl([Dt(Nt(2))],Cl.prototype,"range",void 0),Sl([Dt(Yt)],Cl.prototype,"fill",void 0),Sl([Dt(Ut(0,1))],Cl.prototype,"fillOpacity",void 0),Sl([Dt(Yt)],Cl.prototype,"stroke",void 0),Sl([Dt(Ut())],Cl.prototype,"strokeWidth",void 0),Sl([Dt(Ut(0,1))],Cl.prototype,"strokeOpacity",void 0),Sl([Dt(le)],Cl.prototype,"lineDash",void 0);class Nl{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const Ll=[];function El(t){const e=Ll.find(e=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier);if(e){if("enterprise"===t.packageType&&"community"===e.packageType){const i=Ll.indexOf(e);Ll.splice(i,1,t)}}else Ll.push(t)}var Rl=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Il extends gi{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new C(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:n,height:s}=this;t.clear();const o=e-n/2,r=i-s/2,a=this.align(o),l=this.align(r),h=a+this.align(o,n),c=l+this.align(r,s);t.moveTo(a,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(a,c),t.lineTo(a,l);const d=this.gripLineGap/2,u=this.gripLineLength/2;t.moveTo(this.align(e-d),this.align(i-u)),t.lineTo(this.align(e-d),this.align(i+u)),t.moveTo(this.align(e+d),this.align(i-u)),t.lineTo(this.align(e+d),this.align(i+u))}}Il.className="RangeHandle",Rl([Dt(Xt)],Il.prototype,"_fill",void 0),Rl([Dt(Xt)],Il.prototype,"_stroke",void 0),Rl([Dt($t(0))],Il.prototype,"_strokeWidth",void 0),Rl([Dt(ce)],Il.prototype,"_lineCap",void 0),Rl([Dt($t(0))],Il.prototype,"_width",void 0),Rl([Dt($t(0))],Il.prototype,"_gripLineGap",void 0),Rl([Dt($t(0))],Il.prototype,"_gripLineLength",void 0),Rl([Dt($t(0))],Il.prototype,"_height",void 0);var Tl=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Al extends gi{constructor(){super(...arguments),this._stroke="#999999",this._strokeWidth=1,this._fill="#999999",this._fillOpacity=.2,this._lineCap="square",this._x=0,this._y=0,this._width=200,this._height=30,this.minRange=.05,this._min=0,this._max=1}set x(t){this._x!==t&&(this._x=t,this.dirtyPath=!0)}get x(){return this._x}set y(t){this._y!==t&&(this._y=t,this.dirtyPath=!0)}get y(){return this._y}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}set min(t){var e;t=Math.min(Math.max(t,0),this.max-this.minRange),isNaN(t)||this._min!==t&&(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=Math.max(Math.min(t,1),this.min+this.minRange),isNaN(t)||this._max!==t&&(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new C(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:s,max:o}=this,r=t+i*s;return new C(r,e,t+i*o-r,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:s,min:o,max:r}=this;t.clear();const a=this.align(e),l=this.align(i),h=a+this.align(e,n),c=l+this.align(i,s);t.moveTo(a,l),t.lineTo(h,l),t.lineTo(h,c),t.lineTo(a,c),t.lineTo(a,l);const d=this.align(e+n*o),u=this.align(e+n*r);t.moveTo(d,l),t.lineTo(d,c),t.lineTo(u,c),t.lineTo(u,l),t.lineTo(d,l)}}Al.className="RangeMask",Tl([Dt(Xt)],Al.prototype,"_stroke",void 0),Tl([Dt($t(0))],Al.prototype,"_strokeWidth",void 0),Tl([Dt(Xt)],Al.prototype,"_fill",void 0),Tl([Dt($t(0,1))],Al.prototype,"_fillOpacity",void 0),Tl([Dt(ce)],Al.prototype,"_lineCap",void 0),Tl([Dt($t(0))],Al.prototype,"_width",void 0),Tl([Dt($t(0))],Al.prototype,"_height",void 0),Tl([Dt($t())],Al.prototype,"_min",void 0),Tl([Dt($t())],Al.prototype,"_max",void 0);class _l extends Y{constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new Il,this.maxHandle=new Il,this.mask=(()=>{const{x:t,y:e,width:i,height:n,min:s,max:o}=_l.defaults,r=new Al;r.x=t,r.y=e,r.width=i,r.height=n,r.min=s,r.max=o;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+n/2,this.append([r,a,l]),r.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},r})(),this._x=_l.defaults.x,this._y=_l.defaults.y,this._width=_l.defaults.width,this._height=_l.defaults.height,this._min=_l.defaults.min,this._max=_l.defaults.max,this.isContainerNode=!0}set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:n,width:s,height:o,mask:r}=this;t.centerX=i+s*r.min,e.centerX=i+s*r.max,t.centerY=e.centerY=n+o/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===R.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:s,minHandle:o,maxHandle:r}=this;[s,o,r].forEach(n=>{n.visible&&(i||n.dirty>R.NONE)&&(e.save(),n.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())}),this.markClean({force:!0}),n&&n.nodesRendered++}}_l.className="Range",_l.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class Pl{constructor(t){this.rm=t}set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}}class Fl{constructor(t){this.rh=t}set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}}var Bl=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class zl extends Nl{constructor(t){super(),this.ctx=t,this.rs=new _l,this.mask=new Pl(this.rs.mask),this.minHandle=new Fl(this.rs.minHandle),this.maxHandle=new Fl(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this._enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}),[t.interactionManager.addListener("drag-start",t=>this.onDragStart(t)),t.interactionManager.addListener("drag",t=>this.onDrag(t)),t.interactionManager.addListener("hover",t=>this.onDrag(t)),t.interactionManager.addListener("drag-end",()=>this.onDragStop())].forEach(e=>this.destroyFns.push(()=>t.interactionManager.removeListener(e))),[t.layoutService.addListener("before-series",t=>this.layout(t)),t.layoutService.addListener("layout-complete",t=>this.layoutComplete(t))].forEach(e=>this.destroyFns.push(()=>t.layoutService.removeListener(e))),t.scene.root.appendChild(this.rs),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)}),this.destroyFns.push(()=>this.ctx.zoomManager.updateZoom("navigator")),this.updateGroupVisibility()}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max}}):this.ctx.zoomManager.updateZoom("navigator")}layout({shrinkRect:t}){if(this.enabled){const e=this.rs.height+this.margin;t.shrink(e,"bottom"),this.rs.y=t.y+t.height+this.margin}return{shrinkRect:t}}layoutComplete({series:{rect:t,visible:e}}){this.enabled&&e&&(this.rs.x=t.x,this.rs.width=t.width),this.visible=e}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:n}=this,{minHandle:s,maxHandle:o,x:r,width:a,min:l}=n,h=n.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(s.containsPoint(e,i)?this.minHandleDragging=!0:o.containsPoint(e,i)?this.maxHandleDragging=!0:h.containsPoint(e,i)&&(this.panHandleOffset=(e-r)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:n,y:s,width:o,height:r,minHandle:a,maxHandle:l}=e,{offsetX:h,offsetY:c}=t,d=n+o*e.min,u=n+o*e.max,p=new C(d,s,u-d,r),g=()=>Math.min(Math.max((h-n)/o,0),1);if(a.containsPoint(h,c)||l.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(h,c)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=g();else if(this.maxHandleDragging)e.max=g();else if(!isNaN(i)){const t=e.max-e.min,n=Math.min(g()-i,1-t);n<=e.min?(e.min=n,e.max=e.min+t):(e.max=n+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}Bl([Dt(_t)],zl.prototype,"_enabled",void 0),Bl([Dt($t(0))],zl.prototype,"margin",void 0);El({type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:zl,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}});var jl=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Wl extends Nl{constructor(t){var e;super(),this.onLayoutComplete=t=>{const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i},this.node=new Y({name:"background"}),this.node.zIndex=be.SERIES_BACKGROUND_ZINDEX,this.rectNode=new Mr,this.node.appendChild(this.rectNode),this.fill="white",this.visible=!0,null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)});const i=t.layoutService.addListener("layout-complete",this.onLayoutComplete);this.destroyFns.push(()=>t.layoutService.removeListener(i))}}jl([Dt(_t),Ii("node","visible")],Wl.prototype,"visible",void 0),jl([Dt(Yt),Ii("rectNode","fill")],Wl.prototype,"fill",void 0);El({type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Wl});var Kl=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Gl extends B{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(this.dirty===R.NONE&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const s=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(s,0,0,s.width,s.height,this.x,this.y,this.width,this.height),super.render(t)}}Kl([T({redraw:R.MAJOR})],Gl.prototype,"x",void 0),Kl([T({redraw:R.MAJOR})],Gl.prototype,"y",void 0),Kl([T({redraw:R.MAJOR})],Gl.prototype,"width",void 0),Kl([T({redraw:R.MAJOR})],Gl.prototype,"height",void 0),Kl([T({redraw:R.MAJOR})],Gl.prototype,"opacity",void 0),Object.entries(ll).reduce((t,[e,i])=>(t[e]=i(),t),{});var Xl=Object.freeze({__proto__:null,TimeScale:tn,BandScale:Di,ContinuousScale:Bi,ColorScale:Zr,LinearScale:Wn}),Yl=Object.freeze({__proto__:null,ticks:zi,extent:kn,toFixed:Ni,isNumberEqual:Ci,tickFormat:mn,interpolateString:rr,Color:kt,isString:ft,isStringObject:mt,isDate:t=>t instanceof Date&&!isNaN(+t),isDiscrete:yt,isContinuous:vt,checkDatum:bt,isNumber:xt,resetIds:function(){for(const t in L)delete L[t]},createId:E,Padding:Qe,jsonDiff:Hn,DELETE:Vn,jsonMerge:Un,jsonApply:function t(e,i,n={}){var s,o;const{path:r,matcherPath:a=(r?r.replace(/(\[[0-9+]+\])/i,"[]"):void 0),skip:l=[],constructors:h={},allowedTypes:c={},idx:d}=n;if(null==e)throw new Error("AG Charts - target is uninitialised: "+(null!=r?r:"<root>"));if(null==i)return e;const u=e;null!=d&&"_declarationOrder"in u&&(u._declarationOrder=d);const p=Jn(e);for(const d in i){const g=`${a?a+".":""}${d}`;if(l.indexOf(g)>=0)continue;const f=i[d],m=`${r?r+".":""}${d}`,y=u.constructor,v=u[d];let b=null!==(s=h[g])&&void 0!==s?s:h[d];try{const i=Jn(v),s=Jn(f);if("class-instance"===p&&!(d in e)&&!Object.prototype.hasOwnProperty.call(u,d)){G.warn(`unable to set [${m}] in ${null==y?void 0:y.name} - property is unknown`);continue}const r=null!==(o=c[g])&&void 0!==o?o:[i];if("class-instance"===i&&"object"===s);else if(null!=i&&null!=s&&!r.includes(s)){G.warn(`unable to set [${m}] in ${null==y?void 0:y.name} - can't apply type of [${s}], allowed types are: [${r}]`);continue}if("array"===s)if(b=null!=b?b:h[g+"[]"],null!=b){const e=f;u[d]=e.map((e,i)=>t(new b,e,Object.assign(Object.assign({},n),{path:m,matcherPath:g+"[]",idx:i})))}else u[d]=f;else"class-instance"===s?u[d]=f:"object"===s?null!=v?t(v,f,Object.assign(Object.assign({},n),{path:m,matcherPath:g,idx:void 0})):u[d]=null!=b?t(new b,f,Object.assign(Object.assign({},n),{path:m,matcherPath:g,idx:void 0})):f:u[d]=f}catch(t){const e=t;G.warn(`unable to set [${m}] in [${null==y?void 0:y.name}]; nested error is: ${e.message}`);continue}}return e},jsonWalk:Zn,normalizeAngle360:q,normalizeAngle360Inclusive:J,normalizeAngle180:Q,toRadians:tt,toDegrees:function(t){return t/Math.PI*180},sanitizeHtml:lr,Logger:G});const{extent:Hl,isNumber:Vl,isString:$l,isStringObject:Ul,isDate:Zl,createId:ql,Padding:Jl}=Yl,{LinearScale:Ql,BandScale:th,TimeScale:eh}=Xl;var ih;!function(t){t[t.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",t[t.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",t[t.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",t[t.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX"}(ih||(ih={}));class nh{constructor(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1}}class sh{constructor(){this.id=ql(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new Jl(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new Ql,this.axis=new nh,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);const t=new Y;this.rootGroup=t;const e=document.createElement("div");e.setAttribute("class","ag-sparkline-wrapper");const i=new U({document:document});if(this.scene=i,this.canvasElement=i.canvas.element,i.root=t,i.container=e,i.resize(this.width,this.height),this.seriesRect.width=this.width,this.seriesRect.height=this.height,-1===sh.tooltipDocuments.indexOf(document)){const t=document.createElement("style");t.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(t,document.head.querySelector("style")),sh.tooltipDocuments.push(document)}this.setupDomEventListeners(this.scene.canvas.element)}set context(t){this._context!==t&&(this._context=t)}get context(){return this._context}set container(t){if(this._container!==t){const{parentNode:e}=this.canvasElement;null!=e&&e.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}}get container(){return this._container}set data(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))}get data(){return this._data}set width(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())}get width(){return this._width}set height(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())}get height(){return this._height}update(){}updateYScale(){this.updateYScaleRange(),this.updateYScaleDomain()}updateYScaleDomain(){}updateYScaleRange(){const{yScale:t,seriesRect:e}=this;t.range=[e.height,0]}updateXScale(){const{type:t}=this.axis;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()}updateXScaleRange(){this.xScale.range=[0,this.seriesRect.width]}updateXScaleDomain(){const{xData:t,xScale:e}=this;let i;(e instanceof Ql||e instanceof eh)&&(i=Hl(t)),this.xScale.domain=i?i.slice():t}getXScale(t="category"){switch(t){case"number":return new Ql;case"time":return new eh;case"category":default:return new th}}updateAxisLine(){}updateAxes(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()}updateCrosshairs(){this.updateXCrosshairLine(),this.updateYCrosshairLine()}generateNodeData(){return[]}getNodeData(){return[]}updateNodes(){}updateXCrosshairLine(){}updateYCrosshairLine(){}highlightDatum(t){this.updateNodes()}dehighlightDatum(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()}onMouseMove(t){this.mouseMoveEvent=t,this.updateHitPoint(t)}updateHitPoint(t){var e,i,n;const s=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(!s)return;const o=this.highlightedDatum;this.highlightedDatum=s,(this.highlightedDatum&&!o||this.highlightedDatum&&o&&this.highlightedDatum!==o)&&(this.highlightDatum(s),this.updateCrosshairs(),this.scene.render().catch(t=>console.error("AG Grid - chart rendering failed",t)));(null===(n=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.enabled)||void 0===n||n)&&this.handleTooltip(t,s)}onMouseOut(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch(t=>console.error("AG Grid - chart rendering failed",t))}processData(){const{data:t,yData:e,xData:i}=this;if(!t||this.invalidData(this.data))return;e.length=0,i.length=0;const n=t.length,s=this.getDataType(t);this.dataType=s;const{type:o}=this.axis,r="number"!==o&&"time"!==o?"category":o,a="number"===r||"time"===r,l=(t,e)=>{null==this.smallestInterval&&(this.smallestInterval={x:1/0,y:1/0});const{x:i}=this.smallestInterval,n=Math.abs(t-e);n>0&&n<i&&(this.smallestInterval.x=n)};let h;if("number"===s)for(let s=0;s<n;s++){const n=s,o=t[s],c=this.getDatum(n,r),d=this.getDatum(o,"number");a&&l(c,h),i.push(c),e.push(d),h=c}else if("array"===s)for(let s=0;s<n;s++){const n=t[s];if(Array.isArray(n)){const t=n[0],s=n[1],o=this.getDatum(t,r),c=this.getDatum(s,"number");if(null==o)continue;a&&l(o,h),i.push(o),e.push(c),h=o}}else if("object"===s){const{yKey:s,xKey:o}=this;for(let c=0;c<n;c++){const n=t[c];if("object"==typeof n&&!Array.isArray(n)){const t=n[o],c=n[s],d=this.getDatum(t,r),u=this.getDatum(c,"number");if(null==d)continue;a&&l(d,h),i.push(d),e.push(u),h=d}}}this.updateAxes(),this.immediateLayout()}getDataType(t){for(const e of t)if(null!=e){if(Vl(e))return"number";if(Array.isArray(e))return"array";if("object"==typeof e)return"object"}}getDatum(t,e){if("number"===e&&Vl(t)||"time"===e&&(Vl(t)||Zl(t)))return t;if("category"===e){if($l(t)||Zl(t)||Vl(t))return{toString:()=>String(t)};if(Ul(t))return t}}get layoutScheduled(){return!!this.layoutId}scheduleLayout(){this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame(()=>{this.immediateLayout(),this.layoutId=0})}immediateLayout(){this.setSparklineDimensions(),this.invalidData(this.data)||(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch(t=>console.error("AG Grid - chart rendering failed",t)))}setSparklineDimensions(){const{width:t,height:e,padding:i,seriesRect:n,rootGroup:s}=this,o=t-i.left-i.right,r=e-i.top-i.bottom;n.width=o,n.height=r,n.x=i.left,n.y=i.top,s.translationX=n.x,s.translationY=n.y}pickClosestSeriesNodeDatum(t,e){let i,n=1/0;const s=this.rootGroup.transformPoint(t,e),o=this.getNodeData();for(let t=0;t<o.length;t++){const e=o[t];if(!e.point)return;const r=this.getDistance(s,e.point);r<=n&&(n=r,i=e)}return i}getDistance(t,e){return Math.abs(t.x-e.x)}handleTooltip(t,e){var i,n;const{seriesDatum:s}=e,{canvasElement:o}=this,{clientX:r,clientY:a}=t,l=null===(i=this.processedOptions)||void 0===i?void 0:i.tooltip,h={pageX:r,pageY:a,position:{xOffset:null==l?void 0:l.xOffset,yOffset:null==l?void 0:l.yOffset},container:null==l?void 0:l.container};null==h.container&&(h.container=o);const c=s.y,d=s.x;let u=null===(n=null==l?void 0:l.enabled)||void 0===n||n;const p=null==l?void 0:l.renderer;if(p){const t=p({context:this.context,datum:s,yValue:c,xValue:d});u="string"!=typeof t&&void 0!==t.enabled?t.enabled:u}const g=u&&void 0!==s.y&&this.getTooltipHtml(e);g&&this.tooltip.show(h,g)}formatNumericDatum(t){return String(Math.round(10*t)/10)}formatDatum(t){const e=this.axis.type||"category";return"number"===e&&"number"==typeof t?this.formatNumericDatum(t):"time"===e&&(t instanceof Date||Vl(t))?this.defaultDateFormatter.format(t):String(t)}setupDomEventListeners(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)}cleanupDomEventListeners(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)}invalidData(t){return!t||!Array.isArray(t)||0===t.length}destroy(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)}}function oh(t,e){var i,n,s;if("string"==typeof t)return t;e=null!=e?e:{};const{content:o=(null!==(i=e.content)&&void 0!==i?i:""),title:r=(null!==(n=e.title)&&void 0!==n?n:void 0),color:a=e.color,backgroundColor:l=e.backgroundColor,opacity:h=(null!==(s=e.opacity)&&void 0!==s?s:1)}=t;let c,d;a?(c=r?`<span class="${rh.class}-title"; style="color: ${a}">${r}</span>`:"",d=`<span class="${rh.class}-content" style="color: ${a}">${o}</span>`):(c=r?`<span class="${rh.class}-title">${r}</span>`:"",d=`<span class="${rh.class}-content">${o}</span>`);let u="opacity: "+h;return l&&(u+="; background-color: "+l.toLowerCase()),`<div class="${rh.class}" style="${u}">\n                ${c}\n                ${d}\n            </div>`}sh.tooltipDocuments=[];class rh{constructor(){this.element=document.createElement("div");document.body.appendChild(this.element)}isVisible(){const{element:t}=this;if(t.classList)return!t.classList.contains(rh.class+"-wrapper-hidden");const e=t.getAttribute("class");return!!e&&e.split(" ").indexOf(rh.class+"-wrapper-hidden")<0}updateClass(t){const e=[rh.class+"-wrapper"];!0!==t&&e.push(rh.class+"-wrapper-hidden"),this.element.setAttribute("class",e.join(" "))}show(t,e){var i,n,s,o;this.toggle(!1);const{element:r}=this;if(void 0!==e)r.innerHTML=e;else if(!r.innerHTML)return;const a=null!==(n=null===(i=t.position)||void 0===i?void 0:i.xOffset)&&void 0!==n?n:10,l=null!==(o=null===(s=t.position)||void 0===s?void 0:s.yOffset)&&void 0!==o?o:0;let h=t.pageX+a,c=t.pageY+l;const d=r.getBoundingClientRect();let u=window.innerWidth-d.width;if(t.container){const e=t.container.getBoundingClientRect();u=e.left+(e.width-d.width)}h>u&&(h=t.pageX-r.clientWidth-a),"undefined"!=typeof scrollX&&(h+=scrollX),"undefined"!=typeof scrollY&&(c+=scrollY),r.style.left=Math.round(h)+"px",r.style.top=Math.round(c)+"px",this.toggle(!0)}toggle(t){this.updateClass(t)}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element)}}function ah(t){switch(t){case"circle":return yi;case"square":return Qn;case"diamond":return es;default:return yi}}function lh(t,e="solid"){const i={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},n={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===t||"square"===t?null==n[e]?(console.warn(`'${e}' is not a valid 'lineDash' option.`),n.solid):n[e]:null==i[e]?(console.warn(`'${e}' is not a valid 'lineDash' option.`),i.solid):i[e]}rh.class="ag-sparkline-tooltip";const{extent:hh}=Yl,{BandScale:ch}=Xl;class dh{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}}class uh{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}}class ph{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}}class gh extends sh{constructor(){super(),this.fill="rgba(124, 181, 236, 0.25)",this.strokePath=new gi,this.fillPath=new gi,this.xCrosshairLine=new Mi,this.yCrosshairLine=new Mi,this.areaSparklineGroup=new Y,this.xAxisLine=new Mi,this.markers=new Y,this.markerSelection=Si.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new dh,this.line=new uh,this.crosshairs=new ph,this.rootGroup.append(this.areaSparklineGroup),this.xAxisLine.zIndex=ih.AXIS_LINE_ZINDEX,this.fillPath.zIndex=ih.SERIES_FILL_ZINDEX,this.strokePath.zIndex=ih.SERIES_STROKE_ZINDEX,this.xCrosshairLine.zIndex=ih.CROSSHAIR_ZINDEX,this.yCrosshairLine.zIndex=ih.CROSSHAIR_ZINDEX,this.markers.zIndex=ih.SERIES_MARKERS_ZINDEX,this.areaSparklineGroup.append([this.fillPath,this.xAxisLine,this.strokePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}markerFactory(){const{shape:t}=this.marker;return new(ah(t))}getNodeData(){return this.markerSelectionData}update(){const t=this.generateNodeData();if(!t)return;const{nodeData:e,fillData:i,strokeData:n}=t;this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateStroke(n),this.updateFill(i)}updateYScaleDomain(){const{yData:t,yScale:e}=this,i=hh(t);let n=0,s=1;void 0!==i&&(n=this.min=i[0],s=this.max=i[1]),n=n<0?n:0,s=s<0?0:s,e.domain=[n,s]}generateNodeData(){const{data:t,yData:e,xData:i,xScale:n,yScale:s}=this;if(!t)return;const o=!(n instanceof ch),r=o?0:n.bandwidth/2,a=e.length,l=[],h=[],c=[];let d,u,p,g;const f=s.convert(0);for(let t=0;t<a;t++){const m=e[t],y=i[t],v=n.convert(o?n.toDomain(y):y)+r,b=void 0===m?NaN:s.convert(m);t+1<a&&(g=n.convert(o?n.toDomain(i[t+1]):i[t+1])+r),c.push({seriesDatum:{x:y,y:m},point:{x:v,y:b}}),void 0===m&&void 0!==p?(h.push({seriesDatum:void 0,point:{x:p,y:f}}),void 0!==g&&h.push({seriesDatum:void 0,point:{x:g,y:f}})):void 0!==m&&(h.push({seriesDatum:{x:y,y:m},point:{x:v,y:b}}),l.push({seriesDatum:{x:y,y:m},point:{x:v,y:b}}),d=void 0!==d?d:v,u=v),p=v}return h.push({seriesDatum:void 0,point:{x:u,y:f}},{seriesDatum:void 0,point:{x:d,y:f}}),{nodeData:l,fillData:h,strokeData:c}}updateAxisLine(){const{xScale:t,yScale:e,axis:i,xAxisLine:n}=this;n.x1=t.range[0],n.x2=t.range[1],n.y1=n.y2=0,n.stroke=i.stroke,n.strokeWidth=i.strokeWidth;const s=e.convert(0);n.translationY=s}updateSelection(t){this.markerSelection.update(t)}updateNodes(){const{highlightedDatum:t,highlightStyle:e,marker:i}=this,{size:n,fill:s,stroke:o,strokeWidth:r}=e,a=i.formatter;this.markerSelection.each((e,l,h)=>{const{point:c,seriesDatum:d}=l;if(!c)return;const u=l===t,p=u&&void 0!==s?s:i.fill,g=u&&void 0!==o?o:i.stroke,f=u&&void 0!==r?r:i.strokeWidth,m=u&&void 0!==n?n:i.size;let y;if(a){const t=0===h,e=h===this.markerSelectionData.length-1,i=d.y===this.min,n=d.y===this.max;y=a({datum:l,xValue:d.x,yValue:d.y,min:i,max:n,first:t,last:e,fill:p,stroke:g,strokeWidth:f,size:m,highlighted:u})}e.size=y&&null!=y.size?y.size:m,e.fill=y&&null!=y.fill?y.fill:p,e.stroke=y&&null!=y.stroke?y.stroke:g,e.strokeWidth=y&&null!=y.strokeWidth?y.strokeWidth:f,e.translationX=c.x,e.translationY=c.y,e.visible=y&&null!=y.enabled?y.enabled:i.enabled&&e.size>0})}updateStroke(t){const{strokePath:e,yData:i,line:n}=this;if(i.length<2)return;const s=e.path,o=t.length;let r=!0;s.clear();for(let e=0;e<o;e++){const{point:i,seriesDatum:n}=t[e],o=i.x,a=i.y;null==n.y?r=!0:r?(s.moveTo(o,a),r=!1):s.lineTo(o,a)}e.lineJoin=e.lineCap="round",e.fill=void 0,e.stroke=n.stroke,e.strokeWidth=n.strokeWidth}updateFill(t){const{fillPath:e,yData:i,fill:n}=this,s=e.path,o=t.length;if(s.clear(),!(i.length<2)){for(let e=0;e<o;e++){const{point:i}=t[e],n=i.x,o=i.y;e>0?s.lineTo(n,o):s.moveTo(n,o)}s.closePath(),e.lineJoin="round",e.stroke=void 0,e.fill=n}}updateXCrosshairLine(){var t;const{yScale:e,xCrosshairLine:i,highlightedDatum:n,crosshairs:{xLine:s}}=this;if(!s.enabled||null==n)return void(i.strokeWidth=0);i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=s.stroke,i.strokeWidth=null!==(t=s.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;const{lineDash:o}=s;i.lineDash=Array.isArray(o)?o:lh(i.lineCap,s.lineDash),i.translationX=n.point.x}updateYCrosshairLine(){var t;const{xScale:e,yCrosshairLine:i,highlightedDatum:n,crosshairs:{yLine:s}}=this;if(!s.enabled||null==n)return void(i.strokeWidth=0);i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=s.stroke,i.strokeWidth=null!==(t=s.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;const{lineDash:o}=s;i.lineDash=Array.isArray(o)?o:lh(i.lineCap,s.lineDash),i.translationY=n.point.y}getTooltipHtml(t){var e,i;const{dataType:n}=this,{seriesDatum:s}=t,o=s.y,r=s.x,a={content:this.formatNumericDatum(o),title:"array"===n||"object"===n?this.formatDatum(r):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?oh(l({context:this.context,datum:s,yValue:o,xValue:r}),a):oh(a)}}gh.className="AreaSparkline";const{extent:fh}=Yl,{BandScale:mh}=Xl;class yh{constructor(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0}}class vh{constructor(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1}}class bh{constructor(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}}}class xh extends sh{constructor(){super(),this.linePath=new gi,this.xCrosshairLine=new Mi,this.yCrosshairLine=new Mi,this.lineSparklineGroup=new Y,this.markers=new Y,this.markerSelection=Si.select(this.markers,()=>this.markerFactory()),this.markerSelectionData=[],this.marker=new yh,this.line=new vh,this.crosshairs=new bh,this.rootGroup.append(this.lineSparklineGroup),this.linePath.zIndex=ih.SERIES_STROKE_ZINDEX,this.xCrosshairLine.zIndex=ih.CROSSHAIR_ZINDEX,this.yCrosshairLine.zIndex=ih.CROSSHAIR_ZINDEX,this.markers.zIndex=ih.SERIES_MARKERS_ZINDEX,this.lineSparklineGroup.append([this.linePath,this.xCrosshairLine,this.yCrosshairLine,this.markers])}getNodeData(){return this.markerSelectionData}markerFactory(){const{shape:t}=this.marker;return new(ah(t))}onMarkerShapeChange(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()}update(){const t=this.generateNodeData();t&&(this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateLine())}updateYScaleDomain(){const{yData:t,yScale:e}=this,i=fh(t);let n=0,s=1;if(void 0!==i&&(n=this.min=i[0],s=this.max=i[1]),n===s){const t=Math.abs(.01*n);n-=t,s+=t}e.domain=[n,s]}generateNodeData(){const{data:t,yData:e,xData:i,xScale:n,yScale:s}=this;if(!t)return;const o=!(n instanceof mh),r=o?0:n.bandwidth/2,a=[];for(let t=0;t<e.length;t++){const l=e[t],h=i[t];if(null==l)continue;const c=n.convert(o?n.toDomain(h):h)+r,d=void 0===l?NaN:s.convert(l);a.push({seriesDatum:{x:h,y:l},point:{x:c,y:d}})}return a}updateSelection(t){this.markerSelection.update(t)}updateNodes(){const{highlightedDatum:t,highlightStyle:e,marker:i}=this,{size:n,fill:s,stroke:o,strokeWidth:r}=e,a=i.formatter;this.markerSelection.each((e,l,h)=>{const c=l===t,d=c&&void 0!==s?s:i.fill,u=c&&void 0!==o?o:i.stroke,p=c&&void 0!==r?r:i.strokeWidth,g=c&&void 0!==n?n:i.size;let f;const{seriesDatum:m,point:y}=l;if(a){const t=0===h,e=h===this.markerSelectionData.length-1,i=m.y===this.min,n=m.y===this.max;f=a({datum:l,xValue:m.x,yValue:m.y,min:i,max:n,first:t,last:e,fill:d,stroke:u,strokeWidth:p,size:g,highlighted:c})}e.size=f&&null!=f.size?f.size:g,e.fill=f&&null!=f.fill?f.fill:d,e.stroke=f&&null!=f.stroke?f.stroke:u,e.strokeWidth=f&&null!=f.strokeWidth?f.strokeWidth:p,e.translationX=y.x,e.translationY=y.y,e.visible=f&&null!=f.enabled?f.enabled:i.enabled&&e.size>0})}updateLine(){const{linePath:t,yData:e,xData:i,xScale:n,yScale:s,line:o}=this;if(e.length<2)return;const r=!(n instanceof mh),a=t.path,l=e.length,h=r?0:n.bandwidth/2;let c=!0;a.clear();for(let t=0;t<l;t++){const o=i[t],l=e[t],d=n.convert(r?n.toDomain(o):o)+h,u=void 0===l?NaN:s.convert(l);null==l?c=!0:c?(a.moveTo(d,u),c=!1):a.lineTo(d,u)}t.fill=void 0,t.stroke=o.stroke,t.strokeWidth=o.strokeWidth}updateXCrosshairLine(){var t;const{yScale:e,xCrosshairLine:i,highlightedDatum:n,crosshairs:{xLine:s}}=this;if(!s.enabled||null==n)return void(i.strokeWidth=0);i.y1=e.range[0],i.y2=e.range[1],i.x1=i.x2=0,i.stroke=s.stroke,i.strokeWidth=null!==(t=s.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;const{lineDash:o}=s;i.lineDash=Array.isArray(o)?o:lh(i.lineCap,s.lineDash),i.translationX=n.point.x}updateYCrosshairLine(){var t;const{xScale:e,yCrosshairLine:i,highlightedDatum:n,crosshairs:{yLine:s}}=this;if(!s.enabled||null==n)return void(i.strokeWidth=0);i.x1=e.range[0],i.x2=e.range[1],i.y1=i.y2=0,i.stroke=s.stroke,i.strokeWidth=null!==(t=s.strokeWidth)&&void 0!==t?t:1,i.lineCap="round"===s.lineCap||"square"===s.lineCap?s.lineCap:void 0;const{lineDash:o}=s;i.lineDash=Array.isArray(o)?o:lh(i.lineCap,s.lineDash),i.translationY=n.point.y}getTooltipHtml(t){var e,i;const{dataType:n}=this,{seriesDatum:s}=t,o=s.y,r=s.x,a={content:this.formatNumericDatum(o),title:"array"===n||"object"===n?this.formatDatum(r):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?oh(l({context:this.context,datum:s,yValue:o,xValue:r}),a):oh(a)}}xh.className="LineSparkline";const{extent:kh}=Yl;var Sh,wh;!function(t){t[t.Rect=0]="Rect",t[t.Label=1]="Label"}(Sh||(Sh={})),function(t){t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd"}(wh||(wh={}));class Dh extends class{constructor(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"}}{constructor(){super(...arguments),this.formatter=void 0,this.placement=wh.InsideEnd}}class Oh extends sh{constructor(){super(),this.fill="rgb(124, 181, 236)",this.stroke="silver",this.strokeWidth=0,this.paddingInner=.1,this.paddingOuter=.2,this.valueAxisDomain=void 0,this.formatter=void 0,this.axisLine=new Mi,this.bandWidth=0,this.sparklineGroup=new Y,this.rectGroup=new Y,this.labelGroup=new Y,this.rectSelection=Si.select(this.rectGroup,Mr),this.labelSelection=Si.select(this.labelGroup,at),this.nodeSelectionData=[],this.label=new Dh,this.rootGroup.append(this.sparklineGroup),this.rectGroup.zIndex=ih.SERIES_FILL_ZINDEX,this.axisLine.zIndex=ih.AXIS_LINE_ZINDEX,this.labelGroup.zIndex=ih.SERIES_LABEL_ZINDEX,this.sparklineGroup.append([this.rectGroup,this.axisLine,this.labelGroup]),this.axisLine.lineCap="round",this.label.enabled=!1}getNodeData(){return this.nodeSelectionData}update(){this.updateSelections(),this.updateNodes()}updateSelections(){const t=this.generateNodeData();t&&(this.nodeSelectionData=t,this.updateRectSelection(t),this.updateLabelSelection(t))}updateNodes(){this.updateRectNodes(),this.updateLabelNodes()}calculateStep(t){var e;const{xScale:i,paddingInner:n,paddingOuter:s,smallestInterval:o}=this;let r=(i.domain[1]-i.domain[0])/(null!==(e=null==o?void 0:o.x)&&void 0!==e?e:1)+1;const a=Math.min(r,50),l=a-1;return t/Math.max(1,2*s+l*n+a)}updateYScaleDomain(){const{yScale:t,yData:e,valueAxisDomain:i}=this,n=kh(e);let s=0,o=1;void 0!==n&&(s=this.min=n[0],o=this.max=n[1]),s=s<0?s:0,o=o<0?0:o,i&&(i[1]<o&&(i[1]=o),i[0]>s&&(i[0]=s)),t.domain=i||[s,o]}updateRectSelection(t){this.rectSelection.update(t)}updateRectNodes(){const{highlightedDatum:t,formatter:e,fill:i,stroke:n,strokeWidth:s}=this,{fill:o,stroke:r,strokeWidth:a}=this.highlightStyle;this.rectSelection.each((l,h,c)=>{const d=h===t,u=d&&void 0!==o?o:i,p=d&&void 0!==r?r:n,g=d&&void 0!==a?a:s;let f;const{x:m,y:y,width:v,height:b,seriesDatum:x}=h;if(e){const t=0===c,i=c===this.nodeSelectionData.length-1,n=x.y===this.min,s=x.y===this.max;f=e({datum:h,xValue:x.x,yValue:x.y,width:v,height:b,min:n,max:s,first:t,last:i,fill:u,stroke:p,strokeWidth:g,highlighted:d})}l.fill=f&&f.fill||u,l.stroke=f&&f.stroke||p,l.strokeWidth=f&&f.strokeWidth||g,l.x=l.y=0,l.width=v,l.height=b,l.visible=l.height>0,l.translationX=m,l.translationY=y})}updateLabelSelection(t){this.labelSelection.update(t,t=>{t.tag=Sh.Label,t.pointerEvents=_.None})}updateLabelNodes(){const{label:{enabled:t,fontStyle:e,fontWeight:i,fontSize:n,fontFamily:s,color:o}}=this;this.labelSelection.each((r,a)=>{const l=a.label;l&&t?(r.fontStyle=e,r.fontWeight=i,r.fontSize=n,r.fontFamily=s,r.textAlign=l.textAlign,r.textBaseline=l.textBaseline,r.text=l.text,r.x=l.x,r.y=l.y,r.fill=o,r.visible=!0):r.visible=!1})}getTooltipHtml(t){var e,i;const{dataType:n}=this,{seriesDatum:s}=t,o=s.y,r=s.x,a={content:this.formatNumericDatum(o),title:"array"===n||"object"===n?this.formatDatum(r):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?oh(l({context:this.context,datum:s,yValue:o,xValue:r}),a):oh(a)}formatLabelValue(t){return t%1!=0?t.toFixed(1):t.toFixed(0)}}const{isNumber:Mh}=Yl,{BandScale:Ch}=Xl;class Nh extends Oh{updateYScaleRange(){const{seriesRect:t,yScale:e}=this;e.range=[0,t.width]}updateXScaleRange(){const{xScale:t,seriesRect:e,paddingOuter:i,paddingInner:n}=this;if(t instanceof Ch)t.range=[0,e.height],t.paddingInner=n,t.paddingOuter=i;else{const s=this.calculateStep(e.height),o=s*i;this.bandWidth=s*(1-n),t.range=[o,e.height-o-this.bandWidth]}}updateAxisLine(){const{yScale:t,axis:e,axisLine:i,seriesRect:n}=this,{strokeWidth:s}=e;i.x1=0,i.x2=0,i.y1=0,i.y2=n.height,i.stroke=e.stroke,i.strokeWidth=s+(s%2==1?1:0);const o=t.convert(0);i.translationX=o}generateNodeData(){const{data:t,yData:e,xData:i,xScale:n,yScale:s,fill:o,stroke:r,strokeWidth:a,label:l}=this;if(!t)return;const{fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,color:p,formatter:g,placement:f}=l,m=[],y=s.convert(0),v=!(n instanceof Ch);for(let t=0,l=e.length;t<l;t++){let l=e[t];const b=i[t],x=void 0===l;x&&(l=0);const k=n.convert(v?n.toDomain(b):b),S=Math.min(void 0===l?NaN:s.convert(l),y),w=Math.max(void 0===l?NaN:s.convert(l),y),D=v?this.bandWidth:n.bandwidth,O=w-S,C={x:y,y:k};let N;N=g?g({value:l}):void 0!==l&&Mh(l)?this.formatLabelValue(l):"";const L=k+D/2;let E;const R="middle";let I;const T=void 0!==l&&l>=0,A=4;if(f===wh.Center)E=S+O/2,I="center";else if(f===wh.OutsideEnd)E=S+(T?O+A:-A),I=T?"start":"end";else if(f===wh.InsideEnd){E=S+(T?O-A:A),I=T?"end":"start";const t=M.getTextSize(N,u).width||20,e=y+t,i=y-t;(T&&E<e||!T&&E>i)&&(E=y+A*(T?1:-1),I=T?"start":"end")}else E=y+A*(T?1:-1),I=T?"start":"end";m.push({x:S,y:k,width:O,height:D,fill:o,stroke:r,strokeWidth:a,seriesDatum:{x:b,y:x?void 0:l},point:C,label:{x:E,y:L,text:N,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,textAlign:I,textBaseline:R,fill:p}})}return m}getDistance(t,e){return Math.abs(t.y-e.y)}}Nh.className="BarSparkline";const{isNumber:Lh}=Yl,{BandScale:Eh}=Xl;class Rh extends Oh{updateYScaleRange(){const{seriesRect:t,yScale:e}=this;e.range=[t.height,0]}updateXScaleRange(){const{xScale:t,seriesRect:e,paddingOuter:i,paddingInner:n}=this;if(t instanceof Eh)t.range=[0,e.width],t.paddingInner=n,t.paddingOuter=i;else{const s=this.calculateStep(e.width),o=s*i;this.bandWidth=s*(1-n),t.range=[o,e.width-o-this.bandWidth]}}updateAxisLine(){const{yScale:t,axis:e,axisLine:i,seriesRect:n}=this,{strokeWidth:s}=e;i.x1=0,i.x2=n.width,i.y1=0,i.y2=0,i.stroke=e.stroke,i.strokeWidth=s+(s%2==1?1:0);const o=t.convert(0);i.translationY=o}generateNodeData(){const{data:t,yData:e,xData:i,xScale:n,yScale:s,fill:o,stroke:r,strokeWidth:a,label:l}=this;if(!t)return;const{fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,color:p,formatter:g,placement:f}=l,m=[],y=s.convert(0),v=!(n instanceof Eh);for(let t=0,l=e.length;t<l;t++){let l=e[t];const b=i[t],x=void 0===l;x&&(l=0);const k=Math.min(void 0===l?NaN:s.convert(l),y),S=n.convert(v?n.toDomain(b):b),w=Math.max(void 0===l?NaN:s.convert(l),y),D=v?this.bandWidth:n.bandwidth,O=w-k,C={x:S+D/2,y:y};let N;N=g?g({value:l}):void 0!==l&&Lh(l)?this.formatLabelValue(l):"";const L=S+D/2;let E;const R="center";let I;const T=void 0!==l&&l>=0,A=2;if(f===wh.Center)E=k+O/2,I="middle";else if(f===wh.OutsideEnd)E=k+(T?-A:O+A),I=T?"bottom":"top";else if(f===wh.InsideEnd){E=k+(T?A:O-A),I=T?"top":"bottom";const t=M.getTextSize(N,u).height||10,e=y-t,i=y+t;(T&&E>e||!T&&E<i)&&(E=y+A*(T?-1:1),I=T?"bottom":"top")}else E=y+A*(T?-1:1),I=T?"bottom":"top";m.push({x:S,y:k,width:D,height:O,fill:o,stroke:r,strokeWidth:a,seriesDatum:{x:b,y:x?void 0:l},point:C,label:{x:L,y:E,text:N,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,textAlign:R,textBaseline:I,fill:p}})}return m}}Rh.className="ColumnSparkline";const{isNumber:Ih}=Yl;function Th(t,e){Wh(t,"valueAxisDomain",e.valueAxisDomain,e),Wh(t,"fill",e.fill,e),Wh(t,"stroke",e.stroke,e),Wh(t,"strokeWidth",e.strokeWidth,e),Wh(t,"paddingInner",e.paddingInner,e),Wh(t,"paddingOuter",e.paddingOuter,e),Wh(t,"formatter",e.formatter,e),e.label&&function(t,e){Wh(t,"enabled",e.enabled,e),Wh(t,"fontStyle",e.fontStyle,e),Wh(t,"fontWeight",e.fontWeight,e),Wh(t,"fontSize",e.fontSize,e),Wh(t,"fontFamily",e.fontFamily,e),Wh(t,"textAlign",e.textAlign,e),Wh(t,"textBaseline",e.textBaseline,e),Wh(t,"color",e.color,e),Wh(t,"formatter",e.formatter,e),Wh(t,"placement",e.placement,e)}(t.label,e.label)}function Ah(t,e){Wh(t,"enabled",e.enabled,e),Wh(t,"size",e.size,e),Wh(t,"shape",e.shape,e),Wh(t,"fill",e.fill,e),Wh(t,"stroke",e.stroke,e),Wh(t,"strokeWidth",e.strokeWidth,e),Wh(t,"formatter",e.formatter,e)}function _h(t,e){Wh(t,"stroke",e.stroke,e),Wh(t,"strokeWidth",e.strokeWidth,e)}function Ph(t,e){t.xLine&&e.xLine&&Fh(t.xLine,e.xLine),t.yLine&&e.yLine&&Fh(t.yLine,e.yLine)}function Fh(t,e){Wh(t,"enabled",e.enabled,e),Wh(t,"stroke",e.stroke,e),Wh(t,"strokeWidth",e.strokeWidth,e),Wh(t,"lineDash",e.lineDash,e),Wh(t,"lineCap",e.lineCap,e)}const Bh={};const zh=(t,e,i)=>{if(Ih(e))return!0;const n=`AG Charts: ${t} must be a number, the value you provided is not a valid number. Using the default of ${i}px.`;var s,o;return s=()=>console.warn(n),Bh[o=t+" not a number"]||(s(),Bh[o]=!0),!1},jh={xOffset:zh,yOffset:zh};function Wh(t,e,i,n){if(e in n)if(e in t){const n=jh[e];(!n||n(e,i,t[e]))&&t[e]!==i&&(t[e]=i)}else console.warn(`Property ${e} does not exist on the target object.`)}var Kh=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};class Gh extends i{constructor(){super(Gh.TEMPLATE)}init(t){let e=!0;const i=this.resizeObserverService.observeResize(this.getGui(),()=>{const{clientWidth:i,clientHeight:n}=this.getGui();if(0!==i&&0!==n)if(e){const s=Object.assign({data:t.value,width:i,height:n,context:{data:t.data}},t.sparklineOptions);this.sparkline=class{static create(t,e){const i=function(t="line"){switch(t){case"column":return new Rh;case"bar":return new Nh;case"area":return new gh;case"line":default:return new xh}}((t=Un([t])).type);return e&&(i.tooltip=e),function(t,e){Wh(t,"context",e.context,e),Wh(t,"width",e.width,e),Wh(t,"height",e.height,e),Wh(t,"container",e.container,e),Wh(t,"xKey",e.xKey,e),Wh(t,"yKey",e.yKey,e),e.padding&&function(t,e){Wh(t,"top",e.top,e),Wh(t,"right",e.right,e),Wh(t,"bottom",e.bottom,e),Wh(t,"left",e.left,e)}(t.padding,e.padding);e.axis&&function(t,e){Wh(t,"type",e.type,e),Wh(t,"stroke",e.stroke,e),Wh(t,"strokeWidth",e.strokeWidth,e)}(t.axis,e.axis);e.highlightStyle&&function(t,e){Wh(t,"fill",e.fill,e),Wh(t,"size",e.size,e),Wh(t,"stroke",e.stroke,e),Wh(t,"strokeWidth",e.strokeWidth,e)}(t.highlightStyle,e.highlightStyle)}(i,t),function(t,e){switch(e.type){case"bar":case"column":Th(t,e);break;case"area":!function(t,e){Wh(t,"fill",e.fill,e),e.marker&&Ah(t.marker,e.marker);e.line&&_h(t.line,e.line);e.crosshairs&&Ph(t.crosshairs,e.crosshairs)}(t,e);break;case"line":default:!function(t,e){e.marker&&Ah(t.marker,e.marker);e.line&&_h(t.line,e.line);e.crosshairs&&Ph(t.crosshairs,e.crosshairs)}(t,e)}}(i,t),t.data&&(i.data=t.data),i.processedOptions=t,i}}.create(s,this.sparklineTooltipSingleton.getSparklineTooltip()),this.eSparkline.appendChild(this.sparkline.canvasElement),e=!1}else this.sparkline.width=i,this.sparkline.height=n});this.addDestroyFunc(()=>i())}refresh(t){return!!this.sparkline&&(this.sparkline.data=t.value,!0)}destroy(){this.sparkline&&this.sparkline.destroy(),super.destroy()}}Gh.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',Kh([t("eSparkline")],Gh.prototype,"eSparkline",void 0),Kh([e("resizeObserverService")],Gh.prototype,"resizeObserverService",void 0),Kh([e("sparklineTooltipSingleton")],Gh.prototype,"sparklineTooltipSingleton",void 0);var Xh=function(t,e,i,n){var s,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(r=(o<3?s(r):o>3?s(e,i,r):s(e,i))||r);return o>3&&r&&Object.defineProperty(e,i,r),r};let Yh=class extends r{postConstruct(){this.tooltip=new rh}getSparklineTooltip(){return this.tooltip}destroyTooltip(){this.tooltip&&this.tooltip.destroy()}};Xh([n],Yh.prototype,"postConstruct",null),Xh([s],Yh.prototype,"destroyTooltip",null),Yh=Xh([o("sparklineTooltipSingleton")],Yh);const Hh={version:"30.0.0",moduleName:a.SparklinesModule,beans:[Yh],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:Gh}],dependantModules:[l]};export{Hh as SparklinesModule};